--- nautilus-2.30.0.orig/debian/nautilus-data.gconf-defaults
+++ nautilus-2.30.0/debian/nautilus-data.gconf-defaults
@@ -0,0 +1,5 @@
+/apps/nautilus/preferences/exit_with_last_window	false
+/apps/nautilus/desktop/home_icon_visible	false
+/apps/nautilus/desktop/computer_icon_visible	false
+/apps/nautilus/desktop/trash_icon_visible	false
+
--- nautilus-2.30.0.orig/debian/mount-archive.desktop.in
+++ nautilus-2.30.0/debian/mount-archive.desktop.in
@@ -0,0 +1,10 @@
+[Desktop Entry]
+Encoding=UTF-8
+_Name=Archive Mounter
+Exec=/usr/lib/gvfs/gvfsd-archive file=%u
+MimeType=application/x-cd-image;application/x-bzip-compressed-tar;application/x-compressed-tar;application/x-tar;application/x-cpio;application/zip;
+Terminal=false
+StartupNotify=false
+Type=Application
+NoDisplay=true
+
--- nautilus-2.30.0.orig/debian/copyright
+++ nautilus-2.30.0/debian/copyright
@@ -0,0 +1,38 @@
+This package was debianized by Takuo KITAME <kitame@excalibur.northeye.org> on
+Fri, 19 May 2000 14:10:24 +0900.
+
+It was downloaded from ftp://ftp.gnome.org/pub/GNOME/sources/nautilus
+
+Copyright Holders and Upstream Authors:
+		  Alex Larsson <alexl@redhat.com>
+		  Dave Camp <dave@ximian.com>
+		  Soren Sandmann <sandmann@daimi.au.dk>
+		  JУЖrg Billeter <j@bitron.ch>
+		  James Willcox <jwillcox@gnome.org>
+		  Jan Arne Petersen <jpetersen@uni-bonn.de>
+		  Mark McLoughlin <mark@skynet.ie>
+		  Darin Adler <darin@bentspoon.com>
+		  Anders Carlsson <andersca@gnu.org>
+		  Michael Meeks <michael@ximian.com>
+		  Jacob Berkman <jacob@ximian.com>
+	and many others, especially the Eazel staff
+
+License:
+
+   This package is free software; you can redistribute it and/or modify
+   it under the terms of the GNU General Public License as published by
+   the Free Software Foundation; either version 2 of the License, or
+   (at your option) any later version.
+
+   This package is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+   GNU General Public License for more details.
+
+   You should have received a copy of the GNU General Public License
+   along with this package; if not, write to the Free Software
+   Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
+
+On Debian systems, the complete text of the GNU General
+Public License can be found in `/usr/share/common-licenses/GPL'.
+
--- nautilus-2.30.0.orig/debian/watch
+++ nautilus-2.30.0/debian/watch
@@ -0,0 +1,4 @@
+version=2
+http://ftp.gnome.org/pub/GNOME/sources/nautilus/([\d\.]+)[024689]/ \
+        nautilus-(.*)\.tar\.gz \
+        debian uupdate
--- nautilus-2.30.0.orig/debian/control
+++ nautilus-2.30.0/debian/control
@@ -0,0 +1,157 @@
+# This file is autogenerated. DO NOT EDIT!
+# 
+# Modifications should be made to debian/control.in instead.
+# This file is regenerated automatically in the clean target.
+
+Source: nautilus
+Section: gnome
+Priority: optional
+Maintainer: Ubuntu Desktop Team <ubuntu-desktop@lists.ubuntu.com>
+XSBC-Original-Maintainer: Josselin Mouette <joss@debian.org>
+Uploaders: Debian GNOME Maintainers <pkg-gnome-maintainers@lists.alioth.debian.org>
+Build-Depends: debhelper (>= 5),
+               cdbs (>= 0.4.41),
+               quilt,
+               gnome-pkg-tools (>= 0.13),
+               dpkg-dev (>= 1.13.19),
+               libglib2.0-dev (>= 2.24),
+               libgnome-desktop-dev (>= 1:2.29.91),
+               libpango1.0-dev (>= 1.1.2),
+               libgtk2.0-dev (>= 2.20),
+               libxml2-dev (>= 2.4.7),
+               libexif-dev (>= 0.5.12),
+               libexempi-dev (>= 1.99.5),
+               libgail-dev (>= 0.16),
+               libunique-dev,
+               libdbus-glib-1-dev,
+               intltool (>= 0.40.1),
+               gtk-doc-tools (>= 1.4),
+               libxt-dev,
+               libx11-dev,
+               libselinux1-dev | not+linux-gnu,
+               libxrender-dev,
+               libxext-dev,
+               libgconf2-dev,
+               x11proto-core-dev,
+               shared-mime-info (>= 0.50),
+               libglib2.0-doc,
+               libgtk2.0-doc,
+               liblaunchpad-integration-dev (>= 0.1.17),
+               libappindicator-dev
+Homepage: http://www.gnome.org/projects/nautilus/
+VCS-Browser: http://svn.debian.org/wsvn/pkg-gnome/desktop/unstable/nautilus/
+Vcs-Bzr: https://code.launchpad.net/~ubuntu-desktop/nautilus/ubuntu
+Standards-Version: 3.8.3
+
+Package: nautilus
+Architecture: any
+Depends: ${shlibs:Depends},
+         ${misc:Depends},
+         nautilus-data (>= ${gnome:Version}),
+         nautilus-data (<< ${gnome:NextVersion}),
+         shared-mime-info (>= 0.50),
+         desktop-file-utils (>= 0.7),
+         gvfs (>= 1.3.2),
+         libglib2.0-data
+Provides: nautilus-extensions-2.0
+Recommends: eject,
+            librsvg2-common,
+            app-install-data,
+            gvfs-backends,
+            consolekit
+Suggests: eog,
+          evince | pdf-viewer,
+          gnome-app-install,
+          totem | mp3-decoder,
+          brasero (>= 2.26) | nautilus-cd-burner,
+          xdg-user-dirs
+Conflicts: libnautilus2-2,
+           libnautilus2-dev
+Breaks: gnome-volume-manager (<< 2.24),
+        rhythmbox (<< 0.12),
+        gnome-session (<< 2.28)
+Replaces: libnautilus2-2
+Description: file manager and graphical shell for GNOME
+ Nautilus is the official file manager for the GNOME desktop. It allows
+ to browse directories, preview files and launch applications associated
+ with them. It is also responsible for handling the icons on the GNOME
+ desktop. It works on local and remote filesystems.
+ .
+ Several icon themes and components for viewing different kinds of files
+ are available in separate packages.
+
+Package: nautilus-dbg
+Section: debug
+Architecture: any
+Priority: extra
+Depends: nautilus (= ${binary:Version}),
+         ${misc:Depends}
+Replaces: libnautilus-extension1-dbg
+Description: file manager and graphical shell for GNOME - debugging version
+ Nautilus is the official file manager for the GNOME desktop. It allows
+ to browse directories, preview files and launch applications associated
+ with them. It is also responsible for handling the icons on the GNOME
+ desktop. It works on local and remote filesystems.
+ .
+ Several icon themes and components for viewing different kinds of files
+ are available in separate packages.
+ .
+ This development package contains unstripped binaries compiled with
+ debugging symbols needed by gdb.
+ 
+Package: libnautilus-extension1
+Architecture: any
+Section: libs
+Depends: ${misc:Depends},
+         ${shlibs:Depends}
+Conflicts: libnautilus2-2
+Breaks: nautilus (<< 2.22),
+        gnome-mount (<< 0.8),
+        nautilus-cd-burner (<< 2.22),
+        file-roller (<< 2.24),
+        python-nautilus (<< 0.5),
+        nautilus-sendto (<< 0.14.0-2),
+        nautilus-open-terminal (<< 0.9),
+        nautilus-image-converter (<< 0.3),
+        nautilus-filename-repairer (<< 0.0.5-2),
+        eiciel (<< 0.9.6.1-3),
+        diff-ext (<= 0.2.3-3),
+        nautilus-gksu (<< 2.0.2-2ubuntu1),
+        nautilus-actions (<< 1.4.1-1+b1),
+        nautilus-share (<< 0.7.2-4+b1),
+        seahorse-plugins (<< 2.24.1-3+b1)
+Replaces: libnautilus2-2
+Description: libraries for nautilus components - runtime version
+ Nautilus is the official file manager and graphical shell for the
+ GNOME desktop.
+ .
+ This package contains a few runtime libraries needed by nautilus' extensions.
+
+Package: libnautilus-extension-dev
+Architecture: any
+Section: libdevel
+Depends: libnautilus-extension1 (= ${binary:Version}),
+         libglib2.0-dev (>= 2.21.3),
+         libgtk2.0-dev (>= 2.16.0),
+         ${shlibs:Depends},
+         ${misc:Depends}
+Conflicts: libnautilus2-dev
+Replaces: libnautilus2-dev
+Description: libraries for nautilus components - development version
+ Nautilus is the official file manager and graphical shell for the
+ GNOME desktop.
+ .
+ This package provides the necessary development libraries and include
+ files to develop and compile Nautilus extensions.
+
+Package: nautilus-data
+Architecture: all
+Depends: ${misc:Depends}
+Conflicts: nautilus (<< 2.14.1-3)
+Recommends: nautilus
+Description: data files for nautilus
+ Nautilus is the official file manager and graphical shell for the
+ GNOME desktop.
+ .
+ This package contains pictures, localization files and other data
+ needed by nautilus.
--- nautilus-2.30.0.orig/debian/mount-archive.desktop
+++ nautilus-2.30.0/debian/mount-archive.desktop
@@ -0,0 +1,10 @@
+[Desktop Entry]
+Encoding=UTF-8
+Name=Archive Mounter
+Exec=/usr/lib/gvfs/gvfsd-archive file=%u
+MimeType=application/x-cd-image;application/x-bzip-compressed-tar;application/x-compressed-tar;application/x-tar;application/x-cpio;application/zip;
+Terminal=false
+StartupNotify=false
+Type=Application
+NoDisplay=true
+
--- nautilus-2.30.0.orig/debian/rules
+++ nautilus-2.30.0/debian/rules
@@ -0,0 +1,19 @@
+#!/usr/bin/make -f
+
+include /usr/share/cdbs/1/rules/debhelper.mk
+include /usr/share/cdbs/1/rules/patchsys-quilt.mk
+include /usr/share/cdbs/1/rules/utils.mk
+include /usr/share/cdbs/1/class/gnome.mk
+include /usr/share/gnome-pkg-tools/1/rules/uploaders.mk
+include /usr/share/gnome-pkg-tools/1/rules/clean-la.mk
+include /usr/share/gnome-pkg-tools/1/rules/gnome-version.mk
+-include /usr/share/gnome-pkg-tools/1/rules/gnome-get-source.mk
+
+DEB_CONFIGURE_EXTRA_FLAGS += --libexecdir=/usr/lib/nautilus \
+                             --disable-update-mimedb \
+                             --disable-packagekit
+LDFLAGS += -Wl,-z,defs -Wl,-O1 -Wl,--as-needed
+DEB_DH_MAKESHLIBS_ARGS_libnautilus-extension1 += -V 'libnautilus-extension1 (>= 1:2.29.1)'
+
+binary-post-install/nautilus-data::
+	dh_installmime -p$(cdbs_curpkg)
--- nautilus-2.30.0.orig/debian/libnautilus-extension-dev.install
+++ nautilus-2.30.0/debian/libnautilus-extension-dev.install
@@ -0,0 +1,4 @@
+debian/tmp/usr/lib/libnautilus-extension*.so
+debian/tmp/usr/include
+debian/tmp/usr/lib/pkgconfig
+debian/tmp/usr/share/gtk-doc
--- nautilus-2.30.0.orig/debian/changelog
+++ nautilus-2.30.0/debian/changelog
@@ -0,0 +1,1926 @@
+nautilus (1:2.30.0-0ubuntu4) lucid; urgency=low
+
+  * debian/patches/91_git_middleclick_crash.patch:
+    - git change to fix a crasher when opening non-available bookmark locations
+      (lp: #444368)
+  * debian/patches/92_git_emblems_cut.patch:
+    - git change to fix emblem being cut sometime when zooming 
+      (lp: #46846)
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Wed, 07 Apr 2010 11:51:00 +0200
+
+nautilus (1:2.30.0-0ubuntu3) lucid; urgency=low
+
+  * Add 16_hide_unmount.patch: Do not show Unmount when showing Eject/Safe
+    removal. Having three menu entries (unmount/eject/safe removal) in a
+    volume/drive menu entry is too confusing. Unmount only really makes sense
+    for internal drives, for external ones it is pretty much a "geek" option.
+    Geeks can use palimpsest or "unmount /media/foo" from the CLI if they
+    really want to, for everyone else it is just an unintuitive and hard to to
+    explain menu entry. (LP: #453072)
+
+ -- Martin Pitt <martin.pitt@ubuntu.com>  Tue, 30 Mar 2010 19:17:57 +0200
+
+nautilus (1:2.30.0-0ubuntu2) lucid; urgency=low
+
+  * Restore revision which was not commited to the vcs (lp: #508890)
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Mon, 29 Mar 2010 22:52:39 +0200
+
+nautilus (1:2.30.0-0ubuntu1) lucid; urgency=low
+
+  * New upstream version:
+    - Don't show weird border around desktop
+    - Correctly put focus on view for new windows
+    - Extra view does not get focus when created
+    - Add nicer thumbnail border
+    - Fix crash when hiding search bar
+    - Support AIFF for audio preview
+  * debian/control.in:
+    - updated glib and gtk requirements
+  * debian/patches/92_git_change_no_desktop_frame.patch:
+    - the change is in the new version
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Mon, 29 Mar 2010 11:32:07 +0200
+
+nautilus (1:2.29.92.1-0ubuntu4) lucid; urgency=low
+
+  * debian/patches/91_correct_rgba_use.patch:
+    - disable patch as it was causing an endless loop where nautilus
+      kept on crashing when attempting to draw the desktop on
+      multiple screens (LP: #508890).
+
+ -- Alberto Milone <alberto.milone@canonical.com>  Sun, 21 Mar 2010 01:07:51 +0100
+
+nautilus (1:2.29.92.1-0ubuntu3) lucid; urgency=low
+
+  * No-change rebuild against a reverted CDBS.
+
+ -- Steve Kowalik <stevenk@ubuntu.com>  Sat, 20 Mar 2010 18:28:04 +1100
+
+nautilus (1:2.29.92.1-0ubuntu2) lucid; urgency=low
+
+  * debian/patches/92_git_change_no_desktop_frame.patch:
+    - git change to not display a border around the desktop background 
+      (lp: #507263)
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Thu, 18 Mar 2010 15:29:48 +0100
+
+nautilus (1:2.29.92.1-0ubuntu1) lucid; urgency=low
+
+  * New upstream version: 
+    - Fix compilation due to deprecated GTK_WIDGET_STATE symbol
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Wed, 10 Mar 2010 21:52:17 +0100
+
+nautilus (1:2.29.92-0ubuntu1) lucid; urgency=low
+
+  * New upstream version:
+    - Make view default focus in new windows (lp: #520685)
+    - Put tabs at the top again
+    - Don't use deprecated gtk widgets
+    - Allow Alt-<num> to switch tabs (lp: #521767)
+    - Dynamically load tracker support
+    - Don't auto-close the window you initiated an unmount in (lp: #530542)
+  * debian/control.in:
+    - update gtk requirement
+  * debian/patches/90_relibtoolize.patch:
+    - new version update
+  * debian/patches/92_correct_initial_focus.patch,
+    debian/patches/93_no_bottom_tab.patch:
+    - dropped, the changes are in the new version
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Mon, 08 Mar 2010 17:08:22 +0100
+
+nautilus (1:2.29.91-0ubuntu2) lucid; urgency=low
+
+  * debian/patches/89_use_application_indicator.patch:
+    - correctly show the menu for the new application indicator (lp: #522807)
+  * debian/patches/92_correct_initial_focus.patch:
+    - git change, correctly set the focus when opening a new dialog 
+      (lp: #505678)
+  * debian/patches/93_no_bottom_tab.patch:
+    - git update to revert the tab at the bottom change (lp: #509079)
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Wed, 03 Mar 2010 15:53:13 +0100
+
+nautilus (1:2.29.91-0ubuntu1) lucid; urgency=low
+
+  * New upstream version:
+    - Make it possible to have backgrounds spanning multiple monitors.
+    - Better handling of closing windows when device is unmounted (lp: #386517)
+    - Use GtkSpinner instead of custom widget
+    - Translation updates
+  * debian/control.in:
+    - updated gnome-desktop and gtk requirement
+  * debian/patches/90_relibtoolize.patch:
+    - new version update
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Mon, 22 Feb 2010 15:29:11 +0100
+
+nautilus (1:2.29.90-0ubuntu1) lucid; urgency=low
+
+  * New upstream version:
+    - Fix copy-pasted tooltip string
+    - Translation updates
+  * debian/patches/11_no_session_delay.patch:
+    - don't change translated desktop that will avoid update conflicts and those
+      get updated during the build
+  * debian/patches/90_relibtoolize.patch:
+    - new version update
+    
+ -- Sebastien Bacher <seb128@ubuntu.com>  Tue, 09 Feb 2010 18:17:24 +0100
+
+nautilus (1:2.29.2-0ubuntu5) lucid; urgency=low
+
+  * debian/patches/83_never_exec_nonexec_launchers.patch: redefine
+    "never" to "after Karmic released", so that old launchers
+    from prior LTS get the opportunity to be updated.
+
+ -- Kees Cook <kees@ubuntu.com>  Mon, 08 Feb 2010 16:52:59 -0800
+
+nautilus (1:2.29.2-0ubuntu4) lucid; urgency=low
+
+  * Rebuild with the new libdbusmenu version
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Fri, 05 Feb 2010 12:23:01 -0800
+
+nautilus (1:2.29.2-0ubuntu3) lucid; urgency=low
+
+  [ Kees Cook ]
+  * Add debian/patches/83_never_exec_nonexec_launchers.patch: implement
+    non-exec policy for .desktop handler.
+
+  [ Didier Roche ]
+  * debian/control.in: remove VCS-Svn: to avoid get puzzled by debchekout
+    taking debian svn
+
+  [ LoУЏc Minier ]
+  * Revert 1:2.29.2-0ubuntu2 as -O1 is only a problem with gvfs.
+
+ -- LoУЏc Minier <loic.minier@ubuntu.com>  Tue, 02 Feb 2010 22:28:36 +0100
+
+nautilus (1:2.29.2-0ubuntu2) lucid; urgency=low
+
+  * Only add -Wl,-O1 to LDFLAGS if DEB_HOST_ARCH != armel; thanks Paul Larson;
+    LP #512959.
+
+ -- LoУЏc Minier <loic.minier@ubuntu.com>  Tue, 02 Feb 2010 19:45:44 +0100
+
+nautilus (1:2.29.2-0ubuntu2) lucid; urgency=low
+
+  * New upstream release:
+    - Align sidebar header and location bar (LP: #504185)
+    - Remove tabs menu
+    - Update translations
+  * debian/control.in:
+    bump libglib2.0-dev build-dep
+  * debian/patches/11_no_session_delay.patch: refreshed
+  * debian/patches/90_relibtoolize.patch: refreshed
+
+ -- Didier Roche <didrocks@ubuntu.com>  Mon, 25 Jan 2010 15:25:13 +0100
+
+nautilus (1:2.29.1-0ubuntu3) lucid; urgency=low
+
+  * debian/patches/11_no_session_delay.patch:
+    - don't use X-GNOME-Autostart-Phase=Desktop to not delay other softwares
+      during GNOME start
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Wed, 20 Jan 2010 22:07:51 +0100
+
+nautilus (1:2.29.1-0ubuntu2) lucid; urgency=low
+
+  * debian/control.in:
+    - build-depends on libappindicator-dev
+  * debian/patches/89_use_application_indicator.patch:
+    - use the application-indicator (lp: #497880)
+  * debian/patches/90_relibtoolize.patch:
+    - refreshed
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Tue, 12 Jan 2010 19:39:45 +0100
+
+nautilus (1:2.29.1-0ubuntu1) lucid; urgency=low
+
+  * New upstream version:
+    - Make browser mode the default
+    - Add split view mode
+    - Browser UI reorganization
+    - Better background support on multi-monitor setups
+    - Support new "default location" on mounts 
+    - Add extension api to lookup NautilusFileInfo objects
+    - Make the search toolbar button a toggle button (lp: #57210, #392292)
+    - Change text selection when using f2 several times (lp: #55996)
+    - Ctrl+shift does multiple range selection in list view (lp: #148297)
+    - Correctly toggle the show hidden files option (lp: #318151)
+    - Opening of unknown files types displays a list of softwares (lp: #435780)
+    - Fix the end key action in the image details (lp: #448786)
+    - Use correct Borders for the sidebar (lp: #380838)
+    - Display tooltips over sidebar bookmarks (lp: #432485)
+  * debian/control.in:
+    - updated gnome-desktop requirement
+  * debian/nautilus-data.gconf-defaults:
+    - don't set browser mode there since that's upstream default now
+  * debian/patches/01_manpage.patch:
+    - the change is upstream now
+  * debian/patches/91_correct_rgba_use.patch:
+    - change by Cody Russell to fix rgba issue (lp: #491521)
+  * debian/rules:
+    - updated shlib version
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Wed, 06 Jan 2010 17:14:33 +0100
+
+nautilus (1:2.28.4-0ubuntu1) lucid; urgency=low
+
+  * New upstream version:
+    - Fix bug in trash/delete key sensitivity fix that could cause data loss. 
+     (Files where trashed when you renamed a file and pressed delete.)
+    - Fix uninitialized variable read
+  * debian/patches/90_relibtoolize.patch:
+    - new version update
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Tue, 15 Dec 2009 12:01:36 +0100
+
+nautilus (1:2.28.3-0ubuntu1) lucid; urgency=low
+
+  * New upstream version:
+    - Fix memory leaks
+    - Don't rewrite bookmars unnecessary on startup
+    - Fix background "darkness" detection for font color (lp: #356289)
+    - Disable trash/delete key shortcuts when menu items disabled
+      (lp: #490512)
+  * Sync on Debian
+  * debian/control.in:
+    - Build-Depends on liblaunchpad-integration-dev
+    - change recommends on cd burners to a suggests
+    - change gksu conflicts version to match the ubuntu transition
+    - don't build using beagle and tracker
+    - don't recommends desktop-base, don't suggests tracker
+    - nautilus Suggests gnome-app-install rather than synaptic
+    - set vcs url    
+  * debian/mount-archive.desktop,
+    debian/mount-archive.desktop.in,
+    debian/nautilus.install:
+    - new nautilus context menu item to allow mounting zip, iso, etc
+  * debian/nautilus-data.gconf-schemas:
+    - change the default desktop configuration, default to browser,
+      don't change autorun option to not ask what to do
+  * debian/nautilus-data.install, debian/source_nautilus.py:
+    - apport hook to list versions of files in /usr/lib/nautilus and reassign
+      the crashes when there are not due to nautilus code directly
+  * debian/patches/01_lpi.patch:
+    - launchpad changes.
+  * debian/patches/03_menu_entry.patch:
+    - change the menu item category.
+  * debian/patches/15_translations_list_update.patch:
+    - list the new desktop as translatable
+  * debian/patches/18_signal_curtain.patch:
+    - signal the curtain when loaded
+    - update by Erez Volk to fix a warning (lp: #454234)
+  * debian/patches/20_open-with_install.patch:
+    - don't use that debian change but rather gnome-app-install
+  * debian/patches/80_suppress_umount_in_ltsp.patch:
+    - don't list unmount and eject actions on ltsp clients
+  * debian/patches/82_gnome-app-install.patch:
+    - Invoke gnome-app-install when no application known for file.
+  * debian/patches/95_no-initial-fade.patch: Patch to disable the initial
+    fade-in of the background without disabling crossfades when the
+    background is changed.
+  * debian/rules:
+    - don't use debian translation hack
+    - update shlib version
+  * debian/watch:
+    - watch unstable serie
+
+ -- Sebastien Bacher <seb128@ubuntu.com>  Mon, 14 Dec 2009 13:52:15 +0100
+
+nautilus (2.28.1-1) unstable; urgency=low
+
+  [ Josselin Mouette ]
+  * Drop gnome-mount recommends, itтs already pulled by gvfs if needed 
+    (i.e. for gvfs builds that use HAL).
+
+  [ Andrea Veri ]
+  * New upstream release.
+  * debian/control:
+    - bumped standards-version to 3.8.3. No changes needed.
+    - bumped libtrackerclient-dev to >= 0.6.6 (lenny version),
+      to start up nautilus porting to tracker 0.7. Thanks mbiebl
+      for the hint.
+    - added missing ${misc:Depends} to both nautilus-dbg and
+      libnautilus-extension-dev making lintian stop complaining.
+
+  [ Josselin Mouette ]
+  * nautilus-data.gconf-defaults: set exit_with_last_window to false so 
+    that nautilus doesnтt go in a loop when show_desktop = false.
+  * 13_autostart.patch: removed, it is no longer necessary.
+    + Automount works even when show_desktop = false. Closes: #538108.
+    + Stop installing the autostart file as well.
+    + Break gnome-session < 2.28 because of this change.
+  * Regenerate 90_relibtoolize.patch.
+
+ -- Josselin Mouette <joss@debian.org>  Sat, 24 Oct 2009 15:32:11 +0200
+
+nautilus (2.28.0-2) unstable; urgency=low
+
+  * Require a recent gvfs for the metadata store.
+    Closes: #548142, #548143.
+
+ -- Josselin Mouette <joss@debian.org>  Thu, 24 Sep 2009 10:05:46 +0200
+
+nautilus (2.28.0-1) unstable; urgency=low
+
+  * Depend on libglib2.0-data for GIO translations.
+  * New upstream release.
+    + Fixes duplicate ID in UI file. Closes: #545254.
+  * Bump glib build-dependency.
+  * 12_list-view_expand.patch, 13_autostart.patch, 90_relibtoolize.patch: 
+    updated for the new version.
+  * Install nautilus-convert-metadata.
+
+ -- Josselin Mouette <joss@debian.org>  Wed, 23 Sep 2009 20:11:11 +0200
+
+nautilus (2.26.3-1) unstable; urgency=low
+
+  * New upstream release.
+    + Updated Spanish translation. Closes: #532288.
+  * 13_autostart.patch: start with -n so that the default window is not 
+    created, even when nautilus doesnтt detect correctly it is started 
+    by the session startup. Closes: #532799.
+  * 90_relibtoolize.patch: regenerated for the new version.
+
+ -- Josselin Mouette <joss@debian.org>  Thu, 11 Jun 2009 23:08:03 +0200
+
+nautilus (2.26.2-5) unstable; urgency=low
+
+  * 11_restart_mode.patch: removed, it is useless now that we never 
+    autorespawn nautilus. Furthermore, nautilus-home.desktop is lacking 
+    a X-GNOME-Provides: field.
+  * 13_autostart.patch: refreshed accordingly.
+
+ -- Josselin Mouette <joss@debian.org>  Sun, 31 May 2009 17:53:10 +0200
+
+nautilus (2.26.2-4) unstable; urgency=low
+
+  * 11_restart_mode.patch: add reference.
+  * Remove scrollkeeper dependency.
+  * 13_autostart.patch: new patch. Put nautilus.desktop into the 
+    autostart directory so that we donтt rely on gnome-sessionтs 
+    required_applications mechanism. This allows to add an autostart 
+    condition on the show_desktop GConf key.
+    + Remove the AutoRestart on the same basis; thereтs no point in 
+      restarting nautilus and not e.g. gnome-power-manager, and it 
+      causes many issues.
+  * 90_relibtoolize.patch: update accordingly.
+
+ -- Josselin Mouette <joss@debian.org>  Sun, 31 May 2009 13:51:27 +0200
+
+nautilus (2.26.2-3) unstable; urgency=low
+
+  * 11_restart_mode.patch: new patch. Do not get the session manager to 
+    automatically restart nautilus when using --no-desktop. Thanks to 
+    Roland Mas for testing.
+
+ -- Josselin Mouette <joss@debian.org>  Wed, 29 Apr 2009 17:55:35 +0200
+
+nautilus (2.26.2-2) unstable; urgency=low
+
+  * 20_open-with_install.patch: fix a crash when switching tabs in the 
+    dialog.
+
+ -- Josselin Mouette <joss@debian.org>  Sat, 25 Apr 2009 23:44:05 +0200
+
+nautilus (2.26.2-1) unstable; urgency=low
+
+  * Break eiciel, diff-ext, nautilus-gksu, nautilus-actions, 
+    nautilus-share and seahorse-plugins until versions rebuilt with the 
+    new extension path.
+  * Only suggest xdg-user-dirs, nautilus works perfectly fine without 
+    it.
+  * New upstream release.
+    + Correctly cleans up session files. Closes: #469267.
+    + Checks whether the session is active with ConsoleKit before 
+      mounting a removable media. Closes: #512824.
+    + Follows OnlyShowIn/NotShowIn for .desktop files on the desktop.
+      Closes: #422570.
+    + Only accepts .desktop with executable permissions.
+      Closes: #515078, #515104.
+  * 07_desktop_file_activation.patch: removed from the sources.
+  * 02_eel_libadd.patch: stolen from the eel2 sources. Fix linking of 
+    the eel convenience library.
+  * 14_sidebar_network-protocol.patch: removed, useless since 2.24.
+    Closes: #518773.
+  * 20_open-with_install.patch: updated for the new version.
+  * 90_relibtoolize.patch: new patch, relibtoolize over that.
+  * Refresh other patches.
+  * Bump shlibs version to 2.26.2.
+  * Add brasero 2.26 as an alternative to n-c-b.
+  * Recommend consolekit.
+  * Pass --disable-packagekit.
+  * Fix section of debug package.
+  * Update build-dependencies and dependencies according to the upstream 
+    changes.
+  * Build-depend on libglib2.0-doc and libgtk2.0-doc to ensure proper 
+    xrefs.
+  * nautilus-data.install: there are no more bonobo files to ship.
+  * 10_load_session.patch: new patch. Support --load-session so that 
+    sessions saved with older nautilus versions will load correctly.
+
+ -- Josselin Mouette <joss@debian.org>  Sat, 25 Apr 2009 01:33:51 +0200
+
+nautilus (2.24.2-3) unstable; urgency=low
+
+  * Require shared-mime-info 0.50 to have support for the x-content 
+    types. Closes: #511370.
+  * Recommend gnome-mount.
+  * Break rhythmbox < 0.12.
+  * Standards version is 3.8.1.
+  * Upload to unstable.
+
+ -- Josselin Mouette <joss@debian.org>  Tue, 07 Apr 2009 14:06:47 +0200
+
+nautilus (2.24.2-2) experimental; urgency=low
+
+  * Add a Breaks with g-v-m << 2.24 to avoid double actions on device 
+    insertion. Closes: #507630, #510692.
+  * 20_open-with_install.patch: add missing argument to 
+    gtk_tree_model_get. Closes: #510694.
+
+ -- Josselin Mouette <joss@debian.org>  Tue, 06 Jan 2009 17:07:39 +0100
+
+nautilus (2.24.2-1) experimental; urgency=low
+
+  * nautilus-data.gconf-defaults: enable autorun actions for all media 
+    CD/DVD/etc. by default instead of asking.
+    + Also do it for blank media.
+  * libnautilus-extension1 breaks nautilus << 2.22.
+  * Build-depend on libgnome-desktop-dev 2.24 to be sure to link with 
+    libgnome-desktop-2-7. Otherwise, since symbols are not versioned, 
+    libeel2-2.24 will load it anyway and ka-boom. Closes: #507632.
+  * New upstream release.
+
+ -- Josselin Mouette <joss@debian.org>  Wed, 26 Nov 2008 01:28:28 +0100
+
+nautilus (2.24.1-1) experimental; urgency=low
+
+  [ Gustavo Noronha Silva ]
+  * New upstream release
+  * debian/patches/20_open-with_install.patch:
+  - updated to the new version
+
+  [ Josselin Mouette ]
+  * Update (build-)dependencies according to the new version.
+  * Add Breaks in libnautilus-extension1 against all packages that use 
+    the old API.
+  * 12_list-view_expand.patch, 14_sidebar_network-protocol.patch: 
+    refreshed.
+  * Update shlibs version to 2.23.1.
+  * Only require gvfs (>= 1.0.2), only recommend gvfs-backends.
+  * Stop recommending fam, gio does not support it correctly.
+  * Remove useless dh_strip argument overloading.
+  * 01_manpage.patch: fix whatis entry in nautilus-connect-server.1.
+  * Install upstream manpages in nautilus.
+  * Install the documentation for libnautilus-extension.
+
+ -- Josselin Mouette <joss@debian.org>  Sun, 23 Nov 2008 23:39:28 +0100
+
+nautilus (2.22.5.1-1) experimental; urgency=low
+
+  [ Josselin Mouette ]
+  * 20_open-with_install.patch: handle the case where content_type = 
+    NULL. See bugzilla #541183.
+
+  [ Sebastian DrУЖge ]
+  * New upstream bugfix release.
+
+ -- Sebastian DrУЖge <slomo@debian.org>  Sat, 12 Jul 2008 19:17:54 +0200
+
+nautilus (2.22.4-1) experimental; urgency=low
+
+  * New upstream bugfix release.
+
+ -- Sebastian DrУЖge <slomo@debian.org>  Mon, 30 Jun 2008 16:28:24 +0200
+
+nautilus (2.22.3-1) experimental; urgency=low
+
+  [ Josselin Mouette ]
+  * 20_open-with_install.patch: ported from the patch formerly in eel2.
+  * Also recommend synaptic and app-install-data.
+  * Include patch-translations.mk, require gnome-pkg-tools 0.13.
+  * debian/po-up: taken from eel2.
+  * 99_ltmain_as-needed.patch: make the patch apply with -p1.
+    Closes: #484953.
+
+  [ Sebastian DrУЖge ]
+  * New upstream bugfix release:
+    + debian/control.in:
+      - Drop esound from build dependencies.
+    + debian/patches/05_places-sidebar_single-click.patch:
+      - Dropped, merged upstream.
+  * debian/control.in:
+    + Update Standards-Version to 3.8.0, no additional changes needed.
+
+ -- Sebastian DrУЖge <slomo@debian.org>  Wed, 25 Jun 2008 08:42:25 +0200
+
+nautilus (2.22.2-1) experimental; urgency=high
+
+  * New upstream bugfix release:
+    + debian/patches/05_places-sidebar_single-click.patch:
+      - Updated to apply cleanly again.
+
+ -- Sebastian DrУЖge <slomo@debian.org>  Tue, 08 Apr 2008 18:48:04 +0200
+
+nautilus (2.22.1-1) experimental; urgency=low
+
+  * 05_places-sidebar_single-click.patch: Update from bugzilla and enable
+    again as it should work good now and is more consistent with the
+    GTK file chooser.
+  * New upstream bugfix release:
+    + debian/patches/03_sftp_connect.patch,
+      debian/patches/04_show_backup_files.patch,
+      debian/patches/15_tracker_check.patch,
+      debian/patches/90_from_svn_mount_connect_to_server_locations.patch,
+      debian/patches/90_from_svn_fix_changing_default_application.patch:
+      - Dropped, emrged upstream.
+
+ -- Sebastian DrУЖge <slomo@debian.org>  Fri, 28 Mar 2008 22:12:12 +0100
+
+nautilus (2.22.0-3) experimental; urgency=low
+
+  * Disable 05_places-sidebar_single-click.patch as it's buggy.
+  * Remove 18_disable_signal_handler.patch, it's better fixed upstream.
+  * Remove 06_dont_create_Desktop.patch, --no-desktop is meant as a switch
+    to not show icons on the desktop and not creating the desktop directory
+    creates all kinds of broken links in nautilus.
+  * Remove 08_folder_handler.patch, this is upstream already.
+  * Disable 10_location_titlebar.patch, this gives completely unwanted results
+    for thrash:// for example or when the filesystem uses something else
+    than UTF8 as encoding (%XX stuff in the title).
+    See http://bugzilla.gnome.org/show_bug.cgi?id=142087
+  * 90_from_svn_mount_connect_to_server_locations.patch, Added. Mounts location
+    in the connect to server dialog. Patch taken from the Ubuntu package.
+
+ -- Sebastian DrУЖge <slomo@debian.org>  Wed, 19 Mar 2008 16:22:08 +0100
+
+nautilus (2.22.0-2) experimental; urgency=low
+
+  * Disable 07_desktop_file_activation.patch for now, it breaks in an
+    unintended way.
+
+ -- Sebastian DrУЖge <slomo@debian.org>  Wed, 19 Mar 2008 11:10:42 +0100
+
+nautilus (2.22.0-1) experimental; urgency=low
+
+  [ Sebastian DrУЖge ]
+  * New upstream stable release:
+    + Upload to experimental first because of intrusive changes.
+    + debian/control.in:
+      - Update build dependencies and dependencies.
+    + debian/rules:
+      - Bump shlibs.
+    + debian/patches/01_prompt_same_file.patch,
+      debian/patches/16_missing_thumbnails.patch,
+      debian/patches/20_upstream_nautilus-dnd-user-owned.patch,
+      debian/patches/21_nautilus_xmp.patch,
+      debian/patches/23_thumbnails_add-border.patch,
+      debian/patches/11_gnomevfs_query_eject.patch:
+      - Dropped, merged upstream.
+    + debian/patches/06_dont_create_Desktop.patch:
+      - Updated to apply cleanly again.
+    + debian/patches/07_desktop_file_activation.patch:
+      - Updated to apply cleanly again.
+    + debian/patches/10_location_titlebar.patch:
+      - Updated to apply cleanly again.
+    + debian/patches/14_sidebar_network-protocol.patch:
+      - Updated to apply cleanly again.
+    + debian/patches/99_ltmain_as-needed.patch:
+      - Updated to apply cleanly again.
+    + debian/patches/90_from_svn_fix_changing_default_application.patch:
+      - Make changing the default application work again, patch taken from
+        the Ubuntu package.
+    + debian/patches/18_disable_signal_handler.patch:
+      - Don't use the logging code signal handler it's buggy and makes
+        nautilus being stuck and eat cpu on crash. Patch taken from the
+        Ubuntu package.
+
+ -- Sebastian DrУЖge <slomo@debian.org>  Sun, 16 Mar 2008 20:30:48 +0100
+
+nautilus (2.20.0-7) unstable; urgency=low
+
+  * 25_disable_sighandler.patch: patch from upstream SVN. Disable the 
+    horrible signal handler that makes nautilus go wild while filling 
+    its debug log. Closes: #454764, #494788.
+  * Donтt require libselinux on non-linux OSes. Closes: #494645.
+
+ -- Josselin Mouette <joss@debian.org>  Tue, 16 Sep 2008 08:15:05 +0200
+
+nautilus (2.20.0-6) unstable; urgency=low
+
+  * 24_smb_crash.patch: patch from upstream to handle NULL MIME types 
+    set by the SMB module gracefully, avoiding a lot of crashes.
+
+ -- Josselin Mouette <joss@debian.org>  Mon, 21 Jul 2008 17:09:01 +0200
+
+nautilus (2.20.0-5) unstable; urgency=low
+
+  * 05_places-sidebar_single-click.patch: replaced by upstream version 
+    of the patch, that does not activate items while right-clicking 
+    them. Closes: #414960.
+  * 06_dont_create_Desktop.patch, 
+    20_upstream_nautilus-dnd-user-owned.patch: make patches apply with 
+    -p1. Closes: #484953.
+  * Recommend app-install-data and synaptic now that libeel doesnтt 
+    anymore.
+
+ -- Josselin Mouette <joss@debian.org>  Fri, 18 Jul 2008 13:27:27 +0200
+
+nautilus (2.20.0-4) unstable; urgency=low
+
+  [ Loic Minier ]
+  * Add a nautilus-extensions-1.0 Provide to nautilus to express the fact that
+    nautilus will search for extensions in /usr/lib/nautilus/extensions-1.0;
+    this might avoid a long list of Conflicts in nautilus when updating to
+    extensions-2.0 (nautilus >= 2.21.2).
+
+  [ Josselin Mouette ]
+  * Demote fam to a Suggests; only g-d-e really needs to recommend it.
+  * 02_trash_location.patch: new patch. When unmounting a volume with a 
+    non-empty trash, take into account that with the new location, the 
+    directory to remove is the parent of the one returned by gnome-vfs.
+
+ -- Josselin Mouette <joss@debian.org>  Wed, 28 May 2008 01:47:28 +0200
+
+nautilus (2.20.0-3) unstable; urgency=low
+
+  [ Diego Escalante Urrelo ]
+  * New patch, 23_thumbnails_add-border.patch, restore the
+    thumbnail borders; (GNOME #478363). Closes: #456957.
+
+  [ Josselin Mouette ]
+  * Add missing references to all patches.
+
+  [ Sebastien Bacher ]
+  * New nautilus-connect-server manpage from Fernando Ribeiro (Ubuntu: #61299)
+
+  [ Josselin Mouette ]
+  * 16_missing_thumbnails.patch: stolen from upstream's SVN. Fixes
+    disappearing thumnails. Closes: #453525.
+
+  [ Julian Andres Klode ]
+  * debian/nautilus-connect-server.1: fix the manpage
+  * debian/nautilus-file-management-properties.1: add new manpage
+  * Upgrade to Policy 3.7.3
+  * Add VCS-Browser and VCS-Svn fields to debian/control
+  * Use the new Homepage field
+
+ -- Josselin Mouette <joss@debian.org>  Sat, 12 Jan 2008 16:16:26 +0100
+
+nautilus (2.20.0-2) unstable; urgency=high
+
+  [ Loic Minier ]
+  * Build-dep against libglib2.0-dev >= 2.14; fixes crashes when mixing the
+    internal copy of GSequence with the glib one; thanks Andre Klapper.
+
+  [ Sebastian DrУЖge ]
+  * debian/patches/21_nautilus_xmp.patch,
+    debian/control.in:
+    + Build against exempi 1.99.5. Patch by Michael Biebl. (Closes: #450486)
+
+ -- Sebastian DrУЖge <slomo@debian.org>  Thu, 22 Nov 2007 11:00:12 +0100
+
+nautilus (2.20.0-1) unstable; urgency=low
+
+  * 15_tracker_check.patch: new patch, properly checks that tracker is
+    installed before using it. Closes: #439863.
+  * Suggest tracker.
+  * New upstream release.
+  * Update build dependencies.
+  * Pass --disable-update-mimedb to configure flags.
+  * Don't ship the XML file in nautilus, ugh.
+  * Call dh_installmime by hand for nautilus-data.
+  * Refresh patches.
+  * 05_places-sidebar_single-click.patch: updated to new version.
+  * 12_list-view_expand.patch: updated for 2.20; revert upstream commit
+    r13045.
+  * 13_thumbnail_size_pref.patch: removed, integrated upstream.
+  * 60_combobox-changed-signal.patch: removed, integrated upstream.
+  * Update menu file.
+
+ -- Josselin Mouette <joss@debian.org>  Mon, 24 Sep 2007 12:34:46 +0200
+
+nautilus (2.18.3-3) unstable; urgency=low
+
+  * New patch, 60_combobox-changed-signal, fix a crash with newer Gtk emitting
+    a changed signal; GNOME #459221; SVN r13002.
+
+ -- Loic Minier <lool@dooz.org>  Tue, 24 Jul 2007 15:57:04 +0200
+
+nautilus (2.18.3-2) unstable; urgency=low
+
+  * 14_sidebar_network-protocol.patch: fix systematic segfault.
+    Closes: #434123.
+  * Enable tracker support by build-depending on libtrackerclient-dev.
+
+ -- Josselin Mouette <joss@debian.org>  Sun, 22 Jul 2007 15:17:31 +0200
+
+nautilus (2.18.3-1) unstable; urgency=low
+
+  [ Josselin Mouette ]
+  * 12_list-view_expand.patch: update the minimum width to 20
+    characters.
+  * Update watch file.
+  * 13_thumbnail_size_pref.patch: stolen from upstream SVN. Introduces a
+    preference to define the thumbnail size (closes: #425400).
+  * 99_ltmain_as-needed.patch: make --as-needed work for the library
+    too.
+
+  [ Otavio Salvador ]
+  * 14_sidebar_network-protocol.patch: Adds the "Network Servers" option
+    on sidebar. Thanks to Luis Gustavo S. Barreto <gustavo@ossystems.com.br>
+    for the patch.
+
+  [ Guilherme de S. Pastore ]
+  * 15_japanese_typo.patch: fixes a typo in the Japanese translation. Thanks
+    to Kobayashi Noritada for reporting it. (Closes: #430679)
+
+  [ Josselin Mouette ]
+  * New upstream release.
+  * Refresh patches.
+  * 15_japanese_typo.patch: removed, integrated upstream.
+
+ -- Josselin Mouette <joss@debian.org>  Wed, 18 Jul 2007 23:43:01 +0200
+
+nautilus (2.18.1-3) unstable; urgency=low
+
+  [ Loic Minier ]
+  * Set LDFLAGS directly instead of via DEB_CONFIGURE_SCRIPT_ENV; build-dep on
+    cdbs >= 0.4.41.
+  * Prepend -z defs to LDFLAGS for additional safety.
+  * Wrap build-deps and deps.
+
+  [ Josselin Mouette ]
+  * 12_list-view_expand.patch: set a minimum width for the name column 
+    to avoid opening a window with a too small name column. Partially 
+    fixes #422563.
+
+ -- Josselin Mouette <joss@debian.org>  Wed, 16 May 2007 00:21:01 +0200
+
+nautilus (2.18.1-2) unstable; urgency=low
+
+  * 10_location_titlebar.patch: include gnome-vfs-utils.h
+    (closes: #421027).
+  * Refresh other patches.
+  * 12_list-view_expand.patch: make the filename column expandable 
+    instead of setting the width by default. Reverts upstream commit 
+    12779.
+
+ -- Josselin Mouette <joss@debian.org>  Tue, 01 May 2007 16:16:22 +0200
+
+nautilus (2.18.1-1) unstable; urgency=low
+
+  [ Josselin Mouette ]
+  * 10_location_titlebar.patch: patch from Adrien Delle Cave to display
+    the full location in the title bar when a setting is enabled
+    (closes: #413018).
+  * 01_prompt_same_file.patch: don't overwrite files when the source and
+    destination are strictly the same (closes: #419525).
+
+  [ Sebastian DrУЖge ]
+  * Upload to unstable, drop check-dist include.
+  * New upstream release:
+    + Update build dependency on libgnome2-dev to >= 2.14.0 and add
+      x11proto-core-dev for the multimedia keys support.
+    + Bump shlibs to 2.17.90.
+    + Fix URL in the watch file.
+    + Dropped 02_umask.patch,
+      09_connect_server_iter.patch, merged upstream.
+    + Dropped 11_umount-progress-bar.patch, this is obsolete now that
+      gnome-volume-manager and gnome-vfs use gnome-mount, which displays
+      a notification bubble. See Gnome #313639.
+    + Add icons to nautilus-data.install.
+  * 11_gnomevfs_query_eject.patch: Patch taken from Ubuntu. Use gnomevfs'
+    gnome_vfs_drive_needs_eject() function instead of just looking at the
+    drive type. This keeps umount/eject consistent and keeps it configurable
+    with the HAL policies.
+  * 20_upstream_nautilus-dnd-user-owned.patch: Patch taken from Ubuntu.
+    Use copy instead of move when using DND and the destination is owned by
+    someone else. See Gnome #339154.
+  * 10_location_titlebar.patch: Updated with the latest patch from
+    Gnome #142087. 
+
+ -- Sebastian DrУЖge <slomo@debian.org>  Tue, 24 Apr 2007 22:38:54 +0200
+
+nautilus (2.16.3-5) experimental; urgency=low
+
+  * Bump up librsvg2-dev build-dep to >= 2.16.0-2 to make the package
+    autobuildable; add a librsvg2-common >= 2.16.0-2 build-dep since
+    desktop-base needs it, and librsvg2-dev doesn't pull it.
+
+ -- Loic Minier <lool@dooz.org>  Tue, 13 Mar 2007 13:27:43 +0100
+
+nautilus (2.16.3-4) experimental; urgency=low
+
+  * 08_folder_handler.patch: add OnlyShowIn=GNOME to
+    nautilus-folder-handler.desktop (closes: #396969).
+  * 07_desktop_file_activation.patch:
+    + Compare numeric uids instead of using strcmp.
+    + Fix the context menu of "link" desktop items.
+  * 09_connect_server_iter.patch: patch from Christian Neumair to 
+    display only supported protocols in the "connect to" window
+    (closes: #375180).
+
+ -- Josselin Mouette <joss@debian.org>  Sun, 25 Feb 2007 00:50:36 +0100
+
+nautilus (2.16.3-3) experimental; urgency=low
+
+  [ Loic Minier ]
+  * Add a get-orig-source target to retrieve the upstream tarball.
+  * Add an epoch to the libgnomevfs2-dev build-dep and dep.
+  * Include the new check-dist Makefile to prevent accidental uploads to
+    unstable; bump build-dep on gnome-pkg-tools to >= 0.10.
+
+  [ Josselin Mouette ]
+  * 06_dont_create_Desktop.patch: patch from upstream bugzilla. Don't
+    create the Desktop directory when run with the --no-desktop option
+    (closes: #230757, #408896).
+  * 07_desktop_file_activation.patch:
+    + Don't launch desktop files that aren't at safe places
+      (closes: #408556). This doesn't affect desktop files that are 
+      merely links.
+    + Don't launch those that don't end with .desktop (closes: #408948).
+
+ -- Josselin Mouette <joss@debian.org>  Thu, 15 Feb 2007 17:23:51 +0100
+
+nautilus (2.16.3-2) experimental; urgency=low
+
+  * 03_sftp_connect.patch: patch from Mike Hommey to add a "connect to
+    server" context menu item for sftp shares (closes: #375181).
+  * 04_show_backup_files.patch: patch from Stephen Cook to display
+    backup files together with hidden files (closes: #401583).
+  * Refresh 11_umount-progress-bar.patch.
+  * 05_places-sidebar_single-click.patch: patch from UHU Linux to use 
+    single click in the "places" sidebar pane.
+
+ -- Josselin Mouette <joss@debian.org>  Wed,  3 Jan 2007 00:31:00 +0100
+
+nautilus (2.16.3-1) experimental; urgency=low
+
+  [ Loic Minier ]
+  * Ship /usr/share/mime/application in nautilus.
+  * Merge 2.14.3-2, 2.14.3-3, and 2.14.3-4; credit
+    10_nautilus-directory-cache-is-local in 2.14.3-4 appropriately.
+  * Fix watch file to use HTTP.
+
+  [ Josselin Mouette ]
+  * Merge 2.14.3-6.
+  * Switch to quilt for patch handling.
+  * 02_umask.patch: use the recommended method upstream, which should be
+    thread-safe.
+  * 10_nautilus-directory-cache-is-local.patch: removed, integrated
+    upstream.
+  * 11_umount-progress-bar.patch: refresh translations.
+
+ -- Josselin Mouette <joss@debian.org>  Fri,  8 Dec 2006 22:29:03 +0100
+
+nautilus (2.16.1-1) experimental; urgency=low
+
+  [ Josselin Mouette ]
+  * Brown paper bag update.
+  * 02_umask.patch: use and operator on not(umask), not the xor.
+
+  [ Loic Minier ]
+  * Bump the Depends on libgnomevfs2-dev >= 2.16.0-1 as well.
+  * Reorder build-deps to please pbuilder.
+  * Add missing build-deps on libgnomeui-dev (>= 2.6.0), libglib2.0-dev (>=
+    2.6.0), libgnome2-dev (>= 2.1.1), libpango1.0-dev (>= 1.1.2).
+  * Version the liborbit2-dev build-dep to >= 2.4.0.
+  * Bump the libgnomeui-dev build-dep to >= 2.16.0-2 for gtk+2.0 2.10.
+  * Bump the libbonobo2-dev build-dep to >= 2.15 for gnome-vfs2 >= 2.16.0-1.
+  * Add ${shlibs:Depends} to libnautilus-extension-dev.
+  * New upstream release; no API change.
+
+ -- Loic Minier <lool@dooz.org>  Thu,  5 Oct 2006 17:04:18 +0200
+
+nautilus (2.16.0-2) experimental; urgency=low
+
+  [ Marco Cabizza ]
+  * Bump libgnomevfs2-dev build-dep to 2.16.0-1 for selinux support.
+
+  [ Loic Minier ]
+  * Upload.
+
+ -- Loic Minier <lool@dooz.org>  Sun, 24 Sep 2006 21:45:45 +0200
+
+nautilus (2.16.0-1) experimental; urgency=low
+
+  * New upstream release.
+  * Update watch file.
+  * Remove requirements on libpopt and libgsf.
+  * Update build-dependencies appropriately.
+  * Remove many unneeded dependencies for libnautilus-extension-dev.
+  * Build-depend on docbook-utils and libselinux1-dev.
+  * Build-depend on gnome-pkg-tools 0.7 and use clean-la.mk.
+  * Also use gnome-version.mk and use ${gnome:Version}.
+  * Bump shlibs to 2.15.90.
+
+ -- Josselin Mouette <joss@debian.org>  Tue, 12 Sep 2006 23:42:15 +0200
+
+nautilus (2.14.3-6) unstable; urgency=medium
+
+  * Update patch 11_umount-progress-bar to fix an implicit pointer conversion
+    to int which would have likely caused crashes on 64-bits arches; thanks
+    Dann Frazier; closes: #400996.
+
+ -- Loic Minier <lool@dooz.org>  Thu, 30 Nov 2006 13:45:04 +0100
+
+nautilus (2.14.3-5) unstable; urgency=low
+
+  * New patch, 11_umount-progress-bar.patch, to display a progress bar when
+    umounting an USB stick (or other volumes); taken from the Ubuntu package as
+    well as the translations; thanks Sven Arvidsson; GNOME #313639;
+    closes: #396939, #398373.
+
+ -- Loic Minier <lool@dooz.org>  Wed, 29 Nov 2006 15:33:06 +0100
+
+nautilus (2.14.3-4) unstable; urgency=low
+
+  * New patch, 10_nautilus-directory-cache-is-local.patch, to cache the result
+    of islocal() on NautilusDirectory objects; this is called relatively often
+    and should speed up browsing of network shares; from upstream CVS; credits
+    to Alexander Larsson and Federico Mena Quintero.
+
+ -- Loic Minier <lool@dooz.org>  Wed, 15 Nov 2006 17:08:56 +0100
+
+nautilus (2.14.3-3) unstable; urgency=low
+
+  * Is there something like a double brown paper bag?
+  * 02_umask.patch: finally a correct expression, hopefully. Fixes 
+    problem with file creation (closes: #390908).
+
+ -- Josselin Mouette <joss@debian.org>  Wed,  4 Oct 2006 17:14:14 +0200
+
+nautilus (2.14.3-2) unstable; urgency=low
+
+  * 02_umask.patch: use & operator on umask, not ^. Silly me.
+
+ -- Josselin Mouette <joss@debian.org>  Mon,  2 Oct 2006 14:39:03 +0200
+
+nautilus (2.14.3-1) unstable; urgency=low
+
+  * New upstream release.
+  * 02_umask.patch: honor umask when creating files (closes: #314796).
+  * 01_relibtoolise.patch: removed.
+  * Bump eel2 build-dependencies.
+
+ -- Josselin Mouette <joss@debian.org>  Thu,  3 Aug 2006 21:41:00 +0200
+
+nautilus (2.14.1-5) unstable; urgency=high
+
+  [ Josselin Mouette ]
+  * nautilus-data depends on ${misc:Depends} (RC bug fix).
+
+  [ Loic Minier ]
+  * Add a useless ${misc:Depends} to libnautilus-extension1, just in case.
+
+ -- Loic Minier <lool@dooz.org>  Wed, 14 Jun 2006 11:00:59 +0200
+
+nautilus (2.14.1-4) unstable; urgency=low
+
+  * nautilus-dbg replaces libnautilus-extension1-dbg (closes: #368304).
+
+ -- Josselin Mouette <joss@debian.org>  Sun, 21 May 2006 20:53:43 +0200
+
+nautilus (2.14.1-3) unstable; urgency=low
+
+  * The "tame the beast" release.
+    + New maintainer.
+  * Remove dependency on broken gamin.
+  * Keep only fam as a Recommends:, nautilus now monitors correctly
+    local mounts even without it (closes: #353163).
+  * Standards version is 3.7.2.
+  * dirs: removed, useless.
+  * *.install: move architecture-independent data to nautilus-data
+    (closes: #314209).
+    + Add a conflict with earlier versions.
+  * rules, nautilus-data.dirs: don't install the initial-desktop stuff,
+    it isn't used at all.
+  * nautilus-data.install: use it to install the icon.
+  * README.Debian: removed, useless.
+  * nautilus.postinst: removed, deprecated.
+  * Use ${binary:Version} (yes, that's cosmetic).
+  * Put all debugging information in nautilus-dbg.
+    + Remove libnautilus-extension1-dbg entirely.
+    + Use debhelper 5 and depend on it.
+  * Set priority of the debugging package to extra, to match the
+    override.
+  * libnautilus-extension-dev.install: there is no .a file.
+
+ -- Josselin Mouette <joss@debian.org>  Thu, 18 May 2006 06:40:47 +0200
+
+nautilus (2.14.1-2) unstable; urgency=low
+  
+  [ Sebastien Bacher ]
+  * Upload
+
+  [ Josselin Mouette ]
+  * Make the package binNMU-safe.
+    + Build-depend on dpkg-dev 1.13.19.
+    + Use ${source:Version}.
+
+  [ Loic Minier ]
+  * Stop shipping /usr/lib/*.la files in libnautilus-extension-dev.
+    [debian/libnautilus-extension-dev.install]
+  * Build with a fixed CDBS (0.4.39-0.1 for #365085) which should restore the
+    correct libnautilus-extension1 shlib dep. (Closes: #365740)
+
+ -- Sebastien Bacher <seb128@debian.org>  Sat, 13 May 2006 00:12:20 +0200
+  
+nautilus (2.14.1-1) unstable; urgency=low
+
+  * New upstream version
+  * debian/control.in:
+    - updated requirements on libeel and libgtk according to configure
+  * debian/patches/01_relibtoolise.patch:
+    - updated
+
+ -- Sebastien Bacher <seb128@debian.org>  Sun, 30 Apr 2006 01:16:06 +0200
+
+nautilus (2.14.0-1) unstable; urgency=low
+
+  * New upstream version
+  * debian/control.in:
+    - updated the requirements on gnome-vfs, eel 
+    - updated cdbs requirement so dh_installmime is used
+  * debian/nautilus-data.install:
+    - install the "application/x-gnome-saved-search" mimetype definition
+  * debian/patches/01_relibtoolise.patch:
+    - updated
+  * debian/rules:
+    - updated the shlibs argument
+  * debian/watch:
+    - updated
+
+  [ Josselin Mouette ]
+  * Recommend librsvg2-common and libgnomevfs2-extra.
+
+  [ Loic Minier ]
+  * Depend on gamin | fam since gnome-vfs deps are not enough to ensure it's
+    there. (Closes: #353163)
+    [debian/control, debian/control.in]
+
+ -- Sebastien Bacher <seb128@debian.org>  Sun,  9 Apr 2006 19:41:37 +0200
+
+nautilus (2.12.2-3) unstable; urgency=low
+
+  * Simple rebuild to get rid of references to Xcursor.la and Xrender.la.
+
+ -- Loic Minier <lool@dooz.org>  Mon, 24 Apr 2006 19:45:51 +0200
+
+nautilus (2.12.2-2) unstable; urgency=low
+
+  * Upload to unstable.
+
+ -- Josselin Mouette <joss@debian.org>  Sun,  8 Jan 2006 00:30:27 +0100
+
+nautilus (2.12.2-1) experimental; urgency=low
+
+  [ Sjoerd Simons ]
+  * Up gnome-vfs2 build-depend to >= 2.12.0
+
+  [ Loic Minier ]
+  * New upstream release.
+  * Minor cleanups to debian/rules.
+  * Actually ship license information and distinguish between copyright and
+    license.
+
+ -- Loic Minier <lool@dooz.org>  Mon, 12 Dec 2005 22:42:27 +0100
+
+nautilus (2.12.1-1) experimental; urgency=low
+
+  * New upstream version.
+  * debian/control.in:
+    - updated the Build-Depends on the eel2 package.
+  * debian/patches/01_relibtoolise.patch:
+    - updated.
+  * debian/patches/07_places_bookmarks.patch,
+    debian/patches/08_desktopborder.patch:
+    - fixed with the new version.
+  * debian/watch:
+    - updated.
+
+ -- Sebastien Bacher <seb128@debian.org>  Mon, 17 Oct 2005 16:00:40 +0200
+
+nautilus (2.10.1-5) unstable; urgency=high
+
+  [ Josselin Mouette ]
+  * Depend on ${misc:Depends} (high urgency fix).
+  * Add --as-needed again.
+
+  [ Loic Minier ]
+  * Add CDBS' utils.
+
+ -- Loic Minier <lool@dooz.org>  Fri, 14 Oct 2005 11:24:06 +0200
+
+nautilus (2.10.1-4) unstable; urgency=medium
+  
+  [ Sebastien Bacher <seb128@debian.org> ]
+  * debian/control.in:
+    - Build-Depends on the current exif (Closes: #321261).
+  * debian/rules:
+    - don't use "-as-needed", fix the current build issue (Closes: #320138).
+  
+  [ Josselin Mouette <joss@debian.org> ]
+  * Don't recommend gnome-icon-theme, gnome-control-center already depends on
+    it.
+  * Updated Suggests, using evince | pdf-viewer instead of xpdf, and
+    totem | mp3-decoder instead of xmms (closes: #289252).  
+
+ -- Sebastien Bacher <seb128@debian.org>  Fri,  5 Aug 2005 13:12:57 +0200
+
+nautilus (2.10.1-3) unstable; urgency=medium
+
+  * Pass --as-needed to ld.
+  * Remove most conflicts and replaces, they aren't useful anymore.
+  * Depend on gnome-control-center instead of capplets.
+  * Cosmetic fixes to the -dbg packages' description.
+  * Don't install the .so and .la for libnautilus-private.
+  * Standards-version is 3.6.2.
+  * copyright: correctly reference the authors and the GPL.
+
+ -- Josselin Mouette <joss@debian.org>  Sat, 25 Jun 2005 18:03:04 +0200
+
+nautilus (2.10.1-2) unstable; urgency=low
+
+  * Upload to unstable.
+
+ -- Sebastien Bacher <seb128@debian.org>  Fri, 10 Jun 2005 15:26:25 +0200
+
+nautilus (2.10.1-1) experimental; urgency=low
+
+  * Changes by SУЉbastien Bacher:
+    * New upstream version.
+    * debian/patches/09_connect-server-auth-fix.patch:
+      - fixed upstream.
+  * Changes by Josselin Mouette:
+    * Conflict with libnautilus2-dev.
+
+ -- Sebastien Bacher <seb128@debian.org>  Mon,  9 May 2005 15:57:18 +0200
+
+nautilus (2.10.0-1) experimental; urgency=low
+
+  * New upstream release:
+    - better handling of DnD from web browsers (Closes: #269490).
+    - fix the icon layout on ia64 (Closes: #286039).
+  * debian/control.in:
+    - create a debug package.
+    - don't Build-Conflicts on libcdparanoia0-dev
+    - renamed libnautilus2-2 to libnautilus-extension1 to reflect the upstream
+      changes.
+    - updated the Build-Depends.
+  * debian/patches/01_relibtoolise.patch:
+    - updated.
+  * debian/patches/02_build_exif.patch:
+    - fixed upstream.
+  * debian/patches/07_places_bookmarks.patch:
+    - patch to add the GTK bookmarks to the places menu.
+  * debian/patches/08_desktopborder.patch:
+    - don't display a border around the desktop.
+  * debian/patches/09_connect-server-auth-fix.patch:
+    - don't display a warning when creating a share.
+  * debian/rules:
+    - updated the configure options.
+    - updated the shlibs.
+  * debian/watch:
+    - updated.
+
+ -- Sebastien Bacher <seb128@debian.org>  Fri,  8 Apr 2005 16:46:55 +0200
+
+nautilus (2.8.2-2) unstable; urgency=medium
+
+  * debian/nautilus.postrm:
+    - test if the directories are here before trying to remove them 
+      (Closes: #283450).
+
+ -- Sebastien Bacher <seb128@debian.org>  Wed, 24 Nov 2004 16:09:08 +0100
+
+nautilus (2.8.2-1) unstable; urgency=low
+
+  * New upstream release.
+  * Upload to unstable.
+  * debian/patches/01_relibtoolise.patch:
+    - updated.
+  * debian/rules:
+    - updated the Build-Depends.
+
+ -- Sebastien Bacher <seb128@debian.org>  Thu, 18 Nov 2004 19:35:45 +0100
+
+nautilus (2.8.1-1) experimental; urgency=low
+
+  * New upstream release.
+  * debian/patches/01_relibtoolise.patch:
+    - updated.
+
+ -- Sebastien Bacher <seb128@debian.org>  Tue, 12 Oct 2004 00:16:22 +0200
+
+nautilus (2.8.0-1) experimental; urgency=low
+
+  * New upstream release.
+  * debian/control.in:
+    - updated the Build-Depends on libeel2-dev to 2.8.0.
+  * debian/patches/01_relibtoolise.patch:
+    - updated.
+
+ -- Sebastien Bacher <seb128@debian.org>  Tue, 14 Sep 2004 21:38:18 +0200
+
+nautilus (2.7.4-1) experimental; urgency=low
+
+  * GNOME Team Upload.
+  * New upstream development release.
+    - now uses the freedesktop.org MIME specification.
+  * Switched to CDBS.
+  * debian/control.in:
+    - nautilus depends on desktop-file-utils (>= 0.7).
+    - updated the Build-Depends on libeel2-dev to 2.7.4.
+  * debian/patches/01_relibtoolise.patch:
+    - updated.
+  * debian/patches/03_desktop-launchers.patch:
+    - removed since included in the new upstream release.
+  * debian/patches/04_mime_warning.patch:
+    - removed, obsolete.
+  * debian/control.in:
+    - Build-Depends on cdbs instead of dbs.
+    - updated the Build-Depends on librsvg2 to 2.7 
+  * debian/*.files:
+    - replaced by *.install files.
+  * debian/rules:
+    - switched to CDBS.
+  * This update is based on Canonical's patch as found in
+    http://no-name-yet.com/patches/gnome2.7/nautilus271to272.patch
+    (closes: #265304).
+
+ -- Jordi Mallach <jordi@debian.org>  Tue, 17 Aug 2004 11:22:55 +0200
+
+nautilus (2.7.1-2) experimental; urgency=low
+
+  * GNOME Team Upload.
+  *  debian/patches/02_build_exif.patch:
+    - updated to fix the crash on file properties for images with exif datas.
+
+ -- Sebastien Bacher <seb128@debian.org>  Wed, 30 Jun 2004 15:07:49 +0200
+
+nautilus (2.7.1-1) experimental; urgency=low
+
+  * GNOME Team Upload.
+  * New (development) upstream release.
+  * debian/patches/01_relibtoolise.patch:
+    - updated.  
+  * debian/patches/02_show-mounts.patch:
+    - removed since the changes are in the new version.
+  * debian/patches/02_build_exif.patch:
+    - patch to fix the build with the new libexif.
+  
+ -- Sebastien Bacher <seb128@debian.org>  Wed, 23 Jun 2004 18:41:33 +0200
+
+nautilus (2.6.3-2) unstable; urgency=high
+
+  * GNOME Team Upload.
+  * debian/control.in:
+    - conflicts with capplets (<< 2.6).
+
+ -- Sebastien Bacher <seb128@debian.org>  Fri, 18 Jun 2004 02:17:21 +0200
+
+nautilus (2.6.3-1) unstable; urgency=low
+
+  * GNOME Team Upload.
+  * New upstream release
+    - fix zoom and desktop problems (Closes: #253135, #253653).
+    - fix the problem with desktop icons marqued as read-only 
+      (Closes: #249792, #251848).
+  * debian/control.in:
+    - recommands nautilus-cd-burner (Closes: #249503).
+  * debian/patches/01_relibtoolise.patch:
+    + updated.  
+  * debian/patches/02_show-mounts.patch:
+    - patch from the CVS to allow to not show volumes on desktop
+      (gconf key to use: /apps/nautilus/desktop/volumes_visible).
+      (Closes: #253529).
+  * debian/patches/03_desktop-launchers.patch:
+     - patch from the CVS to allow to edit the launcher on the desktop again.
+  
+ -- Sebastien Bacher <seb128@debian.org>  Wed, 16 Jun 2004 23:18:15 +0200
+
+nautilus (2.6.2-1) unstable; urgency=low
+
+  * Gnome Team Upload.
+  * New Upstream Release.
+  * debian/control.in:
+    + removed recommends on nautilus-gtkhtml (Closes: #252449).
+  * debian/patches/01_relibtoolise.patch:
+    + updated.
+
+ -- Sebastien Bacher <seb128@debian.org>  Sat,  5 Jun 2004 13:11:31 +0200
+
+nautilus (2.6.1-3) unstable; urgency=low
+ 
+
+  * debian/control.in:
+    + updated Build-Depends (Closes: #251388).
+
+ -- Sebastien Bacher <seb128@debian.org>  Fri, 28 May 2004 22:02:14 +0200
+
+nautilus (2.6.1-2) unstable; urgency=low
+
+  * GNOME Team Upload.
+  * Upload in unstable.
+  * debian/nautilus.1:
+    + updated by Dafydd Harries <daf@muse.19inch.net>.
+
+ -- Sebastien Bacher <seb128@debian.org>  Wed, 26 May 2004 17:43:42 +0200
+
+nautilus (2.6.1-1) experimental; urgency=low
+
+  * New upstream release.
+  * GNOME Team Upload.
+  * debian/patches/01_relibtoolise.patch:
+    + updated.
+
+ -- Sebastien Bacher <seb128@debian.org>  Wed, 26 May 2004 17:43:40 +0200
+
+nautilus (2.6.0-2) experimental; urgency=low
+
+  * [debian/patches/01_relibtoolise.patch] New. Updated libtoolisation to cut
+    down on library dependencies.
+
+ -- J.H.M. Dassen (Ray) <jdassen@debian.org>  Mon, 12 Apr 2004 21:01:55 +0200
+
+nautilus (2.6.0-1) experimental; urgency=low
+
+  * New upstream release:
+    + Fix crash when trying to access non-existing vfs-url (Closes: #222957).
+    + Fix file selection by typing name in column mode (Closes: #237066).
+    + Fix drag and drop between menu and desktop (Closes: #237414).
+    + Should fix background management (Closes: #217859, #230348).
+  * debian/control.in, debian/rules:
+    + Adapted for the Gnome Team.
+    + libnautilus2-2 conflitcs with nautilus (<< 2.6.0) (Closes: #200433).
+    + Depends on shared-mime-info.
+    + Removed gnome-vfs-extra2 Recommends.  
+  * debian/nautilus.1:
+    + Updated references (Closes: #226677).
+  * debian/patches/nautilus-2.4.1-gnu_pathmax.patch:
+    + Removed since not needed by new version.
+
+ -- Sebastien Bacher <seb128@debian.org>  Sat, 27 Mar 2004 14:36:53 +0100
+
+nautilus (2.4.2-2) unstable; urgency=low
+
+  * [debian/control.in] Added Build-Depends: libxml-parser-perl, needed for
+    recent intltool.
+
+ -- J.H.M. Dassen (Ray) <jdassen@debian.org>  Thu,  5 Feb 2004 21:50:27 +0100
+
+nautilus (2.4.2-1) unstable; urgency=low
+
+  * New upstream release.
+
+ -- Sebastien Bacher <seb128@debian.org>  Tue,  3 Feb 2004 21:40:02 +0100
+
+nautilus (2.4.1-3) unstable; urgency=low
+
+  * debian/control :
+    - Recommends eject (Closes: #171081).
+    - Removed nautilus-mozilla from Suggests since the package is not in
+      the archive (Closes: #180805).
+    - Updated Build-Depends.  
+    - Updated descriptions (Closes: #172928, #206509, #210070).
+  * debian/nautilus.postrm
+    - Removed empty dir in /etc (Closes: #206508).
+  * debian/rules :
+    - Removed autogen.sh call to fix the -pthread problem.
+    - Removed --disable-mozilla-component option, since nautilus 2.4 doesn't 
+      use it.  
+
+ -- Sebastien Bacher <seb128@debian.org>  Sun, 26 Oct 2003 15:22:19 +0100
+
+nautilus (2.4.1-2) unstable; urgency=low
+
+  * Register the schema file, that fix the problem with missing options
+    (Closes: #184865, #197810, #212279).
+
+ -- Sebastien Bacher <seb128@debian.org>  Wed, 22 Oct 2003 19:02:36 +0200
+
+nautilus (2.4.1-1) unstable; urgency=low
+
+  * New upstream release.
+  * Updated Build-Depends.
+  * Removed Conflicts on libeel2.
+  * debian/patches:
+    - fix-ld: removed
+    - nautilus-2.1.5-cdburn.patch: removed
+    - nautilus-2.4.1-gnu_pathmax.patch: updated
+    - orbit28.patch: removed
+
+ -- Sebastien Bacher <seb128@debian.org>  Sun, 19 Oct 2003 17:42:49 +0200
+
+nautilus (2.2.4-5) unstable; urgency=low
+
+  * Added a patch to fix a bug with orbit2.8.
+  * Gnome Team Upload.
+
+ -- Sebastien Bacher <seb128@debian.org>  Thu, 16 Oct 2003 21:15:10 +0200
+
+nautilus (2.2.4-4.1) unstable; urgency=medium
+
+  * Non-Maintainer Upload, to try to finally get GNOME 2.2 entirely in Sarge.
+  * debian/control.in: make libnautilus2-dev depend on libgnome-desktop-dev
+    (closes: #209089).
+
+ -- Jordi Mallach <jordi@debian.org>  Sun, 28 Sep 2003 18:59:15 +0200
+
+nautilus (2.2.4-4) unstable; urgency=low
+
+  * remove cdda support, I've heard that is totally broken.
+    Build-Conflicts: libcdparanoia0-dev
+  * -dev: Depends on librsvg2-dev (closes: #208674)
+
+ -- Takuo KITAME <kitame@debian.org>  Mon,  8 Sep 2003 11:40:58 +0900
+
+nautilus (2.2.4-3) unstable; urgency=low
+
+  * Fix build dependency (closes: Bug#208713)
+  * -dev: depends on libcdparanoia0-dev (closes: Bug#208713)
+
+ -- Takuo KITAME <kitame@debian.org>  Fri,  5 Sep 2003 02:43:25 +0900
+
+nautilus (2.2.4-2) unstable; urgency=low
+
+  * Fix #187364: libnautilus2-2: libraries not correctly linked (closes: #187364)
+  * -dev: conflicts: libnautilus1.0-dev (closes: #172230)
+
+ -- Takuo KITAME <kitame@debian.org>  Wed,  3 Sep 2003 16:40:41 +0900
+
+nautilus (2.2.4-1) unstable; urgency=low
+
+  * New upstream release
+  * Fix build-depends (closes: #188888)
+  * Fix build problem on GNU/Hurd (closes: #190369)
+  * Fix dependency to eel (closes: #189255)
+  * Recommends gnome-vfs-extras2 (closes: #194491)
+  * Fix Debian menu icon (closes: #192630)
+  * Suggests pdf-viewer instead of xpdf (closes: #197202)
+
+ -- Takuo KITAME <kitame@debian.org>  Fri, 13 Jun 2003 14:54:56 +0900
+
+nautilus (2.2.3.1-1) unstable; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@debian.org>  Wed, 23 Apr 2003 15:51:03 +0900
+
+nautilus (2.2.3-1) unstable; urgency=low
+
+  * New upstream release
+  * Applied nautilus-cd-burner patch
+
+ -- Takuo KITAME <kitame@debian.org>  Thu, 10 Apr 2003 11:35:38 +0900
+
+nautilus (2.2.2-1) unstable; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@debian.org>  Fri, 14 Mar 2003 16:34:45 +0900
+
+nautilus (2.2.1-1) unstable; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@debian.org>  Thu, 13 Feb 2003 01:58:08 +0900
+
+nautilus (2.2.0.2-1) unstable; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@debian.org>  Fri, 31 Jan 2003 11:06:34 +0900
+
+nautilus (2.2.0.1-1) unstable; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@debian.org>  Fri, 24 Jan 2003 16:25:11 +0900
+
+nautilus (2.2.0-2) unstable; urgency=low
+
+  * fix miss packaging. tarball should be orig.tar.gz
+
+ -- Takuo KITAME <kitame@debian.org>  Thu, 23 Jan 2003 23:38:27 +0900
+
+nautilus (2.2.0-1) unstable; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@debian.org>  Thu, 23 Jan 2003 18:52:42 +0900
+
+nautilus (2.1.91-1) unstable; urgency=low
+
+  * New upstream release
+  * Rebuild against latest libraries (closes: #177485, #177415, #177326, #177325)
+
+ -- Takuo KITAME <kitame@debian.org>  Mon, 20 Jan 2003 11:14:49 +0900
+
+nautilus (2.0.8-1) unstable; urgency=low
+
+  * New upstream release
+  * applied patch to use desktop-base (closes: #166423)
+  * Fix menu entry (closes: #170572, #161798)
+
+ -- Takuo KITAME <kitame@debian.org>  Sat, 30 Nov 2002 13:07:38 +0900
+
+nautilus (2.0.7-5) unstable; urgency=low
+
+  * Update config.{guess,sub} (closes: #168651)
+  * Sugguests: eog not eog2
+
+ -- Takuo KITAME <kitame@debian.org>  Fri, 15 Nov 2002 15:26:15 +0900
+
+nautilus (2.0.7-4) unstable; urgency=low
+
+  * upload into unstable/main
+
+ -- Takuo KITAME <kitame@debian.org>  Wed, 13 Nov 2002 09:49:33 +0900
+
+nautilus (2.0.7-3) experimental; urgency=low
+
+  * Change package name to nautilus
+
+ -- Takuo KITAME <kitame@debian.org>  Fri,  8 Nov 2002 16:09:34 +0900
+
+nautilus2 (2.0.7-2) unstable; urgency=low
+
+  * Replaces: nautilus (closes: #166074)
+
+ -- Takuo KITAME <kitame@debian.org>  Tue,  5 Nov 2002 16:31:22 +0900
+
+nautilus2 (2.0.7-1) unstable; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Wed, 18 Sep 2002 15:23:25 +0900
+
+nautilus2 (2.0.6-1) unstable; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Thu,  5 Sep 2002 14:16:42 +0900
+
+nautilus2 (2.0.4-3) unstable; urgency=low
+
+  * rebuild against gconf 1.2.1-3
+
+ -- Takuo KITAME <kitame@northeye.org>  Mon, 26 Aug 2002 16:01:26 +0900
+
+nautilus2 (2.0.4-2) unstable; urgency=low
+
+  * rebuild against gconf 1.2.1-2
+
+ -- Takuo KITAME <kitame@northeye.org>  Mon, 19 Aug 2002 14:45:22 +0900
+
+nautilus2 (2.0.4-1) unstable; urgency=low
+
+  * New upsream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Fri, 16 Aug 2002 17:12:26 +0900
+
+nautilus2 (2.0.3-1) unstable; urgency=low
+
+  * New upsream release
+  * don't compile with openssl (closes: #155614)
+
+ -- Takuo KITAME <kitame@northeye.org>  Thu,  8 Aug 2002 10:50:23 +0900
+
+nautilus2 (2.0.2-1) unstable; urgency=low
+
+  * New upsream release (closes: #154606)
+  * Fix description (closes: #152290)
+
+ -- Takuo KITAME <kitame@northeye.org>  Mon,  5 Aug 2002 18:47:17 +0900
+
+nautilus2 (2.0.0-3) unstable; urgency=low
+
+  * Upload to unstable/main
+  * nautilus2-data conflicts with nautilus 1.0
+
+ -- Takuo KITAME <kitame@northeye.org>  Wed,  3 Jul 2002 12:00:40 +0900
+
+nautilus2 (2.0.0-2) experimental; urgency=low
+
+  * build against librsvg2-2
+
+ -- Takuo KITAME <kitame@northeye.org>  Fri, 28 Jun 2002 14:14:11 +0900
+
+nautilus2 (2.0.0-1) experimental; urgency=low
+
+  * New upstream release
+  * change package name to nautilus2
+
+ -- Takuo KITAME <kitame@northeye.org>  Thu, 13 Jun 2002 03:21:57 +0900
+
+nautilus1.1 (1.1.19-1) experimental; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Wed,  5 Jun 2002 11:35:23 +0900
+
+nautilus1.1 (1.1.18-1) experimental; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Tue, 28 May 2002 15:55:22 +0900
+
+nautilus1.1 (1.1.17-2) experimental; urgency=low
+
+  * separate arch independent files into nautilus1.1-data
+
+ -- Takuo KITAME <kitame@northeye.org>  Tue, 21 May 2002 14:26:45 +0900
+
+nautilus1.1 (1.1.17-1) experimental; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Tue, 21 May 2002 13:21:26 +0900
+
+nautilus1.1 (1.1.16-1) experimental; urgency=low
+
+  * New upstream release
+  * some executable binaries in /usr/lib/nautilus
+  * remove nautilus1.1-{suggested,extra} package.
+
+ -- Takuo KITAME <kitame@northeye.org>  Tue, 14 May 2002 10:30:51 +0900
+
+nautilus1.1 (1.1.15-1) experimental; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Tue,  7 May 2002 14:30:16 +0900
+
+nautilus1.1 (1.1.14-1) experimental; urgency=low
+
+  * New upstream release
+  * fix menu and upstream infomation (closes: #144018,#144016)
+
+ -- Takuo KITAME <kitame@northeye.org>  Mon, 29 Apr 2002 23:48:00 +0900
+
+nautilus1.1 (1.1.13-1) experimental; urgency=low
+
+  * New upstream release
+  * use dbs
+
+ -- Takuo KITAME <kitame@northeye.org>  Mon, 22 Apr 2002 20:22:44 +0900
+
+nautilus1.1 (1.1.12-1) experimental; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Sat, 20 Apr 2002 01:23:25 +0900
+
+nautilus1.1 (1.1.11-1) experimental; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Tue, 26 Mar 2002 10:09:56 +0900
+
+nautilus1.1 (1.1.9-1) experimental; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Mon, 11 Mar 2002 16:12:28 +0900
+
+nautilus1.1 (1.1.8-2) experimental; urgency=low
+
+  * bump package name libnautilus1.1-0 to -2
+
+ -- Takuo KITAME <kitame@northeye.org>  Fri,  8 Mar 2002 14:55:21 +0900
+
+nautilus1.1 (1.1.8-1) experimental; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Thu,  7 Mar 2002 11:29:37 +0900
+
+nautilus1.1 (1.1.6-1) experimental; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Thu, 28 Feb 2002 11:42:15 +0900
+
+nautilus1.1 (1.1.5-2) experimental; urgency=low
+
+  * build against gtk+ 1.3.14 and libgnome* 1.112.0
+
+ -- Takuo KITAME <kitame@northeye.org>  Sat, 23 Feb 2002 03:55:40 +0900
+
+nautilus1.1 (1.1.5-1) experimental; urgency=low
+
+  * New upstream release
+  * update build-depends
+
+ -- Takuo KITAME <kitame@northeye.org>  Sun, 17 Feb 2002 14:40:17 +0900
+
+nautilus1.1 (1.1.4-1) experimental; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Wed,  6 Feb 2002 03:01:38 +0900
+
+nautilus1.1 (1.1.3-1) experimental; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Mon,  4 Feb 2002 00:42:38 +0900
+
+nautilus1.1 (1.1.2-2) experimental; urgency=low
+
+  * Build against latest libatk9
+
+ -- Takuo KITAME <kitame@northeye.org>  Thu, 24 Jan 2002 21:32:33 +0900
+
+nautilus1.1 (1.1.2-1) experimental; urgency=low
+
+  * New upstream release, GNOME2 version.
+  * upload to experimental
+
+ -- Takuo KITAME <kitame@northeye.org>  Mon, 21 Jan 2002 17:57:33 +0000
+
+nautilus (1.0.6-2) unstable; urgency=low
+
+  * debian/rules:
+    - --enable-fam (closes: #116712)
+  * debian/control:
+    - added libfam-dev into build-depends
+  * remove gnome-*2html2 files (closes: #128083)
+
+ -- Takuo KITAME <kitame@northeye.org>  Tue,  8 Jan 2002 02:19:45 +0900
+
+nautilus (1.0.6-1) unstable; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Fri,  9 Nov 2001 04:18:33 +0000
+
+nautilus (1.0.5-2) unstable; urgency=low
+
+  * Fix and install overrides for lintian errors (closes: #116941)
+  * Changed debian menu category tools to system. (closes: #116370)
+
+ -- Takuo KITAME <kitame@northeye.org>  Sat, 27 Oct 2001 04:10:54 +0900
+
+nautilus (1.0.5-1) unstable; urgency=low
+
+  * New upstream release
+  * Build-Depends: libcdparanoia0-dev (closes: #106350)
+
+ -- Takuo KITAME <kitame@northeye.org>  Sat, 20 Oct 2001 17:34:38 +0900
+
+nautilus (1.0.4-1) unstable; urgency=low
+
+  * New upstream release
+  * closes again (closes: Bug#101387, Bug#102662, Bug#96610)
+
+ -- Takuo KITAME <kitame@northeye.org>  Sat,  7 Jul 2001 22:07:43 +0900
+
+nautilus (1.0.3.2cvs-1) unstable; urgency=low
+
+  * New upstream release
+  * cvs update -r NAUTILUS_1_0_4 (1.0.3.2)
+  * closes: Bug#101387, Bug#102662
+  * closes: Bug#96610 It's not software bug.
+
+ -- Takuo KITAME <kitame@northeye.org>  Wed,  4 Jul 2001 11:12:05 +0900
+
+nautilus (1.0.3-4) unstable; urgency=low
+
+  * Fixed build-dependency (closes: Bug#99765)
+  * added depends libbonobo-dev for libnautilus-dev (closes: Bug#99654)
+
+ -- Takuo KITAME <kitame@northeye.org>  Sun, 17 Jun 2001 21:53:02 +0900
+
+nautilus (1.0.3-3) unstable; urgency=low
+
+  * Fixed build-depends: (closes: Bug#98706, Bug#98846)
+
+ -- Takuo KITAME <kitame@northeye.org>  Sun, 27 May 2001 15:14:26 +0900
+
+nautilus (1.0.3-2) unstable; urgency=low
+
+  * rebuid with libeel0 which is still in Incoming.
+  * remove libammonite-dev, librpm0-dev for Build-Depends
+  * also librsvg-dev, libfreetype6-dev. (libeel-dev follows it)
+
+ -- Takuo KITAME <kitame@northeye.org>  Thu, 10 May 2001 21:49:18 +0900
+
+nautilus (1.0-4) unstable; urgency=low
+
+  * debian/control.in: Really nautilus-suggested move to contrib.
+    nautilus-suggested: Really Depends: nautilus-trilobite (>= 1.0-2)
+  * fix wrong symlink name /usr/share/man/man1/nautilus-verify-rpm.sh (closes: Bug#93579)
+
+ -- Takuo KITAME <kitame@northeye.org>  Wed, 11 Apr 2001 10:53:01 +0900
+
+nautilus (1.0-3) unstable; urgency=low
+
+  * nautilus-suggested: move to contrib, Depends: nautilus-trilobite (>= 1.0-2)
+  * --disable-mozilla-component instead of --disable-mozilla
+
+ -- Takuo KITAME <kitame@northeye.org>  Tue, 10 Apr 2001 14:52:43 +0900
+
+nautilus (1.0-2) unstable; urgency=low
+
+  * remove dependency to non-US package.
+  * nautilus-trilobite/mozilla: goes to it's own package and moved to non-US.
+  * --disable-mozilla. Sorry, remove mozilla support. We have not mozilla-0.8 in archive. (closes: Bug#92274)
+  * --disable-eazel-service, non-US part was moved to it's own package 'nautilus-nonus'
+  * Install nautilus-verify-rpm.sh (closes: Bug#90087)
+  * Build with -DDEBIAN (closes: Bug#84810)
+  * includes libvfs-help.so (closes: Bug#92766)
+  
+  * Notice to FTP maintainer, 
+    Please remove nautilus-trilobite, nautilus-mozilla from main archive.
+    and move nautilus-suggested to contrib/x11.
+
+ -- Takuo KITAME <kitame@northeye.org>  Thu,  5 Apr 2001 14:05:56 +0900
+
+nautilus (1.0-1) unstable; urgency=low
+
+  * New upstream release
+  * nautilus-extra: depends xpdf | xpdf-i (closes: Bug#84958)
+  * libnautilus-extention/nautilus-gnome-extensions.c: applied debian x-terminal-emurator patch (closes: Bug#84810)
+  * Fix "Tree view doesn't work in Nautilus" (closes: Bug#89087)
+  * upsteam fixed 
+      closes: Bug#87069 xmms doesn't accept DND mp3 files from nautilus
+      closes: Bug#86422 nautilus: Font handling bug
+      closes: Bug#86452 nautilus: Nautilus doesn't choose correct fonts
+  * holefully fixed 
+	 closes: Bug#89372: Nautilus doesn't show up
+
+ -- Takuo KITAME <kitame@northeye.org>  Wed, 14 Mar 2001 13:56:00 +0900
+
+nautilus (0.8.2-1) unstable; urgency=low
+
+  * New upstream release (not released, but cvs update -r NAUTILUS_0_8_2)
+  * Fix manpage install (closes: Bug#87394, Bug#87958)
+
+ -- Takuo KITAME <kitame@northeye.org>  Sat,  3 Mar 2001 00:41:31 +0900
+
+nautilus (0.8-2) unstable; urgency=low
+
+  * libnautilus0 has versioned shlibs. (closes: Bug#84858)
+  * nautilus-mozilla depends on mozilla (>= 1:0.7)
+  * fixed freetype build dependency, --with-freetype2-include2=/usr/include/freetype2 (closes: Bug#85246)
+  * added manpages, removed all undocumented (closes: Bug#84807)
+  * Rebuild with Bonobo 0.36-2 and versioned depends. (close: Bug#84951, Bug#86562, )
+
+ -- Takuo KITAME <kitame@northeye.org>  Mon, 19 Feb 2001 22:43:46 +0900
+
+nautilus (0.8-1) unstable; urgency=low
+
+  * New upstream release (closes: Bug#84191)
+  * some bugs was hopefully fixed by upstream.
+    closes: Bug#79174, Bug#79110, Bug#79340, Bug#79940, Bug#80741, Bug#79057, Bug#79207, Bug#79248, Bug#79448, Bug#82752
+  * Recommends -> Suggests ammonite (closes: Bug#80799)
+  * Build-Depends: rpm (closes: Bug#84302)
+  * separated component packages(like nautilus.spec) -mozilla, -trilobite, -extra and nautilus-suggested.
+
+ -- Takuo KITAME <kitame@northeye.org>  Fri,  2 Feb 2001 11:13:00 +0900
+
+nautilus (0.5-3) unstable; urgency=low
+
+  * --enable-eazel-services=1, Recommends: ammonite (closes: Bug#79345)
+  * Added Build-Dpends (closes: Bug#79377)
+
+ -- Takuo KITAME <kitame@northeye.org>  Wed, 27 Dec 2000 12:30:24 +0900
+
+nautilus (0.5-2.1) unstable; urgency=low
+
+  * Initial upload.
+  * Build with Debian's libfreetype6, libfreetype2-dev.
+  * Modifies for Bonobo 0.28
+
+ -- Takuo KITAME <kitame@northeye.org>  Tue, 28 Nov 2000 01:37:10 +0900
+
+nautilus (0.5-2) unstable; urgency=low
+
+  * --enable-mozilla-component
+
+ -- Takuo KITAME <kitame@northeye.org>  Wed,  8 Nov 2000 12:57:18 +0900
+
+nautilus (0.5-1) unstable; urgency=low
+
+  * New upstream release
+
+ -- Takuo KITAME <kitame@northeye.org>  Wed,  8 Nov 2000 10:38:37 +0900
+
+nautilus (0.1.0-1) experimental; urgency=low
+
+  * Initial Release.
+
+ -- Takuo KITAME <kitame@northeye.org>  Thu, 17 Aug 2000 12:51:38 +0900
+
+
--- nautilus-2.30.0.orig/debian/nautilus.xpm
+++ nautilus-2.30.0/debian/nautilus.xpm
@@ -0,0 +1,234 @@
+/* XPM */
+static char * nautilus_xpm[] = {
+"32 23 208 2",
+"  	c None",
+". 	c #F7E8E1",
+"+ 	c #F3DDD2",
+"@ 	c #E7BBA4",
+"# 	c #DFA174",
+"$ 	c #E3A77E",
+"% 	c #E5AA7A",
+"& 	c #E3AB84",
+"* 	c #E3AC8C",
+"= 	c #E3AD91",
+"- 	c #F0D7CA",
+"; 	c #FAF2ED",
+"> 	c #EBC8B7",
+", 	c #E49E6C",
+"' 	c #E69E5C",
+") 	c #ECA552",
+"! 	c #EEAE53",
+"~ 	c #F2B75A",
+"{ 	c #F4C361",
+"] 	c #F1C273",
+"^ 	c #E9A665",
+"/ 	c #E8BCA3",
+"( 	c #EED1C1",
+"_ 	c #FEFEFE",
+": 	c #DB9A6A",
+"< 	c #E28F51",
+"[ 	c #E69442",
+"} 	c #E79A47",
+"| 	c #EBA34C",
+"1 	c #F2BD62",
+"2 	c #F5CA6E",
+"3 	c #EEA33F",
+"4 	c #E7923D",
+"5 	c #ECB976",
+"6 	c #E5B38C",
+"7 	c #FCF8F6",
+"8 	c #D79977",
+"9 	c #DD8D53",
+"0 	c #DA7E46",
+"a 	c #D37B40",
+"b 	c #D2753A",
+"c 	c #CA7836",
+"d 	c #D68336",
+"e 	c #DE7726",
+"f 	c #EDA242",
+"g 	c #E9B986",
+"h 	c #EED0BF",
+"i 	c #CF9174",
+"j 	c #C67144",
+"k 	c #C87140",
+"l 	c #C46D3C",
+"m 	c #BA6536",
+"n 	c #BB5D35",
+"o 	c #B34F2B",
+"p 	c #B3552C",
+"q 	c #BB692D",
+"r 	c #CD752F",
+"s 	c #DE782E",
+"t 	c #E48C34",
+"u 	c #EA9D3E",
+"v 	c #D97431",
+"w 	c #D36528",
+"x 	c #E6A973",
+"y 	c #B76745",
+"z 	c #B35C37",
+"A 	c #AC5738",
+"B 	c #A14E28",
+"C 	c #A5462B",
+"D 	c #AB4328",
+"E 	c #B45B2C",
+"F 	c #E3863A",
+"G 	c #C85825",
+"H 	c #E79846",
+"I 	c #F0D5C7",
+"J 	c #C9896C",
+"K 	c #9B4A31",
+"L 	c #8D3F28",
+"M 	c #933E25",
+"N 	c #9D4A2C",
+"O 	c #A9482F",
+"P 	c #C27335",
+"Q 	c #CF7733",
+"R 	c #DA7C33",
+"S 	c #CA612D",
+"T 	c #EFB869",
+"U 	c #F4E1D8",
+"V 	c #965A46",
+"W 	c #7D3925",
+"X 	c #853C25",
+"Y 	c #AF5437",
+"Z 	c #B24F32",
+"` 	c #B5693B",
+" .	c #B46B41",
+"..	c #AC633E",
+"+.	c #A15339",
+"@.	c #A54D26",
+"#.	c #AF4823",
+"$.	c #D66C2F",
+"%.	c #EFB25B",
+"&.	c #E7BEAA",
+"*.	c #AE725A",
+"=.	c #753624",
+"-.	c #904028",
+";.	c #A34E31",
+">.	c #B75E3C",
+",.	c #C77E54",
+"'.	c #B67556",
+").	c #BC7B5D",
+"!.	c #AD654D",
+"~.	c #8D422C",
+"{.	c #7C331E",
+"].	c #C96734",
+"^.	c #F5F3F3",
+"/.	c #DFB4A0",
+"(.	c #995D47",
+"_.	c #793A28",
+":.	c #A65D43",
+"<.	c #AE6D4D",
+"[.	c #BC8366",
+"}.	c #C28167",
+"|.	c #A55336",
+"1.	c #B4643B",
+"2.	c #C26B42",
+"3.	c #D16B34",
+"4.	c #E17F30",
+"5.	c #A88C7E",
+"6.	c #D49D82",
+"7.	c #874434",
+"8.	c #AF714E",
+"9.	c #AC6846",
+"0.	c #A5623F",
+"a.	c #A56445",
+"b.	c #D4996C",
+"c.	c #D47E4B",
+"d.	c #E9A56C",
+"e.	c #8E6953",
+"f.	c #77382A",
+"g.	c #B26A49",
+"h.	c #BE7545",
+"i.	c #C47842",
+"j.	c #96502D",
+"k.	c #9D573F",
+"l.	c #D38E61",
+"m.	c #D8864C",
+"n.	c #E29452",
+"o.	c #EA9E58",
+"p.	c #C58A70",
+"q.	c #8E5442",
+"r.	c #6E3829",
+"s.	c #CD824B",
+"t.	c #C97A4A",
+"u.	c #8C4D30",
+"v.	c #AE7855",
+"w.	c #EBE8E6",
+"x.	c #B29281",
+"y.	c #A77962",
+"z.	c #A1735D",
+"A.	c #AA5C36",
+"B.	c #A56D56",
+"C.	c #C3835C",
+"D.	c #E5A068",
+"E.	c #85624F",
+"F.	c #575858",
+"G.	c #574136",
+"H.	c #A95F3A",
+"I.	c #854225",
+"J.	c #6E3823",
+"K.	c #DC843F",
+"L.	c #745749",
+"M.	c #090706",
+"N.	c #946954",
+"O.	c #733925",
+"P.	c #4D281E",
+"Q.	c #724A3C",
+"R.	c #95604A",
+"S.	c #74432C",
+"T.	c #DFA068",
+"U.	c #D98344",
+"V.	c #5C4539",
+"W.	c #B4714C",
+"X.	c #64311F",
+"Y.	c #522B21",
+"Z.	c #4B2A23",
+"`.	c #775846",
+" +	c #BE8554",
+".+	c #A9542F",
+"++	c #C19176",
+"@+	c #A9AAAA",
+"#+	c #4D3A30",
+"$+	c #50281E",
+"%+	c #673527",
+"&+	c #9F735C",
+"*+	c #59291F",
+"=+	c #56271B",
+"-+	c #E09B64",
+";+	c #AA9184",
+">+	c #9A583A",
+",+	c #99512C",
+"'+	c #C86F3C",
+")+	c #D18956",
+"!+	c #AC7B5E",
+"~+	c #ECEBEB",
+"{+	c #72594D",
+"]+	c #984928",
+"^+	c #88634C",
+"/+	c #CB7E54",
+"(+	c #684D3F",
+"_+	c #DCDCDC",
+"          . + @ # $ % % % & * = - ;                             ",
+"      ; > = , ' ) ) ! ~ { ] ] ^ $ / ( _                         ",
+"    ( = : < [ [ } | ) ~ 1 2 2 3 4 5 6 ( 7                       ",
+"_ ( 8 9 0 0 0 a b c d 4 | ! ~ 4 e f g g h _                     ",
+"> i j k l m n n o p q r s t u v w e ~ { x h 7                   ",
+"i y z A B C C C D o E q r d F v G w 4 u H 5 I                   ",
+"J K K L L M N O D o m m P c Q R S G s t t T * U                 ",
+"8 V W X X L N Y Z n k `  ...+.B @.#.S $.s %.5 / 7               ",
+"&.*.=.=.W -.;.A >.y y ,.'.).!.~.{.M ].w $.) ! * ^.              ",
+"7 /.(.=._.~.K ;.K +.:.<.[.}.,.!.|.1.2.3.0 F 4.x 5.              ",
+"  + 6.(.X X ~.-.7.L V !.8.9.0.a.b., 2.c.0 w v d.e.              ",
+"    + = *.7._._.f.7.g.j h.i.` j.k.: l.m.3.3.n.o.e.              ",
+"      7 > p.q.r.r.:.` ` i.s.t.9.u.v.d.c.m.d.n.< e.              ",
+"        w.x.y.z.(.g.A.j.` ).B.C.8.8.D.n., n.R n.E.              ",
+"        F.    G.y.H.I.J.(.<.z.'.l.l.m.9 K.K., d.L.              ",
+"              M.N.9.O.P.Q.R.S.` T.m.m.m.U., d.8 V.              ",
+"                E.W.X.Y.Z.`.v. +W..+m c.m.U.9 ++                ",
+"        @+      #+).J.$+P.P.%+O.X q m m ].a 8 `.                ",
+"                  &+B.*+Y.P.=+O.I.N ` t.m.-+z.                  ",
+"                  ;+8 >+X.%+O.{.,+.+m '+)+!+                    ",
+"                  ~+{+[.W.]+]+]+@.1.t.l.^+                      ",
+"                        ^+C.,.,./+C.!+(+                        ",
+"                                                      _+        "};
--- nautilus-2.30.0.orig/debian/menu
+++ nautilus-2.30.0/debian/menu
@@ -0,0 +1,2 @@
+?package(nautilus):needs="X11" section="Applications/File Management" \
+  title="Nautilus" command="/usr/bin/nautilus" icon="/usr/share/pixmaps/nautilus.xpm"
--- nautilus-2.30.0.orig/debian/nautilus.install
+++ nautilus-2.30.0/debian/nautilus.install
@@ -0,0 +1,6 @@
+debian/mount-archive.desktop usr/share/applications
+debian/tmp/usr/bin
+debian/tmp/usr/lib/nautilus
+debian/tmp/usr/share/applications
+debian/tmp/usr/share/man
+
--- nautilus-2.30.0.orig/debian/source_nautilus.py
+++ nautilus-2.30.0/debian/source_nautilus.py
@@ -0,0 +1,15 @@
+import os, apport.packaging, apport.hookutils
+
+def add_info(report):
+	# the crash is not in nautilus code so reassign
+	if report.has_key("Stacktrace") and "/usr/lib/nautilus" in report["Stacktrace"]:
+		for words in report["Stacktrace"].split():
+			if words.startswith("/usr/lib/nautilus"):
+				report.add_package_info(apport.packaging.get_file_package(words))
+				return
+
+	# collect informations on the /usr/lib/nautilus components 
+	report["usr_lib_nautilus"] = ""
+	for dir in os.walk("/usr/lib/nautilus"):
+		for files in dir[2]:
+			 report["usr_lib_nautilus"] += apport.hookutils.package_versions(apport.packaging.get_file_package(os.path.join(dir[0],files)))
--- nautilus-2.30.0.orig/debian/libnautilus-extension1.install
+++ nautilus-2.30.0/debian/libnautilus-extension1.install
@@ -0,0 +1 @@
+debian/tmp/usr/lib/libnautilus-extension*.so.*
--- nautilus-2.30.0.orig/debian/control.in
+++ nautilus-2.30.0/debian/control.in
@@ -0,0 +1,152 @@
+Source: nautilus
+Section: gnome
+Priority: optional
+Maintainer: Ubuntu Desktop Team <ubuntu-desktop@lists.ubuntu.com>
+XSBC-Original-Maintainer: Josselin Mouette <joss@debian.org>
+Uploaders: @GNOME_TEAM@
+Build-Depends: debhelper (>= 5),
+               cdbs (>= 0.4.41),
+               quilt,
+               gnome-pkg-tools (>= 0.13),
+               dpkg-dev (>= 1.13.19),
+               libglib2.0-dev (>= 2.24),
+               libgnome-desktop-dev (>= 1:2.29.91),
+               libpango1.0-dev (>= 1.1.2),
+               libgtk2.0-dev (>= 2.20),
+               libxml2-dev (>= 2.4.7),
+               libexif-dev (>= 0.5.12),
+               libexempi-dev (>= 1.99.5),
+               libgail-dev (>= 0.16),
+               libunique-dev,
+               libdbus-glib-1-dev,
+               intltool (>= 0.40.1),
+               gtk-doc-tools (>= 1.4),
+               libxt-dev,
+               libx11-dev,
+               libselinux1-dev | not+linux-gnu,
+               libxrender-dev,
+               libxext-dev,
+               libgconf2-dev,
+               x11proto-core-dev,
+               shared-mime-info (>= 0.50),
+               libglib2.0-doc,
+               libgtk2.0-doc,
+               liblaunchpad-integration-dev (>= 0.1.17),
+               libappindicator-dev
+Homepage: http://www.gnome.org/projects/nautilus/
+VCS-Browser: http://svn.debian.org/wsvn/pkg-gnome/desktop/unstable/nautilus/
+Vcs-Bzr: https://code.launchpad.net/~ubuntu-desktop/nautilus/ubuntu
+Standards-Version: 3.8.3
+
+Package: nautilus
+Architecture: any
+Depends: ${shlibs:Depends},
+         ${misc:Depends},
+         nautilus-data (>= ${gnome:Version}),
+         nautilus-data (<< ${gnome:NextVersion}),
+         shared-mime-info (>= 0.50),
+         desktop-file-utils (>= 0.7),
+         gvfs (>= 1.3.2),
+         libglib2.0-data
+Provides: nautilus-extensions-2.0
+Recommends: eject,
+            librsvg2-common,
+            app-install-data,
+            gvfs-backends,
+            consolekit
+Suggests: eog,
+          evince | pdf-viewer,
+          gnome-app-install,
+          totem | mp3-decoder,
+          brasero (>= 2.26) | nautilus-cd-burner,
+          xdg-user-dirs
+Conflicts: libnautilus2-2,
+           libnautilus2-dev
+Breaks: gnome-volume-manager (<< 2.24),
+        rhythmbox (<< 0.12),
+        gnome-session (<< 2.28)
+Replaces: libnautilus2-2
+Description: file manager and graphical shell for GNOME
+ Nautilus is the official file manager for the GNOME desktop. It allows
+ to browse directories, preview files and launch applications associated
+ with them. It is also responsible for handling the icons on the GNOME
+ desktop. It works on local and remote filesystems.
+ .
+ Several icon themes and components for viewing different kinds of files
+ are available in separate packages.
+
+Package: nautilus-dbg
+Section: debug
+Architecture: any
+Priority: extra
+Depends: nautilus (= ${binary:Version}),
+         ${misc:Depends}
+Replaces: libnautilus-extension1-dbg
+Description: file manager and graphical shell for GNOME - debugging version
+ Nautilus is the official file manager for the GNOME desktop. It allows
+ to browse directories, preview files and launch applications associated
+ with them. It is also responsible for handling the icons on the GNOME
+ desktop. It works on local and remote filesystems.
+ .
+ Several icon themes and components for viewing different kinds of files
+ are available in separate packages.
+ .
+ This development package contains unstripped binaries compiled with
+ debugging symbols needed by gdb.
+ 
+Package: libnautilus-extension1
+Architecture: any
+Section: libs
+Depends: ${misc:Depends},
+         ${shlibs:Depends}
+Conflicts: libnautilus2-2
+Breaks: nautilus (<< 2.22),
+        gnome-mount (<< 0.8),
+        nautilus-cd-burner (<< 2.22),
+        file-roller (<< 2.24),
+        python-nautilus (<< 0.5),
+        nautilus-sendto (<< 0.14.0-2),
+        nautilus-open-terminal (<< 0.9),
+        nautilus-image-converter (<< 0.3),
+        nautilus-filename-repairer (<< 0.0.5-2),
+        eiciel (<< 0.9.6.1-3),
+        diff-ext (<= 0.2.3-3),
+        nautilus-gksu (<< 2.0.2-2ubuntu1),
+        nautilus-actions (<< 1.4.1-1+b1),
+        nautilus-share (<< 0.7.2-4+b1),
+        seahorse-plugins (<< 2.24.1-3+b1)
+Replaces: libnautilus2-2
+Description: libraries for nautilus components - runtime version
+ Nautilus is the official file manager and graphical shell for the
+ GNOME desktop.
+ .
+ This package contains a few runtime libraries needed by nautilus' extensions.
+
+Package: libnautilus-extension-dev
+Architecture: any
+Section: libdevel
+Depends: libnautilus-extension1 (= ${binary:Version}),
+         libglib2.0-dev (>= 2.21.3),
+         libgtk2.0-dev (>= 2.16.0),
+         ${shlibs:Depends},
+         ${misc:Depends}
+Conflicts: libnautilus2-dev
+Replaces: libnautilus2-dev
+Description: libraries for nautilus components - development version
+ Nautilus is the official file manager and graphical shell for the
+ GNOME desktop.
+ .
+ This package provides the necessary development libraries and include
+ files to develop and compile Nautilus extensions.
+
+Package: nautilus-data
+Architecture: all
+Depends: ${misc:Depends}
+Conflicts: nautilus (<< 2.14.1-3)
+Recommends: nautilus
+Description: data files for nautilus
+ Nautilus is the official file manager and graphical shell for the
+ GNOME desktop.
+ .
+ This package contains pictures, localization files and other data
+ needed by nautilus.
--- nautilus-2.30.0.orig/debian/compat
+++ nautilus-2.30.0/debian/compat
@@ -0,0 +1 @@
+5
--- nautilus-2.30.0.orig/debian/nautilus-data.install
+++ nautilus-2.30.0/debian/nautilus-data.install
@@ -0,0 +1,8 @@
+debian/tmp/etc
+debian/tmp/usr/share/icons/hicolor
+debian/tmp/usr/share/nautilus
+debian/tmp/usr/share/locale
+debian/tmp/usr/share/mime/packages/nautilus.xml
+debian/tmp/usr/share/pixmaps
+debian/source_nautilus.py /usr/share/apport/package-hooks
+debian/nautilus.xpm /usr/share/pixmaps
--- nautilus-2.30.0.orig/debian/nautilus.postrm
+++ nautilus-2.30.0/debian/nautilus.postrm
@@ -0,0 +1,15 @@
+#!/bin/sh -e
+
+if [ "$1" = "purge" ] ; then
+    if [ -d /etc/X11/starthere ]; then
+        rmdir --ignore-fail-on-non-empty /etc/X11/starthere
+    fi
+    if [ -d /etc/X11/sysconfig ]; then
+        rmdir --ignore-fail-on-non-empty /etc/X11/sysconfig
+    fi
+    if [ -d /etc/X11/serverconfig ]; then
+        rmdir --ignore-fail-on-non-empty /etc/X11/serverconfig
+    fi
+fi
+
+#DEBHELPER#
--- nautilus-2.30.0.orig/debian/patches/95_no-initial-fade.patch
+++ nautilus-2.30.0/debian/patches/95_no-initial-fade.patch
@@ -0,0 +1,17 @@
+# Upstream: http://bugzilla.gnome.org/show_bug.cgi?id=575964
+# Patch: http://bugzilla.gnome.org/attachment.cgi?id=130970&action=view
+# Description: remove initial background fade-in
+#
+Index: nautilus-2.29.92.1/eel/eel-background.c
+===================================================================
+--- nautilus-2.29.92.1.orig/eel/eel-background.c	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/eel/eel-background.c	2010-03-10 21:55:12.000000000 +0100
+@@ -924,8 +924,6 @@
+ 		} else {
+ 			background->details->use_common_pixmap = FALSE;
+ 		}
+-
+-		init_fade (background, widget);
+ 	}
+ }
+ 
--- nautilus-2.30.0.orig/debian/patches/92_git_emblems_cut.patch
+++ nautilus-2.30.0/debian/patches/92_git_emblems_cut.patch
@@ -0,0 +1,58 @@
+From 305cf9768bd716ba9bbcd3e773511536243a9cc5 Mon Sep 17 00:00:00 2001
+From: Marcus Carlson <marcus@mejlamej.nu>
+Date: Wed, 07 Apr 2010 07:58:04 +0000
+Subject: Fix emblem scaling with zoom >= 150%
+
+Emblem handling did not properly take zoom into account (#343540)
+---
+diff --git a/libnautilus-private/nautilus-icon-canvas-item.c b/libnautilus-private/nautilus-icon-canvas-item.c
+index 0e08d31..8c8de44 100644
+--- a/libnautilus-private/nautilus-icon-canvas-item.c
++++ b/libnautilus-private/nautilus-icon-canvas-item.c
+@@ -2488,7 +2488,7 @@ static void
+ nautilus_icon_canvas_item_ensure_bounds_up_to_date (NautilusIconCanvasItem *icon_item)
+ {
+ 	NautilusIconCanvasItemDetails *details;
+-	EelIRect icon_rect, emblem_rect;
++	EelIRect icon_rect, emblem_rect, icon_rect_raw;
+ 	EelIRect text_rect, text_rect_for_layout, text_rect_for_entire_text;
+ 	EelIRect total_rect, total_rect_for_layout, total_rect_for_entire_text;
+ 	EelCanvasItem *item;
+@@ -2505,15 +2505,21 @@ nautilus_icon_canvas_item_ensure_bounds_up_to_date (NautilusIconCanvasItem *icon
+ 
+ 		pixels_per_unit = EEL_CANVAS_ITEM (item)->canvas->pixels_per_unit;
+ 
+-		/* Compute icon rectangle. */
++		/* Compute raw and scaled icon rectangle. */
+ 		icon_rect.x0 = 0;
+ 		icon_rect.y0 = 0;
++		icon_rect_raw.x0 = 0;
++		icon_rect_raw.y0 = 0;
+ 		if (details->pixbuf == NULL) {
+ 			icon_rect.x1 = icon_rect.x0;
+ 			icon_rect.y1 = icon_rect.y0;
++			icon_rect_raw.x1 = icon_rect_raw.x0;
++			icon_rect_raw.y1 = icon_rect_raw.y0;
+ 		} else {
+-			icon_rect.x1 = icon_rect.x0 + gdk_pixbuf_get_width (details->pixbuf) / pixels_per_unit;
+-			icon_rect.y1 = icon_rect.y0 + gdk_pixbuf_get_height (details->pixbuf) / pixels_per_unit;
++			icon_rect_raw.x1 = icon_rect_raw.x0 + gdk_pixbuf_get_width (details->pixbuf);
++			icon_rect_raw.y1 = icon_rect_raw.y0 + gdk_pixbuf_get_height (details->pixbuf);
++			icon_rect.x1 = icon_rect_raw.x1 / pixels_per_unit;
++			icon_rect.y1 = icon_rect_raw.y1 / pixels_per_unit;
+ 		}
+ 		
+ 		/* Compute text rectangle. */
+@@ -2527,7 +2533,7 @@ nautilus_icon_canvas_item_ensure_bounds_up_to_date (NautilusIconCanvasItem *icon
+ 		eel_irect_union (&total_rect, &icon_rect, &text_rect);
+ 		eel_irect_union (&total_rect_for_layout, &icon_rect, &text_rect_for_layout);
+ 		eel_irect_union (&total_rect_for_entire_text, &icon_rect, &text_rect_for_entire_text);
+-		emblem_layout_reset (&emblem_layout, icon_item, icon_rect, is_rtl);
++		emblem_layout_reset (&emblem_layout, icon_item, icon_rect_raw, is_rtl);
+ 		while (emblem_layout_next (&emblem_layout, &emblem_pixbuf, &emblem_rect, is_rtl)) {
+ 			emblem_rect.x0 = floor (emblem_rect.x0 / pixels_per_unit);
+ 			emblem_rect.y0 = floor (emblem_rect.y0 / pixels_per_unit);
+--
+
+
+
--- nautilus-2.30.0.orig/debian/patches/series
+++ nautilus-2.30.0/debian/patches/series
@@ -0,0 +1,21 @@
+01_lpi.patch
+03_menu_entry.patch
+#10_location_titlebar.patch
+02_eel_libadd.patch
+10_load_session.patch
+11_no_session_delay.patch
+12_list-view_expand.patch
+15_translations_list_update.patch
+16_hide_unmount.patch
+18_signal_curtain.patch
+80_suppress_umount_in_ltsp.patch
+82_gnome-app-install.patch
+83_never_exec_nonexec_launchers.patch
+89_use_application_indicator.patch
+90_relibtoolize.patch
+#91_correct_rgba_use.patch
+91_git_middleclick_crash.patch
+92_git_emblems_cut.patch
+95_no-initial-fade.patch
+99_ltmain_as-needed.patch
+
--- nautilus-2.30.0.orig/debian/patches/12_list-view_expand.patch
+++ nautilus-2.30.0/debian/patches/12_list-view_expand.patch
@@ -0,0 +1,46 @@
+Revert upstream commits r12779 and r13045.
+We can do this because we fix GNOME #316087 in our GTK+ packages.
+Index: nautilus-2.29.92.1/src/file-manager/fm-list-view.c
+===================================================================
+--- nautilus-2.29.92.1.orig/src/file-manager/fm-list-view.c	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/src/file-manager/fm-list-view.c	2010-03-10 21:55:02.000000000 +0100
+@@ -58,7 +58,6 @@
+ #include <libnautilus-private/nautilus-view-factory.h>
+ #include <libnautilus-private/nautilus-clipboard.h>
+ #include <libnautilus-private/nautilus-cell-renderer-pixbuf-emblem.h>
+-#include <libnautilus-private/nautilus-cell-renderer-text-ellipsized.h>
+ 
+ struct FMListViewDetails {
+ 	GtkTreeView *tree_view;
+@@ -1478,7 +1477,7 @@
+ 
+ 	for (l = nautilus_columns; l != NULL; l = l->next) {
+ 		NautilusColumn *nautilus_column;
+-		int column_num;		
++		int column_num, font_size;
+ 		char *name;
+ 		char *label;
+ 		float xalign;
+@@ -1501,6 +1500,9 @@
+ 			view->details->pixbuf_cell = (GtkCellRendererPixbuf *)cell;
+ 			
+ 			view->details->file_name_column = gtk_tree_view_column_new ();
++			gtk_tree_view_column_set_expand (view->details->file_name_column, TRUE);
++			font_size = PANGO_PIXELS (pango_font_description_get_size (GTK_WIDGET(view)->style->font_desc));
++			gtk_tree_view_column_set_min_width (view->details->file_name_column, 20*font_size);
+ 			g_object_ref_sink (view->details->file_name_column);
+ 			view->details->file_name_column_num = column_num;
+ 			
+@@ -1521,7 +1523,11 @@
+ 							     "pixbuf_emblem", FM_LIST_MODEL_SMALLEST_EMBLEM_COLUMN,
+ 							     NULL);
+ 			
+-			cell = nautilus_cell_renderer_text_ellipsized_new ();
++			cell = gtk_cell_renderer_text_new ();
++			g_object_set (cell,
++				      "ellipsize", PANGO_ELLIPSIZE_END,
++				      "ellipsize-set", TRUE,
++				      NULL);
+ 			view->details->file_name_cell = (GtkCellRendererText *)cell;
+ 			g_signal_connect (cell, "edited", G_CALLBACK (cell_renderer_edited), view);
+ 			g_signal_connect (cell, "editing-canceled", G_CALLBACK (cell_renderer_editing_canceled), view);
--- nautilus-2.30.0.orig/debian/patches/10_location_titlebar.patch
+++ nautilus-2.30.0/debian/patches/10_location_titlebar.patch
@@ -0,0 +1,193 @@
+Debian #413018
+GNOME #142087
+Option to show the full location in the title bar
+Index: nautilus-2.20.0/libnautilus-private/apps_nautilus_preferences.schemas.in
+===================================================================
+--- nautilus-2.20.0.orig/libnautilus-private/apps_nautilus_preferences.schemas.in	2007-09-18 08:51:48.000000000 +0200
++++ nautilus-2.20.0/libnautilus-private/apps_nautilus_preferences.schemas.in	2007-09-24 11:39:14.871645609 +0200
+@@ -720,6 +720,21 @@
+       </locale>
+     </schema>
+          
++     <schema>
++      <key>/schemas/apps/nautilus/preferences/location_in_title_bar</key>
++      <applyto>/apps/nautilus/preferences/location_in_title_bar</applyto>
++      <owner>nautilus</owner>
++      <type>bool</type>
++      <default>false</default>
++      <locale name="C">
++         <short>Show current location in title bar</short>
++         <long>
++             If set to true, windows will have the full location displayed
++             in their title bar. Otherwise it will only show the folder name.
++         </long>
++      </locale>
++    </schema>
++
+     <schema>
+       <key>/schemas/apps/nautilus/preferences/start_with_sidebar</key>
+       <applyto>/apps/nautilus/preferences/start_with_sidebar</applyto>
+Index: nautilus-2.20.0/libnautilus-private/nautilus-global-preferences.c
+===================================================================
+--- nautilus-2.20.0.orig/libnautilus-private/nautilus-global-preferences.c	2007-06-27 09:12:34.000000000 +0200
++++ nautilus-2.20.0/libnautilus-private/nautilus-global-preferences.c	2007-09-24 11:39:14.875645837 +0200
+@@ -378,6 +378,10 @@
+ 	  PREFERENCE_BOOLEAN,
+ 	  GINT_TO_POINTER (TRUE)
+ 	},
++	{ NAUTILUS_PREFERENCES_LOCATION_IN_TITLE_BAR,
++	  PREFERENCE_BOOLEAN,
++	  GINT_TO_POINTER (TRUE)
++	},
+ 	{ NAUTILUS_PREFERENCES_START_WITH_SIDEBAR,
+ 	  PREFERENCE_BOOLEAN,
+ 	  GINT_TO_POINTER (TRUE)
+Index: nautilus-2.20.0/libnautilus-private/nautilus-global-preferences.h
+===================================================================
+--- nautilus-2.20.0.orig/libnautilus-private/nautilus-global-preferences.h	2007-06-27 09:12:34.000000000 +0200
++++ nautilus-2.20.0/libnautilus-private/nautilus-global-preferences.h	2007-09-24 11:39:14.875645837 +0200
+@@ -84,6 +84,7 @@
+ #define NAUTILUS_PREFERENCES_START_WITH_LOCATION_BAR		"preferences/start_with_location_bar"
+ #define NAUTILUS_PREFERENCES_ALWAYS_USE_LOCATION_ENTRY		"preferences/always_use_location_entry"
+ #define NAUTILUS_PREFERENCES_START_WITH_STATUS_BAR		"preferences/start_with_status_bar"
++#define NAUTILUS_PREFERENCES_LOCATION_IN_TITLE_BAR            "preferences/location_in_title_bar"
+ #define NAUTILUS_PREFERENCES_START_WITH_SIDEBAR		 	"preferences/start_with_sidebar"
+ #define NAUTILUS_PREFERENCES_START_WITH_TOOLBAR			"preferences/start_with_toolbar"
+ #define NAUTILUS_PREFERENCES_SIDE_PANE_VIEW                     "preferences/side_pane_view"
+Index: nautilus-2.20.0/src/nautilus-navigation-window.c
+===================================================================
+--- nautilus-2.20.0.orig/src/nautilus-navigation-window.c	2007-09-03 16:49:27.000000000 +0200
++++ nautilus-2.20.0/src/nautilus-navigation-window.c	2007-09-24 11:39:14.875645837 +0200
+@@ -914,20 +914,25 @@
+ static gboolean
+ real_set_title (NautilusWindow *window, const char *title)
+ {
+-	char *full_title;
+-	char *window_title;
+ 	gboolean changed;
+ 
+ 	changed = EEL_CALL_PARENT_WITH_RETURN_VALUE
+ 		(NAUTILUS_WINDOW_CLASS, set_title, (window, title));
+ 
+ 	if (changed) {
+-		full_title = g_strdup_printf (_("%s - File Browser"), title);
++		char *full_title;
++		char *window_title;
++		char *location_titlebar;
++
++		location_titlebar = nautilus_window_set_location_in_titlebar (window, title);
++
++		full_title = g_strdup_printf (_("%s - File Browser"), location_titlebar);
+ 
+ 		window_title = eel_str_middle_truncate (full_title, MAX_TITLE_LENGTH);
+ 		gtk_window_set_title (GTK_WINDOW (window), window_title);
+ 		g_free (window_title);
+ 		g_free (full_title);
++		g_free (location_titlebar);
+ 	}
+ 
+ 	return changed;
+Index: nautilus-2.20.0/src/nautilus-spatial-window.c
+===================================================================
+--- nautilus-2.20.0.orig/src/nautilus-spatial-window.c	2007-09-10 08:56:43.000000000 +0200
++++ nautilus-2.20.0/src/nautilus-spatial-window.c	2007-09-24 11:39:14.875645837 +0200
+@@ -430,10 +430,14 @@
+ 		gtk_window_set_title (GTK_WINDOW (window), _("Nautilus"));
+ 	} else if (changed) {
+ 		char *window_title;
++		char *location_titlebar;
+ 
+-		window_title = eel_str_middle_truncate (title, MAX_TITLE_LENGTH);
++		location_titlebar = nautilus_window_set_location_in_titlebar (window, title);
++
++		window_title = eel_str_middle_truncate (location_titlebar, MAX_TITLE_LENGTH);
+ 		gtk_window_set_title (GTK_WINDOW (window), window_title);
+ 		g_free (window_title);
++		g_free (location_titlebar);
+ 	}
+ 
+ 	return changed;
+--- nautilus-2.22.0/src/nautilus-window.c.old	2008-03-17 10:49:47.000000000 +0100
++++ nautilus-2.22.0/src/nautilus-window.c	2008-03-17 11:11:29.000000000 +0100
+@@ -1709,3 +1709,71 @@
+ {
+ 	return (nautilus_window_get_window_type (window) != NAUTILUS_WINDOW_DESKTOP);
+ }
++
++char *
++nautilus_window_set_location_in_titlebar (NautilusWindow *window, const char *title)
++{
++	char *location_title;
++	GFile *uri = NULL;
++	char *location = NULL;
++	const char *path;
++	const char *scheme = NULL;
++	const char *display_location;
++	const char *tmp_location;
++	const char *location_prefix;
++	int tmp_location_len;
++	int tilde = 0;
++
++	location_title = g_strdup (title);
++
++	if (eel_preferences_get_boolean (NAUTILUS_PREFERENCES_LOCATION_IN_TITLE_BAR) != TRUE
++	    || (uri = nautilus_window_get_location (window)) == NULL
++	    || (location = g_file_get_parse_name (uri)) == NULL
++	    || location[0] == 0
++	    || location[1] == 0)
++		goto done;
++
++	if ((tmp_location = g_get_home_dir()) == NULL) {
++		display_location = location;
++		goto construct_title;
++	}
++
++	if (strcmp (location, tmp_location) == 0) {
++		tilde = 1;
++		display_location = "";
++		goto construct_title;
++	}
++	
++	tmp_location_len = strlen (tmp_location);
++	if (eel_str_has_prefix (location, tmp_location) == FALSE
++	    || location[tmp_location_len] != G_DIR_SEPARATOR) {
++		display_location = location;
++		goto construct_title;
++	}
++
++	tilde = 1;
++	display_location = location + tmp_location_len;
++
++	construct_title:
++
++		g_free (location_title);
++
++		if(scheme != NULL)
++			location_prefix = scheme;
++		else if(tilde == 1)
++			location_prefix = "~";
++		else
++			location_prefix = "";
++
++		location_title = g_strdup_printf ("%s (%s%s%s)", title, location_prefix, scheme != NULL ? " - " : "", display_location);
++
++	done:
++		if (uri != NULL)
++			g_object_unref (uri);
++
++		if (location != NULL)
++			g_free (location);
++
++		return (location_title);
++}
++
+--- nautilus-2.22.0/src/nautilus-window.h.old	2008-03-17 10:49:50.000000000 +0100
++++ nautilus-2.22.0/src/nautilus-window.h	2008-03-17 10:51:45.000000000 +0100
+@@ -152,5 +152,7 @@
+ void             nautilus_window_add_extra_location_widget (NautilusWindow  *window,
+                                                             GtkWidget       *widget);
+ gboolean         nautilus_window_has_menubar_and_statusbar (NautilusWindow *window);
++char *           nautilus_window_set_location_in_titlebar (NautilusWindow *window,
++                                                           const char        *title);
+ 
+ #endif
--- nautilus-2.30.0.orig/debian/patches/83_never_exec_nonexec_launchers.patch
+++ nautilus-2.30.0/debian/patches/83_never_exec_nonexec_launchers.patch
@@ -0,0 +1,53 @@
+Description: never allow launching of untrusted launchers.  Implements the
+ Ubuntu "Execute-Permission Bit Required" from
+ https://wiki.ubuntu.com/SecurityTeam/Policies#Execute-Permission%20Bit%20Required
+Author: Kees Cook <kees@ubuntu.com>
+
+Index: nautilus-2.29.92.1/libnautilus-private/nautilus-mime-actions.c
+===================================================================
+--- nautilus-2.29.92.1.orig/libnautilus-private/nautilus-mime-actions.c	2010-03-10 21:55:06.000000000 +0100
++++ nautilus-2.29.92.1/libnautilus-private/nautilus-mime-actions.c	2010-03-10 21:55:07.000000000 +0100
+@@ -1672,12 +1672,14 @@
+ 					       GTK_BUTTONS_NONE,
+ 					       primary,
+ 					       secondary);
++		if (nautilus_file_get_ctime(file) < 1256817600L ) {
+ 		gtk_dialog_add_button (GTK_DIALOG (dialog),
+ 				       _("_Launch Anyway"), RESPONSE_RUN);
+ 		if (nautilus_file_can_set_permissions (file)) {
+ 			gtk_dialog_add_button (GTK_DIALOG (dialog),
+ 					       _("Mark as _Trusted"), RESPONSE_MARK_TRUSTED);
+ 		}
++		}
+ 		gtk_dialog_add_button (GTK_DIALOG (dialog),
+ 				       GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL);
+ 		gtk_dialog_set_default_response (GTK_DIALOG (dialog), GTK_RESPONSE_CANCEL);
+Index: nautilus-2.29.92.1/libnautilus-private/nautilus-file.c
+===================================================================
+--- nautilus-2.29.92.1.orig/libnautilus-private/nautilus-file.c	2010-03-10 21:55:05.000000000 +0100
++++ nautilus-2.29.92.1/libnautilus-private/nautilus-file.c	2010-03-10 21:55:07.000000000 +0100
+@@ -4860,6 +4860,12 @@
+ 	return file->details->mtime;
+ }
+ 
++time_t
++nautilus_file_get_ctime (NautilusFile *file)
++{
++	return file->details->ctime;
++}
++
+ 
+ static void
+ set_attributes_get_info_callback (GObject *source_object,
+Index: nautilus-2.29.92.1/libnautilus-private/nautilus-file.h
+===================================================================
+--- nautilus-2.29.92.1.orig/libnautilus-private/nautilus-file.h	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/libnautilus-private/nautilus-file.h	2010-03-10 21:55:07.000000000 +0100
+@@ -167,6 +167,7 @@
+ gboolean                nautilus_file_can_get_size                      (NautilusFile                   *file);
+ goffset                 nautilus_file_get_size                          (NautilusFile                   *file);
+ time_t                  nautilus_file_get_mtime                         (NautilusFile                   *file);
++time_t                  nautilus_file_get_ctime                         (NautilusFile                   *file);
+ GFileType               nautilus_file_get_file_type                     (NautilusFile                   *file);
+ char *                  nautilus_file_get_mime_type                     (NautilusFile                   *file);
+ gboolean                nautilus_file_is_mime_type                      (NautilusFile                   *file,
--- nautilus-2.30.0.orig/debian/patches/10_load_session.patch
+++ nautilus-2.30.0/debian/patches/10_load_session.patch
@@ -0,0 +1,15 @@
+Index: nautilus-2.29.92.1/cut-n-paste-code/libegg/eggsmclient.c
+===================================================================
+--- nautilus-2.29.92.1.orig/cut-n-paste-code/libegg/eggsmclient.c	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/cut-n-paste-code/libegg/eggsmclient.c	2010-03-10 21:55:00.000000000 +0100
+@@ -240,6 +240,10 @@
+     { "sm-config-prefix", 0, G_OPTION_FLAG_HIDDEN,
+       G_OPTION_ARG_STRING, &sm_config_prefix,
+       NULL, NULL },
++    /* Compatibility with the old nautilus code */
++    { "load-session", 0, G_OPTION_FLAG_HIDDEN,
++      G_OPTION_ARG_FILENAME, &sm_client_state_file,
++      NULL, NULL },
+     { NULL }
+   };
+   GOptionGroup *group;
--- nautilus-2.30.0.orig/debian/patches/03_menu_entry.patch
+++ nautilus-2.30.0/debian/patches/03_menu_entry.patch
@@ -0,0 +1,51 @@
+#
+# Description: simplify menus by not listing some entries by default
+#
+Index: nautilus-2.29.92.1/data/nautilus-file-management-properties.desktop.in
+===================================================================
+--- nautilus-2.29.92.1.orig/data/nautilus-file-management-properties.desktop.in	2010-03-10 15:07:08.000000000 +0100
++++ nautilus-2.29.92.1/data/nautilus-file-management-properties.desktop.in	2010-03-10 21:54:57.000000000 +0100
+@@ -8,6 +8,7 @@
+ StartupNotify=true
+ Categories=GNOME;GTK;Settings;X-GNOME-PersonalSettings;
+ OnlyShowIn=GNOME;
++NoDisplay=true
+ X-GNOME-Bugzilla-Bugzilla=GNOME
+ X-GNOME-Bugzilla-Product=nautilus
+ X-GNOME-Bugzilla-Component=Preferences
+Index: nautilus-2.29.92.1/data/nautilus-file-management-properties.desktop.in.in
+===================================================================
+--- nautilus-2.29.92.1.orig/data/nautilus-file-management-properties.desktop.in.in	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/data/nautilus-file-management-properties.desktop.in.in	2010-03-10 21:54:57.000000000 +0100
+@@ -8,6 +8,7 @@
+ StartupNotify=true
+ Categories=GNOME;GTK;Settings;X-GNOME-PersonalSettings;
+ OnlyShowIn=GNOME;
++NoDisplay=true
+ X-GNOME-Bugzilla-Bugzilla=GNOME
+ X-GNOME-Bugzilla-Product=nautilus
+ X-GNOME-Bugzilla-Component=Preferences
+Index: nautilus-2.29.92.1/data/nautilus-browser.desktop.in
+===================================================================
+--- nautilus-2.29.92.1.orig/data/nautilus-browser.desktop.in	2010-03-10 15:07:08.000000000 +0100
++++ nautilus-2.29.92.1/data/nautilus-browser.desktop.in	2010-03-10 21:54:57.000000000 +0100
+@@ -7,6 +7,7 @@
+ Terminal=false
+ StartupNotify=true
+ Type=Application
++NoDisplay=true
+ Categories=GNOME;GTK;System;Utility;Core;
+ OnlyShowIn=GNOME;
+ X-GNOME-Bugzilla-Bugzilla=GNOME
+Index: nautilus-2.29.92.1/data/nautilus-browser.desktop.in.in
+===================================================================
+--- nautilus-2.29.92.1.orig/data/nautilus-browser.desktop.in.in	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/data/nautilus-browser.desktop.in.in	2010-03-10 21:54:57.000000000 +0100
+@@ -7,6 +7,7 @@
+ Terminal=false
+ StartupNotify=true
+ Type=Application
++NoDisplay=true
+ Categories=GNOME;GTK;System;Utility;Core;
+ OnlyShowIn=GNOME;
+ X-GNOME-Bugzilla-Bugzilla=GNOME
--- nautilus-2.30.0.orig/debian/patches/89_use_application_indicator.patch
+++ nautilus-2.30.0/debian/patches/89_use_application_indicator.patch
@@ -0,0 +1,217 @@
+Index: nautilus-2.29.92.1/configure.in
+===================================================================
+--- nautilus-2.29.92.1.orig/configure.in	2010-03-10 21:54:56.000000000 +0100
++++ nautilus-2.29.92.1/configure.in	2010-03-10 21:55:08.000000000 +0100
+@@ -11,7 +11,7 @@
+ m4_define(exempi_minver,               1.99.2)
+ m4_define(exempi_minver_newapi,        1.99.5)
+ m4_define(gail_minver,                 0.16)
+-
++m4_define(appindicator_minver,         0.0.2)
+ 
+ dnl 1. If the library code has changed at all since last release, then increment revision.
+ dnl 2. If any interfaces have been added, then increment current and set revision to 0.
+@@ -235,6 +235,28 @@
+ 
+ dnl ==========================================================================
+ 
++AM_CONDITIONAL(HAVE_APP_INDICATOR, false)
++
++AC_ARG_ENABLE(appindicator,
++	AC_HELP_STRING([--disable-appindicator],
++			[build without appindicator support]))
++
++msg_appindicator=no
++if test "x$enable_appindicator" != "xno"; then
++	PKG_CHECK_MODULES(APP_INDICATOR,
++		appindicator-0.1 >= appindicator_minver, [
++                     AM_CONDITIONAL(HAVE_APP_INDICATOR, 1)
++                     AC_DEFINE(HAVE_APP_INDICATOR, 1, [Have AppIndicator])
++                     ]
++                     msg_appindicator=yes,
++                     [AM_CONDITIONAL(HAVE_APP_INDICATOR, 0)
++                     ])
++   		AC_SUBST(APP_INDICATOR_CFLAGS)
++   		AC_SUBST(APP_INDICATOR_LIBS)
++fi			
++
++dnl ==========================================================================
++
+ dnl Turn on the additional warnings last, so -Werror doesn't affect other tests.
+ 
+ AC_ARG_ENABLE(more-warnings,
+@@ -408,7 +430,8 @@
+ 	compiler:		${CC}
+ 	xmp support:		$msg_xmp
+ 	PackageKit support:     $msg_packagekit
+-
++	AppIndicator support:	$msg_appindicator
++	
+ 	profiling support:      ${profiling_support}
+ 	nautilus-extension documentation: ${enable_gtk_doc}
+ "
+Index: nautilus-2.29.92.1/libnautilus-private/Makefile.am
+===================================================================
+--- nautilus-2.29.92.1.orig/libnautilus-private/Makefile.am	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/libnautilus-private/Makefile.am	2010-03-10 21:55:08.000000000 +0100
+@@ -10,6 +10,7 @@
+ 	$(DISABLE_DEPRECATED_CFLAGS)			\
+ 	$(TRACKER_CFLAGS)				\
+ 	$(BEAGLE_CFLAGS)				\
++	$(APP_INDICATOR_CFLAGS)				\
+ 	-DDATADIR=\""$(datadir)"\" 			\
+ 	-DSYSCONFDIR=\""$(sysconfdir)"\" 			\
+ 	-DNAUTILUS_DATADIR=\""$(datadir)/nautilus"\" 	\
+@@ -32,6 +33,7 @@
+ 	$(top_builddir)/eel/libeel-2.la \
+ 	$(top_builddir)/libnautilus-extension/libnautilus-extension.la \
+ 	$(CORE_LIBS)			\
++	$(APP_INDICATOR_LIBS)		\
+ 	$(NULL)
+ 
+ marshal_sources = \
+Index: nautilus-2.29.92.1/libnautilus-private/Makefile.in
+===================================================================
+--- nautilus-2.29.92.1.orig/libnautilus-private/Makefile.in	2010-03-10 15:07:03.000000000 +0100
++++ nautilus-2.29.92.1/libnautilus-private/Makefile.in	2010-03-10 21:55:08.000000000 +0100
+@@ -169,6 +169,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -353,6 +355,7 @@
+ 	$(DISABLE_DEPRECATED_CFLAGS)			\
+ 	$(TRACKER_CFLAGS)				\
+ 	$(BEAGLE_CFLAGS)				\
++	$(APP_INDICATOR_CFLAGS)				\
+ 	-DDATADIR=\""$(datadir)"\" 			\
+ 	-DSYSCONFDIR=\""$(sysconfdir)"\" 			\
+ 	-DNAUTILUS_DATADIR=\""$(datadir)/nautilus"\" 	\
+@@ -375,6 +378,7 @@
+ 	$(top_builddir)/eel/libeel-2.la \
+ 	$(top_builddir)/libnautilus-extension/libnautilus-extension.la \
+ 	$(CORE_LIBS)			\
++	$(APP_INDICATOR_LIBS)		\
+ 	$(NULL)
+ 
+ marshal_sources = \
+Index: nautilus-2.29.92.1/libnautilus-private/nautilus-progress-info.c
+===================================================================
+--- nautilus-2.29.92.1.orig/libnautilus-private/nautilus-progress-info.c	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/libnautilus-private/nautilus-progress-info.c	2010-03-10 21:55:08.000000000 +0100
+@@ -30,6 +30,11 @@
+ #include <eel/eel-glib-extensions.h>
+ #include "nautilus-progress-info.h"
+ 
++
++#ifdef HAVE_APP_INDICATOR
++#include <libappindicator/app-indicator.h>
++#endif
++
+ enum {
+   CHANGED,
+   PROGRESS_CHANGED,
+@@ -77,7 +82,11 @@
+ 
+ static GList *active_progress_infos = NULL;
+ 
++#ifdef HAVE_APP_INDICATOR
++static AppIndicator *indicator = NULL;
++#else
+ static GtkStatusIcon *status_icon = NULL;
++#endif
+ static int n_progress_ops = 0;
+ 
+ 
+@@ -193,6 +202,14 @@
+ 	return TRUE;
+ }
+ 
++#ifdef HAVE_APP_INDICATOR
++static void
++indicator_icon_activate_cb (AppIndicator *icon,
++			 GtkWidget *progress_window)
++{
++	gtk_window_present (GTK_WINDOW (progress_window));
++}
++#else
+ static void
+ status_icon_activate_cb (GtkStatusIcon *icon,
+ 			 GtkWidget *progress_window)
+@@ -203,12 +220,16 @@
+ 		gtk_window_present (GTK_WINDOW (progress_window));
+ 	}
+ }
++#endif
+ 
+ static GtkWidget *
+ get_progress_window (void)
+ {
+ 	static GtkWidget *progress_window = NULL;
+ 	GtkWidget *vbox;
++#ifdef HAVE_APP_INDICATOR	
++	GtkWidget *indicator_menu, *indicator_menuitem;
++#endif
+ 	
+ 	if (progress_window != NULL) {
+ 		return progress_window;
+@@ -240,13 +261,27 @@
+ 			  "delete_event",
+ 			  (GCallback)delete_event, NULL);
+ 
++#ifdef HAVE_APP_INDICATOR
++  	indicator = app_indicator_new ("nautilus", "system-file-manager",
++                                 APP_INDICATOR_CATEGORY_APPLICATION_STATUS);
++
++  	indicator_menu = gtk_menu_new();
++  	indicator_menuitem = gtk_menu_item_new_with_label (_("Show copy dialog"));
++  	gtk_menu_shell_append (indicator_menu, indicator_menuitem);
++	g_signal_connect (indicator_menuitem, "activate",
++			  (GCallback)indicator_icon_activate_cb,
++			  progress_window);  	
++  	app_indicator_set_status (indicator, APP_INDICATOR_STATUS_PASSIVE);
++	app_indicator_set_menu (indicator, GTK_MENU (indicator_menu));
++	gtk_widget_show_all (indicator_menu);
++#else	
+ 	status_icon = gtk_status_icon_new_from_icon_name ("system-file-manager");
+ 	g_signal_connect (status_icon, "activate",
+ 			  (GCallback)status_icon_activate_cb,
+ 			  progress_window);
+ 
+ 	gtk_status_icon_set_visible (status_icon, FALSE);
+-	
++#endif	
+ 	return progress_window;
+ }
+ 
+@@ -296,6 +331,18 @@
+ 	}
+ }
+ 
++#ifdef HAVE_APP_INDICATOR
++static void
++update_status_icon_and_window (void)
++{
++	if (n_progress_ops == 0) {
++		app_indicator_set_status (indicator, APP_INDICATOR_STATUS_PASSIVE);
++		gtk_widget_hide (get_progress_window ());
++	} else {
++  		app_indicator_set_status (indicator, APP_INDICATOR_STATUS_ACTIVE);
++	}
++}
++#else
+ static void
+ update_status_icon_and_window (void)
+ {
+@@ -315,6 +362,7 @@
+ 		gtk_status_icon_set_visible (status_icon, TRUE);
+ 	}
+ }
++#endif
+ 
+ static void
+ op_finished (ProgressWidgetData *data)
--- nautilus-2.30.0.orig/debian/patches/18_signal_curtain.patch
+++ nautilus-2.30.0/debian/patches/18_signal_curtain.patch
@@ -0,0 +1,130 @@
+Index: nautilus-2.29.92.1/src/file-manager/fm-desktop-icon-view.c
+===================================================================
+--- nautilus-2.29.92.1.orig/src/file-manager/fm-desktop-icon-view.c	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/src/file-manager/fm-desktop-icon-view.c	2010-03-10 21:55:04.000000000 +0100
+@@ -42,6 +42,8 @@
+ #include <fcntl.h>
+ #include <gdk/gdkx.h>
+ #include <glib/gi18n.h>
++#include <dbus/dbus-glib.h>
++#include <dbus/dbus-glib-bindings.h>
+ #include <libnautilus-private/nautilus-desktop-icon-file.h>
+ #include <libnautilus-private/nautilus-directory-background.h>
+ #include <libnautilus-private/nautilus-directory-notify.h>
+@@ -523,6 +525,41 @@
+ }
+ 
+ static void
++end_loading (FMDesktopIconView *desktop_icon_view, gboolean all_files_seen)
++{
++	DBusGConnection *connection;
++	DBusGProxy      *proxy;
++	GError          *error = NULL;
++
++	connection = dbus_g_bus_get (DBUS_BUS_SYSTEM, &error);
++
++	if (error) {
++		g_warning ("%s", error->message);
++		g_error_free(error);
++		return;
++	}
++
++	/* Get the current session object */
++	proxy = dbus_g_proxy_new_for_name (connection,
++					   "com.ubuntu.BootCurtain",
++					   "/com/ubuntu/BootCurtain",
++					   "com.ubuntu.BootCurtain");
++
++	if (!proxy) {
++		g_warning ("Unable to connect to BootCurtain");
++		dbus_g_connection_unref (connection);
++		return;
++	}
++
++	dbus_g_proxy_call_no_reply (proxy,
++				    "SignalLoaded",
++				    G_TYPE_STRING, "nautilus",
++				    G_TYPE_INVALID);
++
++	g_object_unref (proxy);
++}
++
++static void
+ fm_desktop_icon_view_init (FMDesktopIconView *desktop_icon_view)
+ {
+ 	NautilusIconContainer *icon_container;
+@@ -600,6 +637,8 @@
+ 	default_zoom_level_changed (desktop_icon_view);
+ 	fm_desktop_icon_view_update_icon_container_fonts (desktop_icon_view);
+ 
++	g_signal_connect (desktop_icon_view, "end_loading", G_CALLBACK (end_loading), NULL);
++
+ 	eel_preferences_add_callback (NAUTILUS_PREFERENCES_LOCKDOWN_COMMAND_LINE,
+ 				      lockdown_disable_command_line_changed_callback,
+ 				      desktop_icon_view);
+Index: nautilus-2.29.92.1/src/nautilus-main.c
+===================================================================
+--- nautilus-2.29.92.1.orig/src/nautilus-main.c	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/src/nautilus-main.c	2010-03-10 21:55:04.000000000 +0100
+@@ -315,6 +315,41 @@
+ 	setup_debug_log_glog ();
+ }
+ 
++static void
++setup_boot_curtain (void)
++{
++	DBusGConnection *connection;
++	DBusGProxy      *proxy;
++	GError          *error = NULL;
++
++	connection = dbus_g_bus_get (DBUS_BUS_SYSTEM, &error);
++
++	if (error) {
++		g_warning ("%s", error->message);
++		g_error_free(error);
++		return;
++	}
++
++	/* Get the current session object */
++	proxy = dbus_g_proxy_new_for_name (connection,
++					   "com.ubuntu.BootCurtain",
++					   "/com/ubuntu/BootCurtain",
++					   "com.ubuntu.BootCurtain");
++
++	if (!proxy) {
++		g_warning ("Unable to connect to BootCurtain");
++		dbus_g_connection_unref (connection);
++		return;
++	}
++
++	dbus_g_proxy_call_no_reply (proxy,
++				    "AddWaitSignal",
++				    G_TYPE_STRING, "nautilus",
++				    G_TYPE_INVALID);
++
++	g_object_unref (proxy);
++}
++
+ int
+ main (int argc, char *argv[])
+ {
+@@ -429,7 +464,7 @@
+ 		g_print ("GNOME nautilus " PACKAGE_VERSION "\n");
+ 		return 0;
+ 	}
+-	
++
+ #ifdef HAVE_EXEMPI
+ 	xmp_init();
+ #endif
+@@ -473,6 +508,10 @@
+ 	 */
+ 	nautilus_global_preferences_init ();
+ 
++	if (eel_preferences_get_boolean (NAUTILUS_PREFERENCES_SHOW_DESKTOP)) {
++		setup_boot_curtain ();
++	}
++	
+ 	/* exit_with_last_window being FALSE, nautilus can run without window. */
+ 	exit_with_last_window =
+ 		eel_preferences_get_boolean (NAUTILUS_PREFERENCES_EXIT_WITH_LAST_WINDOW);
--- nautilus-2.30.0.orig/debian/patches/80_suppress_umount_in_ltsp.patch
+++ nautilus-2.30.0/debian/patches/80_suppress_umount_in_ltsp.patch
@@ -0,0 +1,29 @@
+# Description: don't list volumes option on ltsp configs
+# Ubuntu: https://launchpad.net/bugs/220564
+#
+Index: nautilus-2.29.92.1/libnautilus-private/nautilus-file.c
+===================================================================
+--- nautilus-2.29.92.1.orig/libnautilus-private/nautilus-file.c	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/libnautilus-private/nautilus-file.c	2010-03-10 21:55:05.000000000 +0100
+@@ -1018,6 +1018,10 @@
+ {
+ 	g_return_val_if_fail (NAUTILUS_IS_FILE (file), FALSE);
+ 
++	if (getenv("LTSP_CLIENT")) {
++		return FALSE;
++	}
++
+ 	return file->details->can_unmount ||
+ 		(file->details->mount != NULL &&
+ 		 g_mount_can_unmount (file->details->mount));
+@@ -1028,6 +1032,10 @@
+ {
+ 	g_return_val_if_fail (NAUTILUS_IS_FILE (file), FALSE);
+ 
++	if (getenv("LTSP_CLIENT")) {
++		return FALSE;
++	}
++
+ 	return file->details->can_eject ||
+ 		(file->details->mount != NULL &&
+ 		 g_mount_can_eject (file->details->mount));
--- nautilus-2.30.0.orig/debian/patches/11_no_session_delay.patch
+++ nautilus-2.30.0/debian/patches/11_no_session_delay.patch
@@ -0,0 +1,13 @@
+Index: nautilus-2.29.92.1/data/nautilus.desktop.in.in
+===================================================================
+--- nautilus-2.29.92.1.orig/data/nautilus.desktop.in.in	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/data/nautilus.desktop.in.in	2010-03-10 21:55:01.000000000 +0100
+@@ -11,7 +11,7 @@
+ X-GNOME-Bugzilla-Product=nautilus
+ X-GNOME-Bugzilla-Component=general
+ X-GNOME-Bugzilla-Version=@VERSION@
+-X-GNOME-Autostart-Phase=Desktop
++#X-GNOME-Autostart-Phase=Desktop
+ X-GNOME-Autostart-Notify=true
+ X-GNOME-AutoRestart=true
+ X-GNOME-Provides=filemanager
--- nautilus-2.30.0.orig/debian/patches/91_correct_rgba_use.patch
+++ nautilus-2.30.0/debian/patches/91_correct_rgba_use.patch
@@ -0,0 +1,22 @@
+=== modified file 'libnautilus-private/nautilus-icon-container.c'
+Index: nautilus-2.29.92.1/libnautilus-private/nautilus-icon-container.c
+===================================================================
+--- nautilus-2.29.92.1.orig/libnautilus-private/nautilus-icon-container.c	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/libnautilus-private/nautilus-icon-container.c	2010-03-10 21:55:11.000000000 +0100
+@@ -8707,11 +8707,15 @@
+ 
+ void
+ nautilus_icon_container_set_is_desktop (NautilusIconContainer *container,
+-					   gboolean is_desktop)
++					gboolean is_desktop)
+ {
+ 	g_return_if_fail (NAUTILUS_IS_ICON_CONTAINER (container));
+ 
+ 	container->details->is_desktop = is_desktop;
++
++        if (container->details->is_desktop) {
++                gtk_widget_set_colormap (GTK_WIDGET (container), gdk_screen_get_system_colormap (gtk_widget_get_screen (GTK_WIDGET (container))));
++        }
+ }
+ 
+ void
--- nautilus-2.30.0.orig/debian/patches/91_git_middleclick_crash.patch
+++ nautilus-2.30.0/debian/patches/91_git_middleclick_crash.patch
@@ -0,0 +1,52 @@
+From 263051df98aace0b59fb2bd1772711dceba8e404 Mon Sep 17 00:00:00 2001
+From: Marcus Carlson <marcus@mejlamej.nu>
+Date: Wed, 07 Apr 2010 07:55:49 +0000
+Subject: Fix crash when middle click on an invalid network share in Places
+
+https://bugzilla.gnome.org/show_bug.cgi?id=579627
+---
+diff --git a/src/nautilus-window-manage-views.c b/src/nautilus-window-manage-views.c
+index ac3d6bc..b57b973 100644
+--- a/src/nautilus-window-manage-views.c
++++ b/src/nautilus-window-manage-views.c
+@@ -1172,20 +1172,25 @@ got_file_info_for_view_selection_callback (NautilusFile *file,
+ 			 *   cancel_viewed_file_changed_callback (slot);
+ 			 * at this point, or in end_location_change()
+ 			 */
+-
+-			/* We disconnected this, so we need to re-connect it */
+-			viewed_file = nautilus_file_get (slot->location);
+-			nautilus_window_slot_set_viewed_file (slot, viewed_file);
+-			nautilus_file_monitor_add (viewed_file, &slot->viewed_file, 0);
+-			g_signal_connect_object (viewed_file, "changed",
+-						 G_CALLBACK (viewed_file_changed_callback), slot, 0);
+-			nautilus_file_unref (viewed_file);
++			/* We're missing a previous location (if opened location
++			 * in a new tab) so close it and return */
++			if (slot->location == NULL) {
++				nautilus_window_slot_close (slot);
++			} else {
++				/* We disconnected this, so we need to re-connect it */
++				viewed_file = nautilus_file_get (slot->location);
++				nautilus_window_slot_set_viewed_file (slot, viewed_file);
++				nautilus_file_monitor_add (viewed_file, &slot->viewed_file, 0);
++				g_signal_connect_object (viewed_file, "changed",
++							 G_CALLBACK (viewed_file_changed_callback), slot, 0);
++				nautilus_file_unref (viewed_file);
+ 			
+-			/* Leave the location bar showing the bad location that the user
+-			 * typed (or maybe achieved by dragging or something). Many times
+-			 * the mistake will just be an easily-correctable typo. The user
+-			 * can choose "Refresh" to get the original URI back in the location bar.
+-			 */
++				/* Leave the location bar showing the bad location that the user
++				 * typed (or maybe achieved by dragging or something). Many times
++				 * the mistake will just be an easily-correctable typo. The user
++				 * can choose "Refresh" to get the original URI back in the location bar.
++				 */
++			}
+ 		}
+ 	}
+ 	
+
+
--- nautilus-2.30.0.orig/debian/patches/01_lpi.patch
+++ nautilus-2.30.0/debian/patches/01_lpi.patch
@@ -0,0 +1,50 @@
+# Description: launchpad integration items
+# UbuntuSpecific: launchpad
+#
+Index: nautilus-2.29.92.1/configure.in
+===================================================================
+--- nautilus-2.29.92.1.orig/configure.in	2010-03-10 15:03:31.000000000 +0100
++++ nautilus-2.29.92.1/configure.in	2010-03-10 21:54:56.000000000 +0100
+@@ -333,7 +333,7 @@
+ AC_SUBST(LIBNAUTILUS_EXTENSION_LIBS)
+ 
+ dnl core nautilus
+-CORE_MODULES="glib-2.0 gnome-desktop-2.0 gthread-2.0 gio-2.0 gio-unix-2.0 unique-1.0 dbus-glib-1 gail gconf-2.0 libxml-2.0 $EXTRA_CORE_MODULES"
++CORE_MODULES="glib-2.0 gnome-desktop-2.0 launchpad-integration gthread-2.0 gio-2.0 gio-unix-2.0 unique-1.0 dbus-glib-1 gail gconf-2.0 libxml-2.0 $EXTRA_CORE_MODULES"
+ CORE_CFLAGS="`$PKG_CONFIG --cflags $CORE_MODULES` $x_cflags $WARNING_CFLAGS"
+ AC_SUBST(CORE_CFLAGS)
+ CORE_LIBS="`$PKG_CONFIG --libs $CORE_MODULES` $x_libs"
+Index: nautilus-2.29.92.1/src/nautilus-shell-ui.xml
+===================================================================
+--- nautilus-2.29.92.1.orig/src/nautilus-shell-ui.xml	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/src/nautilus-shell-ui.xml	2010-03-10 21:54:56.000000000 +0100
+@@ -65,6 +65,7 @@
+ 	<placeholder name="Other Menus"/>
+ 	<menu action="Help">
+ 		<menuitem name="Nautilus Manual" action="Nautilus Manual"/>
++		<placeholder name='LaunchpadItems'/>
+ 		<menuitem name="About Nautilus" action="About Nautilus"/>
+ 	</menu>
+ </menubar>
+Index: nautilus-2.29.92.1/src/nautilus-window-menus.c
+===================================================================
+--- nautilus-2.29.92.1.orig/src/nautilus-window-menus.c	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/src/nautilus-window-menus.c	2010-03-10 21:54:56.000000000 +0100
+@@ -56,6 +56,7 @@
+ #include <libnautilus-private/nautilus-signaller.h>
+ #include <libnautilus-private/nautilus-trash-monitor.h>
+ #include <string.h>
++#include <launchpad-integration.h>
+ 
+ #define MENU_PATH_EXTENSION_ACTIONS                     "/MenuBar/File/Extension Actions"
+ #define POPUP_PATH_EXTENSION_ACTIONS                     "/background/Before Zoom Items/Extension Actions"
+@@ -936,6 +937,9 @@
+ 
+ 	ui = nautilus_ui_string_get ("nautilus-shell-ui.xml");
+ 	gtk_ui_manager_add_ui_from_string (ui_manager, ui, -1, NULL);
++ 
++	launchpad_integration_add_ui (ui_manager,
++				      "/MenuBar/Help/LaunchpadItems");
+ 
+ 	nautilus_window_initialize_trash_icon_monitor (window);
+ 	nautilus_window_initialize_bookmarks_menu (window);
--- nautilus-2.30.0.orig/debian/patches/16_hide_unmount.patch
+++ nautilus-2.30.0/debian/patches/16_hide_unmount.patch
@@ -0,0 +1,96 @@
+From 332e1059acc95506afc49bc2d7cf3b43c730f7e7 Mon Sep 17 00:00:00 2001
+From: Martin Pitt <martin.pitt@ubuntu.com>
+Date: Tue, 30 Mar 2010 18:33:51 +0200
+Subject: [PATCH] Do not show Unmount when showing Eject/Safe removal
+
+Having three menu entries (unmount/eject/safe removal) in a volume/drive menu
+entry is too confusing. Unmount only really makes sense for internal drives,
+for external ones it is pretty much a "geek" option. Geeks can use palimpsest
+or "unmount /media/foo" from the CLI if they really want to, for everyone else
+it is just an unintuitive and hard to to explain menu entry.
+
+Bug: https://bugzilla.gnome.org/show_bug.cgi?id=598690
+Bug-Ubuntu: https://launchpad.net/bugs/453072
+---
+ src/file-manager/fm-directory-view.c |   20 ++++++++++++--------
+ src/nautilus-places-sidebar.c        |    5 ++++-
+ 2 files changed, 16 insertions(+), 9 deletions(-)
+
+diff --git a/src/file-manager/fm-directory-view.c b/src/file-manager/fm-directory-view.c
+index 0997a15..1d867df 100644
+--- a/src/file-manager/fm-directory-view.c
++++ b/src/file-manager/fm-directory-view.c
+@@ -7775,10 +7775,6 @@ file_should_show_foreach (NautilusFile        *file,
+ 		*show_eject = TRUE;
+ 	}
+ 
+-	if (nautilus_file_can_unmount (file)) {
+-		*show_unmount = TRUE;
+-	}
+-
+ 	if (nautilus_file_can_mount (file)) {
+ 		*show_mount = TRUE;
+ 
+@@ -7798,6 +7794,12 @@ file_should_show_foreach (NautilusFile        *file,
+ 		*show_stop = TRUE;
+ 	}
+ 
++	/* Dot not show both Unmount and Eject/Safe Removal; too confusing to
++	 * have too many menu entries */
++	if (nautilus_file_can_unmount (file) && !*show_eject && !*show_stop) {
++		*show_unmount = TRUE;
++	}
++
+ 	if (nautilus_file_can_poll_for_media (file) && !nautilus_file_is_media_check_automatic (file)) {
+ 		*show_poll = TRUE;
+ 	}
+@@ -7845,10 +7847,6 @@ file_should_show_self (NautilusFile        *file,
+ 		*show_eject = TRUE;
+ 	}
+ 
+-	if (nautilus_file_can_unmount (file)) {
+-		*show_unmount = TRUE;
+-	}
+-
+ 	if (nautilus_file_can_mount (file)) {
+ 		*show_mount = TRUE;
+ 	}
+@@ -7867,6 +7865,12 @@ file_should_show_self (NautilusFile        *file,
+ 		*show_stop = TRUE;
+ 	}
+ 
++	/* Dot not show both Unmount and Eject/Safe Removal; too confusing to
++	 * have too many menu entries */
++	if (nautilus_file_can_unmount (file) && !*show_eject && !*show_stop) {
++		*show_unmount = TRUE;
++	}
++
+ 	if (nautilus_file_can_poll_for_media (file) && !nautilus_file_is_media_check_automatic (file)) {
+ 		*show_poll = TRUE;
+ 	}
+diff --git a/src/nautilus-places-sidebar.c b/src/nautilus-places-sidebar.c
+index 95c06eb..6dc2df7 100644
+--- a/src/nautilus-places-sidebar.c
++++ b/src/nautilus-places-sidebar.c
+@@ -1317,7 +1317,7 @@ check_unmount_and_eject (GMount *mount,
+ 	}
+ 	if (mount != NULL) {
+ 		*show_eject |= g_mount_can_eject (mount);
+-		*show_unmount = g_mount_can_unmount (mount);
++		*show_unmount = g_mount_can_unmount (mount) && !*show_eject;
+ 	}
+ }
+ 
+@@ -1349,6 +1349,9 @@ check_visibility (GMount           *mount,
+ 
+ 		*show_start = g_drive_can_start (drive) || g_drive_can_start_degraded (drive);
+ 		*show_stop  = g_drive_can_stop (drive);
++
++		if (*show_stop)
++			*show_unmount = FALSE;
+ 	}
+ 
+ 	if (volume != NULL) {
+-- 
+1.7.0
+
--- nautilus-2.30.0.orig/debian/patches/99_ltmain_as-needed.patch
+++ nautilus-2.30.0/debian/patches/99_ltmain_as-needed.patch
@@ -0,0 +1,32 @@
+Index: nautilus-2.29.92.1/ltmain.sh
+===================================================================
+--- nautilus-2.29.92.1.orig/ltmain.sh	2010-03-10 15:06:58.000000000 +0100
++++ nautilus-2.29.92.1/ltmain.sh	2010-03-10 21:55:14.000000000 +0100
+@@ -4716,6 +4716,11 @@
+ 	arg=$func_stripname_result
+ 	;;
+ 
++      -Wl,--as-needed)
++	deplibs="$deplibs $arg"
++	continue
++	;;
++
+       -Wl,*)
+ 	func_stripname '-Wl,' '' "$arg"
+ 	args=$func_stripname_result
+@@ -5067,6 +5072,15 @@
+ 	lib=
+ 	found=no
+ 	case $deplib in
++	-Wl,--as-needed)
++	  if test "$linkmode,$pass" = "prog,link"; then
++	    compile_deplibs="$deplib $compile_deplibs"
++	    finalize_deplibs="$deplib $finalize_deplibs"
++	  else
++	    deplibs="$deplib $deplibs"
++	  fi
++	  continue
++	  ;;
+ 	-mt|-mthreads|-kthread|-Kthread|-pthread|-pthreads|--thread-safe|-threads)
+ 	  if test "$linkmode,$pass" = "prog,link"; then
+ 	    compile_deplibs="$deplib $compile_deplibs"
--- nautilus-2.30.0.orig/debian/patches/15_translations_list_update.patch
+++ nautilus-2.30.0/debian/patches/15_translations_list_update.patch
@@ -0,0 +1,15 @@
+#
+# Description: translate the mount-archive menu entry
+#
+Index: nautilus-2.29.92.1/po/POTFILES.in
+===================================================================
+--- nautilus-2.29.92.1.orig/po/POTFILES.in	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/po/POTFILES.in	2010-03-10 21:55:03.000000000 +0100
+@@ -5,6 +5,7 @@
+ cut-n-paste-code/libegg/eggsmclient.c
+ data/browser.xml
+ data/nautilus.xml.in
++debian/mount-archive.desktop.in
+ eel/eel-alert-dialog.c
+ eel/eel-canvas.c
+ eel/eel-editable-label.c
--- nautilus-2.30.0.orig/debian/patches/82_gnome-app-install.patch
+++ nautilus-2.30.0/debian/patches/82_gnome-app-install.patch
@@ -0,0 +1,45 @@
+Index: nautilus-2.29.92.1/libnautilus-private/nautilus-mime-actions.c
+===================================================================
+--- nautilus-2.29.92.1.orig/libnautilus-private/nautilus-mime-actions.c	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/libnautilus-private/nautilus-mime-actions.c	2010-03-10 21:55:06.000000000 +0100
+@@ -1470,6 +1470,27 @@
+ 	g_object_unref (proxy);
+ }
+ 
++void launch_gnome_app_install_mimetype(GdkScreen  *screen,
++				       NautilusFile *file,
++				       char *uri) {
++	char *qmimetype, *quri, *qduri, *command;
++	if (!screen)
++		screen = gdk_display_get_default_screen(gdk_display_get_default ());
++
++	qmimetype = g_shell_quote (nautilus_file_info_get_mime_type (file));
++	quri = g_shell_quote (uri);
++	command = g_strconcat("gnome-app-install --mime-type=",
++			     qmimetype, " ", quri, 
++			     (char*)0 /* NB NULL is wrong */);
++	g_free (qmimetype);
++	g_free (quri);
++	g_free (qduri);
++
++	//eel_gnome_shell_execute_on_screen (command, screen);
++	gdk_spawn_command_line_on_screen (screen, command, NULL);
++	g_free (command);
++}
++
+ static void
+ application_unhandled_uri (ActivateParameters *parameters, char *uri)
+ {
+@@ -1518,6 +1539,12 @@
+ 		goto out;
+ 	}
+ 
++	// try g-a-i now
++	if (g_find_program_in_path("gnome-app-install")) {
++	   launch_gnome_app_install_mimetype(NULL, file, uri);
++	   goto out;
++	}
++
+ 	/* Check whether PackageKit can be spawned */
+ 	connection = dbus_g_bus_get (DBUS_BUS_SESSION, &error);
+ 	if (connection == NULL) {
--- nautilus-2.30.0.orig/debian/patches/90_relibtoolize.patch
+++ nautilus-2.30.0/debian/patches/90_relibtoolize.patch
@@ -0,0 +1,19339 @@
+diff -Nur nautilus-2.30.0/aclocal.m4 nautilus-2.30.0.ubuntu/aclocal.m4
+--- nautilus-2.30.0/aclocal.m4	2010-03-29 11:10:12.000000000 +0200
++++ nautilus-2.30.0.ubuntu/aclocal.m4	2010-03-29 11:49:34.000000000 +0200
+@@ -13,1691 +13,1693 @@
+ 
+ m4_ifndef([AC_AUTOCONF_VERSION],
+   [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl
+-m4_if(m4_defn([AC_AUTOCONF_VERSION]), [2.63],,
+-[m4_warning([this file was generated for autoconf 2.63.
++m4_if(m4_defn([AC_AUTOCONF_VERSION]), [2.65],,
++[m4_warning([this file was generated for autoconf 2.65.
+ You have another version of autoconf.  It may work, but is not guaranteed to.
+ If you have problems, you may need to regenerate the build system entirely.
+ To do so, use the procedure documented by the package, typically `autoreconf'.])])
+ 
+-# nls.m4 serial 3 (gettext-0.15)
+-dnl Copyright (C) 1995-2003, 2005-2006 Free Software Foundation, Inc.
+-dnl This file is free software; the Free Software Foundation
+-dnl gives unlimited permission to copy and/or distribute it,
+-dnl with or without modifications, as long as this notice is preserved.
++dnl AM_GCONF_SOURCE_2
++dnl Defines GCONF_SCHEMA_CONFIG_SOURCE which is where you should install schemas
++dnl  (i.e. pass to gconftool-2
++dnl Defines GCONF_SCHEMA_FILE_DIR which is a filesystem directory where
++dnl  you should install foo.schemas files
+ dnl
+-dnl This file can can be used in projects which are not available under
+-dnl the GNU General Public License or the GNU Library General Public
+-dnl License but which still want to provide support for the GNU gettext
+-dnl functionality.
+-dnl Please note that the actual code of the GNU gettext library is covered
+-dnl by the GNU Library General Public License, and the rest of the GNU
+-dnl gettext package package is covered by the GNU General Public License.
+-dnl They are *not* in the public domain.
+ 
+-dnl Authors:
+-dnl   Ulrich Drepper <drepper@cygnus.com>, 1995-2000.
+-dnl   Bruno Haible <haible@clisp.cons.org>, 2000-2003.
++AC_DEFUN([AM_GCONF_SOURCE_2],
++[
++  if test "x$GCONF_SCHEMA_INSTALL_SOURCE" = "x"; then
++    GCONF_SCHEMA_CONFIG_SOURCE=`gconftool-2 --get-default-source`
++  else
++    GCONF_SCHEMA_CONFIG_SOURCE=$GCONF_SCHEMA_INSTALL_SOURCE
++  fi
+ 
+-AC_PREREQ(2.50)
++  AC_ARG_WITH([gconf-source],
++	      AC_HELP_STRING([--with-gconf-source=sourceaddress],
++			     [Config database for installing schema files.]),
++	      [GCONF_SCHEMA_CONFIG_SOURCE="$withval"],)
+ 
+-AC_DEFUN([AM_NLS],
+-[
+-  AC_MSG_CHECKING([whether NLS is requested])
+-  dnl Default is enabled NLS
+-  AC_ARG_ENABLE(nls,
+-    [  --disable-nls           do not use Native Language Support],
+-    USE_NLS=$enableval, USE_NLS=yes)
+-  AC_MSG_RESULT($USE_NLS)
+-  AC_SUBST(USE_NLS)
++  AC_SUBST(GCONF_SCHEMA_CONFIG_SOURCE)
++  AC_MSG_RESULT([Using config source $GCONF_SCHEMA_CONFIG_SOURCE for schema installation])
++
++  if test "x$GCONF_SCHEMA_FILE_DIR" = "x"; then
++    GCONF_SCHEMA_FILE_DIR='$(sysconfdir)/gconf/schemas'
++  fi
++
++  AC_ARG_WITH([gconf-schema-file-dir],
++	      AC_HELP_STRING([--with-gconf-schema-file-dir=dir],
++			     [Directory for installing schema files.]),
++	      [GCONF_SCHEMA_FILE_DIR="$withval"],)
++
++  AC_SUBST(GCONF_SCHEMA_FILE_DIR)
++  AC_MSG_RESULT([Using $GCONF_SCHEMA_FILE_DIR as install directory for schema files])
++
++  AC_ARG_ENABLE(schemas-install,
++  	AC_HELP_STRING([--disable-schemas-install],
++		       [Disable the schemas installation]),
++     [case ${enableval} in
++       yes|no) ;;
++       *) AC_MSG_ERROR([bad value ${enableval} for --enable-schemas-install]) ;;
++      esac])
++  AM_CONDITIONAL([GCONF_SCHEMAS_INSTALL], [test "$enable_schemas_install" != no])
+ ])
+ 
+-# pkg.m4 - Macros to locate and utilise pkg-config.            -*- Autoconf -*-
+-# 
+-# Copyright ТЉ 2004 Scott James Remnant <scott@netsplit.com>.
++# Copyright (C) 1995-2002 Free Software Foundation, Inc.
++# Copyright (C) 2001-2003,2004 Red Hat, Inc.
+ #
+-# This program is free software; you can redistribute it and/or modify
+-# it under the terms of the GNU General Public License as published by
+-# the Free Software Foundation; either version 2 of the License, or
+-# (at your option) any later version.
++# This file is free software, distributed under the terms of the GNU
++# General Public License.  As a special exception to the GNU General
++# Public License, this file may be distributed as part of a program
++# that contains a configuration script generated by Autoconf, under
++# the same distribution terms as the rest of that program.
+ #
+-# This program is distributed in the hope that it will be useful, but
+-# WITHOUT ANY WARRANTY; without even the implied warranty of
+-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+-# General Public License for more details.
++# This file can be copied and used freely without restrictions.  It can
++# be used in projects which are not available under the GNU Public License
++# but which still want to provide support for the GNU gettext functionality.
+ #
+-# You should have received a copy of the GNU General Public License
+-# along with this program; if not, write to the Free Software
+-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
++# Macro to add for using GNU gettext.
++# Ulrich Drepper <drepper@cygnus.com>, 1995, 1996
+ #
+-# As a special exception to the GNU General Public License, if you
+-# distribute this file as part of a program that contains a
+-# configuration script generated by Autoconf, you may include it under
+-# the same distribution terms that you use for the rest of that program.
+-
+-# PKG_PROG_PKG_CONFIG([MIN-VERSION])
+-# ----------------------------------
+-AC_DEFUN([PKG_PROG_PKG_CONFIG],
+-[m4_pattern_forbid([^_?PKG_[A-Z_]+$])
+-m4_pattern_allow([^PKG_CONFIG(_PATH)?$])
+-AC_ARG_VAR([PKG_CONFIG], [path to pkg-config utility])dnl
+-if test "x$ac_cv_env_PKG_CONFIG_set" != "xset"; then
+-	AC_PATH_TOOL([PKG_CONFIG], [pkg-config])
+-fi
+-if test -n "$PKG_CONFIG"; then
+-	_pkg_min_version=m4_default([$1], [0.9.0])
+-	AC_MSG_CHECKING([pkg-config is at least version $_pkg_min_version])
+-	if $PKG_CONFIG --atleast-pkgconfig-version $_pkg_min_version; then
+-		AC_MSG_RESULT([yes])
+-	else
+-		AC_MSG_RESULT([no])
+-		PKG_CONFIG=""
+-	fi
+-		
+-fi[]dnl
+-])# PKG_PROG_PKG_CONFIG
+-
+-# PKG_CHECK_EXISTS(MODULES, [ACTION-IF-FOUND], [ACTION-IF-NOT-FOUND])
++# Modified to never use included libintl. 
++# Owen Taylor <otaylor@redhat.com>, 12/15/1998
+ #
+-# Check to see whether a particular set of modules exists.  Similar
+-# to PKG_CHECK_MODULES(), but does not set variables or print errors.
++# Major rework to remove unused code
++# Owen Taylor <otaylor@redhat.com>, 12/11/2002
+ #
++# Added better handling of ALL_LINGUAS from GNU gettext version 
++# written by Bruno Haible, Owen Taylor <otaylor.redhat.com> 5/30/3002
+ #
+-# Similar to PKG_CHECK_MODULES, make sure that the first instance of
+-# this or PKG_CHECK_MODULES is called, or make sure to call
+-# PKG_CHECK_EXISTS manually
+-# --------------------------------------------------------------
+-AC_DEFUN([PKG_CHECK_EXISTS],
+-[AC_REQUIRE([PKG_PROG_PKG_CONFIG])dnl
+-if test -n "$PKG_CONFIG" && \
+-    AC_RUN_LOG([$PKG_CONFIG --exists --print-errors "$1"]); then
+-  m4_ifval([$2], [$2], [:])
+-m4_ifvaln([$3], [else
+-  $3])dnl
+-fi])
++# Modified to require ngettext
++# Matthias Clasen <mclasen@redhat.com> 08/06/2004
++#
++# We need this here as well, since someone might use autoconf-2.5x
++# to configure GLib then an older version to configure a package
++# using AM_GLIB_GNU_GETTEXT
++AC_PREREQ(2.53)
+ 
++dnl
++dnl We go to great lengths to make sure that aclocal won't 
++dnl try to pull in the installed version of these macros
++dnl when running aclocal in the glib directory.
++dnl
++m4_copy([AC_DEFUN],[glib_DEFUN])
++m4_copy([AC_REQUIRE],[glib_REQUIRE])
++dnl
++dnl At the end, if we're not within glib, we'll define the public
++dnl definitions in terms of our private definitions.
++dnl
+ 
+-# _PKG_CONFIG([VARIABLE], [COMMAND], [MODULES])
+-# ---------------------------------------------
+-m4_define([_PKG_CONFIG],
+-[if test -n "$$1"; then
+-    pkg_cv_[]$1="$$1"
+- elif test -n "$PKG_CONFIG"; then
+-    PKG_CHECK_EXISTS([$3],
+-                     [pkg_cv_[]$1=`$PKG_CONFIG --[]$2 "$3" 2>/dev/null`],
+-		     [pkg_failed=yes])
+- else
+-    pkg_failed=untried
+-fi[]dnl
+-])# _PKG_CONFIG
++# GLIB_LC_MESSAGES
++#--------------------
++glib_DEFUN([GLIB_LC_MESSAGES],
++  [AC_CHECK_HEADERS([locale.h])
++    if test $ac_cv_header_locale_h = yes; then
++    AC_CACHE_CHECK([for LC_MESSAGES], am_cv_val_LC_MESSAGES,
++      [AC_TRY_LINK([#include <locale.h>], [return LC_MESSAGES],
++       am_cv_val_LC_MESSAGES=yes, am_cv_val_LC_MESSAGES=no)])
++    if test $am_cv_val_LC_MESSAGES = yes; then
++      AC_DEFINE(HAVE_LC_MESSAGES, 1,
++        [Define if your <locale.h> file defines LC_MESSAGES.])
++    fi
++  fi])
+ 
+-# _PKG_SHORT_ERRORS_SUPPORTED
+-# -----------------------------
+-AC_DEFUN([_PKG_SHORT_ERRORS_SUPPORTED],
+-[AC_REQUIRE([PKG_PROG_PKG_CONFIG])
+-if $PKG_CONFIG --atleast-pkgconfig-version 0.20; then
+-        _pkg_short_errors_supported=yes
++# GLIB_PATH_PROG_WITH_TEST
++#----------------------------
++dnl GLIB_PATH_PROG_WITH_TEST(VARIABLE, PROG-TO-CHECK-FOR,
++dnl   TEST-PERFORMED-ON-FOUND_PROGRAM [, VALUE-IF-NOT-FOUND [, PATH]])
++glib_DEFUN([GLIB_PATH_PROG_WITH_TEST],
++[# Extract the first word of "$2", so it can be a program name with args.
++set dummy $2; ac_word=[$]2
++AC_MSG_CHECKING([for $ac_word])
++AC_CACHE_VAL(ac_cv_path_$1,
++[case "[$]$1" in
++  /*)
++  ac_cv_path_$1="[$]$1" # Let the user override the test with a path.
++  ;;
++  *)
++  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
++  for ac_dir in ifelse([$5], , $PATH, [$5]); do
++    test -z "$ac_dir" && ac_dir=.
++    if test -f $ac_dir/$ac_word; then
++      if [$3]; then
++	ac_cv_path_$1="$ac_dir/$ac_word"
++	break
++      fi
++    fi
++  done
++  IFS="$ac_save_ifs"
++dnl If no 4th arg is given, leave the cache variable unset,
++dnl so AC_PATH_PROGS will keep looking.
++ifelse([$4], , , [  test -z "[$]ac_cv_path_$1" && ac_cv_path_$1="$4"
++])dnl
++  ;;
++esac])dnl
++$1="$ac_cv_path_$1"
++if test ifelse([$4], , [-n "[$]$1"], ["[$]$1" != "$4"]); then
++  AC_MSG_RESULT([$]$1)
+ else
+-        _pkg_short_errors_supported=no
+-fi[]dnl
+-])# _PKG_SHORT_ERRORS_SUPPORTED
++  AC_MSG_RESULT(no)
++fi
++AC_SUBST($1)dnl
++])
+ 
++# GLIB_WITH_NLS
++#-----------------
++glib_DEFUN([GLIB_WITH_NLS],
++  dnl NLS is obligatory
++  [USE_NLS=yes
++    AC_SUBST(USE_NLS)
+ 
+-# PKG_CHECK_MODULES(VARIABLE-PREFIX, MODULES, [ACTION-IF-FOUND],
+-# [ACTION-IF-NOT-FOUND])
+-#
+-#
+-# Note that if there is a possibility the first call to
+-# PKG_CHECK_MODULES might not happen, you should be sure to include an
+-# explicit call to PKG_PROG_PKG_CONFIG in your configure.ac
+-#
+-#
+-# --------------------------------------------------------------
+-AC_DEFUN([PKG_CHECK_MODULES],
+-[AC_REQUIRE([PKG_PROG_PKG_CONFIG])dnl
+-AC_ARG_VAR([$1][_CFLAGS], [C compiler flags for $1, overriding pkg-config])dnl
+-AC_ARG_VAR([$1][_LIBS], [linker flags for $1, overriding pkg-config])dnl
++    gt_cv_have_gettext=no
+ 
+-pkg_failed=no
+-AC_MSG_CHECKING([for $1])
++    CATOBJEXT=NONE
++    XGETTEXT=:
++    INTLLIBS=
+ 
+-_PKG_CONFIG([$1][_CFLAGS], [cflags], [$2])
+-_PKG_CONFIG([$1][_LIBS], [libs], [$2])
++    AC_CHECK_HEADER(libintl.h,
++     [gt_cv_func_dgettext_libintl="no"
++      libintl_extra_libs=""
+ 
+-m4_define([_PKG_TEXT], [Alternatively, you may set the environment variables $1[]_CFLAGS
+-and $1[]_LIBS to avoid the need to call pkg-config.
+-See the pkg-config man page for more details.])
++      #
++      # First check in libc
++      #
++      AC_CACHE_CHECK([for ngettext in libc], gt_cv_func_ngettext_libc,
++        [AC_TRY_LINK([
++#include <libintl.h>
++],
++         [return !ngettext ("","", 1)],
++	  gt_cv_func_ngettext_libc=yes,
++          gt_cv_func_ngettext_libc=no)
++        ])
++  
++      if test "$gt_cv_func_ngettext_libc" = "yes" ; then
++	      AC_CACHE_CHECK([for dgettext in libc], gt_cv_func_dgettext_libc,
++        	[AC_TRY_LINK([
++#include <libintl.h>
++],
++	          [return !dgettext ("","")],
++		  gt_cv_func_dgettext_libc=yes,
++	          gt_cv_func_dgettext_libc=no)
++        	])
++      fi
++  
++      if test "$gt_cv_func_ngettext_libc" = "yes" ; then
++        AC_CHECK_FUNCS(bind_textdomain_codeset)
++      fi
+ 
+-if test $pkg_failed = yes; then
+-        _PKG_SHORT_ERRORS_SUPPORTED
+-        if test $_pkg_short_errors_supported = yes; then
+-	        $1[]_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "$2" 2>&1`
+-        else 
+-	        $1[]_PKG_ERRORS=`$PKG_CONFIG --print-errors "$2" 2>&1`
+-        fi
+-	# Put the nasty error message in config.log where it belongs
+-	echo "$$1[]_PKG_ERRORS" >&AS_MESSAGE_LOG_FD
++      #
++      # If we don't have everything we want, check in libintl
++      #
++      if test "$gt_cv_func_dgettext_libc" != "yes" \
++	 || test "$gt_cv_func_ngettext_libc" != "yes" \
++         || test "$ac_cv_func_bind_textdomain_codeset" != "yes" ; then
++        
++        AC_CHECK_LIB(intl, bindtextdomain,
++	    [AC_CHECK_LIB(intl, ngettext,
++		    [AC_CHECK_LIB(intl, dgettext,
++			          gt_cv_func_dgettext_libintl=yes)])])
+ 
+-	ifelse([$4], , [AC_MSG_ERROR(dnl
+-[Package requirements ($2) were not met:
++	if test "$gt_cv_func_dgettext_libintl" != "yes" ; then
++	  AC_MSG_CHECKING([if -liconv is needed to use gettext])
++	  AC_MSG_RESULT([])
++  	  AC_CHECK_LIB(intl, ngettext,
++          	[AC_CHECK_LIB(intl, dcgettext,
++		       [gt_cv_func_dgettext_libintl=yes
++			libintl_extra_libs=-liconv],
++			:,-liconv)],
++		:,-liconv)
++        fi
+ 
+-$$1_PKG_ERRORS
++        #
++        # If we found libintl, then check in it for bind_textdomain_codeset();
++        # we'll prefer libc if neither have bind_textdomain_codeset(),
++        # and both have dgettext and ngettext
++        #
++        if test "$gt_cv_func_dgettext_libintl" = "yes" ; then
++          glib_save_LIBS="$LIBS"
++          LIBS="$LIBS -lintl $libintl_extra_libs"
++          unset ac_cv_func_bind_textdomain_codeset
++          AC_CHECK_FUNCS(bind_textdomain_codeset)
++          LIBS="$glib_save_LIBS"
+ 
+-Consider adjusting the PKG_CONFIG_PATH environment variable if you
+-installed software in a non-standard prefix.
++          if test "$ac_cv_func_bind_textdomain_codeset" = "yes" ; then
++            gt_cv_func_dgettext_libc=no
++          else
++            if test "$gt_cv_func_dgettext_libc" = "yes" \
++		&& test "$gt_cv_func_ngettext_libc" = "yes"; then
++              gt_cv_func_dgettext_libintl=no
++            fi
++          fi
++        fi
++      fi
+ 
+-_PKG_TEXT
+-])],
+-		[AC_MSG_RESULT([no])
+-                $4])
+-elif test $pkg_failed = untried; then
+-	ifelse([$4], , [AC_MSG_FAILURE(dnl
+-[The pkg-config script could not be found or is too old.  Make sure it
+-is in your PATH or set the PKG_CONFIG environment variable to the full
+-path to pkg-config.
++      if test "$gt_cv_func_dgettext_libc" = "yes" \
++	|| test "$gt_cv_func_dgettext_libintl" = "yes"; then
++        gt_cv_have_gettext=yes
++      fi
++  
++      if test "$gt_cv_func_dgettext_libintl" = "yes"; then
++        INTLLIBS="-lintl $libintl_extra_libs"
++      fi
++  
++      if test "$gt_cv_have_gettext" = "yes"; then
++	AC_DEFINE(HAVE_GETTEXT,1,
++	  [Define if the GNU gettext() function is already present or preinstalled.])
++	GLIB_PATH_PROG_WITH_TEST(MSGFMT, msgfmt,
++	  [test -z "`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`"], no)dnl
++	if test "$MSGFMT" != "no"; then
++          glib_save_LIBS="$LIBS"
++          LIBS="$LIBS $INTLLIBS"
++	  AC_CHECK_FUNCS(dcgettext)
++	  MSGFMT_OPTS=
++	  AC_MSG_CHECKING([if msgfmt accepts -c])
++	  GLIB_RUN_PROG([$MSGFMT -c -o /dev/null],[
++msgid ""
++msgstr ""
++"Content-Type: text/plain; charset=UTF-8\n"
++"Project-Id-Version: test 1.0\n"
++"PO-Revision-Date: 2007-02-15 12:01+0100\n"
++"Last-Translator: test <foo@bar.xx>\n"
++"Language-Team: C <LL@li.org>\n"
++"MIME-Version: 1.0\n"
++"Content-Transfer-Encoding: 8bit\n"
++], [MSGFMT_OPTS=-c; AC_MSG_RESULT([yes])], [AC_MSG_RESULT([no])])
++	  AC_SUBST(MSGFMT_OPTS)
++	  AC_PATH_PROG(GMSGFMT, gmsgfmt, $MSGFMT)
++	  GLIB_PATH_PROG_WITH_TEST(XGETTEXT, xgettext,
++	    [test -z "`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`"], :)
++	  AC_TRY_LINK(, [extern int _nl_msg_cat_cntr;
++			 return _nl_msg_cat_cntr],
++	    [CATOBJEXT=.gmo 
++             DATADIRNAME=share],
++	    [case $host in
++	    *-*-solaris*)
++	    dnl On Solaris, if bind_textdomain_codeset is in libc,
++	    dnl GNU format message catalog is always supported,
++            dnl since both are added to the libc all together.
++	    dnl Hence, we'd like to go with DATADIRNAME=share and
++	    dnl and CATOBJEXT=.gmo in this case.
++            AC_CHECK_FUNC(bind_textdomain_codeset,
++	      [CATOBJEXT=.gmo 
++               DATADIRNAME=share],
++	      [CATOBJEXT=.mo
++               DATADIRNAME=lib])
++	    ;;
++	    *)
++	    CATOBJEXT=.mo
++            DATADIRNAME=lib
++	    ;;
++	    esac])
++          LIBS="$glib_save_LIBS"
++	  INSTOBJEXT=.mo
++	else
++	  gt_cv_have_gettext=no
++	fi
++      fi
++    ])
+ 
+-_PKG_TEXT
++    if test "$gt_cv_have_gettext" = "yes" ; then
++      AC_DEFINE(ENABLE_NLS, 1,
++        [always defined to indicate that i18n is enabled])
++    fi
+ 
+-To get pkg-config, see <http://pkg-config.freedesktop.org/>.])],
+-		[$4])
+-else
+-	$1[]_CFLAGS=$pkg_cv_[]$1[]_CFLAGS
+-	$1[]_LIBS=$pkg_cv_[]$1[]_LIBS
+-        AC_MSG_RESULT([yes])
+-	ifelse([$3], , :, [$3])
+-fi[]dnl
+-])# PKG_CHECK_MODULES
++    dnl Test whether we really found GNU xgettext.
++    if test "$XGETTEXT" != ":"; then
++      dnl If it is not GNU xgettext we define it as : so that the
++      dnl Makefiles still can work.
++      if $XGETTEXT --omit-header /dev/null 2> /dev/null; then
++        : ;
++      else
++        AC_MSG_RESULT(
++	  [found xgettext program is not GNU xgettext; ignore it])
++        XGETTEXT=":"
++      fi
++    fi
+ 
+-# Copyright (C) 2002, 2003, 2005, 2006, 2007, 2008  Free Software Foundation, Inc.
+-#
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
++    # We need to process the po/ directory.
++    POSUB=po
+ 
+-# AM_AUTOMAKE_VERSION(VERSION)
+-# ----------------------------
+-# Automake X.Y traces this macro to ensure aclocal.m4 has been
+-# generated from the m4 files accompanying Automake X.Y.
+-# (This private macro should not be called outside this file.)
+-AC_DEFUN([AM_AUTOMAKE_VERSION],
+-[am__api_version='1.11'
+-dnl Some users find AM_AUTOMAKE_VERSION and mistake it for a way to
+-dnl require some minimum version.  Point them to the right macro.
+-m4_if([$1], [1.11.1], [],
+-      [AC_FATAL([Do not call $0, use AM_INIT_AUTOMAKE([$1]).])])dnl
+-])
++    AC_OUTPUT_COMMANDS(
++      [case "$CONFIG_FILES" in *po/Makefile.in*)
++        sed -e "/POTFILES =/r po/POTFILES" po/Makefile.in > po/Makefile
++      esac])
+ 
+-# _AM_AUTOCONF_VERSION(VERSION)
+-# -----------------------------
+-# aclocal traces this macro to find the Autoconf version.
+-# This is a private macro too.  Using m4_define simplifies
+-# the logic in aclocal, which can simply ignore this definition.
+-m4_define([_AM_AUTOCONF_VERSION], [])
++    dnl These rules are solely for the distribution goal.  While doing this
++    dnl we only have to keep exactly one list of the available catalogs
++    dnl in configure.in.
++    for lang in $ALL_LINGUAS; do
++      GMOFILES="$GMOFILES $lang.gmo"
++      POFILES="$POFILES $lang.po"
++    done
+ 
+-# AM_SET_CURRENT_AUTOMAKE_VERSION
+-# -------------------------------
+-# Call AM_AUTOMAKE_VERSION and AM_AUTOMAKE_VERSION so they can be traced.
+-# This function is AC_REQUIREd by AM_INIT_AUTOMAKE.
+-AC_DEFUN([AM_SET_CURRENT_AUTOMAKE_VERSION],
+-[AM_AUTOMAKE_VERSION([1.11.1])dnl
+-m4_ifndef([AC_AUTOCONF_VERSION],
+-  [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl
+-_AM_AUTOCONF_VERSION(m4_defn([AC_AUTOCONF_VERSION]))])
++    dnl Make all variables we use known to autoconf.
++    AC_SUBST(CATALOGS)
++    AC_SUBST(CATOBJEXT)
++    AC_SUBST(DATADIRNAME)
++    AC_SUBST(GMOFILES)
++    AC_SUBST(INSTOBJEXT)
++    AC_SUBST(INTLLIBS)
++    AC_SUBST(PO_IN_DATADIR_TRUE)
++    AC_SUBST(PO_IN_DATADIR_FALSE)
++    AC_SUBST(POFILES)
++    AC_SUBST(POSUB)
++  ])
+ 
+-# AM_AUX_DIR_EXPAND                                         -*- Autoconf -*-
++# AM_GLIB_GNU_GETTEXT
++# -------------------
++# Do checks necessary for use of gettext. If a suitable implementation 
++# of gettext is found in either in libintl or in the C library,
++# it will set INTLLIBS to the libraries needed for use of gettext
++# and AC_DEFINE() HAVE_GETTEXT and ENABLE_NLS. (The shell variable
++# gt_cv_have_gettext will be set to "yes".) It will also call AC_SUBST()
++# on various variables needed by the Makefile.in.in installed by 
++# glib-gettextize.
++dnl
++glib_DEFUN([GLIB_GNU_GETTEXT],
++  [AC_REQUIRE([AC_PROG_CC])dnl
++   AC_REQUIRE([AC_HEADER_STDC])dnl
++   
++   GLIB_LC_MESSAGES
++   GLIB_WITH_NLS
+ 
+-# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.
+-#
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
+-
+-# For projects using AC_CONFIG_AUX_DIR([foo]), Autoconf sets
+-# $ac_aux_dir to `$srcdir/foo'.  In other projects, it is set to
+-# `$srcdir', `$srcdir/..', or `$srcdir/../..'.
+-#
+-# Of course, Automake must honor this variable whenever it calls a
+-# tool from the auxiliary directory.  The problem is that $srcdir (and
+-# therefore $ac_aux_dir as well) can be either absolute or relative,
+-# depending on how configure is run.  This is pretty annoying, since
+-# it makes $ac_aux_dir quite unusable in subdirectories: in the top
+-# source directory, any form will work fine, but in subdirectories a
+-# relative path needs to be adjusted first.
+-#
+-# $ac_aux_dir/missing
+-#    fails when called from a subdirectory if $ac_aux_dir is relative
+-# $top_srcdir/$ac_aux_dir/missing
+-#    fails if $ac_aux_dir is absolute,
+-#    fails when called from a subdirectory in a VPATH build with
+-#          a relative $ac_aux_dir
+-#
+-# The reason of the latter failure is that $top_srcdir and $ac_aux_dir
+-# are both prefixed by $srcdir.  In an in-source build this is usually
+-# harmless because $srcdir is `.', but things will broke when you
+-# start a VPATH build or use an absolute $srcdir.
+-#
+-# So we could use something similar to $top_srcdir/$ac_aux_dir/missing,
+-# iff we strip the leading $srcdir from $ac_aux_dir.  That would be:
+-#   am_aux_dir='\$(top_srcdir)/'`expr "$ac_aux_dir" : "$srcdir//*\(.*\)"`
+-# and then we would define $MISSING as
+-#   MISSING="\${SHELL} $am_aux_dir/missing"
+-# This will work as long as MISSING is not called from configure, because
+-# unfortunately $(top_srcdir) has no meaning in configure.
+-# However there are other variables, like CC, which are often used in
+-# configure, and could therefore not use this "fixed" $ac_aux_dir.
+-#
+-# Another solution, used here, is to always expand $ac_aux_dir to an
+-# absolute PATH.  The drawback is that using absolute paths prevent a
+-# configured tree to be moved without reconfiguration.
+-
+-AC_DEFUN([AM_AUX_DIR_EXPAND],
+-[dnl Rely on autoconf to set up CDPATH properly.
+-AC_PREREQ([2.50])dnl
+-# expand $ac_aux_dir to an absolute path
+-am_aux_dir=`cd $ac_aux_dir && pwd`
+-])
++   if test "$gt_cv_have_gettext" = "yes"; then
++     if test "x$ALL_LINGUAS" = "x"; then
++       LINGUAS=
++     else
++       AC_MSG_CHECKING(for catalogs to be installed)
++       NEW_LINGUAS=
++       for presentlang in $ALL_LINGUAS; do
++         useit=no
++         if test "%UNSET%" != "${LINGUAS-%UNSET%}"; then
++           desiredlanguages="$LINGUAS"
++         else
++           desiredlanguages="$ALL_LINGUAS"
++         fi
++         for desiredlang in $desiredlanguages; do
++ 	   # Use the presentlang catalog if desiredlang is
++           #   a. equal to presentlang, or
++           #   b. a variant of presentlang (because in this case,
++           #      presentlang can be used as a fallback for messages
++           #      which are not translated in the desiredlang catalog).
++           case "$desiredlang" in
++             "$presentlang"*) useit=yes;;
++           esac
++         done
++         if test $useit = yes; then
++           NEW_LINGUAS="$NEW_LINGUAS $presentlang"
++         fi
++       done
++       LINGUAS=$NEW_LINGUAS
++       AC_MSG_RESULT($LINGUAS)
++     fi
+ 
+-# AM_CONDITIONAL                                            -*- Autoconf -*-
++     dnl Construct list of names of catalog files to be constructed.
++     if test -n "$LINGUAS"; then
++       for lang in $LINGUAS; do CATALOGS="$CATALOGS $lang$CATOBJEXT"; done
++     fi
++   fi
+ 
+-# Copyright (C) 1997, 2000, 2001, 2003, 2004, 2005, 2006, 2008
+-# Free Software Foundation, Inc.
+-#
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
++   dnl If the AC_CONFIG_AUX_DIR macro for autoconf is used we possibly
++   dnl find the mkinstalldirs script in another subdir but ($top_srcdir).
++   dnl Try to locate is.
++   MKINSTALLDIRS=
++   if test -n "$ac_aux_dir"; then
++     MKINSTALLDIRS="$ac_aux_dir/mkinstalldirs"
++   fi
++   if test -z "$MKINSTALLDIRS"; then
++     MKINSTALLDIRS="\$(top_srcdir)/mkinstalldirs"
++   fi
++   AC_SUBST(MKINSTALLDIRS)
+ 
+-# serial 9
++   dnl Generate list of files to be processed by xgettext which will
++   dnl be included in po/Makefile.
++   test -d po || mkdir po
++   if test "x$srcdir" != "x."; then
++     if test "x`echo $srcdir | sed 's@/.*@@'`" = "x"; then
++       posrcprefix="$srcdir/"
++     else
++       posrcprefix="../$srcdir/"
++     fi
++   else
++     posrcprefix="../"
++   fi
++   rm -f po/POTFILES
++   sed -e "/^#/d" -e "/^\$/d" -e "s,.*,	$posrcprefix& \\\\," -e "\$s/\(.*\) \\\\/\1/" \
++	< $srcdir/po/POTFILES.in > po/POTFILES
++  ])
+ 
+-# AM_CONDITIONAL(NAME, SHELL-CONDITION)
+-# -------------------------------------
+-# Define a conditional.
+-AC_DEFUN([AM_CONDITIONAL],
+-[AC_PREREQ(2.52)dnl
+- ifelse([$1], [TRUE],  [AC_FATAL([$0: invalid condition: $1])],
+-	[$1], [FALSE], [AC_FATAL([$0: invalid condition: $1])])dnl
+-AC_SUBST([$1_TRUE])dnl
+-AC_SUBST([$1_FALSE])dnl
+-_AM_SUBST_NOTMAKE([$1_TRUE])dnl
+-_AM_SUBST_NOTMAKE([$1_FALSE])dnl
+-m4_define([_AM_COND_VALUE_$1], [$2])dnl
+-if $2; then
+-  $1_TRUE=
+-  $1_FALSE='#'
++# AM_GLIB_DEFINE_LOCALEDIR(VARIABLE)
++# -------------------------------
++# Define VARIABLE to the location where catalog files will
++# be installed by po/Makefile.
++glib_DEFUN([GLIB_DEFINE_LOCALEDIR],
++[glib_REQUIRE([GLIB_GNU_GETTEXT])dnl
++glib_save_prefix="$prefix"
++glib_save_exec_prefix="$exec_prefix"
++glib_save_datarootdir="$datarootdir"
++test "x$prefix" = xNONE && prefix=$ac_default_prefix
++test "x$exec_prefix" = xNONE && exec_prefix=$prefix
++datarootdir=`eval echo "${datarootdir}"`
++if test "x$CATOBJEXT" = "x.mo" ; then
++  localedir=`eval echo "${libdir}/locale"`
+ else
+-  $1_TRUE='#'
+-  $1_FALSE=
++  localedir=`eval echo "${datadir}/locale"`
+ fi
+-AC_CONFIG_COMMANDS_PRE(
+-[if test -z "${$1_TRUE}" && test -z "${$1_FALSE}"; then
+-  AC_MSG_ERROR([[conditional "$1" was never defined.
+-Usually this means the macro was only invoked conditionally.]])
+-fi])])
+-
+-# Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2009
+-# Free Software Foundation, Inc.
+-#
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
++prefix="$glib_save_prefix"
++exec_prefix="$glib_save_exec_prefix"
++datarootdir="$glib_save_datarootdir"
++AC_DEFINE_UNQUOTED($1, "$localedir",
++  [Define the location where the catalogs will be installed])
++])
+ 
+-# serial 10
++dnl
++dnl Now the definitions that aclocal will find
++dnl
++ifdef(glib_configure_in,[],[
++AC_DEFUN([AM_GLIB_GNU_GETTEXT],[GLIB_GNU_GETTEXT($@)])
++AC_DEFUN([AM_GLIB_DEFINE_LOCALEDIR],[GLIB_DEFINE_LOCALEDIR($@)])
++])dnl
+ 
+-# There are a few dirty hacks below to avoid letting `AC_PROG_CC' be
+-# written in clear, in which case automake, when reading aclocal.m4,
+-# will think it sees a *use*, and therefore will trigger all it's
+-# C support machinery.  Also note that it means that autoscan, seeing
+-# CC etc. in the Makefile, will ask for an AC_PROG_CC use...
++# GLIB_RUN_PROG(PROGRAM, TEST-FILE, [ACTION-IF-PASS], [ACTION-IF-FAIL])
++# 
++# Create a temporary file with TEST-FILE as its contents and pass the
++# file name to PROGRAM.  Perform ACTION-IF-PASS if PROGRAM exits with
++# 0 and perform ACTION-IF-FAIL for any other exit status.
++AC_DEFUN([GLIB_RUN_PROG],
++[cat >conftest.foo <<_ACEOF
++$2
++_ACEOF
++if AC_RUN_LOG([$1 conftest.foo]); then
++  m4_ifval([$3], [$3], [:])
++m4_ifvaln([$4], [else $4])dnl
++echo "$as_me: failed input was:" >&AS_MESSAGE_LOG_FD
++sed 's/^/| /' conftest.foo >&AS_MESSAGE_LOG_FD
++fi])
+ 
+ 
+-# _AM_DEPENDENCIES(NAME)
+-# ----------------------
+-# See how the compiler implements dependency checking.
+-# NAME is "CC", "CXX", "GCJ", or "OBJC".
+-# We try a few techniques and use that to set a single cache variable.
+-#
+-# We don't AC_REQUIRE the corresponding AC_PROG_CC since the latter was
+-# modified to invoke _AM_DEPENDENCIES(CC); we would have a circular
+-# dependency, and given that the user is not expected to run this macro,
+-# just rely on AC_PROG_CC.
+-AC_DEFUN([_AM_DEPENDENCIES],
+-[AC_REQUIRE([AM_SET_DEPDIR])dnl
+-AC_REQUIRE([AM_OUTPUT_DEPENDENCY_COMMANDS])dnl
+-AC_REQUIRE([AM_MAKE_INCLUDE])dnl
+-AC_REQUIRE([AM_DEP_TRACK])dnl
++# nls.m4 serial 3 (gettext-0.15)
++dnl Copyright (C) 1995-2003, 2005-2006 Free Software Foundation, Inc.
++dnl This file is free software; the Free Software Foundation
++dnl gives unlimited permission to copy and/or distribute it,
++dnl with or without modifications, as long as this notice is preserved.
++dnl
++dnl This file can can be used in projects which are not available under
++dnl the GNU General Public License or the GNU Library General Public
++dnl License but which still want to provide support for the GNU gettext
++dnl functionality.
++dnl Please note that the actual code of the GNU gettext library is covered
++dnl by the GNU Library General Public License, and the rest of the GNU
++dnl gettext package package is covered by the GNU General Public License.
++dnl They are *not* in the public domain.
+ 
+-ifelse([$1], CC,   [depcc="$CC"   am_compiler_list=],
+-       [$1], CXX,  [depcc="$CXX"  am_compiler_list=],
+-       [$1], OBJC, [depcc="$OBJC" am_compiler_list='gcc3 gcc'],
+-       [$1], UPC,  [depcc="$UPC"  am_compiler_list=],
+-       [$1], GCJ,  [depcc="$GCJ"  am_compiler_list='gcc3 gcc'],
+-                   [depcc="$$1"   am_compiler_list=])
++dnl Authors:
++dnl   Ulrich Drepper <drepper@cygnus.com>, 1995-2000.
++dnl   Bruno Haible <haible@clisp.cons.org>, 2000-2003.
+ 
+-AC_CACHE_CHECK([dependency style of $depcc],
+-               [am_cv_$1_dependencies_compiler_type],
+-[if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
+-  # We make a subdir and do the tests there.  Otherwise we can end up
+-  # making bogus files that we don't know about and never remove.  For
+-  # instance it was reported that on HP-UX the gcc test will end up
+-  # making a dummy file named `D' -- because `-MD' means `put the output
+-  # in D'.
+-  mkdir conftest.dir
+-  # Copy depcomp to subdir because otherwise we won't find it if we're
+-  # using a relative directory.
+-  cp "$am_depcomp" conftest.dir
+-  cd conftest.dir
+-  # We will build objects and dependencies in a subdirectory because
+-  # it helps to detect inapplicable dependency modes.  For instance
+-  # both Tru64's cc and ICC support -MD to output dependencies as a
+-  # side effect of compilation, but ICC will put the dependencies in
+-  # the current directory while Tru64 will put them in the object
+-  # directory.
+-  mkdir sub
++AC_PREREQ(2.50)
+ 
+-  am_cv_$1_dependencies_compiler_type=none
+-  if test "$am_compiler_list" = ""; then
+-     am_compiler_list=`sed -n ['s/^#*\([a-zA-Z0-9]*\))$/\1/p'] < ./depcomp`
+-  fi
+-  am__universal=false
+-  m4_case([$1], [CC],
+-    [case " $depcc " in #(
+-     *\ -arch\ *\ -arch\ *) am__universal=true ;;
+-     esac],
+-    [CXX],
+-    [case " $depcc " in #(
+-     *\ -arch\ *\ -arch\ *) am__universal=true ;;
+-     esac])
++AC_DEFUN([AM_NLS],
++[
++  AC_MSG_CHECKING([whether NLS is requested])
++  dnl Default is enabled NLS
++  AC_ARG_ENABLE(nls,
++    [  --disable-nls           do not use Native Language Support],
++    USE_NLS=$enableval, USE_NLS=yes)
++  AC_MSG_RESULT($USE_NLS)
++  AC_SUBST(USE_NLS)
++])
+ 
+-  for depmode in $am_compiler_list; do
+-    # Setup a source with many dependencies, because some compilers
+-    # like to wrap large dependency lists on column 80 (with \), and
+-    # we should not choose a depcomp mode which is confused by this.
+-    #
+-    # We need to recreate these files for each test, as the compiler may
+-    # overwrite some of them when testing with obscure command lines.
+-    # This happens at least with the AIX C compiler.
+-    : > sub/conftest.c
+-    for i in 1 2 3 4 5 6; do
+-      echo '#include "conftst'$i'.h"' >> sub/conftest.c
+-      # Using `: > sub/conftst$i.h' creates only sub/conftst1.h with
+-      # Solaris 8's {/usr,}/bin/sh.
+-      touch sub/conftst$i.h
+-    done
+-    echo "${am__include} ${am__quote}sub/conftest.Po${am__quote}" > confmf
++# pkg.m4 - Macros to locate and utilise pkg-config.            -*- Autoconf -*-
++# 
++# Copyright ТЉ 2004 Scott James Remnant <scott@netsplit.com>.
++#
++# This program is free software; you can redistribute it and/or modify
++# it under the terms of the GNU General Public License as published by
++# the Free Software Foundation; either version 2 of the License, or
++# (at your option) any later version.
++#
++# This program is distributed in the hope that it will be useful, but
++# WITHOUT ANY WARRANTY; without even the implied warranty of
++# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
++# General Public License for more details.
++#
++# You should have received a copy of the GNU General Public License
++# along with this program; if not, write to the Free Software
++# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
++#
++# As a special exception to the GNU General Public License, if you
++# distribute this file as part of a program that contains a
++# configuration script generated by Autoconf, you may include it under
++# the same distribution terms that you use for the rest of that program.
+ 
+-    # We check with `-c' and `-o' for the sake of the "dashmstdout"
+-    # mode.  It turns out that the SunPro C++ compiler does not properly
+-    # handle `-M -o', and we need to detect this.  Also, some Intel
+-    # versions had trouble with output in subdirs
+-    am__obj=sub/conftest.${OBJEXT-o}
+-    am__minus_obj="-o $am__obj"
+-    case $depmode in
+-    gcc)
+-      # This depmode causes a compiler race in universal mode.
+-      test "$am__universal" = false || continue
+-      ;;
+-    nosideeffect)
+-      # after this tag, mechanisms are not by side-effect, so they'll
+-      # only be used when explicitly requested
+-      if test "x$enable_dependency_tracking" = xyes; then
+-	continue
+-      else
+-	break
+-      fi
+-      ;;
+-    msvisualcpp | msvcmsys)
+-      # This compiler won't grok `-c -o', but also, the minuso test has
+-      # not run yet.  These depmodes are late enough in the game, and
+-      # so weak that their functioning should not be impacted.
+-      am__obj=conftest.${OBJEXT-o}
+-      am__minus_obj=
+-      ;;
+-    none) break ;;
+-    esac
+-    if depmode=$depmode \
+-       source=sub/conftest.c object=$am__obj \
+-       depfile=sub/conftest.Po tmpdepfile=sub/conftest.TPo \
+-       $SHELL ./depcomp $depcc -c $am__minus_obj sub/conftest.c \
+-         >/dev/null 2>conftest.err &&
+-       grep sub/conftst1.h sub/conftest.Po > /dev/null 2>&1 &&
+-       grep sub/conftst6.h sub/conftest.Po > /dev/null 2>&1 &&
+-       grep $am__obj sub/conftest.Po > /dev/null 2>&1 &&
+-       ${MAKE-make} -s -f confmf > /dev/null 2>&1; then
+-      # icc doesn't choke on unknown options, it will just issue warnings
+-      # or remarks (even with -Werror).  So we grep stderr for any message
+-      # that says an option was ignored or not supported.
+-      # When given -MP, icc 7.0 and 7.1 complain thusly:
+-      #   icc: Command line warning: ignoring option '-M'; no argument required
+-      # The diagnosis changed in icc 8.0:
+-      #   icc: Command line remark: option '-MP' not supported
+-      if (grep 'ignoring option' conftest.err ||
+-          grep 'not supported' conftest.err) >/dev/null 2>&1; then :; else
+-        am_cv_$1_dependencies_compiler_type=$depmode
+-        break
+-      fi
++# PKG_PROG_PKG_CONFIG([MIN-VERSION])
++# ----------------------------------
++AC_DEFUN([PKG_PROG_PKG_CONFIG],
++[m4_pattern_forbid([^_?PKG_[A-Z_]+$])
++m4_pattern_allow([^PKG_CONFIG(_PATH)?$])
++AC_ARG_VAR([PKG_CONFIG], [path to pkg-config utility])dnl
++if test "x$ac_cv_env_PKG_CONFIG_set" != "xset"; then
++	AC_PATH_TOOL([PKG_CONFIG], [pkg-config])
++fi
++if test -n "$PKG_CONFIG"; then
++	_pkg_min_version=m4_default([$1], [0.9.0])
++	AC_MSG_CHECKING([pkg-config is at least version $_pkg_min_version])
++	if $PKG_CONFIG --atleast-pkgconfig-version $_pkg_min_version; then
++		AC_MSG_RESULT([yes])
++	else
++		AC_MSG_RESULT([no])
++		PKG_CONFIG=""
++	fi
++		
++fi[]dnl
++])# PKG_PROG_PKG_CONFIG
++
++# PKG_CHECK_EXISTS(MODULES, [ACTION-IF-FOUND], [ACTION-IF-NOT-FOUND])
++#
++# Check to see whether a particular set of modules exists.  Similar
++# to PKG_CHECK_MODULES(), but does not set variables or print errors.
++#
++#
++# Similar to PKG_CHECK_MODULES, make sure that the first instance of
++# this or PKG_CHECK_MODULES is called, or make sure to call
++# PKG_CHECK_EXISTS manually
++# --------------------------------------------------------------
++AC_DEFUN([PKG_CHECK_EXISTS],
++[AC_REQUIRE([PKG_PROG_PKG_CONFIG])dnl
++if test -n "$PKG_CONFIG" && \
++    AC_RUN_LOG([$PKG_CONFIG --exists --print-errors "$1"]); then
++  m4_ifval([$2], [$2], [:])
++m4_ifvaln([$3], [else
++  $3])dnl
++fi])
++
++
++# _PKG_CONFIG([VARIABLE], [COMMAND], [MODULES])
++# ---------------------------------------------
++m4_define([_PKG_CONFIG],
++[if test -n "$PKG_CONFIG"; then
++    if test -n "$$1"; then
++        pkg_cv_[]$1="$$1"
++    else
++        PKG_CHECK_EXISTS([$3],
++                         [pkg_cv_[]$1=`$PKG_CONFIG --[]$2 "$3" 2>/dev/null`],
++			 [pkg_failed=yes])
+     fi
+-  done
++else
++	pkg_failed=untried
++fi[]dnl
++])# _PKG_CONFIG
+ 
+-  cd ..
+-  rm -rf conftest.dir
++# _PKG_SHORT_ERRORS_SUPPORTED
++# -----------------------------
++AC_DEFUN([_PKG_SHORT_ERRORS_SUPPORTED],
++[AC_REQUIRE([PKG_PROG_PKG_CONFIG])
++if $PKG_CONFIG --atleast-pkgconfig-version 0.20; then
++        _pkg_short_errors_supported=yes
+ else
+-  am_cv_$1_dependencies_compiler_type=none
+-fi
+-])
+-AC_SUBST([$1DEPMODE], [depmode=$am_cv_$1_dependencies_compiler_type])
+-AM_CONDITIONAL([am__fastdep$1], [
+-  test "x$enable_dependency_tracking" != xno \
+-  && test "$am_cv_$1_dependencies_compiler_type" = gcc3])
+-])
++        _pkg_short_errors_supported=no
++fi[]dnl
++])# _PKG_SHORT_ERRORS_SUPPORTED
+ 
+ 
+-# AM_SET_DEPDIR
+-# -------------
+-# Choose a directory name for dependency files.
+-# This macro is AC_REQUIREd in _AM_DEPENDENCIES
+-AC_DEFUN([AM_SET_DEPDIR],
+-[AC_REQUIRE([AM_SET_LEADING_DOT])dnl
+-AC_SUBST([DEPDIR], ["${am__leading_dot}deps"])dnl
+-])
++# PKG_CHECK_MODULES(VARIABLE-PREFIX, MODULES, [ACTION-IF-FOUND],
++# [ACTION-IF-NOT-FOUND])
++#
++#
++# Note that if there is a possibility the first call to
++# PKG_CHECK_MODULES might not happen, you should be sure to include an
++# explicit call to PKG_PROG_PKG_CONFIG in your configure.ac
++#
++#
++# --------------------------------------------------------------
++AC_DEFUN([PKG_CHECK_MODULES],
++[AC_REQUIRE([PKG_PROG_PKG_CONFIG])dnl
++AC_ARG_VAR([$1][_CFLAGS], [C compiler flags for $1, overriding pkg-config])dnl
++AC_ARG_VAR([$1][_LIBS], [linker flags for $1, overriding pkg-config])dnl
+ 
++pkg_failed=no
++AC_MSG_CHECKING([for $1])
+ 
+-# AM_DEP_TRACK
+-# ------------
+-AC_DEFUN([AM_DEP_TRACK],
+-[AC_ARG_ENABLE(dependency-tracking,
+-[  --disable-dependency-tracking  speeds up one-time build
+-  --enable-dependency-tracking   do not reject slow dependency extractors])
+-if test "x$enable_dependency_tracking" != xno; then
+-  am_depcomp="$ac_aux_dir/depcomp"
+-  AMDEPBACKSLASH='\'
+-fi
+-AM_CONDITIONAL([AMDEP], [test "x$enable_dependency_tracking" != xno])
+-AC_SUBST([AMDEPBACKSLASH])dnl
+-_AM_SUBST_NOTMAKE([AMDEPBACKSLASH])dnl
+-])
++_PKG_CONFIG([$1][_CFLAGS], [cflags], [$2])
++_PKG_CONFIG([$1][_LIBS], [libs], [$2])
+ 
+-# Generate code to set up dependency tracking.              -*- Autoconf -*-
++m4_define([_PKG_TEXT], [Alternatively, you may set the environment variables $1[]_CFLAGS
++and $1[]_LIBS to avoid the need to call pkg-config.
++See the pkg-config man page for more details.])
+ 
+-# Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2008
+-# Free Software Foundation, Inc.
+-#
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
++if test $pkg_failed = yes; then
++        _PKG_SHORT_ERRORS_SUPPORTED
++        if test $_pkg_short_errors_supported = yes; then
++	        $1[]_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "$2"`
++        else 
++	        $1[]_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "$2"`
++        fi
++	# Put the nasty error message in config.log where it belongs
++	echo "$$1[]_PKG_ERRORS" >&AS_MESSAGE_LOG_FD
+ 
+-#serial 5
++	ifelse([$4], , [AC_MSG_ERROR(dnl
++[Package requirements ($2) were not met:
+ 
+-# _AM_OUTPUT_DEPENDENCY_COMMANDS
+-# ------------------------------
+-AC_DEFUN([_AM_OUTPUT_DEPENDENCY_COMMANDS],
+-[{
+-  # Autoconf 2.62 quotes --file arguments for eval, but not when files
+-  # are listed without --file.  Let's play safe and only enable the eval
+-  # if we detect the quoting.
+-  case $CONFIG_FILES in
+-  *\'*) eval set x "$CONFIG_FILES" ;;
+-  *)   set x $CONFIG_FILES ;;
+-  esac
+-  shift
+-  for mf
+-  do
+-    # Strip MF so we end up with the name of the file.
+-    mf=`echo "$mf" | sed -e 's/:.*$//'`
+-    # Check whether this is an Automake generated Makefile or not.
+-    # We used to match only the files named `Makefile.in', but
+-    # some people rename them; so instead we look at the file content.
+-    # Grep'ing the first line is not enough: some people post-process
+-    # each Makefile.in and add a new line on top of each file to say so.
+-    # Grep'ing the whole file is not good either: AIX grep has a line
+-    # limit of 2048, but all sed's we know have understand at least 4000.
+-    if sed -n 's,^#.*generated by automake.*,X,p' "$mf" | grep X >/dev/null 2>&1; then
+-      dirpart=`AS_DIRNAME("$mf")`
+-    else
+-      continue
+-    fi
+-    # Extract the definition of DEPDIR, am__include, and am__quote
+-    # from the Makefile without running `make'.
+-    DEPDIR=`sed -n 's/^DEPDIR = //p' < "$mf"`
+-    test -z "$DEPDIR" && continue
+-    am__include=`sed -n 's/^am__include = //p' < "$mf"`
+-    test -z "am__include" && continue
+-    am__quote=`sed -n 's/^am__quote = //p' < "$mf"`
+-    # When using ansi2knr, U may be empty or an underscore; expand it
+-    U=`sed -n 's/^U = //p' < "$mf"`
+-    # Find all dependency output files, they are included files with
+-    # $(DEPDIR) in their names.  We invoke sed twice because it is the
+-    # simplest approach to changing $(DEPDIR) to its actual value in the
+-    # expansion.
+-    for file in `sed -n "
+-      s/^$am__include $am__quote\(.*(DEPDIR).*\)$am__quote"'$/\1/p' <"$mf" | \
+-	 sed -e 's/\$(DEPDIR)/'"$DEPDIR"'/g' -e 's/\$U/'"$U"'/g'`; do
+-      # Make sure the directory exists.
+-      test -f "$dirpart/$file" && continue
+-      fdir=`AS_DIRNAME(["$file"])`
+-      AS_MKDIR_P([$dirpart/$fdir])
+-      # echo "creating $dirpart/$file"
+-      echo '# dummy' > "$dirpart/$file"
+-    done
+-  done
+-}
+-])# _AM_OUTPUT_DEPENDENCY_COMMANDS
++$$1_PKG_ERRORS
+ 
++Consider adjusting the PKG_CONFIG_PATH environment variable if you
++installed software in a non-standard prefix.
+ 
+-# AM_OUTPUT_DEPENDENCY_COMMANDS
+-# -----------------------------
+-# This macro should only be invoked once -- use via AC_REQUIRE.
+-#
+-# This code is only required when automatic dependency tracking
+-# is enabled.  FIXME.  This creates each `.P' file that we will
+-# need in order to bootstrap the dependency handling code.
+-AC_DEFUN([AM_OUTPUT_DEPENDENCY_COMMANDS],
+-[AC_CONFIG_COMMANDS([depfiles],
+-     [test x"$AMDEP_TRUE" != x"" || _AM_OUTPUT_DEPENDENCY_COMMANDS],
+-     [AMDEP_TRUE="$AMDEP_TRUE" ac_aux_dir="$ac_aux_dir"])
+-])
++_PKG_TEXT
++])],
++		[AC_MSG_RESULT([no])
++                $4])
++elif test $pkg_failed = untried; then
++	ifelse([$4], , [AC_MSG_FAILURE(dnl
++[The pkg-config script could not be found or is too old.  Make sure it
++is in your PATH or set the PKG_CONFIG environment variable to the full
++path to pkg-config.
+ 
+-# Do all the work for Automake.                             -*- Autoconf -*-
++_PKG_TEXT
+ 
+-# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
+-# 2005, 2006, 2008, 2009 Free Software Foundation, Inc.
++To get pkg-config, see <http://pkg-config.freedesktop.org/>.])],
++		[$4])
++else
++	$1[]_CFLAGS=$pkg_cv_[]$1[]_CFLAGS
++	$1[]_LIBS=$pkg_cv_[]$1[]_LIBS
++        AC_MSG_RESULT([yes])
++	ifelse([$3], , :, [$3])
++fi[]dnl
++])# PKG_CHECK_MODULES
++
++# Copyright (C) 2002, 2003, 2005, 2006, 2007, 2008  Free Software Foundation, Inc.
+ #
+ # This file is free software; the Free Software Foundation
+ # gives unlimited permission to copy and/or distribute it,
+ # with or without modifications, as long as this notice is preserved.
+ 
+-# serial 16
+-
+-# This macro actually does too much.  Some checks are only needed if
+-# your package does certain things.  But this isn't really a big deal.
+-
+-# AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])
+-# AM_INIT_AUTOMAKE([OPTIONS])
+-# -----------------------------------------------
+-# The call with PACKAGE and VERSION arguments is the old style
+-# call (pre autoconf-2.50), which is being phased out.  PACKAGE
+-# and VERSION should now be passed to AC_INIT and removed from
+-# the call to AM_INIT_AUTOMAKE.
+-# We support both call styles for the transition.  After
+-# the next Automake release, Autoconf can make the AC_INIT
+-# arguments mandatory, and then we can depend on a new Autoconf
+-# release and drop the old call support.
+-AC_DEFUN([AM_INIT_AUTOMAKE],
+-[AC_PREREQ([2.62])dnl
+-dnl Autoconf wants to disallow AM_ names.  We explicitly allow
+-dnl the ones we care about.
+-m4_pattern_allow([^AM_[A-Z]+FLAGS$])dnl
+-AC_REQUIRE([AM_SET_CURRENT_AUTOMAKE_VERSION])dnl
+-AC_REQUIRE([AC_PROG_INSTALL])dnl
+-if test "`cd $srcdir && pwd`" != "`pwd`"; then
+-  # Use -I$(srcdir) only when $(srcdir) != ., so that make's output
+-  # is not polluted with repeated "-I."
+-  AC_SUBST([am__isrc], [' -I$(srcdir)'])_AM_SUBST_NOTMAKE([am__isrc])dnl
+-  # test to see if srcdir already configured
+-  if test -f $srcdir/config.status; then
+-    AC_MSG_ERROR([source directory already configured; run "make distclean" there first])
+-  fi
+-fi
+-
+-# test whether we have cygpath
+-if test -z "$CYGPATH_W"; then
+-  if (cygpath --version) >/dev/null 2>/dev/null; then
+-    CYGPATH_W='cygpath -w'
+-  else
+-    CYGPATH_W=echo
+-  fi
+-fi
+-AC_SUBST([CYGPATH_W])
+-
+-# Define the identity of the package.
+-dnl Distinguish between old-style and new-style calls.
+-m4_ifval([$2],
+-[m4_ifval([$3], [_AM_SET_OPTION([no-define])])dnl
+- AC_SUBST([PACKAGE], [$1])dnl
+- AC_SUBST([VERSION], [$2])],
+-[_AM_SET_OPTIONS([$1])dnl
+-dnl Diagnose old-style AC_INIT with new-style AM_AUTOMAKE_INIT.
+-m4_if(m4_ifdef([AC_PACKAGE_NAME], 1)m4_ifdef([AC_PACKAGE_VERSION], 1), 11,,
+-  [m4_fatal([AC_INIT should be called with package and version arguments])])dnl
+- AC_SUBST([PACKAGE], ['AC_PACKAGE_TARNAME'])dnl
+- AC_SUBST([VERSION], ['AC_PACKAGE_VERSION'])])dnl
+-
+-_AM_IF_OPTION([no-define],,
+-[AC_DEFINE_UNQUOTED(PACKAGE, "$PACKAGE", [Name of package])
+- AC_DEFINE_UNQUOTED(VERSION, "$VERSION", [Version number of package])])dnl
+-
+-# Some tools Automake needs.
+-AC_REQUIRE([AM_SANITY_CHECK])dnl
+-AC_REQUIRE([AC_ARG_PROGRAM])dnl
+-AM_MISSING_PROG(ACLOCAL, aclocal-${am__api_version})
+-AM_MISSING_PROG(AUTOCONF, autoconf)
+-AM_MISSING_PROG(AUTOMAKE, automake-${am__api_version})
+-AM_MISSING_PROG(AUTOHEADER, autoheader)
+-AM_MISSING_PROG(MAKEINFO, makeinfo)
+-AC_REQUIRE([AM_PROG_INSTALL_SH])dnl
+-AC_REQUIRE([AM_PROG_INSTALL_STRIP])dnl
+-AC_REQUIRE([AM_PROG_MKDIR_P])dnl
+-# We need awk for the "check" target.  The system "awk" is bad on
+-# some platforms.
+-AC_REQUIRE([AC_PROG_AWK])dnl
+-AC_REQUIRE([AC_PROG_MAKE_SET])dnl
+-AC_REQUIRE([AM_SET_LEADING_DOT])dnl
+-_AM_IF_OPTION([tar-ustar], [_AM_PROG_TAR([ustar])],
+-	      [_AM_IF_OPTION([tar-pax], [_AM_PROG_TAR([pax])],
+-			     [_AM_PROG_TAR([v7])])])
+-_AM_IF_OPTION([no-dependencies],,
+-[AC_PROVIDE_IFELSE([AC_PROG_CC],
+-		  [_AM_DEPENDENCIES(CC)],
+-		  [define([AC_PROG_CC],
+-			  defn([AC_PROG_CC])[_AM_DEPENDENCIES(CC)])])dnl
+-AC_PROVIDE_IFELSE([AC_PROG_CXX],
+-		  [_AM_DEPENDENCIES(CXX)],
+-		  [define([AC_PROG_CXX],
+-			  defn([AC_PROG_CXX])[_AM_DEPENDENCIES(CXX)])])dnl
+-AC_PROVIDE_IFELSE([AC_PROG_OBJC],
+-		  [_AM_DEPENDENCIES(OBJC)],
+-		  [define([AC_PROG_OBJC],
+-			  defn([AC_PROG_OBJC])[_AM_DEPENDENCIES(OBJC)])])dnl
+-])
+-_AM_IF_OPTION([silent-rules], [AC_REQUIRE([AM_SILENT_RULES])])dnl
+-dnl The `parallel-tests' driver may need to know about EXEEXT, so add the
+-dnl `am__EXEEXT' conditional if _AM_COMPILER_EXEEXT was seen.  This macro
+-dnl is hooked onto _AC_COMPILER_EXEEXT early, see below.
+-AC_CONFIG_COMMANDS_PRE(dnl
+-[m4_provide_if([_AM_COMPILER_EXEEXT],
+-  [AM_CONDITIONAL([am__EXEEXT], [test -n "$EXEEXT"])])])dnl
++# AM_AUTOMAKE_VERSION(VERSION)
++# ----------------------------
++# Automake X.Y traces this macro to ensure aclocal.m4 has been
++# generated from the m4 files accompanying Automake X.Y.
++# (This private macro should not be called outside this file.)
++AC_DEFUN([AM_AUTOMAKE_VERSION],
++[am__api_version='1.11'
++dnl Some users find AM_AUTOMAKE_VERSION and mistake it for a way to
++dnl require some minimum version.  Point them to the right macro.
++m4_if([$1], [1.11.1], [],
++      [AC_FATAL([Do not call $0, use AM_INIT_AUTOMAKE([$1]).])])dnl
+ ])
+ 
+-dnl Hook into `_AC_COMPILER_EXEEXT' early to learn its expansion.  Do not
+-dnl add the conditional right here, as _AC_COMPILER_EXEEXT may be further
+-dnl mangled by Autoconf and run in a shell conditional statement.
+-m4_define([_AC_COMPILER_EXEEXT],
+-m4_defn([_AC_COMPILER_EXEEXT])[m4_provide([_AM_COMPILER_EXEEXT])])
+-
++# _AM_AUTOCONF_VERSION(VERSION)
++# -----------------------------
++# aclocal traces this macro to find the Autoconf version.
++# This is a private macro too.  Using m4_define simplifies
++# the logic in aclocal, which can simply ignore this definition.
++m4_define([_AM_AUTOCONF_VERSION], [])
+ 
+-# When config.status generates a header, we must update the stamp-h file.
+-# This file resides in the same directory as the config header
+-# that is generated.  The stamp files are numbered to have different names.
++# AM_SET_CURRENT_AUTOMAKE_VERSION
++# -------------------------------
++# Call AM_AUTOMAKE_VERSION and AM_AUTOMAKE_VERSION so they can be traced.
++# This function is AC_REQUIREd by AM_INIT_AUTOMAKE.
++AC_DEFUN([AM_SET_CURRENT_AUTOMAKE_VERSION],
++[AM_AUTOMAKE_VERSION([1.11.1])dnl
++m4_ifndef([AC_AUTOCONF_VERSION],
++  [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl
++_AM_AUTOCONF_VERSION(m4_defn([AC_AUTOCONF_VERSION]))])
+ 
+-# Autoconf calls _AC_AM_CONFIG_HEADER_HOOK (when defined) in the
+-# loop where config.status creates the headers, so we can generate
+-# our stamp files there.
+-AC_DEFUN([_AC_AM_CONFIG_HEADER_HOOK],
+-[# Compute $1's index in $config_headers.
+-_am_arg=$1
+-_am_stamp_count=1
+-for _am_header in $config_headers :; do
+-  case $_am_header in
+-    $_am_arg | $_am_arg:* )
+-      break ;;
+-    * )
+-      _am_stamp_count=`expr $_am_stamp_count + 1` ;;
+-  esac
+-done
+-echo "timestamp for $_am_arg" >`AS_DIRNAME(["$_am_arg"])`/stamp-h[]$_am_stamp_count])
++# AM_AUX_DIR_EXPAND                                         -*- Autoconf -*-
+ 
+-# Copyright (C) 2001, 2003, 2005, 2008  Free Software Foundation, Inc.
++# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.
+ #
+ # This file is free software; the Free Software Foundation
+ # gives unlimited permission to copy and/or distribute it,
+ # with or without modifications, as long as this notice is preserved.
+ 
+-# AM_PROG_INSTALL_SH
+-# ------------------
+-# Define $install_sh.
+-AC_DEFUN([AM_PROG_INSTALL_SH],
+-[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl
+-if test x"${install_sh}" != xset; then
+-  case $am_aux_dir in
+-  *\ * | *\	*)
+-    install_sh="\${SHELL} '$am_aux_dir/install-sh'" ;;
+-  *)
+-    install_sh="\${SHELL} $am_aux_dir/install-sh"
+-  esac
+-fi
+-AC_SUBST(install_sh)])
+-
+-# Copyright (C) 2003, 2005  Free Software Foundation, Inc.
++# For projects using AC_CONFIG_AUX_DIR([foo]), Autoconf sets
++# $ac_aux_dir to `$srcdir/foo'.  In other projects, it is set to
++# `$srcdir', `$srcdir/..', or `$srcdir/../..'.
+ #
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
+-
+-# serial 2
+-
+-# Check whether the underlying file-system supports filenames
+-# with a leading dot.  For instance MS-DOS doesn't.
+-AC_DEFUN([AM_SET_LEADING_DOT],
+-[rm -rf .tst 2>/dev/null
+-mkdir .tst 2>/dev/null
+-if test -d .tst; then
+-  am__leading_dot=.
+-else
+-  am__leading_dot=_
+-fi
+-rmdir .tst 2>/dev/null
+-AC_SUBST([am__leading_dot])])
+-
+-# Add --enable-maintainer-mode option to configure.         -*- Autoconf -*-
+-# From Jim Meyering
+-
+-# Copyright (C) 1996, 1998, 2000, 2001, 2002, 2003, 2004, 2005, 2008
+-# Free Software Foundation, Inc.
++# Of course, Automake must honor this variable whenever it calls a
++# tool from the auxiliary directory.  The problem is that $srcdir (and
++# therefore $ac_aux_dir as well) can be either absolute or relative,
++# depending on how configure is run.  This is pretty annoying, since
++# it makes $ac_aux_dir quite unusable in subdirectories: in the top
++# source directory, any form will work fine, but in subdirectories a
++# relative path needs to be adjusted first.
+ #
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
+-
+-# serial 5
+-
+-# AM_MAINTAINER_MODE([DEFAULT-MODE])
+-# ----------------------------------
+-# Control maintainer-specific portions of Makefiles.
+-# Default is to disable them, unless `enable' is passed literally.
+-# For symmetry, `disable' may be passed as well.  Anyway, the user
+-# can override the default with the --enable/--disable switch.
+-AC_DEFUN([AM_MAINTAINER_MODE],
+-[m4_case(m4_default([$1], [disable]),
+-       [enable], [m4_define([am_maintainer_other], [disable])],
+-       [disable], [m4_define([am_maintainer_other], [enable])],
+-       [m4_define([am_maintainer_other], [enable])
+-        m4_warn([syntax], [unexpected argument to AM@&t@_MAINTAINER_MODE: $1])])
+-AC_MSG_CHECKING([whether to am_maintainer_other maintainer-specific portions of Makefiles])
+-  dnl maintainer-mode's default is 'disable' unless 'enable' is passed
+-  AC_ARG_ENABLE([maintainer-mode],
+-[  --][am_maintainer_other][-maintainer-mode  am_maintainer_other make rules and dependencies not useful
+-			  (and sometimes confusing) to the casual installer],
+-      [USE_MAINTAINER_MODE=$enableval],
+-      [USE_MAINTAINER_MODE=]m4_if(am_maintainer_other, [enable], [no], [yes]))
+-  AC_MSG_RESULT([$USE_MAINTAINER_MODE])
+-  AM_CONDITIONAL([MAINTAINER_MODE], [test $USE_MAINTAINER_MODE = yes])
+-  MAINT=$MAINTAINER_MODE_TRUE
+-  AC_SUBST([MAINT])dnl
+-]
+-)
+-
+-AU_DEFUN([jm_MAINTAINER_MODE], [AM_MAINTAINER_MODE])
+-
+-# Check to see how 'make' treats includes.	            -*- Autoconf -*-
+-
+-# Copyright (C) 2001, 2002, 2003, 2005, 2009  Free Software Foundation, Inc.
++# $ac_aux_dir/missing
++#    fails when called from a subdirectory if $ac_aux_dir is relative
++# $top_srcdir/$ac_aux_dir/missing
++#    fails if $ac_aux_dir is absolute,
++#    fails when called from a subdirectory in a VPATH build with
++#          a relative $ac_aux_dir
+ #
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
+-
+-# serial 4
++# The reason of the latter failure is that $top_srcdir and $ac_aux_dir
++# are both prefixed by $srcdir.  In an in-source build this is usually
++# harmless because $srcdir is `.', but things will broke when you
++# start a VPATH build or use an absolute $srcdir.
++#
++# So we could use something similar to $top_srcdir/$ac_aux_dir/missing,
++# iff we strip the leading $srcdir from $ac_aux_dir.  That would be:
++#   am_aux_dir='\$(top_srcdir)/'`expr "$ac_aux_dir" : "$srcdir//*\(.*\)"`
++# and then we would define $MISSING as
++#   MISSING="\${SHELL} $am_aux_dir/missing"
++# This will work as long as MISSING is not called from configure, because
++# unfortunately $(top_srcdir) has no meaning in configure.
++# However there are other variables, like CC, which are often used in
++# configure, and could therefore not use this "fixed" $ac_aux_dir.
++#
++# Another solution, used here, is to always expand $ac_aux_dir to an
++# absolute PATH.  The drawback is that using absolute paths prevent a
++# configured tree to be moved without reconfiguration.
+ 
+-# AM_MAKE_INCLUDE()
+-# -----------------
+-# Check to see how make treats includes.
+-AC_DEFUN([AM_MAKE_INCLUDE],
+-[am_make=${MAKE-make}
+-cat > confinc << 'END'
+-am__doit:
+-	@echo this is the am__doit target
+-.PHONY: am__doit
+-END
+-# If we don't find an include directive, just comment out the code.
+-AC_MSG_CHECKING([for style of include used by $am_make])
+-am__include="#"
+-am__quote=
+-_am_result=none
+-# First try GNU make style include.
+-echo "include confinc" > confmf
+-# Ignore all kinds of additional output from `make'.
+-case `$am_make -s -f confmf 2> /dev/null` in #(
+-*the\ am__doit\ target*)
+-  am__include=include
+-  am__quote=
+-  _am_result=GNU
+-  ;;
+-esac
+-# Now try BSD make style include.
+-if test "$am__include" = "#"; then
+-   echo '.include "confinc"' > confmf
+-   case `$am_make -s -f confmf 2> /dev/null` in #(
+-   *the\ am__doit\ target*)
+-     am__include=.include
+-     am__quote="\""
+-     _am_result=BSD
+-     ;;
+-   esac
+-fi
+-AC_SUBST([am__include])
+-AC_SUBST([am__quote])
+-AC_MSG_RESULT([$_am_result])
+-rm -f confinc confmf
++AC_DEFUN([AM_AUX_DIR_EXPAND],
++[dnl Rely on autoconf to set up CDPATH properly.
++AC_PREREQ([2.50])dnl
++# expand $ac_aux_dir to an absolute path
++am_aux_dir=`cd $ac_aux_dir && pwd`
+ ])
+ 
+-# Fake the existence of programs that GNU maintainers use.  -*- Autoconf -*-
++# AM_CONDITIONAL                                            -*- Autoconf -*-
+ 
+-# Copyright (C) 1997, 1999, 2000, 2001, 2003, 2004, 2005, 2008
++# Copyright (C) 1997, 2000, 2001, 2003, 2004, 2005, 2006, 2008
+ # Free Software Foundation, Inc.
+ #
+ # This file is free software; the Free Software Foundation
+ # gives unlimited permission to copy and/or distribute it,
+ # with or without modifications, as long as this notice is preserved.
+ 
+-# serial 6
+-
+-# AM_MISSING_PROG(NAME, PROGRAM)
+-# ------------------------------
+-AC_DEFUN([AM_MISSING_PROG],
+-[AC_REQUIRE([AM_MISSING_HAS_RUN])
+-$1=${$1-"${am_missing_run}$2"}
+-AC_SUBST($1)])
+-
++# serial 9
+ 
+-# AM_MISSING_HAS_RUN
+-# ------------------
+-# Define MISSING if not defined so far and test if it supports --run.
+-# If it does, set am_missing_run to use it, otherwise, to nothing.
+-AC_DEFUN([AM_MISSING_HAS_RUN],
+-[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl
+-AC_REQUIRE_AUX_FILE([missing])dnl
+-if test x"${MISSING+set}" != xset; then
+-  case $am_aux_dir in
+-  *\ * | *\	*)
+-    MISSING="\${SHELL} \"$am_aux_dir/missing\"" ;;
+-  *)
+-    MISSING="\${SHELL} $am_aux_dir/missing" ;;
+-  esac
+-fi
+-# Use eval to expand $SHELL
+-if eval "$MISSING --run true"; then
+-  am_missing_run="$MISSING --run "
++# AM_CONDITIONAL(NAME, SHELL-CONDITION)
++# -------------------------------------
++# Define a conditional.
++AC_DEFUN([AM_CONDITIONAL],
++[AC_PREREQ(2.52)dnl
++ ifelse([$1], [TRUE],  [AC_FATAL([$0: invalid condition: $1])],
++	[$1], [FALSE], [AC_FATAL([$0: invalid condition: $1])])dnl
++AC_SUBST([$1_TRUE])dnl
++AC_SUBST([$1_FALSE])dnl
++_AM_SUBST_NOTMAKE([$1_TRUE])dnl
++_AM_SUBST_NOTMAKE([$1_FALSE])dnl
++m4_define([_AM_COND_VALUE_$1], [$2])dnl
++if $2; then
++  $1_TRUE=
++  $1_FALSE='#'
+ else
+-  am_missing_run=
+-  AC_MSG_WARN([`missing' script is too old or missing])
++  $1_TRUE='#'
++  $1_FALSE=
+ fi
+-])
++AC_CONFIG_COMMANDS_PRE(
++[if test -z "${$1_TRUE}" && test -z "${$1_FALSE}"; then
++  AC_MSG_ERROR([[conditional "$1" was never defined.
++Usually this means the macro was only invoked conditionally.]])
++fi])])
+ 
+-# Copyright (C) 2003, 2004, 2005, 2006  Free Software Foundation, Inc.
++# Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2009
++# Free Software Foundation, Inc.
+ #
+ # This file is free software; the Free Software Foundation
+ # gives unlimited permission to copy and/or distribute it,
+ # with or without modifications, as long as this notice is preserved.
+ 
+-# AM_PROG_MKDIR_P
+-# ---------------
+-# Check for `mkdir -p'.
+-AC_DEFUN([AM_PROG_MKDIR_P],
+-[AC_PREREQ([2.60])dnl
+-AC_REQUIRE([AC_PROG_MKDIR_P])dnl
+-dnl Automake 1.8 to 1.9.6 used to define mkdir_p.  We now use MKDIR_P,
+-dnl while keeping a definition of mkdir_p for backward compatibility.
+-dnl @MKDIR_P@ is magic: AC_OUTPUT adjusts its value for each Makefile.
+-dnl However we cannot define mkdir_p as $(MKDIR_P) for the sake of
+-dnl Makefile.ins that do not define MKDIR_P, so we do our own
+-dnl adjustment using top_builddir (which is defined more often than
+-dnl MKDIR_P).
+-AC_SUBST([mkdir_p], ["$MKDIR_P"])dnl
+-case $mkdir_p in
+-  [[\\/$]]* | ?:[[\\/]]*) ;;
+-  */*) mkdir_p="\$(top_builddir)/$mkdir_p" ;;
+-esac
+-])
++# serial 10
+ 
+-# Helper functions for option handling.                     -*- Autoconf -*-
++# There are a few dirty hacks below to avoid letting `AC_PROG_CC' be
++# written in clear, in which case automake, when reading aclocal.m4,
++# will think it sees a *use*, and therefore will trigger all it's
++# C support machinery.  Also note that it means that autoscan, seeing
++# CC etc. in the Makefile, will ask for an AC_PROG_CC use...
+ 
+-# Copyright (C) 2001, 2002, 2003, 2005, 2008  Free Software Foundation, Inc.
+-#
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
+ 
+-# serial 4
++# _AM_DEPENDENCIES(NAME)
++# ----------------------
++# See how the compiler implements dependency checking.
++# NAME is "CC", "CXX", "GCJ", or "OBJC".
++# We try a few techniques and use that to set a single cache variable.
++#
++# We don't AC_REQUIRE the corresponding AC_PROG_CC since the latter was
++# modified to invoke _AM_DEPENDENCIES(CC); we would have a circular
++# dependency, and given that the user is not expected to run this macro,
++# just rely on AC_PROG_CC.
++AC_DEFUN([_AM_DEPENDENCIES],
++[AC_REQUIRE([AM_SET_DEPDIR])dnl
++AC_REQUIRE([AM_OUTPUT_DEPENDENCY_COMMANDS])dnl
++AC_REQUIRE([AM_MAKE_INCLUDE])dnl
++AC_REQUIRE([AM_DEP_TRACK])dnl
+ 
+-# _AM_MANGLE_OPTION(NAME)
+-# -----------------------
+-AC_DEFUN([_AM_MANGLE_OPTION],
+-[[_AM_OPTION_]m4_bpatsubst($1, [[^a-zA-Z0-9_]], [_])])
++ifelse([$1], CC,   [depcc="$CC"   am_compiler_list=],
++       [$1], CXX,  [depcc="$CXX"  am_compiler_list=],
++       [$1], OBJC, [depcc="$OBJC" am_compiler_list='gcc3 gcc'],
++       [$1], UPC,  [depcc="$UPC"  am_compiler_list=],
++       [$1], GCJ,  [depcc="$GCJ"  am_compiler_list='gcc3 gcc'],
++                   [depcc="$$1"   am_compiler_list=])
+ 
+-# _AM_SET_OPTION(NAME)
+-# ------------------------------
+-# Set option NAME.  Presently that only means defining a flag for this option.
+-AC_DEFUN([_AM_SET_OPTION],
+-[m4_define(_AM_MANGLE_OPTION([$1]), 1)])
+-
+-# _AM_SET_OPTIONS(OPTIONS)
+-# ----------------------------------
+-# OPTIONS is a space-separated list of Automake options.
+-AC_DEFUN([_AM_SET_OPTIONS],
+-[m4_foreach_w([_AM_Option], [$1], [_AM_SET_OPTION(_AM_Option)])])
+-
+-# _AM_IF_OPTION(OPTION, IF-SET, [IF-NOT-SET])
+-# -------------------------------------------
+-# Execute IF-SET if OPTION is set, IF-NOT-SET otherwise.
+-AC_DEFUN([_AM_IF_OPTION],
+-[m4_ifset(_AM_MANGLE_OPTION([$1]), [$2], [$3])])
+-
+-# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.
+-#
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
+-
+-# AM_RUN_LOG(COMMAND)
+-# -------------------
+-# Run COMMAND, save the exit status in ac_status, and log it.
+-# (This has been adapted from Autoconf's _AC_RUN_LOG macro.)
+-AC_DEFUN([AM_RUN_LOG],
+-[{ echo "$as_me:$LINENO: $1" >&AS_MESSAGE_LOG_FD
+-   ($1) >&AS_MESSAGE_LOG_FD 2>&AS_MESSAGE_LOG_FD
+-   ac_status=$?
+-   echo "$as_me:$LINENO: \$? = $ac_status" >&AS_MESSAGE_LOG_FD
+-   (exit $ac_status); }])
+-
+-# Check to make sure that the build environment is sane.    -*- Autoconf -*-
+-
+-# Copyright (C) 1996, 1997, 2000, 2001, 2003, 2005, 2008
+-# Free Software Foundation, Inc.
+-#
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
+-
+-# serial 5
++AC_CACHE_CHECK([dependency style of $depcc],
++               [am_cv_$1_dependencies_compiler_type],
++[if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
++  # We make a subdir and do the tests there.  Otherwise we can end up
++  # making bogus files that we don't know about and never remove.  For
++  # instance it was reported that on HP-UX the gcc test will end up
++  # making a dummy file named `D' -- because `-MD' means `put the output
++  # in D'.
++  mkdir conftest.dir
++  # Copy depcomp to subdir because otherwise we won't find it if we're
++  # using a relative directory.
++  cp "$am_depcomp" conftest.dir
++  cd conftest.dir
++  # We will build objects and dependencies in a subdirectory because
++  # it helps to detect inapplicable dependency modes.  For instance
++  # both Tru64's cc and ICC support -MD to output dependencies as a
++  # side effect of compilation, but ICC will put the dependencies in
++  # the current directory while Tru64 will put them in the object
++  # directory.
++  mkdir sub
+ 
+-# AM_SANITY_CHECK
+-# ---------------
+-AC_DEFUN([AM_SANITY_CHECK],
+-[AC_MSG_CHECKING([whether build environment is sane])
+-# Just in case
+-sleep 1
+-echo timestamp > conftest.file
+-# Reject unsafe characters in $srcdir or the absolute working directory
+-# name.  Accept space and tab only in the latter.
+-am_lf='
+-'
+-case `pwd` in
+-  *[[\\\"\#\$\&\'\`$am_lf]]*)
+-    AC_MSG_ERROR([unsafe absolute working directory name]);;
+-esac
+-case $srcdir in
+-  *[[\\\"\#\$\&\'\`$am_lf\ \	]]*)
+-    AC_MSG_ERROR([unsafe srcdir value: `$srcdir']);;
+-esac
++  am_cv_$1_dependencies_compiler_type=none
++  if test "$am_compiler_list" = ""; then
++     am_compiler_list=`sed -n ['s/^#*\([a-zA-Z0-9]*\))$/\1/p'] < ./depcomp`
++  fi
++  am__universal=false
++  m4_case([$1], [CC],
++    [case " $depcc " in #(
++     *\ -arch\ *\ -arch\ *) am__universal=true ;;
++     esac],
++    [CXX],
++    [case " $depcc " in #(
++     *\ -arch\ *\ -arch\ *) am__universal=true ;;
++     esac])
+ 
+-# Do `set' in a subshell so we don't clobber the current shell's
+-# arguments.  Must try -L first in case configure is actually a
+-# symlink; some systems play weird games with the mod time of symlinks
+-# (eg FreeBSD returns the mod time of the symlink's containing
+-# directory).
+-if (
+-   set X `ls -Lt "$srcdir/configure" conftest.file 2> /dev/null`
+-   if test "$[*]" = "X"; then
+-      # -L didn't work.
+-      set X `ls -t "$srcdir/configure" conftest.file`
+-   fi
+-   rm -f conftest.file
+-   if test "$[*]" != "X $srcdir/configure conftest.file" \
+-      && test "$[*]" != "X conftest.file $srcdir/configure"; then
++  for depmode in $am_compiler_list; do
++    # Setup a source with many dependencies, because some compilers
++    # like to wrap large dependency lists on column 80 (with \), and
++    # we should not choose a depcomp mode which is confused by this.
++    #
++    # We need to recreate these files for each test, as the compiler may
++    # overwrite some of them when testing with obscure command lines.
++    # This happens at least with the AIX C compiler.
++    : > sub/conftest.c
++    for i in 1 2 3 4 5 6; do
++      echo '#include "conftst'$i'.h"' >> sub/conftest.c
++      # Using `: > sub/conftst$i.h' creates only sub/conftst1.h with
++      # Solaris 8's {/usr,}/bin/sh.
++      touch sub/conftst$i.h
++    done
++    echo "${am__include} ${am__quote}sub/conftest.Po${am__quote}" > confmf
+ 
+-      # If neither matched, then we have a broken ls.  This can happen
+-      # if, for instance, CONFIG_SHELL is bash and it inherits a
+-      # broken ls alias from the environment.  This has actually
+-      # happened.  Such a system could not be considered "sane".
+-      AC_MSG_ERROR([ls -t appears to fail.  Make sure there is not a broken
+-alias in your environment])
+-   fi
++    # We check with `-c' and `-o' for the sake of the "dashmstdout"
++    # mode.  It turns out that the SunPro C++ compiler does not properly
++    # handle `-M -o', and we need to detect this.  Also, some Intel
++    # versions had trouble with output in subdirs
++    am__obj=sub/conftest.${OBJEXT-o}
++    am__minus_obj="-o $am__obj"
++    case $depmode in
++    gcc)
++      # This depmode causes a compiler race in universal mode.
++      test "$am__universal" = false || continue
++      ;;
++    nosideeffect)
++      # after this tag, mechanisms are not by side-effect, so they'll
++      # only be used when explicitly requested
++      if test "x$enable_dependency_tracking" = xyes; then
++	continue
++      else
++	break
++      fi
++      ;;
++    msvisualcpp | msvcmsys)
++      # This compiler won't grok `-c -o', but also, the minuso test has
++      # not run yet.  These depmodes are late enough in the game, and
++      # so weak that their functioning should not be impacted.
++      am__obj=conftest.${OBJEXT-o}
++      am__minus_obj=
++      ;;
++    none) break ;;
++    esac
++    if depmode=$depmode \
++       source=sub/conftest.c object=$am__obj \
++       depfile=sub/conftest.Po tmpdepfile=sub/conftest.TPo \
++       $SHELL ./depcomp $depcc -c $am__minus_obj sub/conftest.c \
++         >/dev/null 2>conftest.err &&
++       grep sub/conftst1.h sub/conftest.Po > /dev/null 2>&1 &&
++       grep sub/conftst6.h sub/conftest.Po > /dev/null 2>&1 &&
++       grep $am__obj sub/conftest.Po > /dev/null 2>&1 &&
++       ${MAKE-make} -s -f confmf > /dev/null 2>&1; then
++      # icc doesn't choke on unknown options, it will just issue warnings
++      # or remarks (even with -Werror).  So we grep stderr for any message
++      # that says an option was ignored or not supported.
++      # When given -MP, icc 7.0 and 7.1 complain thusly:
++      #   icc: Command line warning: ignoring option '-M'; no argument required
++      # The diagnosis changed in icc 8.0:
++      #   icc: Command line remark: option '-MP' not supported
++      if (grep 'ignoring option' conftest.err ||
++          grep 'not supported' conftest.err) >/dev/null 2>&1; then :; else
++        am_cv_$1_dependencies_compiler_type=$depmode
++        break
++      fi
++    fi
++  done
+ 
+-   test "$[2]" = conftest.file
+-   )
+-then
+-   # Ok.
+-   :
++  cd ..
++  rm -rf conftest.dir
+ else
+-   AC_MSG_ERROR([newly created file is older than distributed files!
+-Check your system clock])
++  am_cv_$1_dependencies_compiler_type=none
+ fi
+-AC_MSG_RESULT(yes)])
++])
++AC_SUBST([$1DEPMODE], [depmode=$am_cv_$1_dependencies_compiler_type])
++AM_CONDITIONAL([am__fastdep$1], [
++  test "x$enable_dependency_tracking" != xno \
++  && test "$am_cv_$1_dependencies_compiler_type" = gcc3])
++])
+ 
+-# Copyright (C) 2009  Free Software Foundation, Inc.
+-#
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
+ 
+-# serial 1
++# AM_SET_DEPDIR
++# -------------
++# Choose a directory name for dependency files.
++# This macro is AC_REQUIREd in _AM_DEPENDENCIES
++AC_DEFUN([AM_SET_DEPDIR],
++[AC_REQUIRE([AM_SET_LEADING_DOT])dnl
++AC_SUBST([DEPDIR], ["${am__leading_dot}deps"])dnl
++])
+ 
+-# AM_SILENT_RULES([DEFAULT])
+-# --------------------------
+-# Enable less verbose build rules; with the default set to DEFAULT
+-# (`yes' being less verbose, `no' or empty being verbose).
+-AC_DEFUN([AM_SILENT_RULES],
+-[AC_ARG_ENABLE([silent-rules],
+-[  --enable-silent-rules          less verbose build output (undo: `make V=1')
+-  --disable-silent-rules         verbose build output (undo: `make V=0')])
+-case $enable_silent_rules in
+-yes) AM_DEFAULT_VERBOSITY=0;;
+-no)  AM_DEFAULT_VERBOSITY=1;;
+-*)   AM_DEFAULT_VERBOSITY=m4_if([$1], [yes], [0], [1]);;
+-esac
+-AC_SUBST([AM_DEFAULT_VERBOSITY])dnl
+-AM_BACKSLASH='\'
+-AC_SUBST([AM_BACKSLASH])dnl
+-_AM_SUBST_NOTMAKE([AM_BACKSLASH])dnl
++
++# AM_DEP_TRACK
++# ------------
++AC_DEFUN([AM_DEP_TRACK],
++[AC_ARG_ENABLE(dependency-tracking,
++[  --disable-dependency-tracking  speeds up one-time build
++  --enable-dependency-tracking   do not reject slow dependency extractors])
++if test "x$enable_dependency_tracking" != xno; then
++  am_depcomp="$ac_aux_dir/depcomp"
++  AMDEPBACKSLASH='\'
++fi
++AM_CONDITIONAL([AMDEP], [test "x$enable_dependency_tracking" != xno])
++AC_SUBST([AMDEPBACKSLASH])dnl
++_AM_SUBST_NOTMAKE([AMDEPBACKSLASH])dnl
+ ])
+ 
+-# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.
++# Generate code to set up dependency tracking.              -*- Autoconf -*-
++
++# Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2008
++# Free Software Foundation, Inc.
+ #
+ # This file is free software; the Free Software Foundation
+ # gives unlimited permission to copy and/or distribute it,
+ # with or without modifications, as long as this notice is preserved.
+ 
+-# AM_PROG_INSTALL_STRIP
+-# ---------------------
+-# One issue with vendor `install' (even GNU) is that you can't
+-# specify the program used to strip binaries.  This is especially
+-# annoying in cross-compiling environments, where the build's strip
+-# is unlikely to handle the host's binaries.
+-# Fortunately install-sh will honor a STRIPPROG variable, so we
+-# always use install-sh in `make install-strip', and initialize
+-# STRIPPROG with the value of the STRIP variable (set by the user).
+-AC_DEFUN([AM_PROG_INSTALL_STRIP],
+-[AC_REQUIRE([AM_PROG_INSTALL_SH])dnl
+-# Installed binaries are usually stripped using `strip' when the user
+-# run `make install-strip'.  However `strip' might not be the right
+-# tool to use in cross-compilation environments, therefore Automake
+-# will honor the `STRIP' environment variable to overrule this program.
+-dnl Don't test for $cross_compiling = yes, because it might be `maybe'.
+-if test "$cross_compiling" != no; then
+-  AC_CHECK_TOOL([STRIP], [strip], :)
+-fi
+-INSTALL_STRIP_PROGRAM="\$(install_sh) -c -s"
+-AC_SUBST([INSTALL_STRIP_PROGRAM])])
+-
+-# Copyright (C) 2006, 2008  Free Software Foundation, Inc.
+-#
+-# This file is free software; the Free Software Foundation
+-# gives unlimited permission to copy and/or distribute it,
+-# with or without modifications, as long as this notice is preserved.
++#serial 5
+ 
+-# serial 2
++# _AM_OUTPUT_DEPENDENCY_COMMANDS
++# ------------------------------
++AC_DEFUN([_AM_OUTPUT_DEPENDENCY_COMMANDS],
++[{
++  # Autoconf 2.62 quotes --file arguments for eval, but not when files
++  # are listed without --file.  Let's play safe and only enable the eval
++  # if we detect the quoting.
++  case $CONFIG_FILES in
++  *\'*) eval set x "$CONFIG_FILES" ;;
++  *)   set x $CONFIG_FILES ;;
++  esac
++  shift
++  for mf
++  do
++    # Strip MF so we end up with the name of the file.
++    mf=`echo "$mf" | sed -e 's/:.*$//'`
++    # Check whether this is an Automake generated Makefile or not.
++    # We used to match only the files named `Makefile.in', but
++    # some people rename them; so instead we look at the file content.
++    # Grep'ing the first line is not enough: some people post-process
++    # each Makefile.in and add a new line on top of each file to say so.
++    # Grep'ing the whole file is not good either: AIX grep has a line
++    # limit of 2048, but all sed's we know have understand at least 4000.
++    if sed -n 's,^#.*generated by automake.*,X,p' "$mf" | grep X >/dev/null 2>&1; then
++      dirpart=`AS_DIRNAME("$mf")`
++    else
++      continue
++    fi
++    # Extract the definition of DEPDIR, am__include, and am__quote
++    # from the Makefile without running `make'.
++    DEPDIR=`sed -n 's/^DEPDIR = //p' < "$mf"`
++    test -z "$DEPDIR" && continue
++    am__include=`sed -n 's/^am__include = //p' < "$mf"`
++    test -z "am__include" && continue
++    am__quote=`sed -n 's/^am__quote = //p' < "$mf"`
++    # When using ansi2knr, U may be empty or an underscore; expand it
++    U=`sed -n 's/^U = //p' < "$mf"`
++    # Find all dependency output files, they are included files with
++    # $(DEPDIR) in their names.  We invoke sed twice because it is the
++    # simplest approach to changing $(DEPDIR) to its actual value in the
++    # expansion.
++    for file in `sed -n "
++      s/^$am__include $am__quote\(.*(DEPDIR).*\)$am__quote"'$/\1/p' <"$mf" | \
++	 sed -e 's/\$(DEPDIR)/'"$DEPDIR"'/g' -e 's/\$U/'"$U"'/g'`; do
++      # Make sure the directory exists.
++      test -f "$dirpart/$file" && continue
++      fdir=`AS_DIRNAME(["$file"])`
++      AS_MKDIR_P([$dirpart/$fdir])
++      # echo "creating $dirpart/$file"
++      echo '# dummy' > "$dirpart/$file"
++    done
++  done
++}
++])# _AM_OUTPUT_DEPENDENCY_COMMANDS
+ 
+-# _AM_SUBST_NOTMAKE(VARIABLE)
+-# ---------------------------
+-# Prevent Automake from outputting VARIABLE = @VARIABLE@ in Makefile.in.
+-# This macro is traced by Automake.
+-AC_DEFUN([_AM_SUBST_NOTMAKE])
+ 
+-# AM_SUBST_NOTMAKE(VARIABLE)
+-# ---------------------------
+-# Public sister of _AM_SUBST_NOTMAKE.
+-AC_DEFUN([AM_SUBST_NOTMAKE], [_AM_SUBST_NOTMAKE($@)])
++# AM_OUTPUT_DEPENDENCY_COMMANDS
++# -----------------------------
++# This macro should only be invoked once -- use via AC_REQUIRE.
++#
++# This code is only required when automatic dependency tracking
++# is enabled.  FIXME.  This creates each `.P' file that we will
++# need in order to bootstrap the dependency handling code.
++AC_DEFUN([AM_OUTPUT_DEPENDENCY_COMMANDS],
++[AC_CONFIG_COMMANDS([depfiles],
++     [test x"$AMDEP_TRUE" != x"" || _AM_OUTPUT_DEPENDENCY_COMMANDS],
++     [AMDEP_TRUE="$AMDEP_TRUE" ac_aux_dir="$ac_aux_dir"])
++])
+ 
+-# Check how to create a tarball.                            -*- Autoconf -*-
++# Do all the work for Automake.                             -*- Autoconf -*-
+ 
+-# Copyright (C) 2004, 2005  Free Software Foundation, Inc.
++# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004,
++# 2005, 2006, 2008, 2009 Free Software Foundation, Inc.
+ #
+ # This file is free software; the Free Software Foundation
+ # gives unlimited permission to copy and/or distribute it,
+ # with or without modifications, as long as this notice is preserved.
+ 
+-# serial 2
+-
+-# _AM_PROG_TAR(FORMAT)
+-# --------------------
+-# Check how to create a tarball in format FORMAT.
+-# FORMAT should be one of `v7', `ustar', or `pax'.
+-#
+-# Substitute a variable $(am__tar) that is a command
+-# writing to stdout a FORMAT-tarball containing the directory
+-# $tardir.
+-#     tardir=directory && $(am__tar) > result.tar
+-#
+-# Substitute a variable $(am__untar) that extract such
+-# a tarball read from stdin.
+-#     $(am__untar) < result.tar
+-AC_DEFUN([_AM_PROG_TAR],
+-[# Always define AMTAR for backward compatibility.
+-AM_MISSING_PROG([AMTAR], [tar])
+-m4_if([$1], [v7],
+-     [am__tar='${AMTAR} chof - "$$tardir"'; am__untar='${AMTAR} xf -'],
+-     [m4_case([$1], [ustar],, [pax],,
+-              [m4_fatal([Unknown tar format])])
+-AC_MSG_CHECKING([how to create a $1 tar archive])
+-# Loop over all known methods to create a tar archive until one works.
+-_am_tools='gnutar m4_if([$1], [ustar], [plaintar]) pax cpio none'
+-_am_tools=${am_cv_prog_tar_$1-$_am_tools}
+-# Do not fold the above two line into one, because Tru64 sh and
+-# Solaris sh will not grok spaces in the rhs of `-'.
+-for _am_tool in $_am_tools
+-do
+-  case $_am_tool in
+-  gnutar)
+-    for _am_tar in tar gnutar gtar;
+-    do
+-      AM_RUN_LOG([$_am_tar --version]) && break
+-    done
+-    am__tar="$_am_tar --format=m4_if([$1], [pax], [posix], [$1]) -chf - "'"$$tardir"'
+-    am__tar_="$_am_tar --format=m4_if([$1], [pax], [posix], [$1]) -chf - "'"$tardir"'
+-    am__untar="$_am_tar -xf -"
+-    ;;
+-  plaintar)
+-    # Must skip GNU tar: if it does not support --format= it doesn't create
+-    # ustar tarball either.
+-    (tar --version) >/dev/null 2>&1 && continue
+-    am__tar='tar chf - "$$tardir"'
+-    am__tar_='tar chf - "$tardir"'
+-    am__untar='tar xf -'
+-    ;;
+-  pax)
+-    am__tar='pax -L -x $1 -w "$$tardir"'
+-    am__tar_='pax -L -x $1 -w "$tardir"'
+-    am__untar='pax -r'
+-    ;;
+-  cpio)
+-    am__tar='find "$$tardir" -print | cpio -o -H $1 -L'
+-    am__tar_='find "$tardir" -print | cpio -o -H $1 -L'
+-    am__untar='cpio -i -H $1 -d'
+-    ;;
+-  none)
+-    am__tar=false
+-    am__tar_=false
+-    am__untar=false
+-    ;;
+-  esac
++# serial 16
+ 
+-  # If the value was cached, stop now.  We just wanted to have am__tar
+-  # and am__untar set.
+-  test -n "${am_cv_prog_tar_$1}" && break
++# This macro actually does too much.  Some checks are only needed if
++# your package does certain things.  But this isn't really a big deal.
+ 
+-  # tar/untar a dummy directory, and stop if the command works
+-  rm -rf conftest.dir
+-  mkdir conftest.dir
+-  echo GrepMe > conftest.dir/file
+-  AM_RUN_LOG([tardir=conftest.dir && eval $am__tar_ >conftest.tar])
+-  rm -rf conftest.dir
+-  if test -s conftest.tar; then
+-    AM_RUN_LOG([$am__untar <conftest.tar])
+-    grep GrepMe conftest.dir/file >/dev/null 2>&1 && break
++# AM_INIT_AUTOMAKE(PACKAGE, VERSION, [NO-DEFINE])
++# AM_INIT_AUTOMAKE([OPTIONS])
++# -----------------------------------------------
++# The call with PACKAGE and VERSION arguments is the old style
++# call (pre autoconf-2.50), which is being phased out.  PACKAGE
++# and VERSION should now be passed to AC_INIT and removed from
++# the call to AM_INIT_AUTOMAKE.
++# We support both call styles for the transition.  After
++# the next Automake release, Autoconf can make the AC_INIT
++# arguments mandatory, and then we can depend on a new Autoconf
++# release and drop the old call support.
++AC_DEFUN([AM_INIT_AUTOMAKE],
++[AC_PREREQ([2.62])dnl
++dnl Autoconf wants to disallow AM_ names.  We explicitly allow
++dnl the ones we care about.
++m4_pattern_allow([^AM_[A-Z]+FLAGS$])dnl
++AC_REQUIRE([AM_SET_CURRENT_AUTOMAKE_VERSION])dnl
++AC_REQUIRE([AC_PROG_INSTALL])dnl
++if test "`cd $srcdir && pwd`" != "`pwd`"; then
++  # Use -I$(srcdir) only when $(srcdir) != ., so that make's output
++  # is not polluted with repeated "-I."
++  AC_SUBST([am__isrc], [' -I$(srcdir)'])_AM_SUBST_NOTMAKE([am__isrc])dnl
++  # test to see if srcdir already configured
++  if test -f $srcdir/config.status; then
++    AC_MSG_ERROR([source directory already configured; run "make distclean" there first])
+   fi
+-done
+-rm -rf conftest.dir
+-
+-AC_CACHE_VAL([am_cv_prog_tar_$1], [am_cv_prog_tar_$1=$_am_tool])
+-AC_MSG_RESULT([$am_cv_prog_tar_$1])])
+-AC_SUBST([am__tar])
+-AC_SUBST([am__untar])
+-]) # _AM_PROG_TAR
+-
+-dnl AM_GCONF_SOURCE_2
+-dnl Defines GCONF_SCHEMA_CONFIG_SOURCE which is where you should install schemas
+-dnl  (i.e. pass to gconftool-2
+-dnl Defines GCONF_SCHEMA_FILE_DIR which is a filesystem directory where
+-dnl  you should install foo.schemas files
+-dnl
++fi
+ 
+-AC_DEFUN([AM_GCONF_SOURCE_2],
+-[
+-  if test "x$GCONF_SCHEMA_INSTALL_SOURCE" = "x"; then
+-    GCONF_SCHEMA_CONFIG_SOURCE=`gconftool-2 --get-default-source`
++# test whether we have cygpath
++if test -z "$CYGPATH_W"; then
++  if (cygpath --version) >/dev/null 2>/dev/null; then
++    CYGPATH_W='cygpath -w'
+   else
+-    GCONF_SCHEMA_CONFIG_SOURCE=$GCONF_SCHEMA_INSTALL_SOURCE
++    CYGPATH_W=echo
+   fi
++fi
++AC_SUBST([CYGPATH_W])
+ 
+-  AC_ARG_WITH([gconf-source],
+-	      AC_HELP_STRING([--with-gconf-source=sourceaddress],
+-			     [Config database for installing schema files.]),
+-	      [GCONF_SCHEMA_CONFIG_SOURCE="$withval"],)
++# Define the identity of the package.
++dnl Distinguish between old-style and new-style calls.
++m4_ifval([$2],
++[m4_ifval([$3], [_AM_SET_OPTION([no-define])])dnl
++ AC_SUBST([PACKAGE], [$1])dnl
++ AC_SUBST([VERSION], [$2])],
++[_AM_SET_OPTIONS([$1])dnl
++dnl Diagnose old-style AC_INIT with new-style AM_AUTOMAKE_INIT.
++m4_if(m4_ifdef([AC_PACKAGE_NAME], 1)m4_ifdef([AC_PACKAGE_VERSION], 1), 11,,
++  [m4_fatal([AC_INIT should be called with package and version arguments])])dnl
++ AC_SUBST([PACKAGE], ['AC_PACKAGE_TARNAME'])dnl
++ AC_SUBST([VERSION], ['AC_PACKAGE_VERSION'])])dnl
+ 
+-  AC_SUBST(GCONF_SCHEMA_CONFIG_SOURCE)
+-  AC_MSG_RESULT([Using config source $GCONF_SCHEMA_CONFIG_SOURCE for schema installation])
++_AM_IF_OPTION([no-define],,
++[AC_DEFINE_UNQUOTED(PACKAGE, "$PACKAGE", [Name of package])
++ AC_DEFINE_UNQUOTED(VERSION, "$VERSION", [Version number of package])])dnl
+ 
+-  if test "x$GCONF_SCHEMA_FILE_DIR" = "x"; then
+-    GCONF_SCHEMA_FILE_DIR='$(sysconfdir)/gconf/schemas'
+-  fi
++# Some tools Automake needs.
++AC_REQUIRE([AM_SANITY_CHECK])dnl
++AC_REQUIRE([AC_ARG_PROGRAM])dnl
++AM_MISSING_PROG(ACLOCAL, aclocal-${am__api_version})
++AM_MISSING_PROG(AUTOCONF, autoconf)
++AM_MISSING_PROG(AUTOMAKE, automake-${am__api_version})
++AM_MISSING_PROG(AUTOHEADER, autoheader)
++AM_MISSING_PROG(MAKEINFO, makeinfo)
++AC_REQUIRE([AM_PROG_INSTALL_SH])dnl
++AC_REQUIRE([AM_PROG_INSTALL_STRIP])dnl
++AC_REQUIRE([AM_PROG_MKDIR_P])dnl
++# We need awk for the "check" target.  The system "awk" is bad on
++# some platforms.
++AC_REQUIRE([AC_PROG_AWK])dnl
++AC_REQUIRE([AC_PROG_MAKE_SET])dnl
++AC_REQUIRE([AM_SET_LEADING_DOT])dnl
++_AM_IF_OPTION([tar-ustar], [_AM_PROG_TAR([ustar])],
++	      [_AM_IF_OPTION([tar-pax], [_AM_PROG_TAR([pax])],
++			     [_AM_PROG_TAR([v7])])])
++_AM_IF_OPTION([no-dependencies],,
++[AC_PROVIDE_IFELSE([AC_PROG_CC],
++		  [_AM_DEPENDENCIES(CC)],
++		  [define([AC_PROG_CC],
++			  defn([AC_PROG_CC])[_AM_DEPENDENCIES(CC)])])dnl
++AC_PROVIDE_IFELSE([AC_PROG_CXX],
++		  [_AM_DEPENDENCIES(CXX)],
++		  [define([AC_PROG_CXX],
++			  defn([AC_PROG_CXX])[_AM_DEPENDENCIES(CXX)])])dnl
++AC_PROVIDE_IFELSE([AC_PROG_OBJC],
++		  [_AM_DEPENDENCIES(OBJC)],
++		  [define([AC_PROG_OBJC],
++			  defn([AC_PROG_OBJC])[_AM_DEPENDENCIES(OBJC)])])dnl
++])
++_AM_IF_OPTION([silent-rules], [AC_REQUIRE([AM_SILENT_RULES])])dnl
++dnl The `parallel-tests' driver may need to know about EXEEXT, so add the
++dnl `am__EXEEXT' conditional if _AM_COMPILER_EXEEXT was seen.  This macro
++dnl is hooked onto _AC_COMPILER_EXEEXT early, see below.
++AC_CONFIG_COMMANDS_PRE(dnl
++[m4_provide_if([_AM_COMPILER_EXEEXT],
++  [AM_CONDITIONAL([am__EXEEXT], [test -n "$EXEEXT"])])])dnl
++])
+ 
+-  AC_ARG_WITH([gconf-schema-file-dir],
+-	      AC_HELP_STRING([--with-gconf-schema-file-dir=dir],
+-			     [Directory for installing schema files.]),
+-	      [GCONF_SCHEMA_FILE_DIR="$withval"],)
++dnl Hook into `_AC_COMPILER_EXEEXT' early to learn its expansion.  Do not
++dnl add the conditional right here, as _AC_COMPILER_EXEEXT may be further
++dnl mangled by Autoconf and run in a shell conditional statement.
++m4_define([_AC_COMPILER_EXEEXT],
++m4_defn([_AC_COMPILER_EXEEXT])[m4_provide([_AM_COMPILER_EXEEXT])])
+ 
+-  AC_SUBST(GCONF_SCHEMA_FILE_DIR)
+-  AC_MSG_RESULT([Using $GCONF_SCHEMA_FILE_DIR as install directory for schema files])
+ 
+-  AC_ARG_ENABLE(schemas-install,
+-  	AC_HELP_STRING([--disable-schemas-install],
+-		       [Disable the schemas installation]),
+-     [case ${enableval} in
+-       yes|no) ;;
+-       *) AC_MSG_ERROR([bad value ${enableval} for --enable-schemas-install]) ;;
+-      esac])
+-  AM_CONDITIONAL([GCONF_SCHEMAS_INSTALL], [test "$enable_schemas_install" != no])
+-])
++# When config.status generates a header, we must update the stamp-h file.
++# This file resides in the same directory as the config header
++# that is generated.  The stamp files are numbered to have different names.
+ 
+-# Copyright (C) 1995-2002 Free Software Foundation, Inc.
+-# Copyright (C) 2001-2003,2004 Red Hat, Inc.
+-#
+-# This file is free software, distributed under the terms of the GNU
+-# General Public License.  As a special exception to the GNU General
+-# Public License, this file may be distributed as part of a program
+-# that contains a configuration script generated by Autoconf, under
+-# the same distribution terms as the rest of that program.
+-#
+-# This file can be copied and used freely without restrictions.  It can
+-# be used in projects which are not available under the GNU Public License
+-# but which still want to provide support for the GNU gettext functionality.
+-#
+-# Macro to add for using GNU gettext.
+-# Ulrich Drepper <drepper@cygnus.com>, 1995, 1996
+-#
+-# Modified to never use included libintl. 
+-# Owen Taylor <otaylor@redhat.com>, 12/15/1998
+-#
+-# Major rework to remove unused code
+-# Owen Taylor <otaylor@redhat.com>, 12/11/2002
+-#
+-# Added better handling of ALL_LINGUAS from GNU gettext version 
+-# written by Bruno Haible, Owen Taylor <otaylor.redhat.com> 5/30/3002
+-#
+-# Modified to require ngettext
+-# Matthias Clasen <mclasen@redhat.com> 08/06/2004
++# Autoconf calls _AC_AM_CONFIG_HEADER_HOOK (when defined) in the
++# loop where config.status creates the headers, so we can generate
++# our stamp files there.
++AC_DEFUN([_AC_AM_CONFIG_HEADER_HOOK],
++[# Compute $1's index in $config_headers.
++_am_arg=$1
++_am_stamp_count=1
++for _am_header in $config_headers :; do
++  case $_am_header in
++    $_am_arg | $_am_arg:* )
++      break ;;
++    * )
++      _am_stamp_count=`expr $_am_stamp_count + 1` ;;
++  esac
++done
++echo "timestamp for $_am_arg" >`AS_DIRNAME(["$_am_arg"])`/stamp-h[]$_am_stamp_count])
++
++# Copyright (C) 2001, 2003, 2005, 2008  Free Software Foundation, Inc.
+ #
+-# We need this here as well, since someone might use autoconf-2.5x
+-# to configure GLib then an older version to configure a package
+-# using AM_GLIB_GNU_GETTEXT
+-AC_PREREQ(2.53)
++# This file is free software; the Free Software Foundation
++# gives unlimited permission to copy and/or distribute it,
++# with or without modifications, as long as this notice is preserved.
+ 
+-dnl
+-dnl We go to great lengths to make sure that aclocal won't 
+-dnl try to pull in the installed version of these macros
+-dnl when running aclocal in the glib directory.
+-dnl
+-m4_copy([AC_DEFUN],[glib_DEFUN])
+-m4_copy([AC_REQUIRE],[glib_REQUIRE])
+-dnl
+-dnl At the end, if we're not within glib, we'll define the public
+-dnl definitions in terms of our private definitions.
+-dnl
++# AM_PROG_INSTALL_SH
++# ------------------
++# Define $install_sh.
++AC_DEFUN([AM_PROG_INSTALL_SH],
++[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl
++if test x"${install_sh}" != xset; then
++  case $am_aux_dir in
++  *\ * | *\	*)
++    install_sh="\${SHELL} '$am_aux_dir/install-sh'" ;;
++  *)
++    install_sh="\${SHELL} $am_aux_dir/install-sh"
++  esac
++fi
++AC_SUBST(install_sh)])
+ 
+-# GLIB_LC_MESSAGES
+-#--------------------
+-glib_DEFUN([GLIB_LC_MESSAGES],
+-  [AC_CHECK_HEADERS([locale.h])
+-    if test $ac_cv_header_locale_h = yes; then
+-    AC_CACHE_CHECK([for LC_MESSAGES], am_cv_val_LC_MESSAGES,
+-      [AC_TRY_LINK([#include <locale.h>], [return LC_MESSAGES],
+-       am_cv_val_LC_MESSAGES=yes, am_cv_val_LC_MESSAGES=no)])
+-    if test $am_cv_val_LC_MESSAGES = yes; then
+-      AC_DEFINE(HAVE_LC_MESSAGES, 1,
+-        [Define if your <locale.h> file defines LC_MESSAGES.])
+-    fi
+-  fi])
++# Copyright (C) 2003, 2005  Free Software Foundation, Inc.
++#
++# This file is free software; the Free Software Foundation
++# gives unlimited permission to copy and/or distribute it,
++# with or without modifications, as long as this notice is preserved.
+ 
+-# GLIB_PATH_PROG_WITH_TEST
+-#----------------------------
+-dnl GLIB_PATH_PROG_WITH_TEST(VARIABLE, PROG-TO-CHECK-FOR,
+-dnl   TEST-PERFORMED-ON-FOUND_PROGRAM [, VALUE-IF-NOT-FOUND [, PATH]])
+-glib_DEFUN([GLIB_PATH_PROG_WITH_TEST],
+-[# Extract the first word of "$2", so it can be a program name with args.
+-set dummy $2; ac_word=[$]2
+-AC_MSG_CHECKING([for $ac_word])
+-AC_CACHE_VAL(ac_cv_path_$1,
+-[case "[$]$1" in
+-  /*)
+-  ac_cv_path_$1="[$]$1" # Let the user override the test with a path.
+-  ;;
+-  *)
+-  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
+-  for ac_dir in ifelse([$5], , $PATH, [$5]); do
+-    test -z "$ac_dir" && ac_dir=.
+-    if test -f $ac_dir/$ac_word; then
+-      if [$3]; then
+-	ac_cv_path_$1="$ac_dir/$ac_word"
+-	break
+-      fi
+-    fi
+-  done
+-  IFS="$ac_save_ifs"
+-dnl If no 4th arg is given, leave the cache variable unset,
+-dnl so AC_PATH_PROGS will keep looking.
+-ifelse([$4], , , [  test -z "[$]ac_cv_path_$1" && ac_cv_path_$1="$4"
+-])dnl
+-  ;;
+-esac])dnl
+-$1="$ac_cv_path_$1"
+-if test ifelse([$4], , [-n "[$]$1"], ["[$]$1" != "$4"]); then
+-  AC_MSG_RESULT([$]$1)
++# serial 2
++
++# Check whether the underlying file-system supports filenames
++# with a leading dot.  For instance MS-DOS doesn't.
++AC_DEFUN([AM_SET_LEADING_DOT],
++[rm -rf .tst 2>/dev/null
++mkdir .tst 2>/dev/null
++if test -d .tst; then
++  am__leading_dot=.
+ else
+-  AC_MSG_RESULT(no)
++  am__leading_dot=_
+ fi
+-AC_SUBST($1)dnl
+-])
++rmdir .tst 2>/dev/null
++AC_SUBST([am__leading_dot])])
+ 
+-# GLIB_WITH_NLS
+-#-----------------
+-glib_DEFUN([GLIB_WITH_NLS],
+-  dnl NLS is obligatory
+-  [USE_NLS=yes
+-    AC_SUBST(USE_NLS)
++# Add --enable-maintainer-mode option to configure.         -*- Autoconf -*-
++# From Jim Meyering
+ 
+-    gt_cv_have_gettext=no
++# Copyright (C) 1996, 1998, 2000, 2001, 2002, 2003, 2004, 2005, 2008
++# Free Software Foundation, Inc.
++#
++# This file is free software; the Free Software Foundation
++# gives unlimited permission to copy and/or distribute it,
++# with or without modifications, as long as this notice is preserved.
+ 
+-    CATOBJEXT=NONE
+-    XGETTEXT=:
+-    INTLLIBS=
++# serial 5
+ 
+-    AC_CHECK_HEADER(libintl.h,
+-     [gt_cv_func_dgettext_libintl="no"
+-      libintl_extra_libs=""
++# AM_MAINTAINER_MODE([DEFAULT-MODE])
++# ----------------------------------
++# Control maintainer-specific portions of Makefiles.
++# Default is to disable them, unless `enable' is passed literally.
++# For symmetry, `disable' may be passed as well.  Anyway, the user
++# can override the default with the --enable/--disable switch.
++AC_DEFUN([AM_MAINTAINER_MODE],
++[m4_case(m4_default([$1], [disable]),
++       [enable], [m4_define([am_maintainer_other], [disable])],
++       [disable], [m4_define([am_maintainer_other], [enable])],
++       [m4_define([am_maintainer_other], [enable])
++        m4_warn([syntax], [unexpected argument to AM@&t@_MAINTAINER_MODE: $1])])
++AC_MSG_CHECKING([whether to am_maintainer_other maintainer-specific portions of Makefiles])
++  dnl maintainer-mode's default is 'disable' unless 'enable' is passed
++  AC_ARG_ENABLE([maintainer-mode],
++[  --][am_maintainer_other][-maintainer-mode  am_maintainer_other make rules and dependencies not useful
++			  (and sometimes confusing) to the casual installer],
++      [USE_MAINTAINER_MODE=$enableval],
++      [USE_MAINTAINER_MODE=]m4_if(am_maintainer_other, [enable], [no], [yes]))
++  AC_MSG_RESULT([$USE_MAINTAINER_MODE])
++  AM_CONDITIONAL([MAINTAINER_MODE], [test $USE_MAINTAINER_MODE = yes])
++  MAINT=$MAINTAINER_MODE_TRUE
++  AC_SUBST([MAINT])dnl
++]
++)
+ 
+-      #
+-      # First check in libc
+-      #
+-      AC_CACHE_CHECK([for ngettext in libc], gt_cv_func_ngettext_libc,
+-        [AC_TRY_LINK([
+-#include <libintl.h>
+-],
+-         [return !ngettext ("","", 1)],
+-	  gt_cv_func_ngettext_libc=yes,
+-          gt_cv_func_ngettext_libc=no)
+-        ])
+-  
+-      if test "$gt_cv_func_ngettext_libc" = "yes" ; then
+-	      AC_CACHE_CHECK([for dgettext in libc], gt_cv_func_dgettext_libc,
+-        	[AC_TRY_LINK([
+-#include <libintl.h>
+-],
+-	          [return !dgettext ("","")],
+-		  gt_cv_func_dgettext_libc=yes,
+-	          gt_cv_func_dgettext_libc=no)
+-        	])
+-      fi
+-  
+-      if test "$gt_cv_func_ngettext_libc" = "yes" ; then
+-        AC_CHECK_FUNCS(bind_textdomain_codeset)
+-      fi
++AU_DEFUN([jm_MAINTAINER_MODE], [AM_MAINTAINER_MODE])
+ 
+-      #
+-      # If we don't have everything we want, check in libintl
+-      #
+-      if test "$gt_cv_func_dgettext_libc" != "yes" \
+-	 || test "$gt_cv_func_ngettext_libc" != "yes" \
+-         || test "$ac_cv_func_bind_textdomain_codeset" != "yes" ; then
+-        
+-        AC_CHECK_LIB(intl, bindtextdomain,
+-	    [AC_CHECK_LIB(intl, ngettext,
+-		    [AC_CHECK_LIB(intl, dgettext,
+-			          gt_cv_func_dgettext_libintl=yes)])])
++# Check to see how 'make' treats includes.	            -*- Autoconf -*-
+ 
+-	if test "$gt_cv_func_dgettext_libintl" != "yes" ; then
+-	  AC_MSG_CHECKING([if -liconv is needed to use gettext])
+-	  AC_MSG_RESULT([])
+-  	  AC_CHECK_LIB(intl, ngettext,
+-          	[AC_CHECK_LIB(intl, dcgettext,
+-		       [gt_cv_func_dgettext_libintl=yes
+-			libintl_extra_libs=-liconv],
+-			:,-liconv)],
+-		:,-liconv)
+-        fi
++# Copyright (C) 2001, 2002, 2003, 2005, 2009  Free Software Foundation, Inc.
++#
++# This file is free software; the Free Software Foundation
++# gives unlimited permission to copy and/or distribute it,
++# with or without modifications, as long as this notice is preserved.
+ 
+-        #
+-        # If we found libintl, then check in it for bind_textdomain_codeset();
+-        # we'll prefer libc if neither have bind_textdomain_codeset(),
+-        # and both have dgettext and ngettext
+-        #
+-        if test "$gt_cv_func_dgettext_libintl" = "yes" ; then
+-          glib_save_LIBS="$LIBS"
+-          LIBS="$LIBS -lintl $libintl_extra_libs"
+-          unset ac_cv_func_bind_textdomain_codeset
+-          AC_CHECK_FUNCS(bind_textdomain_codeset)
+-          LIBS="$glib_save_LIBS"
++# serial 4
+ 
+-          if test "$ac_cv_func_bind_textdomain_codeset" = "yes" ; then
+-            gt_cv_func_dgettext_libc=no
+-          else
+-            if test "$gt_cv_func_dgettext_libc" = "yes" \
+-		&& test "$gt_cv_func_ngettext_libc" = "yes"; then
+-              gt_cv_func_dgettext_libintl=no
+-            fi
+-          fi
+-        fi
+-      fi
++# AM_MAKE_INCLUDE()
++# -----------------
++# Check to see how make treats includes.
++AC_DEFUN([AM_MAKE_INCLUDE],
++[am_make=${MAKE-make}
++cat > confinc << 'END'
++am__doit:
++	@echo this is the am__doit target
++.PHONY: am__doit
++END
++# If we don't find an include directive, just comment out the code.
++AC_MSG_CHECKING([for style of include used by $am_make])
++am__include="#"
++am__quote=
++_am_result=none
++# First try GNU make style include.
++echo "include confinc" > confmf
++# Ignore all kinds of additional output from `make'.
++case `$am_make -s -f confmf 2> /dev/null` in #(
++*the\ am__doit\ target*)
++  am__include=include
++  am__quote=
++  _am_result=GNU
++  ;;
++esac
++# Now try BSD make style include.
++if test "$am__include" = "#"; then
++   echo '.include "confinc"' > confmf
++   case `$am_make -s -f confmf 2> /dev/null` in #(
++   *the\ am__doit\ target*)
++     am__include=.include
++     am__quote="\""
++     _am_result=BSD
++     ;;
++   esac
++fi
++AC_SUBST([am__include])
++AC_SUBST([am__quote])
++AC_MSG_RESULT([$_am_result])
++rm -f confinc confmf
++])
+ 
+-      if test "$gt_cv_func_dgettext_libc" = "yes" \
+-	|| test "$gt_cv_func_dgettext_libintl" = "yes"; then
+-        gt_cv_have_gettext=yes
+-      fi
+-  
+-      if test "$gt_cv_func_dgettext_libintl" = "yes"; then
+-        INTLLIBS="-lintl $libintl_extra_libs"
+-      fi
+-  
+-      if test "$gt_cv_have_gettext" = "yes"; then
+-	AC_DEFINE(HAVE_GETTEXT,1,
+-	  [Define if the GNU gettext() function is already present or preinstalled.])
+-	GLIB_PATH_PROG_WITH_TEST(MSGFMT, msgfmt,
+-	  [test -z "`$ac_dir/$ac_word -h 2>&1 | grep 'dv '`"], no)dnl
+-	if test "$MSGFMT" != "no"; then
+-          glib_save_LIBS="$LIBS"
+-          LIBS="$LIBS $INTLLIBS"
+-	  AC_CHECK_FUNCS(dcgettext)
+-	  MSGFMT_OPTS=
+-	  AC_MSG_CHECKING([if msgfmt accepts -c])
+-	  GLIB_RUN_PROG([$MSGFMT -c -o /dev/null],[
+-msgid ""
+-msgstr ""
+-"Content-Type: text/plain; charset=UTF-8\n"
+-"Project-Id-Version: test 1.0\n"
+-"PO-Revision-Date: 2007-02-15 12:01+0100\n"
+-"Last-Translator: test <foo@bar.xx>\n"
+-"Language-Team: C <LL@li.org>\n"
+-"MIME-Version: 1.0\n"
+-"Content-Transfer-Encoding: 8bit\n"
+-], [MSGFMT_OPTS=-c; AC_MSG_RESULT([yes])], [AC_MSG_RESULT([no])])
+-	  AC_SUBST(MSGFMT_OPTS)
+-	  AC_PATH_PROG(GMSGFMT, gmsgfmt, $MSGFMT)
+-	  GLIB_PATH_PROG_WITH_TEST(XGETTEXT, xgettext,
+-	    [test -z "`$ac_dir/$ac_word -h 2>&1 | grep '(HELP)'`"], :)
+-	  AC_TRY_LINK(, [extern int _nl_msg_cat_cntr;
+-			 return _nl_msg_cat_cntr],
+-	    [CATOBJEXT=.gmo 
+-             DATADIRNAME=share],
+-	    [case $host in
+-	    *-*-solaris*)
+-	    dnl On Solaris, if bind_textdomain_codeset is in libc,
+-	    dnl GNU format message catalog is always supported,
+-            dnl since both are added to the libc all together.
+-	    dnl Hence, we'd like to go with DATADIRNAME=share and
+-	    dnl and CATOBJEXT=.gmo in this case.
+-            AC_CHECK_FUNC(bind_textdomain_codeset,
+-	      [CATOBJEXT=.gmo 
+-               DATADIRNAME=share],
+-	      [CATOBJEXT=.mo
+-               DATADIRNAME=lib])
+-	    ;;
+-	    *)
+-	    CATOBJEXT=.mo
+-            DATADIRNAME=lib
+-	    ;;
+-	    esac])
+-          LIBS="$glib_save_LIBS"
+-	  INSTOBJEXT=.mo
+-	else
+-	  gt_cv_have_gettext=no
+-	fi
+-      fi
+-    ])
++# Fake the existence of programs that GNU maintainers use.  -*- Autoconf -*-
+ 
+-    if test "$gt_cv_have_gettext" = "yes" ; then
+-      AC_DEFINE(ENABLE_NLS, 1,
+-        [always defined to indicate that i18n is enabled])
+-    fi
++# Copyright (C) 1997, 1999, 2000, 2001, 2003, 2004, 2005, 2008
++# Free Software Foundation, Inc.
++#
++# This file is free software; the Free Software Foundation
++# gives unlimited permission to copy and/or distribute it,
++# with or without modifications, as long as this notice is preserved.
+ 
+-    dnl Test whether we really found GNU xgettext.
+-    if test "$XGETTEXT" != ":"; then
+-      dnl If it is not GNU xgettext we define it as : so that the
+-      dnl Makefiles still can work.
+-      if $XGETTEXT --omit-header /dev/null 2> /dev/null; then
+-        : ;
+-      else
+-        AC_MSG_RESULT(
+-	  [found xgettext program is not GNU xgettext; ignore it])
+-        XGETTEXT=":"
+-      fi
+-    fi
++# serial 6
+ 
+-    # We need to process the po/ directory.
+-    POSUB=po
++# AM_MISSING_PROG(NAME, PROGRAM)
++# ------------------------------
++AC_DEFUN([AM_MISSING_PROG],
++[AC_REQUIRE([AM_MISSING_HAS_RUN])
++$1=${$1-"${am_missing_run}$2"}
++AC_SUBST($1)])
+ 
+-    AC_OUTPUT_COMMANDS(
+-      [case "$CONFIG_FILES" in *po/Makefile.in*)
+-        sed -e "/POTFILES =/r po/POTFILES" po/Makefile.in > po/Makefile
+-      esac])
+ 
+-    dnl These rules are solely for the distribution goal.  While doing this
+-    dnl we only have to keep exactly one list of the available catalogs
+-    dnl in configure.in.
+-    for lang in $ALL_LINGUAS; do
+-      GMOFILES="$GMOFILES $lang.gmo"
+-      POFILES="$POFILES $lang.po"
+-    done
++# AM_MISSING_HAS_RUN
++# ------------------
++# Define MISSING if not defined so far and test if it supports --run.
++# If it does, set am_missing_run to use it, otherwise, to nothing.
++AC_DEFUN([AM_MISSING_HAS_RUN],
++[AC_REQUIRE([AM_AUX_DIR_EXPAND])dnl
++AC_REQUIRE_AUX_FILE([missing])dnl
++if test x"${MISSING+set}" != xset; then
++  case $am_aux_dir in
++  *\ * | *\	*)
++    MISSING="\${SHELL} \"$am_aux_dir/missing\"" ;;
++  *)
++    MISSING="\${SHELL} $am_aux_dir/missing" ;;
++  esac
++fi
++# Use eval to expand $SHELL
++if eval "$MISSING --run true"; then
++  am_missing_run="$MISSING --run "
++else
++  am_missing_run=
++  AC_MSG_WARN([`missing' script is too old or missing])
++fi
++])
++
++# Copyright (C) 2003, 2004, 2005, 2006  Free Software Foundation, Inc.
++#
++# This file is free software; the Free Software Foundation
++# gives unlimited permission to copy and/or distribute it,
++# with or without modifications, as long as this notice is preserved.
++
++# AM_PROG_MKDIR_P
++# ---------------
++# Check for `mkdir -p'.
++AC_DEFUN([AM_PROG_MKDIR_P],
++[AC_PREREQ([2.60])dnl
++AC_REQUIRE([AC_PROG_MKDIR_P])dnl
++dnl Automake 1.8 to 1.9.6 used to define mkdir_p.  We now use MKDIR_P,
++dnl while keeping a definition of mkdir_p for backward compatibility.
++dnl @MKDIR_P@ is magic: AC_OUTPUT adjusts its value for each Makefile.
++dnl However we cannot define mkdir_p as $(MKDIR_P) for the sake of
++dnl Makefile.ins that do not define MKDIR_P, so we do our own
++dnl adjustment using top_builddir (which is defined more often than
++dnl MKDIR_P).
++AC_SUBST([mkdir_p], ["$MKDIR_P"])dnl
++case $mkdir_p in
++  [[\\/$]]* | ?:[[\\/]]*) ;;
++  */*) mkdir_p="\$(top_builddir)/$mkdir_p" ;;
++esac
++])
++
++# Helper functions for option handling.                     -*- Autoconf -*-
++
++# Copyright (C) 2001, 2002, 2003, 2005, 2008  Free Software Foundation, Inc.
++#
++# This file is free software; the Free Software Foundation
++# gives unlimited permission to copy and/or distribute it,
++# with or without modifications, as long as this notice is preserved.
++
++# serial 4
++
++# _AM_MANGLE_OPTION(NAME)
++# -----------------------
++AC_DEFUN([_AM_MANGLE_OPTION],
++[[_AM_OPTION_]m4_bpatsubst($1, [[^a-zA-Z0-9_]], [_])])
++
++# _AM_SET_OPTION(NAME)
++# ------------------------------
++# Set option NAME.  Presently that only means defining a flag for this option.
++AC_DEFUN([_AM_SET_OPTION],
++[m4_define(_AM_MANGLE_OPTION([$1]), 1)])
++
++# _AM_SET_OPTIONS(OPTIONS)
++# ----------------------------------
++# OPTIONS is a space-separated list of Automake options.
++AC_DEFUN([_AM_SET_OPTIONS],
++[m4_foreach_w([_AM_Option], [$1], [_AM_SET_OPTION(_AM_Option)])])
++
++# _AM_IF_OPTION(OPTION, IF-SET, [IF-NOT-SET])
++# -------------------------------------------
++# Execute IF-SET if OPTION is set, IF-NOT-SET otherwise.
++AC_DEFUN([_AM_IF_OPTION],
++[m4_ifset(_AM_MANGLE_OPTION([$1]), [$2], [$3])])
++
++# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.
++#
++# This file is free software; the Free Software Foundation
++# gives unlimited permission to copy and/or distribute it,
++# with or without modifications, as long as this notice is preserved.
++
++# AM_RUN_LOG(COMMAND)
++# -------------------
++# Run COMMAND, save the exit status in ac_status, and log it.
++# (This has been adapted from Autoconf's _AC_RUN_LOG macro.)
++AC_DEFUN([AM_RUN_LOG],
++[{ echo "$as_me:$LINENO: $1" >&AS_MESSAGE_LOG_FD
++   ($1) >&AS_MESSAGE_LOG_FD 2>&AS_MESSAGE_LOG_FD
++   ac_status=$?
++   echo "$as_me:$LINENO: \$? = $ac_status" >&AS_MESSAGE_LOG_FD
++   (exit $ac_status); }])
++
++# Check to make sure that the build environment is sane.    -*- Autoconf -*-
++
++# Copyright (C) 1996, 1997, 2000, 2001, 2003, 2005, 2008
++# Free Software Foundation, Inc.
++#
++# This file is free software; the Free Software Foundation
++# gives unlimited permission to copy and/or distribute it,
++# with or without modifications, as long as this notice is preserved.
++
++# serial 5
++
++# AM_SANITY_CHECK
++# ---------------
++AC_DEFUN([AM_SANITY_CHECK],
++[AC_MSG_CHECKING([whether build environment is sane])
++# Just in case
++sleep 1
++echo timestamp > conftest.file
++# Reject unsafe characters in $srcdir or the absolute working directory
++# name.  Accept space and tab only in the latter.
++am_lf='
++'
++case `pwd` in
++  *[[\\\"\#\$\&\'\`$am_lf]]*)
++    AC_MSG_ERROR([unsafe absolute working directory name]);;
++esac
++case $srcdir in
++  *[[\\\"\#\$\&\'\`$am_lf\ \	]]*)
++    AC_MSG_ERROR([unsafe srcdir value: `$srcdir']);;
++esac
++
++# Do `set' in a subshell so we don't clobber the current shell's
++# arguments.  Must try -L first in case configure is actually a
++# symlink; some systems play weird games with the mod time of symlinks
++# (eg FreeBSD returns the mod time of the symlink's containing
++# directory).
++if (
++   set X `ls -Lt "$srcdir/configure" conftest.file 2> /dev/null`
++   if test "$[*]" = "X"; then
++      # -L didn't work.
++      set X `ls -t "$srcdir/configure" conftest.file`
++   fi
++   rm -f conftest.file
++   if test "$[*]" != "X $srcdir/configure conftest.file" \
++      && test "$[*]" != "X conftest.file $srcdir/configure"; then
++
++      # If neither matched, then we have a broken ls.  This can happen
++      # if, for instance, CONFIG_SHELL is bash and it inherits a
++      # broken ls alias from the environment.  This has actually
++      # happened.  Such a system could not be considered "sane".
++      AC_MSG_ERROR([ls -t appears to fail.  Make sure there is not a broken
++alias in your environment])
++   fi
++
++   test "$[2]" = conftest.file
++   )
++then
++   # Ok.
++   :
++else
++   AC_MSG_ERROR([newly created file is older than distributed files!
++Check your system clock])
++fi
++AC_MSG_RESULT(yes)])
++
++# Copyright (C) 2009  Free Software Foundation, Inc.
++#
++# This file is free software; the Free Software Foundation
++# gives unlimited permission to copy and/or distribute it,
++# with or without modifications, as long as this notice is preserved.
++
++# serial 1
++
++# AM_SILENT_RULES([DEFAULT])
++# --------------------------
++# Enable less verbose build rules; with the default set to DEFAULT
++# (`yes' being less verbose, `no' or empty being verbose).
++AC_DEFUN([AM_SILENT_RULES],
++[AC_ARG_ENABLE([silent-rules],
++[  --enable-silent-rules          less verbose build output (undo: `make V=1')
++  --disable-silent-rules         verbose build output (undo: `make V=0')])
++case $enable_silent_rules in
++yes) AM_DEFAULT_VERBOSITY=0;;
++no)  AM_DEFAULT_VERBOSITY=1;;
++*)   AM_DEFAULT_VERBOSITY=m4_if([$1], [yes], [0], [1]);;
++esac
++AC_SUBST([AM_DEFAULT_VERBOSITY])dnl
++AM_BACKSLASH='\'
++AC_SUBST([AM_BACKSLASH])dnl
++_AM_SUBST_NOTMAKE([AM_BACKSLASH])dnl
++])
++
++# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.
++#
++# This file is free software; the Free Software Foundation
++# gives unlimited permission to copy and/or distribute it,
++# with or without modifications, as long as this notice is preserved.
++
++# AM_PROG_INSTALL_STRIP
++# ---------------------
++# One issue with vendor `install' (even GNU) is that you can't
++# specify the program used to strip binaries.  This is especially
++# annoying in cross-compiling environments, where the build's strip
++# is unlikely to handle the host's binaries.
++# Fortunately install-sh will honor a STRIPPROG variable, so we
++# always use install-sh in `make install-strip', and initialize
++# STRIPPROG with the value of the STRIP variable (set by the user).
++AC_DEFUN([AM_PROG_INSTALL_STRIP],
++[AC_REQUIRE([AM_PROG_INSTALL_SH])dnl
++# Installed binaries are usually stripped using `strip' when the user
++# run `make install-strip'.  However `strip' might not be the right
++# tool to use in cross-compilation environments, therefore Automake
++# will honor the `STRIP' environment variable to overrule this program.
++dnl Don't test for $cross_compiling = yes, because it might be `maybe'.
++if test "$cross_compiling" != no; then
++  AC_CHECK_TOOL([STRIP], [strip], :)
++fi
++INSTALL_STRIP_PROGRAM="\$(install_sh) -c -s"
++AC_SUBST([INSTALL_STRIP_PROGRAM])])
++
++# Copyright (C) 2006, 2008  Free Software Foundation, Inc.
++#
++# This file is free software; the Free Software Foundation
++# gives unlimited permission to copy and/or distribute it,
++# with or without modifications, as long as this notice is preserved.
+ 
+-    dnl Make all variables we use known to autoconf.
+-    AC_SUBST(CATALOGS)
+-    AC_SUBST(CATOBJEXT)
+-    AC_SUBST(DATADIRNAME)
+-    AC_SUBST(GMOFILES)
+-    AC_SUBST(INSTOBJEXT)
+-    AC_SUBST(INTLLIBS)
+-    AC_SUBST(PO_IN_DATADIR_TRUE)
+-    AC_SUBST(PO_IN_DATADIR_FALSE)
+-    AC_SUBST(POFILES)
+-    AC_SUBST(POSUB)
+-  ])
++# serial 2
+ 
+-# AM_GLIB_GNU_GETTEXT
+-# -------------------
+-# Do checks necessary for use of gettext. If a suitable implementation 
+-# of gettext is found in either in libintl or in the C library,
+-# it will set INTLLIBS to the libraries needed for use of gettext
+-# and AC_DEFINE() HAVE_GETTEXT and ENABLE_NLS. (The shell variable
+-# gt_cv_have_gettext will be set to "yes".) It will also call AC_SUBST()
+-# on various variables needed by the Makefile.in.in installed by 
+-# glib-gettextize.
+-dnl
+-glib_DEFUN([GLIB_GNU_GETTEXT],
+-  [AC_REQUIRE([AC_PROG_CC])dnl
+-   AC_REQUIRE([AC_HEADER_STDC])dnl
+-   
+-   GLIB_LC_MESSAGES
+-   GLIB_WITH_NLS
++# _AM_SUBST_NOTMAKE(VARIABLE)
++# ---------------------------
++# Prevent Automake from outputting VARIABLE = @VARIABLE@ in Makefile.in.
++# This macro is traced by Automake.
++AC_DEFUN([_AM_SUBST_NOTMAKE])
+ 
+-   if test "$gt_cv_have_gettext" = "yes"; then
+-     if test "x$ALL_LINGUAS" = "x"; then
+-       LINGUAS=
+-     else
+-       AC_MSG_CHECKING(for catalogs to be installed)
+-       NEW_LINGUAS=
+-       for presentlang in $ALL_LINGUAS; do
+-         useit=no
+-         if test "%UNSET%" != "${LINGUAS-%UNSET%}"; then
+-           desiredlanguages="$LINGUAS"
+-         else
+-           desiredlanguages="$ALL_LINGUAS"
+-         fi
+-         for desiredlang in $desiredlanguages; do
+- 	   # Use the presentlang catalog if desiredlang is
+-           #   a. equal to presentlang, or
+-           #   b. a variant of presentlang (because in this case,
+-           #      presentlang can be used as a fallback for messages
+-           #      which are not translated in the desiredlang catalog).
+-           case "$desiredlang" in
+-             "$presentlang"*) useit=yes;;
+-           esac
+-         done
+-         if test $useit = yes; then
+-           NEW_LINGUAS="$NEW_LINGUAS $presentlang"
+-         fi
+-       done
+-       LINGUAS=$NEW_LINGUAS
+-       AC_MSG_RESULT($LINGUAS)
+-     fi
++# AM_SUBST_NOTMAKE(VARIABLE)
++# ---------------------------
++# Public sister of _AM_SUBST_NOTMAKE.
++AC_DEFUN([AM_SUBST_NOTMAKE], [_AM_SUBST_NOTMAKE($@)])
+ 
+-     dnl Construct list of names of catalog files to be constructed.
+-     if test -n "$LINGUAS"; then
+-       for lang in $LINGUAS; do CATALOGS="$CATALOGS $lang$CATOBJEXT"; done
+-     fi
+-   fi
++# Check how to create a tarball.                            -*- Autoconf -*-
+ 
+-   dnl If the AC_CONFIG_AUX_DIR macro for autoconf is used we possibly
+-   dnl find the mkinstalldirs script in another subdir but ($top_srcdir).
+-   dnl Try to locate is.
+-   MKINSTALLDIRS=
+-   if test -n "$ac_aux_dir"; then
+-     MKINSTALLDIRS="$ac_aux_dir/mkinstalldirs"
+-   fi
+-   if test -z "$MKINSTALLDIRS"; then
+-     MKINSTALLDIRS="\$(top_srcdir)/mkinstalldirs"
+-   fi
+-   AC_SUBST(MKINSTALLDIRS)
++# Copyright (C) 2004, 2005  Free Software Foundation, Inc.
++#
++# This file is free software; the Free Software Foundation
++# gives unlimited permission to copy and/or distribute it,
++# with or without modifications, as long as this notice is preserved.
+ 
+-   dnl Generate list of files to be processed by xgettext which will
+-   dnl be included in po/Makefile.
+-   test -d po || mkdir po
+-   if test "x$srcdir" != "x."; then
+-     if test "x`echo $srcdir | sed 's@/.*@@'`" = "x"; then
+-       posrcprefix="$srcdir/"
+-     else
+-       posrcprefix="../$srcdir/"
+-     fi
+-   else
+-     posrcprefix="../"
+-   fi
+-   rm -f po/POTFILES
+-   sed -e "/^#/d" -e "/^\$/d" -e "s,.*,	$posrcprefix& \\\\," -e "\$s/\(.*\) \\\\/\1/" \
+-	< $srcdir/po/POTFILES.in > po/POTFILES
+-  ])
++# serial 2
+ 
+-# AM_GLIB_DEFINE_LOCALEDIR(VARIABLE)
+-# -------------------------------
+-# Define VARIABLE to the location where catalog files will
+-# be installed by po/Makefile.
+-glib_DEFUN([GLIB_DEFINE_LOCALEDIR],
+-[glib_REQUIRE([GLIB_GNU_GETTEXT])dnl
+-glib_save_prefix="$prefix"
+-glib_save_exec_prefix="$exec_prefix"
+-glib_save_datarootdir="$datarootdir"
+-test "x$prefix" = xNONE && prefix=$ac_default_prefix
+-test "x$exec_prefix" = xNONE && exec_prefix=$prefix
+-datarootdir=`eval echo "${datarootdir}"`
+-if test "x$CATOBJEXT" = "x.mo" ; then
+-  localedir=`eval echo "${libdir}/locale"`
+-else
+-  localedir=`eval echo "${datadir}/locale"`
+-fi
+-prefix="$glib_save_prefix"
+-exec_prefix="$glib_save_exec_prefix"
+-datarootdir="$glib_save_datarootdir"
+-AC_DEFINE_UNQUOTED($1, "$localedir",
+-  [Define the location where the catalogs will be installed])
+-])
++# _AM_PROG_TAR(FORMAT)
++# --------------------
++# Check how to create a tarball in format FORMAT.
++# FORMAT should be one of `v7', `ustar', or `pax'.
++#
++# Substitute a variable $(am__tar) that is a command
++# writing to stdout a FORMAT-tarball containing the directory
++# $tardir.
++#     tardir=directory && $(am__tar) > result.tar
++#
++# Substitute a variable $(am__untar) that extract such
++# a tarball read from stdin.
++#     $(am__untar) < result.tar
++AC_DEFUN([_AM_PROG_TAR],
++[# Always define AMTAR for backward compatibility.
++AM_MISSING_PROG([AMTAR], [tar])
++m4_if([$1], [v7],
++     [am__tar='${AMTAR} chof - "$$tardir"'; am__untar='${AMTAR} xf -'],
++     [m4_case([$1], [ustar],, [pax],,
++              [m4_fatal([Unknown tar format])])
++AC_MSG_CHECKING([how to create a $1 tar archive])
++# Loop over all known methods to create a tar archive until one works.
++_am_tools='gnutar m4_if([$1], [ustar], [plaintar]) pax cpio none'
++_am_tools=${am_cv_prog_tar_$1-$_am_tools}
++# Do not fold the above two line into one, because Tru64 sh and
++# Solaris sh will not grok spaces in the rhs of `-'.
++for _am_tool in $_am_tools
++do
++  case $_am_tool in
++  gnutar)
++    for _am_tar in tar gnutar gtar;
++    do
++      AM_RUN_LOG([$_am_tar --version]) && break
++    done
++    am__tar="$_am_tar --format=m4_if([$1], [pax], [posix], [$1]) -chf - "'"$$tardir"'
++    am__tar_="$_am_tar --format=m4_if([$1], [pax], [posix], [$1]) -chf - "'"$tardir"'
++    am__untar="$_am_tar -xf -"
++    ;;
++  plaintar)
++    # Must skip GNU tar: if it does not support --format= it doesn't create
++    # ustar tarball either.
++    (tar --version) >/dev/null 2>&1 && continue
++    am__tar='tar chf - "$$tardir"'
++    am__tar_='tar chf - "$tardir"'
++    am__untar='tar xf -'
++    ;;
++  pax)
++    am__tar='pax -L -x $1 -w "$$tardir"'
++    am__tar_='pax -L -x $1 -w "$tardir"'
++    am__untar='pax -r'
++    ;;
++  cpio)
++    am__tar='find "$$tardir" -print | cpio -o -H $1 -L'
++    am__tar_='find "$tardir" -print | cpio -o -H $1 -L'
++    am__untar='cpio -i -H $1 -d'
++    ;;
++  none)
++    am__tar=false
++    am__tar_=false
++    am__untar=false
++    ;;
++  esac
+ 
+-dnl
+-dnl Now the definitions that aclocal will find
+-dnl
+-ifdef(glib_configure_in,[],[
+-AC_DEFUN([AM_GLIB_GNU_GETTEXT],[GLIB_GNU_GETTEXT($@)])
+-AC_DEFUN([AM_GLIB_DEFINE_LOCALEDIR],[GLIB_DEFINE_LOCALEDIR($@)])
+-])dnl
++  # If the value was cached, stop now.  We just wanted to have am__tar
++  # and am__untar set.
++  test -n "${am_cv_prog_tar_$1}" && break
+ 
+-# GLIB_RUN_PROG(PROGRAM, TEST-FILE, [ACTION-IF-PASS], [ACTION-IF-FAIL])
+-# 
+-# Create a temporary file with TEST-FILE as its contents and pass the
+-# file name to PROGRAM.  Perform ACTION-IF-PASS if PROGRAM exits with
+-# 0 and perform ACTION-IF-FAIL for any other exit status.
+-AC_DEFUN([GLIB_RUN_PROG],
+-[cat >conftest.foo <<_ACEOF
+-$2
+-_ACEOF
+-if AC_RUN_LOG([$1 conftest.foo]); then
+-  m4_ifval([$3], [$3], [:])
+-m4_ifvaln([$4], [else $4])dnl
+-echo "$as_me: failed input was:" >&AS_MESSAGE_LOG_FD
+-sed 's/^/| /' conftest.foo >&AS_MESSAGE_LOG_FD
+-fi])
++  # tar/untar a dummy directory, and stop if the command works
++  rm -rf conftest.dir
++  mkdir conftest.dir
++  echo GrepMe > conftest.dir/file
++  AM_RUN_LOG([tardir=conftest.dir && eval $am__tar_ >conftest.tar])
++  rm -rf conftest.dir
++  if test -s conftest.tar; then
++    AM_RUN_LOG([$am__untar <conftest.tar])
++    grep GrepMe conftest.dir/file >/dev/null 2>&1 && break
++  fi
++done
++rm -rf conftest.dir
+ 
++AC_CACHE_VAL([am_cv_prog_tar_$1], [am_cv_prog_tar_$1=$_am_tool])
++AC_MSG_RESULT([$am_cv_prog_tar_$1])])
++AC_SUBST([am__tar])
++AC_SUBST([am__untar])
++]) # _AM_PROG_TAR
+ 
+ m4_include([m4/gtk-doc.m4])
+ m4_include([m4/intltool.m4])
+diff -Nur nautilus-2.30.0/config.h.in nautilus-2.30.0.ubuntu/config.h.in
+--- nautilus-2.30.0/config.h.in	2010-03-29 11:10:13.000000000 +0200
++++ nautilus-2.30.0.ubuntu/config.h.in	2010-03-29 11:49:38.000000000 +0200
+@@ -48,6 +48,9 @@
+ /* Define the location where the catalogs will be installed */
+ #undef GNOMELOCALEDIR
+ 
++/* Have AppIndicator */
++#undef HAVE_APP_INDICATOR
++
+ /* Define to 1 if you have the `bind_textdomain_codeset' function. */
+ #undef HAVE_BIND_TEXTDOMAIN_CODESET
+ 
+@@ -154,6 +157,9 @@
+ /* Define to the one symbol short name of this package. */
+ #undef PACKAGE_TARNAME
+ 
++/* Define to the home page for this package. */
++#undef PACKAGE_URL
++
+ /* Define to the version of this package. */
+ #undef PACKAGE_VERSION
+ 
+diff -Nur nautilus-2.30.0/configure nautilus-2.30.0.ubuntu/configure
+--- nautilus-2.30.0/configure	2010-03-29 11:10:13.000000000 +0200
++++ nautilus-2.30.0.ubuntu/configure	2010-03-29 11:49:37.000000000 +0200
+@@ -1,20 +1,24 @@
+ #! /bin/sh
+ # Guess values for system-dependent variables and create Makefiles.
+-# Generated by GNU Autoconf 2.63 for nautilus 2.30.0.
++# Generated by GNU Autoconf 2.65 for nautilus 2.30.0.
+ #
+ # Report bugs to <http://bugzilla.gnome.org/enter_bug.cgi?product=nautilus>.
+ #
++#
+ # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
+-# 2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.
++# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Free Software Foundation,
++# Inc.
++#
++#
+ # This configure script is free software; the Free Software Foundation
+ # gives unlimited permission to copy, distribute and modify it.
+-## --------------------- ##
+-## M4sh Initialization.  ##
+-## --------------------- ##
++## -------------------- ##
++## M4sh Initialization. ##
++## -------------------- ##
+ 
+ # Be more Bourne compatible
+ DUALCASE=1; export DUALCASE # for MKS sh
+-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
++if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
+   emulate sh
+   NULLCMD=:
+   # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
+@@ -22,23 +26,15 @@
+   alias -g '${1+"$@"}'='"$@"'
+   setopt NO_GLOB_SUBST
+ else
+-  case `(set -o) 2>/dev/null` in
+-  *posix*) set -o posix ;;
++  case `(set -o) 2>/dev/null` in #(
++  *posix*) :
++    set -o posix ;; #(
++  *) :
++     ;;
+ esac
+-
+ fi
+ 
+ 
+-
+-
+-# PATH needs CR
+-# Avoid depending upon Character Ranges.
+-as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+-as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+-as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+-as_cr_digits='0123456789'
+-as_cr_alnum=$as_cr_Letters$as_cr_digits
+-
+ as_nl='
+ '
+ export as_nl
+@@ -46,7 +42,13 @@
+ as_echo='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
+ as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo
+ as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo$as_echo
+-if (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
++# Prefer a ksh shell builtin over an external printf program on Solaris,
++# but without wasting forks for bash or zsh.
++if test -z "$BASH_VERSION$ZSH_VERSION" \
++    && (test "X`print -r -- $as_echo`" = "X$as_echo") 2>/dev/null; then
++  as_echo='print -r --'
++  as_echo_n='print -rn --'
++elif (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
+   as_echo='printf %s\n'
+   as_echo_n='printf %s'
+ else
+@@ -57,7 +59,7 @@
+     as_echo_body='eval expr "X$1" : "X\\(.*\\)"'
+     as_echo_n_body='eval
+       arg=$1;
+-      case $arg in
++      case $arg in #(
+       *"$as_nl"*)
+ 	expr "X$arg" : "X\\(.*\\)$as_nl";
+ 	arg=`expr "X$arg" : ".*$as_nl\\(.*\\)"`;;
+@@ -80,13 +82,6 @@
+   }
+ fi
+ 
+-# Support unset when possible.
+-if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
+-  as_unset=unset
+-else
+-  as_unset=false
+-fi
+-
+ 
+ # IFS
+ # We need space, tab and new line, in precisely that order.  Quoting is
+@@ -96,15 +91,15 @@
+ IFS=" ""	$as_nl"
+ 
+ # Find who we are.  Look in the path if we contain no directory separator.
+-case $0 in
++case $0 in #((
+   *[\\/]* ) as_myself=$0 ;;
+   *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+-done
++    test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
++  done
+ IFS=$as_save_IFS
+ 
+      ;;
+@@ -116,12 +111,16 @@
+ fi
+ if test ! -f "$as_myself"; then
+   $as_echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
+-  { (exit 1); exit 1; }
++  exit 1
+ fi
+ 
+-# Work around bugs in pre-3.0 UWIN ksh.
+-for as_var in ENV MAIL MAILPATH
+-do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
++# Unset variables that we do not need and which cause bugs (e.g. in
++# pre-3.0 UWIN ksh).  But do not cause bugs in bash 2.01; the "|| exit 1"
++# suppresses any "Segmentation fault" message there.  '((' could
++# trigger a bug in pdksh 5.2.14.
++for as_var in BASH_ENV ENV MAIL MAILPATH
++do eval test x\${$as_var+set} = xset \
++  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
+ done
+ PS1='$ '
+ PS2='> '
+@@ -133,330 +132,301 @@
+ LANGUAGE=C
+ export LANGUAGE
+ 
+-# Required to use basename.
+-if expr a : '\(a\)' >/dev/null 2>&1 &&
+-   test "X`expr 00001 : '.*\(...\)'`" = X001; then
+-  as_expr=expr
+-else
+-  as_expr=false
+-fi
+-
+-if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
+-  as_basename=basename
+-else
+-  as_basename=false
+-fi
+-
+-
+-# Name of the executable.
+-as_me=`$as_basename -- "$0" ||
+-$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
+-	 X"$0" : 'X\(//\)$' \| \
+-	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
+-$as_echo X/"$0" |
+-    sed '/^.*\/\([^/][^/]*\)\/*$/{
+-	    s//\1/
+-	    q
+-	  }
+-	  /^X\/\(\/\/\)$/{
+-	    s//\1/
+-	    q
+-	  }
+-	  /^X\/\(\/\).*/{
+-	    s//\1/
+-	    q
+-	  }
+-	  s/.*/./; q'`
+-
+ # CDPATH.
+-$as_unset CDPATH
+-
++(unset CDPATH) >/dev/null 2>&1 && unset CDPATH
+ 
+ if test "x$CONFIG_SHELL" = x; then
+-  if (eval ":") 2>/dev/null; then
+-  as_have_required=yes
++  as_bourne_compatible="if test -n \"\${ZSH_VERSION+set}\" && (emulate sh) >/dev/null 2>&1; then :
++  emulate sh
++  NULLCMD=:
++  # Pre-4.2 versions of Zsh do word splitting on \${1+\"\$@\"}, which
++  # is contrary to our usage.  Disable this feature.
++  alias -g '\${1+\"\$@\"}'='\"\$@\"'
++  setopt NO_GLOB_SUBST
+ else
+-  as_have_required=no
++  case \`(set -o) 2>/dev/null\` in #(
++  *posix*) :
++    set -o posix ;; #(
++  *) :
++     ;;
++esac
+ fi
+-
+-  if test $as_have_required = yes &&	 (eval ":
+-(as_func_return () {
+-  (exit \$1)
+-}
+-as_func_success () {
+-  as_func_return 0
+-}
+-as_func_failure () {
+-  as_func_return 1
+-}
+-as_func_ret_success () {
+-  return 0
+-}
+-as_func_ret_failure () {
+-  return 1
+-}
++"
++  as_required="as_fn_return () { (exit \$1); }
++as_fn_success () { as_fn_return 0; }
++as_fn_failure () { as_fn_return 1; }
++as_fn_ret_success () { return 0; }
++as_fn_ret_failure () { return 1; }
+ 
+ exitcode=0
+-if as_func_success; then
+-  :
+-else
+-  exitcode=1
+-  echo as_func_success failed.
+-fi
+-
+-if as_func_failure; then
+-  exitcode=1
+-  echo as_func_failure succeeded.
+-fi
+-
+-if as_func_ret_success; then
+-  :
+-else
+-  exitcode=1
+-  echo as_func_ret_success failed.
+-fi
+-
+-if as_func_ret_failure; then
+-  exitcode=1
+-  echo as_func_ret_failure succeeded.
+-fi
+-
+-if ( set x; as_func_ret_success y && test x = \"\$1\" ); then
+-  :
++as_fn_success || { exitcode=1; echo as_fn_success failed.; }
++as_fn_failure && { exitcode=1; echo as_fn_failure succeeded.; }
++as_fn_ret_success || { exitcode=1; echo as_fn_ret_success failed.; }
++as_fn_ret_failure && { exitcode=1; echo as_fn_ret_failure succeeded.; }
++if ( set x; as_fn_ret_success y && test x = \"\$1\" ); then :
++
++else
++  exitcode=1; echo positional parameters were not saved.
++fi
++test x\$exitcode = x0 || exit 1"
++  as_suggested="  as_lineno_1=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_1a=\$LINENO
++  as_lineno_2=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_2a=\$LINENO
++  eval 'test \"x\$as_lineno_1'\$as_run'\" != \"x\$as_lineno_2'\$as_run'\" &&
++  test \"x\`expr \$as_lineno_1'\$as_run' + 1\`\" = \"x\$as_lineno_2'\$as_run'\"' || exit 1
++test \$(( 1 + 1 )) = 2 || exit 1"
++  if (eval "$as_required") 2>/dev/null; then :
++  as_have_required=yes
+ else
+-  exitcode=1
+-  echo positional parameters were not saved.
++  as_have_required=no
+ fi
++  if test x$as_have_required = xyes && (eval "$as_suggested") 2>/dev/null; then :
+ 
+-test \$exitcode = 0) || { (exit 1); exit 1; }
+-
+-(
+-  as_lineno_1=\$LINENO
+-  as_lineno_2=\$LINENO
+-  test \"x\$as_lineno_1\" != \"x\$as_lineno_2\" &&
+-  test \"x\`expr \$as_lineno_1 + 1\`\" = \"x\$as_lineno_2\") || { (exit 1); exit 1; }
+-") 2> /dev/null; then
+-  :
+ else
+-  as_candidate_shells=
+-    as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
++  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
++as_found=false
+ for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  case $as_dir in
++  as_found=:
++  case $as_dir in #(
+ 	 /*)
+ 	   for as_base in sh bash ksh sh5; do
+-	     as_candidate_shells="$as_candidate_shells $as_dir/$as_base"
++	     # Try only shells that exist, to save several forks.
++	     as_shell=$as_dir/$as_base
++	     if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
++		    { $as_echo "$as_bourne_compatible""$as_required" | as_run=a "$as_shell"; } 2>/dev/null; then :
++  CONFIG_SHELL=$as_shell as_have_required=yes
++		   if { $as_echo "$as_bourne_compatible""$as_suggested" | as_run=a "$as_shell"; } 2>/dev/null; then :
++  break 2
++fi
++fi
+ 	   done;;
+        esac
++  as_found=false
+ done
++$as_found || { if { test -f "$SHELL" || test -f "$SHELL.exe"; } &&
++	      { $as_echo "$as_bourne_compatible""$as_required" | as_run=a "$SHELL"; } 2>/dev/null; then :
++  CONFIG_SHELL=$SHELL as_have_required=yes
++fi; }
+ IFS=$as_save_IFS
+ 
+ 
+-      for as_shell in $as_candidate_shells $SHELL; do
+-	 # Try only shells that exist, to save several forks.
+-	 if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
+-		{ ("$as_shell") 2> /dev/null <<\_ASEOF
+-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+-  emulate sh
+-  NULLCMD=:
+-  # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
+-  # is contrary to our usage.  Disable this feature.
+-  alias -g '${1+"$@"}'='"$@"'
+-  setopt NO_GLOB_SUBST
+-else
+-  case `(set -o) 2>/dev/null` in
+-  *posix*) set -o posix ;;
+-esac
+-
+-fi
+-
+-
+-:
+-_ASEOF
+-}; then
+-  CONFIG_SHELL=$as_shell
+-	       as_have_required=yes
+-	       if { "$as_shell" 2> /dev/null <<\_ASEOF
+-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+-  emulate sh
+-  NULLCMD=:
+-  # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
+-  # is contrary to our usage.  Disable this feature.
+-  alias -g '${1+"$@"}'='"$@"'
+-  setopt NO_GLOB_SUBST
+-else
+-  case `(set -o) 2>/dev/null` in
+-  *posix*) set -o posix ;;
+-esac
+-
+-fi
+-
+-
+-:
+-(as_func_return () {
+-  (exit $1)
+-}
+-as_func_success () {
+-  as_func_return 0
+-}
+-as_func_failure () {
+-  as_func_return 1
+-}
+-as_func_ret_success () {
+-  return 0
+-}
+-as_func_ret_failure () {
+-  return 1
+-}
+-
+-exitcode=0
+-if as_func_success; then
+-  :
+-else
+-  exitcode=1
+-  echo as_func_success failed.
+-fi
+-
+-if as_func_failure; then
+-  exitcode=1
+-  echo as_func_failure succeeded.
+-fi
+-
+-if as_func_ret_success; then
+-  :
+-else
+-  exitcode=1
+-  echo as_func_ret_success failed.
+-fi
+-
+-if as_func_ret_failure; then
+-  exitcode=1
+-  echo as_func_ret_failure succeeded.
+-fi
+-
+-if ( set x; as_func_ret_success y && test x = "$1" ); then
+-  :
+-else
+-  exitcode=1
+-  echo positional parameters were not saved.
+-fi
+-
+-test $exitcode = 0) || { (exit 1); exit 1; }
+-
+-(
+-  as_lineno_1=$LINENO
+-  as_lineno_2=$LINENO
+-  test "x$as_lineno_1" != "x$as_lineno_2" &&
+-  test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2") || { (exit 1); exit 1; }
+-
+-_ASEOF
+-}; then
+-  break
+-fi
+-
+-fi
+-
+-      done
+-
+-      if test "x$CONFIG_SHELL" != x; then
+-  for as_var in BASH_ENV ENV
+-	do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
+-	done
++      if test "x$CONFIG_SHELL" != x; then :
++  # We cannot yet assume a decent shell, so we have to provide a
++	# neutralization value for shells without unset; and this also
++	# works around shells that cannot unset nonexistent variables.
++	BASH_ENV=/dev/null
++	ENV=/dev/null
++	(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
+ 	export CONFIG_SHELL
+ 	exec "$CONFIG_SHELL" "$as_myself" ${1+"$@"}
+ fi
+ 
+-
+-    if test $as_have_required = no; then
+-  echo This script requires a shell more modern than all the
+-      echo shells that I found on your system.  Please install a
+-      echo modern shell, or manually run the script under such a
+-      echo shell if you do have one.
+-      { (exit 1); exit 1; }
++    if test x$as_have_required = xno; then :
++  $as_echo "$0: This script requires a shell more modern than all"
++  $as_echo "$0: the shells that I found on your system."
++  if test x${ZSH_VERSION+set} = xset ; then
++    $as_echo "$0: In particular, zsh $ZSH_VERSION has bugs and should"
++    $as_echo "$0: be upgraded to zsh 4.3.4 or later."
++  else
++    $as_echo "$0: Please tell bug-autoconf@gnu.org and
++$0: http://bugzilla.gnome.org/enter_bug.cgi?product=nautilus
++$0: about your system, including any error possibly output
++$0: before this message. Then install a modern shell, or
++$0: manually run the script under such a shell if you do
++$0: have one."
++  fi
++  exit 1
+ fi
+-
+-
+ fi
+-
+ fi
++SHELL=${CONFIG_SHELL-/bin/sh}
++export SHELL
++# Unset more variables known to interfere with behavior of common tools.
++CLICOLOR_FORCE= GREP_OPTIONS=
++unset CLICOLOR_FORCE GREP_OPTIONS
++
++## --------------------- ##
++## M4sh Shell Functions. ##
++## --------------------- ##
++# as_fn_unset VAR
++# ---------------
++# Portably unset VAR.
++as_fn_unset ()
++{
++  { eval $1=; unset $1;}
++}
++as_unset=as_fn_unset
++
++# as_fn_set_status STATUS
++# -----------------------
++# Set $? to STATUS, without forking.
++as_fn_set_status ()
++{
++  return $1
++} # as_fn_set_status
++
++# as_fn_exit STATUS
++# -----------------
++# Exit the shell with STATUS, even in a "trap 0" or "set -e" context.
++as_fn_exit ()
++{
++  set +e
++  as_fn_set_status $1
++  exit $1
++} # as_fn_exit
++
++# as_fn_mkdir_p
++# -------------
++# Create "$as_dir" as a directory, including parents if necessary.
++as_fn_mkdir_p ()
++{
+ 
++  case $as_dir in #(
++  -*) as_dir=./$as_dir;;
++  esac
++  test -d "$as_dir" || eval $as_mkdir_p || {
++    as_dirs=
++    while :; do
++      case $as_dir in #(
++      *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
++      *) as_qdir=$as_dir;;
++      esac
++      as_dirs="'$as_qdir' $as_dirs"
++      as_dir=`$as_dirname -- "$as_dir" ||
++$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
++	 X"$as_dir" : 'X\(//\)[^/]' \| \
++	 X"$as_dir" : 'X\(//\)$' \| \
++	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
++$as_echo X"$as_dir" |
++    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
++	    s//\1/
++	    q
++	  }
++	  /^X\(\/\/\)[^/].*/{
++	    s//\1/
++	    q
++	  }
++	  /^X\(\/\/\)$/{
++	    s//\1/
++	    q
++	  }
++	  /^X\(\/\).*/{
++	    s//\1/
++	    q
++	  }
++	  s/.*/./; q'`
++      test -d "$as_dir" && break
++    done
++    test -z "$as_dirs" || eval "mkdir $as_dirs"
++  } || test -d "$as_dir" || as_fn_error "cannot create directory $as_dir"
+ 
+ 
+-(eval "as_func_return () {
+-  (exit \$1)
+-}
+-as_func_success () {
+-  as_func_return 0
+-}
+-as_func_failure () {
+-  as_func_return 1
+-}
+-as_func_ret_success () {
+-  return 0
+-}
+-as_func_ret_failure () {
+-  return 1
+-}
++} # as_fn_mkdir_p
++# as_fn_append VAR VALUE
++# ----------------------
++# Append the text in VALUE to the end of the definition contained in VAR. Take
++# advantage of any shell optimizations that allow amortized linear growth over
++# repeated appends, instead of the typical quadratic growth present in naive
++# implementations.
++if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null; then :
++  eval 'as_fn_append ()
++  {
++    eval $1+=\$2
++  }'
++else
++  as_fn_append ()
++  {
++    eval $1=\$$1\$2
++  }
++fi # as_fn_append
+ 
+-exitcode=0
+-if as_func_success; then
+-  :
++# as_fn_arith ARG...
++# ------------------
++# Perform arithmetic evaluation on the ARGs, and store the result in the
++# global $as_val. Take advantage of shells that can avoid forks. The arguments
++# must be portable across $(()) and expr.
++if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null; then :
++  eval 'as_fn_arith ()
++  {
++    as_val=$(( $* ))
++  }'
+ else
+-  exitcode=1
+-  echo as_func_success failed.
+-fi
++  as_fn_arith ()
++  {
++    as_val=`expr "$@" || test $? -eq 1`
++  }
++fi # as_fn_arith
+ 
+-if as_func_failure; then
+-  exitcode=1
+-  echo as_func_failure succeeded.
+-fi
+ 
+-if as_func_ret_success; then
+-  :
++# as_fn_error ERROR [LINENO LOG_FD]
++# ---------------------------------
++# Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
++# provided, also output the error to LOG_FD, referencing LINENO. Then exit the
++# script with status $?, using 1 if that was 0.
++as_fn_error ()
++{
++  as_status=$?; test $as_status -eq 0 && as_status=1
++  if test "$3"; then
++    as_lineno=${as_lineno-"$2"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++    $as_echo "$as_me:${as_lineno-$LINENO}: error: $1" >&$3
++  fi
++  $as_echo "$as_me: error: $1" >&2
++  as_fn_exit $as_status
++} # as_fn_error
++
++if expr a : '\(a\)' >/dev/null 2>&1 &&
++   test "X`expr 00001 : '.*\(...\)'`" = X001; then
++  as_expr=expr
+ else
+-  exitcode=1
+-  echo as_func_ret_success failed.
++  as_expr=false
+ fi
+ 
+-if as_func_ret_failure; then
+-  exitcode=1
+-  echo as_func_ret_failure succeeded.
++if (basename -- /) >/dev/null 2>&1 && test "X`basename -- / 2>&1`" = "X/"; then
++  as_basename=basename
++else
++  as_basename=false
+ fi
+ 
+-if ( set x; as_func_ret_success y && test x = \"\$1\" ); then
+-  :
++if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
++  as_dirname=dirname
+ else
+-  exitcode=1
+-  echo positional parameters were not saved.
++  as_dirname=false
+ fi
+ 
+-test \$exitcode = 0") || {
+-  echo No shell found that supports shell functions.
+-  echo Please tell bug-autoconf@gnu.org about your system,
+-  echo including any error possibly output before this message.
+-  echo This can help us improve future autoconf versions.
+-  echo Configuration will now proceed without shell functions.
+-}
++as_me=`$as_basename -- "$0" ||
++$as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
++	 X"$0" : 'X\(//\)$' \| \
++	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
++$as_echo X/"$0" |
++    sed '/^.*\/\([^/][^/]*\)\/*$/{
++	    s//\1/
++	    q
++	  }
++	  /^X\/\(\/\/\)$/{
++	    s//\1/
++	    q
++	  }
++	  /^X\/\(\/\).*/{
++	    s//\1/
++	    q
++	  }
++	  s/.*/./; q'`
+ 
++# Avoid depending upon Character Ranges.
++as_cr_letters='abcdefghijklmnopqrstuvwxyz'
++as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
++as_cr_Letters=$as_cr_letters$as_cr_LETTERS
++as_cr_digits='0123456789'
++as_cr_alnum=$as_cr_Letters$as_cr_digits
+ 
+ 
+-  as_lineno_1=$LINENO
+-  as_lineno_2=$LINENO
+-  test "x$as_lineno_1" != "x$as_lineno_2" &&
+-  test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2" || {
+-
+-  # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
+-  # uniformly replaced by the line number.  The first 'sed' inserts a
+-  # line-number line after each line using $LINENO; the second 'sed'
+-  # does the real work.  The second script uses 'N' to pair each
+-  # line-number line with the line containing $LINENO, and appends
+-  # trailing '-' during substitution so that $LINENO is not a special
+-  # case at line end.
+-  # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
+-  # scripts with optimization help from Paolo Bonzini.  Blame Lee
+-  # E. McMahon (1931-1989) for sed's syntax.  :-)
++  as_lineno_1=$LINENO as_lineno_1a=$LINENO
++  as_lineno_2=$LINENO as_lineno_2a=$LINENO
++  eval 'test "x$as_lineno_1'$as_run'" != "x$as_lineno_2'$as_run'" &&
++  test "x`expr $as_lineno_1'$as_run' + 1`" = "x$as_lineno_2'$as_run'"' || {
++  # Blame Lee E. McMahon (1931-1989) for sed's syntax.  :-)
+   sed -n '
+     p
+     /[$]LINENO/=
+@@ -473,8 +443,7 @@
+       s/-\n.*//
+     ' >$as_me.lineno &&
+   chmod +x "$as_me.lineno" ||
+-    { $as_echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
+-   { (exit 1); exit 1; }; }
++    { $as_echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2; as_fn_exit 1; }
+ 
+   # Don't try to exec as it changes $[0], causing all sort of problems
+   # (the dirname of $[0] is not the place where we might find the
+@@ -484,29 +453,18 @@
+   exit
+ }
+ 
+-
+-if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
+-  as_dirname=dirname
+-else
+-  as_dirname=false
+-fi
+-
+ ECHO_C= ECHO_N= ECHO_T=
+-case `echo -n x` in
++case `echo -n x` in #(((((
+ -n*)
+-  case `echo 'x\c'` in
++  case `echo 'xy\c'` in
+   *c*) ECHO_T='	';;	# ECHO_T is single tab character.
+-  *)   ECHO_C='\c';;
++  xy)  ECHO_C='\c';;
++  *)   echo `echo ksh88 bug on AIX 6.1` > /dev/null
++       ECHO_T='	';;
+   esac;;
+ *)
+   ECHO_N='-n';;
+ esac
+-if expr a : '\(a\)' >/dev/null 2>&1 &&
+-   test "X`expr 00001 : '.*\(...\)'`" = X001; then
+-  as_expr=expr
+-else
+-  as_expr=false
+-fi
+ 
+ rm -f conf$$ conf$$.exe conf$$.file
+ if test -d conf$$.dir; then
+@@ -536,7 +494,7 @@
+ rmdir conf$$.dir 2>/dev/null
+ 
+ if mkdir -p . 2>/dev/null; then
+-  as_mkdir_p=:
++  as_mkdir_p='mkdir -p "$as_dir"'
+ else
+   test -d ./-p && rmdir ./-p
+   as_mkdir_p=false
+@@ -555,10 +513,10 @@
+       if test -d "$1"; then
+ 	test -d "$1/.";
+       else
+-	case $1 in
++	case $1 in #(
+ 	-*)set "./$1";;
+ 	esac;
+-	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in
++	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in #((
+ 	???[sx]*):;;*)false;;esac;fi
+     '\'' sh
+   '
+@@ -573,7 +531,6 @@
+ 
+ 
+ 
+-
+ # Check that we are running under the correct shell.
+ SHELL=${CONFIG_SHELL-/bin/sh}
+ 
+@@ -722,7 +679,8 @@
+ 
+ 
+ 
+-exec 7<&0 </dev/null 6>&1
++test -n "$DJDIR" || exec 7<&0 </dev/null
++exec 6>&1
+ 
+ # Name of the host.
+ # hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
+@@ -740,7 +698,6 @@
+ subdirs=
+ MFLAGS=
+ MAKEFLAGS=
+-SHELL=${CONFIG_SHELL-/bin/sh}
+ 
+ # Identity of this package.
+ PACKAGE_NAME='nautilus'
+@@ -748,6 +705,7 @@
+ PACKAGE_VERSION='2.30.0'
+ PACKAGE_STRING='nautilus 2.30.0'
+ PACKAGE_BUGREPORT='http://bugzilla.gnome.org/enter_bug.cgi?product=nautilus'
++PACKAGE_URL=''
+ 
+ ac_unique_file="src"
+ # Factoring default headers for most tests.
+@@ -806,6 +764,10 @@
+ LIBEGG_LIBS
+ LIBEGG_CFLAGS
+ RENDER_LIBS
++APP_INDICATOR_LIBS
++APP_INDICATOR_CFLAGS
++HAVE_APP_INDICATOR_FALSE
++HAVE_APP_INDICATOR_TRUE
+ ENABLE_EMPTY_VIEW_FALSE
+ ENABLE_EMPTY_VIEW_TRUE
+ ENABLE_EMPTY_VIEW
+@@ -1001,6 +963,7 @@
+ program_transform_name
+ prefix
+ exec_prefix
++PACKAGE_URL
+ PACKAGE_BUGREPORT
+ PACKAGE_STRING
+ PACKAGE_VERSION
+@@ -1030,6 +993,7 @@
+ enable_xmp
+ enable_empty_view
+ enable_packagekit
++enable_appindicator
+ enable_more_warnings
+ with_gconf_source
+ with_gconf_schema_file_dir
+@@ -1054,7 +1018,9 @@
+ EXEMPI_CFLAGS
+ EXEMPI_LIBS
+ EXEMPI_NEW_API_CFLAGS
+-EXEMPI_NEW_API_LIBS'
++EXEMPI_NEW_API_LIBS
++APP_INDICATOR_CFLAGS
++APP_INDICATOR_LIBS'
+ 
+ 
+ # Initialize some variables set by options.
+@@ -1163,8 +1129,7 @@
+     ac_useropt=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
+     # Reject names that are not valid shell variable names.
+     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
+-      { $as_echo "$as_me: error: invalid feature name: $ac_useropt" >&2
+-   { (exit 1); exit 1; }; }
++      as_fn_error "invalid feature name: $ac_useropt"
+     ac_useropt_orig=$ac_useropt
+     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
+     case $ac_user_opts in
+@@ -1190,8 +1155,7 @@
+     ac_useropt=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
+     # Reject names that are not valid shell variable names.
+     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
+-      { $as_echo "$as_me: error: invalid feature name: $ac_useropt" >&2
+-   { (exit 1); exit 1; }; }
++      as_fn_error "invalid feature name: $ac_useropt"
+     ac_useropt_orig=$ac_useropt
+     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
+     case $ac_user_opts in
+@@ -1395,8 +1359,7 @@
+     ac_useropt=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
+     # Reject names that are not valid shell variable names.
+     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
+-      { $as_echo "$as_me: error: invalid package name: $ac_useropt" >&2
+-   { (exit 1); exit 1; }; }
++      as_fn_error "invalid package name: $ac_useropt"
+     ac_useropt_orig=$ac_useropt
+     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
+     case $ac_user_opts in
+@@ -1412,8 +1375,7 @@
+     ac_useropt=`expr "x$ac_option" : 'x-*without-\(.*\)'`
+     # Reject names that are not valid shell variable names.
+     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
+-      { $as_echo "$as_me: error: invalid package name: $ac_useropt" >&2
+-   { (exit 1); exit 1; }; }
++      as_fn_error "invalid package name: $ac_useropt"
+     ac_useropt_orig=$ac_useropt
+     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
+     case $ac_user_opts in
+@@ -1443,17 +1405,17 @@
+   | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
+     x_libraries=$ac_optarg ;;
+ 
+-  -*) { $as_echo "$as_me: error: unrecognized option: $ac_option
+-Try \`$0 --help' for more information." >&2
+-   { (exit 1); exit 1; }; }
++  -*) as_fn_error "unrecognized option: \`$ac_option'
++Try \`$0 --help' for more information."
+     ;;
+ 
+   *=*)
+     ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
+     # Reject names that are not valid shell variable names.
+-    expr "x$ac_envvar" : ".*[^_$as_cr_alnum]" >/dev/null &&
+-      { $as_echo "$as_me: error: invalid variable name: $ac_envvar" >&2
+-   { (exit 1); exit 1; }; }
++    case $ac_envvar in #(
++      '' | [0-9]* | *[!_$as_cr_alnum]* )
++      as_fn_error "invalid variable name: \`$ac_envvar'" ;;
++    esac
+     eval $ac_envvar=\$ac_optarg
+     export $ac_envvar ;;
+ 
+@@ -1470,15 +1432,13 @@
+ 
+ if test -n "$ac_prev"; then
+   ac_option=--`echo $ac_prev | sed 's/_/-/g'`
+-  { $as_echo "$as_me: error: missing argument to $ac_option" >&2
+-   { (exit 1); exit 1; }; }
++  as_fn_error "missing argument to $ac_option"
+ fi
+ 
+ if test -n "$ac_unrecognized_opts"; then
+   case $enable_option_checking in
+     no) ;;
+-    fatal) { $as_echo "$as_me: error: unrecognized options: $ac_unrecognized_opts" >&2
+-   { (exit 1); exit 1; }; } ;;
++    fatal) as_fn_error "unrecognized options: $ac_unrecognized_opts" ;;
+     *)     $as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
+   esac
+ fi
+@@ -1501,8 +1461,7 @@
+     [\\/$]* | ?:[\\/]* )  continue;;
+     NONE | '' ) case $ac_var in *prefix ) continue;; esac;;
+   esac
+-  { $as_echo "$as_me: error: expected an absolute directory name for --$ac_var: $ac_val" >&2
+-   { (exit 1); exit 1; }; }
++  as_fn_error "expected an absolute directory name for --$ac_var: $ac_val"
+ done
+ 
+ # There might be people who depend on the old broken behavior: `$host'
+@@ -1532,11 +1491,9 @@
+ ac_pwd=`pwd` && test -n "$ac_pwd" &&
+ ac_ls_di=`ls -di .` &&
+ ac_pwd_ls_di=`cd "$ac_pwd" && ls -di .` ||
+-  { $as_echo "$as_me: error: working directory cannot be determined" >&2
+-   { (exit 1); exit 1; }; }
++  as_fn_error "working directory cannot be determined"
+ test "X$ac_ls_di" = "X$ac_pwd_ls_di" ||
+-  { $as_echo "$as_me: error: pwd does not report name of working directory" >&2
+-   { (exit 1); exit 1; }; }
++  as_fn_error "pwd does not report name of working directory"
+ 
+ 
+ # Find the source files, if location was not specified.
+@@ -1575,13 +1532,11 @@
+ fi
+ if test ! -r "$srcdir/$ac_unique_file"; then
+   test "$ac_srcdir_defaulted" = yes && srcdir="$ac_confdir or .."
+-  { $as_echo "$as_me: error: cannot find sources ($ac_unique_file) in $srcdir" >&2
+-   { (exit 1); exit 1; }; }
++  as_fn_error "cannot find sources ($ac_unique_file) in $srcdir"
+ fi
+ ac_msg="sources are in $srcdir, but \`cd $srcdir' does not work"
+ ac_abs_confdir=`(
+-	cd "$srcdir" && test -r "./$ac_unique_file" || { $as_echo "$as_me: error: $ac_msg" >&2
+-   { (exit 1); exit 1; }; }
++	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error "$ac_msg"
+ 	pwd)`
+ # When building in place, set srcdir=.
+ if test "$ac_abs_confdir" = "$ac_pwd"; then
+@@ -1701,18 +1656,19 @@
+                           optimize for fast installation [default=yes]
+   --disable-libtool-lock  avoid locking (might break parallel builds)
+   --disable-nls           do not use Native Language Support
+-  --enable-gtk-doc        use gtk-doc to build documentation [default=no]
+-  --enable-gtk-doc-html   build documentation in html format [default=yes]
+-  --enable-gtk-doc-pdf    build documentation in pdf format [default=no]
++  --enable-gtk-doc        use gtk-doc to build documentation [[default=no]]
++  --enable-gtk-doc-html   build documentation in html format [[default=yes]]
++  --enable-gtk-doc-pdf    build documentation in pdf format [[default=no]]
+   --enable-profiler       Enable profiler
+   --disable-xmp           build without xmp support
+   --enable-empty-view     Enable empty view
+   --disable-packagekit    build without PackageKit support
++  --disable-appindicator  build without appindicator support
+   --enable-more-warnings  Maximum compiler warnings
+   --disable-schemas-install
+                           Disable the schemas installation
+   --disable-update-mimedb disable the update-mime-database after install
+-                          default=no
++                          [default=no]
+ 
+ Optional Packages:
+   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
+@@ -1733,7 +1689,7 @@
+   LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
+               nonstandard directory <lib dir>
+   LIBS        libraries to pass to the linker, e.g. -l<library>
+-  CPPFLAGS    C/C++/Objective C preprocessor flags, e.g. -I<include dir> if
++  CPPFLAGS    (Objective) C/C++ preprocessor flags, e.g. -I<include dir> if
+               you have headers in a nonstandard directory <include dir>
+   CPP         C preprocessor
+   PKG_CONFIG  path to pkg-config utility
+@@ -1749,6 +1705,10 @@
+               C compiler flags for EXEMPI_NEW_API, overriding pkg-config
+   EXEMPI_NEW_API_LIBS
+               linker flags for EXEMPI_NEW_API, overriding pkg-config
++  APP_INDICATOR_CFLAGS
++              C compiler flags for APP_INDICATOR, overriding pkg-config
++  APP_INDICATOR_LIBS
++              linker flags for APP_INDICATOR, overriding pkg-config
+ 
+ Use these variables to override the choices made by `configure' or to help
+ it to find libraries and programs with nonstandard names/locations.
+@@ -1817,21 +1777,378 @@
+ if $ac_init_version; then
+   cat <<\_ACEOF
+ nautilus configure 2.30.0
+-generated by GNU Autoconf 2.63
++generated by GNU Autoconf 2.65
+ 
+-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
+-2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.
++Copyright (C) 2009 Free Software Foundation, Inc.
+ This configure script is free software; the Free Software Foundation
+ gives unlimited permission to copy, distribute and modify it.
+ _ACEOF
+   exit
+ fi
++
++## ------------------------ ##
++## Autoconf initialization. ##
++## ------------------------ ##
++
++# ac_fn_c_try_compile LINENO
++# --------------------------
++# Try to compile conftest.$ac_ext, and return whether this succeeded.
++ac_fn_c_try_compile ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  rm -f conftest.$ac_objext
++  if { { ac_try="$ac_compile"
++case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++$as_echo "$ac_try_echo"; } >&5
++  (eval "$ac_compile") 2>conftest.err
++  ac_status=$?
++  if test -s conftest.err; then
++    grep -v '^ *+' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++    mv -f conftest.er1 conftest.err
++  fi
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } && {
++	 test -z "$ac_c_werror_flag" ||
++	 test ! -s conftest.err
++       } && test -s conftest.$ac_objext; then :
++  ac_retval=0
++else
++  $as_echo "$as_me: failed program was:" >&5
++sed 's/^/| /' conftest.$ac_ext >&5
++
++	ac_retval=1
++fi
++  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
++  as_fn_set_status $ac_retval
++
++} # ac_fn_c_try_compile
++
++# ac_fn_c_try_run LINENO
++# ----------------------
++# Try to link conftest.$ac_ext, and return whether this succeeded. Assumes
++# that executables *can* be run.
++ac_fn_c_try_run ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  if { { ac_try="$ac_link"
++case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++$as_echo "$ac_try_echo"; } >&5
++  (eval "$ac_link") 2>&5
++  ac_status=$?
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } && { ac_try='./conftest$ac_exeext'
++  { { case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++$as_echo "$ac_try_echo"; } >&5
++  (eval "$ac_try") 2>&5
++  ac_status=$?
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; }; then :
++  ac_retval=0
++else
++  $as_echo "$as_me: program exited with status $ac_status" >&5
++       $as_echo "$as_me: failed program was:" >&5
++sed 's/^/| /' conftest.$ac_ext >&5
++
++       ac_retval=$ac_status
++fi
++  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
++  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
++  as_fn_set_status $ac_retval
++
++} # ac_fn_c_try_run
++
++# ac_fn_c_try_cpp LINENO
++# ----------------------
++# Try to preprocess conftest.$ac_ext, and return whether this succeeded.
++ac_fn_c_try_cpp ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  if { { ac_try="$ac_cpp conftest.$ac_ext"
++case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++$as_echo "$ac_try_echo"; } >&5
++  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
++  ac_status=$?
++  if test -s conftest.err; then
++    grep -v '^ *+' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++    mv -f conftest.er1 conftest.err
++  fi
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } >/dev/null && {
++	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
++	 test ! -s conftest.err
++       }; then :
++  ac_retval=0
++else
++  $as_echo "$as_me: failed program was:" >&5
++sed 's/^/| /' conftest.$ac_ext >&5
++
++    ac_retval=1
++fi
++  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
++  as_fn_set_status $ac_retval
++
++} # ac_fn_c_try_cpp
++
++# ac_fn_c_check_header_compile LINENO HEADER VAR INCLUDES
++# -------------------------------------------------------
++# Tests whether HEADER exists and can be compiled using the include files in
++# INCLUDES, setting the cache variable VAR accordingly.
++ac_fn_c_check_header_compile ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
++$as_echo_n "checking for $2... " >&6; }
++if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
++  $as_echo_n "(cached) " >&6
++else
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++$4
++#include <$2>
++_ACEOF
++if ac_fn_c_try_compile "$LINENO"; then :
++  eval "$3=yes"
++else
++  eval "$3=no"
++fi
++rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++fi
++eval ac_res=\$$3
++	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++$as_echo "$ac_res" >&6; }
++  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
++
++} # ac_fn_c_check_header_compile
++
++# ac_fn_c_try_link LINENO
++# -----------------------
++# Try to link conftest.$ac_ext, and return whether this succeeded.
++ac_fn_c_try_link ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  rm -f conftest.$ac_objext conftest$ac_exeext
++  if { { ac_try="$ac_link"
++case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++$as_echo "$ac_try_echo"; } >&5
++  (eval "$ac_link") 2>conftest.err
++  ac_status=$?
++  if test -s conftest.err; then
++    grep -v '^ *+' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++    mv -f conftest.er1 conftest.err
++  fi
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } && {
++	 test -z "$ac_c_werror_flag" ||
++	 test ! -s conftest.err
++       } && test -s conftest$ac_exeext && {
++	 test "$cross_compiling" = yes ||
++	 $as_test_x conftest$ac_exeext
++       }; then :
++  ac_retval=0
++else
++  $as_echo "$as_me: failed program was:" >&5
++sed 's/^/| /' conftest.$ac_ext >&5
++
++	ac_retval=1
++fi
++  # Delete the IPA/IPO (Inter Procedural Analysis/Optimization) information
++  # created by the PGI compiler (conftest_ipa8_conftest.oo), as it would
++  # interfere with the next link command; also delete a directory that is
++  # left behind by Apple's compiler.  We do this before executing the actions.
++  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
++  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
++  as_fn_set_status $ac_retval
++
++} # ac_fn_c_try_link
++
++# ac_fn_c_check_func LINENO FUNC VAR
++# ----------------------------------
++# Tests whether FUNC exists, setting the cache variable VAR accordingly
++ac_fn_c_check_func ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
++$as_echo_n "checking for $2... " >&6; }
++if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
++  $as_echo_n "(cached) " >&6
++else
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++/* Define $2 to an innocuous variant, in case <limits.h> declares $2.
++   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
++#define $2 innocuous_$2
++
++/* System header to define __stub macros and hopefully few prototypes,
++    which can conflict with char $2 (); below.
++    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
++    <limits.h> exists even on freestanding compilers.  */
++
++#ifdef __STDC__
++# include <limits.h>
++#else
++# include <assert.h>
++#endif
++
++#undef $2
++
++/* Override any GCC internal prototype to avoid an error.
++   Use char because int might match the return type of a GCC
++   builtin and then its argument prototype would still apply.  */
++#ifdef __cplusplus
++extern "C"
++#endif
++char $2 ();
++/* The GNU C library defines this for functions which it implements
++    to always fail with ENOSYS.  Some functions are actually named
++    something starting with __ and the normal name is an alias.  */
++#if defined __stub_$2 || defined __stub___$2
++choke me
++#endif
++
++int
++main ()
++{
++return $2 ();
++  ;
++  return 0;
++}
++_ACEOF
++if ac_fn_c_try_link "$LINENO"; then :
++  eval "$3=yes"
++else
++  eval "$3=no"
++fi
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
++fi
++eval ac_res=\$$3
++	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++$as_echo "$ac_res" >&6; }
++  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
++
++} # ac_fn_c_check_func
++
++# ac_fn_c_check_header_mongrel LINENO HEADER VAR INCLUDES
++# -------------------------------------------------------
++# Tests whether HEADER exists, giving a warning if it cannot be compiled using
++# the include files in INCLUDES and setting the cache variable VAR
++# accordingly.
++ac_fn_c_check_header_mongrel ()
++{
++  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++  if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
++$as_echo_n "checking for $2... " >&6; }
++if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
++  $as_echo_n "(cached) " >&6
++fi
++eval ac_res=\$$3
++	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++$as_echo "$ac_res" >&6; }
++else
++  # Is the header compilable?
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking $2 usability" >&5
++$as_echo_n "checking $2 usability... " >&6; }
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++$4
++#include <$2>
++_ACEOF
++if ac_fn_c_try_compile "$LINENO"; then :
++  ac_header_compiler=yes
++else
++  ac_header_compiler=no
++fi
++rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_compiler" >&5
++$as_echo "$ac_header_compiler" >&6; }
++
++# Is the header present?
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking $2 presence" >&5
++$as_echo_n "checking $2 presence... " >&6; }
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++#include <$2>
++_ACEOF
++if ac_fn_c_try_cpp "$LINENO"; then :
++  ac_header_preproc=yes
++else
++  ac_header_preproc=no
++fi
++rm -f conftest.err conftest.$ac_ext
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_preproc" >&5
++$as_echo "$ac_header_preproc" >&6; }
++
++# So?  What about this header?
++case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in #((
++  yes:no: )
++    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: accepted by the compiler, rejected by the preprocessor!" >&5
++$as_echo "$as_me: WARNING: $2: accepted by the compiler, rejected by the preprocessor!" >&2;}
++    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
++$as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
++    ;;
++  no:yes:* )
++    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: present but cannot be compiled" >&5
++$as_echo "$as_me: WARNING: $2: present but cannot be compiled" >&2;}
++    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2:     check for missing prerequisite headers?" >&5
++$as_echo "$as_me: WARNING: $2:     check for missing prerequisite headers?" >&2;}
++    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: see the Autoconf documentation" >&5
++$as_echo "$as_me: WARNING: $2: see the Autoconf documentation" >&2;}
++    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&5
++$as_echo "$as_me: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&2;}
++    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
++$as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
++( cat <<\_ASBOX
++## ----------------------------------------------------------------------- ##
++## Report this to http://bugzilla.gnome.org/enter_bug.cgi?product=nautilus ##
++## ----------------------------------------------------------------------- ##
++_ASBOX
++     ) | sed "s/^/$as_me: WARNING:     /" >&2
++    ;;
++esac
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
++$as_echo_n "checking for $2... " >&6; }
++if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
++  $as_echo_n "(cached) " >&6
++else
++  eval "$3=\$ac_header_compiler"
++fi
++eval ac_res=\$$3
++	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
++$as_echo "$ac_res" >&6; }
++fi
++  eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
++
++} # ac_fn_c_check_header_mongrel
+ cat >config.log <<_ACEOF
+ This file contains any messages produced by compilers while
+ running configure, to aid debugging if configure makes a mistake.
+ 
+ It was created by nautilus $as_me 2.30.0, which was
+-generated by GNU Autoconf 2.63.  Invocation command line was
++generated by GNU Autoconf 2.65.  Invocation command line was
+ 
+   $ $0 $@
+ 
+@@ -1867,8 +2184,8 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  $as_echo "PATH: $as_dir"
+-done
++    $as_echo "PATH: $as_dir"
++  done
+ IFS=$as_save_IFS
+ 
+ } >&5
+@@ -1905,9 +2222,9 @@
+       ac_arg=`$as_echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
+     esac
+     case $ac_pass in
+-    1) ac_configure_args0="$ac_configure_args0 '$ac_arg'" ;;
++    1) as_fn_append ac_configure_args0 " '$ac_arg'" ;;
+     2)
+-      ac_configure_args1="$ac_configure_args1 '$ac_arg'"
++      as_fn_append ac_configure_args1 " '$ac_arg'"
+       if test $ac_must_keep_next = true; then
+ 	ac_must_keep_next=false # Got value, back to normal.
+       else
+@@ -1923,13 +2240,13 @@
+ 	  -* ) ac_must_keep_next=true ;;
+ 	esac
+       fi
+-      ac_configure_args="$ac_configure_args '$ac_arg'"
++      as_fn_append ac_configure_args " '$ac_arg'"
+       ;;
+     esac
+   done
+ done
+-$as_unset ac_configure_args0 || test "${ac_configure_args0+set}" != set || { ac_configure_args0=; export ac_configure_args0; }
+-$as_unset ac_configure_args1 || test "${ac_configure_args1+set}" != set || { ac_configure_args1=; export ac_configure_args1; }
++{ ac_configure_args0=; unset ac_configure_args0;}
++{ ac_configure_args1=; unset ac_configure_args1;}
+ 
+ # When interrupted or exit'd, cleanup temporary files, and complete
+ # config.log.  We remove comments because anyway the quotes in there
+@@ -1954,13 +2271,13 @@
+     case $ac_val in #(
+     *${as_nl}*)
+       case $ac_var in #(
+-      *_cv_*) { $as_echo "$as_me:$LINENO: WARNING: cache variable $ac_var contains a newline" >&5
++      *_cv_*) { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
+ $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
+       esac
+       case $ac_var in #(
+       _ | IFS | as_nl) ;; #(
+       BASH_ARGV | BASH_SOURCE) eval $ac_var= ;; #(
+-      *) $as_unset $ac_var ;;
++      *) { eval $ac_var=; unset $ac_var;} ;;
+       esac ;;
+     esac
+   done
+@@ -2032,39 +2349,41 @@
+     exit $exit_status
+ ' 0
+ for ac_signal in 1 2 13 15; do
+-  trap 'ac_signal='$ac_signal'; { (exit 1); exit 1; }' $ac_signal
++  trap 'ac_signal='$ac_signal'; as_fn_exit 1' $ac_signal
+ done
+ ac_signal=0
+ 
+ # confdefs.h avoids OS command line length limits that DEFS can exceed.
+ rm -f -r conftest* confdefs.h
+ 
++$as_echo "/* confdefs.h */" > confdefs.h
++
+ # Predefined preprocessor variables.
+ 
+ cat >>confdefs.h <<_ACEOF
+ #define PACKAGE_NAME "$PACKAGE_NAME"
+ _ACEOF
+ 
+-
+ cat >>confdefs.h <<_ACEOF
+ #define PACKAGE_TARNAME "$PACKAGE_TARNAME"
+ _ACEOF
+ 
+-
+ cat >>confdefs.h <<_ACEOF
+ #define PACKAGE_VERSION "$PACKAGE_VERSION"
+ _ACEOF
+ 
+-
+ cat >>confdefs.h <<_ACEOF
+ #define PACKAGE_STRING "$PACKAGE_STRING"
+ _ACEOF
+ 
+-
+ cat >>confdefs.h <<_ACEOF
+ #define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
+ _ACEOF
+ 
++cat >>confdefs.h <<_ACEOF
++#define PACKAGE_URL "$PACKAGE_URL"
++_ACEOF
++
+ 
+ # Let the site file select an alternate cache file if it wants to.
+ # Prefer an explicitly selected file to automatically selected ones.
+@@ -2082,8 +2401,8 @@
+ for ac_site_file in "$ac_site_file1" "$ac_site_file2"
+ do
+   test "x$ac_site_file" = xNONE && continue
+-  if test -r "$ac_site_file"; then
+-    { $as_echo "$as_me:$LINENO: loading site script $ac_site_file" >&5
++  if test /dev/null != "$ac_site_file" && test -r "$ac_site_file"; then
++    { $as_echo "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
+ $as_echo "$as_me: loading site script $ac_site_file" >&6;}
+     sed 's/^/| /' "$ac_site_file" >&5
+     . "$ac_site_file"
+@@ -2091,10 +2410,10 @@
+ done
+ 
+ if test -r "$cache_file"; then
+-  # Some versions of bash will fail to source /dev/null (special
+-  # files actually), so we avoid doing that.
+-  if test -f "$cache_file"; then
+-    { $as_echo "$as_me:$LINENO: loading cache $cache_file" >&5
++  # Some versions of bash will fail to source /dev/null (special files
++  # actually), so we avoid doing that.  DJGPP emulates it as a regular file.
++  if test /dev/null != "$cache_file" && test -f "$cache_file"; then
++    { $as_echo "$as_me:${as_lineno-$LINENO}: loading cache $cache_file" >&5
+ $as_echo "$as_me: loading cache $cache_file" >&6;}
+     case $cache_file in
+       [\\/]* | ?:[\\/]* ) . "$cache_file";;
+@@ -2102,7 +2421,7 @@
+     esac
+   fi
+ else
+-  { $as_echo "$as_me:$LINENO: creating cache $cache_file" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: creating cache $cache_file" >&5
+ $as_echo "$as_me: creating cache $cache_file" >&6;}
+   >$cache_file
+ fi
+@@ -2117,11 +2436,11 @@
+   eval ac_new_val=\$ac_env_${ac_var}_value
+   case $ac_old_set,$ac_new_set in
+     set,)
+-      { $as_echo "$as_me:$LINENO: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
+ $as_echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
+       ac_cache_corrupted=: ;;
+     ,set)
+-      { $as_echo "$as_me:$LINENO: error: \`$ac_var' was not set in the previous run" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was not set in the previous run" >&5
+ $as_echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
+       ac_cache_corrupted=: ;;
+     ,);;
+@@ -2131,17 +2450,17 @@
+ 	ac_old_val_w=`echo x $ac_old_val`
+ 	ac_new_val_w=`echo x $ac_new_val`
+ 	if test "$ac_old_val_w" != "$ac_new_val_w"; then
+-	  { $as_echo "$as_me:$LINENO: error: \`$ac_var' has changed since the previous run:" >&5
++	  { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' has changed since the previous run:" >&5
+ $as_echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
+ 	  ac_cache_corrupted=:
+ 	else
+-	  { $as_echo "$as_me:$LINENO: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&5
++	  { $as_echo "$as_me:${as_lineno-$LINENO}: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&5
+ $as_echo "$as_me: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&2;}
+ 	  eval $ac_var=\$ac_old_val
+ 	fi
+-	{ $as_echo "$as_me:$LINENO:   former value:  \`$ac_old_val'" >&5
++	{ $as_echo "$as_me:${as_lineno-$LINENO}:   former value:  \`$ac_old_val'" >&5
+ $as_echo "$as_me:   former value:  \`$ac_old_val'" >&2;}
+-	{ $as_echo "$as_me:$LINENO:   current value: \`$ac_new_val'" >&5
++	{ $as_echo "$as_me:${as_lineno-$LINENO}:   current value: \`$ac_new_val'" >&5
+ $as_echo "$as_me:   current value: \`$ac_new_val'" >&2;}
+       fi;;
+   esac
+@@ -2153,43 +2472,20 @@
+     esac
+     case " $ac_configure_args " in
+       *" '$ac_arg' "*) ;; # Avoid dups.  Use of quotes ensures accuracy.
+-      *) ac_configure_args="$ac_configure_args '$ac_arg'" ;;
++      *) as_fn_append ac_configure_args " '$ac_arg'" ;;
+     esac
+   fi
+ done
+ if $ac_cache_corrupted; then
+-  { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+ $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+-  { $as_echo "$as_me:$LINENO: error: changes in the environment can compromise the build" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
+ $as_echo "$as_me: error: changes in the environment can compromise the build" >&2;}
+-  { { $as_echo "$as_me:$LINENO: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&5
+-$as_echo "$as_me: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
+ fi
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
+-
++## -------------------- ##
++## Main body of script. ##
++## -------------------- ##
+ 
+ ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+@@ -2209,24 +2505,16 @@
+ 
+ ac_aux_dir=
+ for ac_dir in "$srcdir" "$srcdir/.." "$srcdir/../.."; do
+-  if test -f "$ac_dir/install-sh"; then
+-    ac_aux_dir=$ac_dir
+-    ac_install_sh="$ac_aux_dir/install-sh -c"
+-    break
+-  elif test -f "$ac_dir/install.sh"; then
+-    ac_aux_dir=$ac_dir
+-    ac_install_sh="$ac_aux_dir/install.sh -c"
+-    break
+-  elif test -f "$ac_dir/shtool"; then
+-    ac_aux_dir=$ac_dir
+-    ac_install_sh="$ac_aux_dir/shtool install -c"
+-    break
+-  fi
++  for ac_t in install-sh install.sh shtool; do
++    if test -f "$ac_dir/$ac_t"; then
++      ac_aux_dir=$ac_dir
++      ac_install_sh="$ac_aux_dir/$ac_t -c"
++      break 2
++    fi
++  done
+ done
+ if test -z "$ac_aux_dir"; then
+-  { { $as_echo "$as_me:$LINENO: error: cannot find install-sh or install.sh in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" >&5
+-$as_echo "$as_me: error: cannot find install-sh or install.sh in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "cannot find install-sh, install.sh, or shtool in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" "$LINENO" 5
+ fi
+ 
+ # These three variables are undocumented and unsupported,
+@@ -2252,10 +2540,10 @@
+ # OS/2's system install, which has a completely different semantic
+ # ./install, which can be erroneously created by make from ./install.sh.
+ # Reject install programs that cannot install multiple files.
+-{ $as_echo "$as_me:$LINENO: checking for a BSD-compatible install" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for a BSD-compatible install" >&5
+ $as_echo_n "checking for a BSD-compatible install... " >&6; }
+ if test -z "$INSTALL"; then
+-if test "${ac_cv_path_install+set}" = set; then
++if test "${ac_cv_path_install+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+@@ -2263,11 +2551,11 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  # Account for people who put trailing slashes in PATH elements.
+-case $as_dir/ in
+-  ./ | .// | /cC/* | \
++    # Account for people who put trailing slashes in PATH elements.
++case $as_dir/ in #((
++  ./ | .// | /[cC]/* | \
+   /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* | \
+-  ?:\\/os2\\/install\\/* | ?:\\/OS2\\/INSTALL\\/* | \
++  ?:[\\/]os2[\\/]install[\\/]* | ?:[\\/]OS2[\\/]INSTALL[\\/]* | \
+   /usr/ucb/* ) ;;
+   *)
+     # OSF1 and SCO ODT 3.0 have their own names for install.
+@@ -2304,7 +2592,7 @@
+     ;;
+ esac
+ 
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ rm -rf conftest.one conftest.two conftest.dir
+@@ -2320,7 +2608,7 @@
+     INSTALL=$ac_install_sh
+   fi
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $INSTALL" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $INSTALL" >&5
+ $as_echo "$INSTALL" >&6; }
+ 
+ # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
+@@ -2331,7 +2619,7 @@
+ 
+ test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
+ 
+-{ $as_echo "$as_me:$LINENO: checking whether build environment is sane" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether build environment is sane" >&5
+ $as_echo_n "checking whether build environment is sane... " >&6; }
+ # Just in case
+ sleep 1
+@@ -2342,15 +2630,11 @@
+ '
+ case `pwd` in
+   *[\\\"\#\$\&\'\`$am_lf]*)
+-    { { $as_echo "$as_me:$LINENO: error: unsafe absolute working directory name" >&5
+-$as_echo "$as_me: error: unsafe absolute working directory name" >&2;}
+-   { (exit 1); exit 1; }; };;
++    as_fn_error "unsafe absolute working directory name" "$LINENO" 5;;
+ esac
+ case $srcdir in
+   *[\\\"\#\$\&\'\`$am_lf\ \	]*)
+-    { { $as_echo "$as_me:$LINENO: error: unsafe srcdir value: \`$srcdir'" >&5
+-$as_echo "$as_me: error: unsafe srcdir value: \`$srcdir'" >&2;}
+-   { (exit 1); exit 1; }; };;
++    as_fn_error "unsafe srcdir value: \`$srcdir'" "$LINENO" 5;;
+ esac
+ 
+ # Do `set' in a subshell so we don't clobber the current shell's
+@@ -2372,11 +2656,8 @@
+       # if, for instance, CONFIG_SHELL is bash and it inherits a
+       # broken ls alias from the environment.  This has actually
+       # happened.  Such a system could not be considered "sane".
+-      { { $as_echo "$as_me:$LINENO: error: ls -t appears to fail.  Make sure there is not a broken
+-alias in your environment" >&5
+-$as_echo "$as_me: error: ls -t appears to fail.  Make sure there is not a broken
+-alias in your environment" >&2;}
+-   { (exit 1); exit 1; }; }
++      as_fn_error "ls -t appears to fail.  Make sure there is not a broken
++alias in your environment" "$LINENO" 5
+    fi
+ 
+    test "$2" = conftest.file
+@@ -2385,13 +2666,10 @@
+    # Ok.
+    :
+ else
+-   { { $as_echo "$as_me:$LINENO: error: newly created file is older than distributed files!
+-Check your system clock" >&5
+-$as_echo "$as_me: error: newly created file is older than distributed files!
+-Check your system clock" >&2;}
+-   { (exit 1); exit 1; }; }
++   as_fn_error "newly created file is older than distributed files!
++Check your system clock" "$LINENO" 5
+ fi
+-{ $as_echo "$as_me:$LINENO: result: yes" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+ test "$program_prefix" != NONE &&
+   program_transform_name="s&^&$program_prefix&;$program_transform_name"
+@@ -2419,7 +2697,7 @@
+   am_missing_run="$MISSING --run "
+ else
+   am_missing_run=
+-  { $as_echo "$as_me:$LINENO: WARNING: \`missing' script is too old or missing" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \`missing' script is too old or missing" >&5
+ $as_echo "$as_me: WARNING: \`missing' script is too old or missing" >&2;}
+ fi
+ 
+@@ -2440,9 +2718,9 @@
+   if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}strip; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_STRIP+set}" = set; then
++if test "${ac_cv_prog_STRIP+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$STRIP"; then
+@@ -2453,24 +2731,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_STRIP="${ac_tool_prefix}strip"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ STRIP=$ac_cv_prog_STRIP
+ if test -n "$STRIP"; then
+-  { $as_echo "$as_me:$LINENO: result: $STRIP" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $STRIP" >&5
+ $as_echo "$STRIP" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -2480,9 +2758,9 @@
+   ac_ct_STRIP=$STRIP
+   # Extract the first word of "strip", so it can be a program name with args.
+ set dummy strip; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then
++if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_STRIP"; then
+@@ -2493,24 +2771,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_STRIP="strip"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_STRIP=$ac_cv_prog_ac_ct_STRIP
+ if test -n "$ac_ct_STRIP"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_STRIP" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_STRIP" >&5
+ $as_echo "$ac_ct_STRIP" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -2519,7 +2797,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -2532,10 +2810,10 @@
+ fi
+ INSTALL_STRIP_PROGRAM="\$(install_sh) -c -s"
+ 
+-{ $as_echo "$as_me:$LINENO: checking for a thread-safe mkdir -p" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for a thread-safe mkdir -p" >&5
+ $as_echo_n "checking for a thread-safe mkdir -p... " >&6; }
+ if test -z "$MKDIR_P"; then
+-  if test "${ac_cv_path_mkdir+set}" = set; then
++  if test "${ac_cv_path_mkdir+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+@@ -2543,7 +2821,7 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_prog in mkdir gmkdir; do
++    for ac_prog in mkdir gmkdir; do
+ 	 for ac_exec_ext in '' $ac_executable_extensions; do
+ 	   { test -f "$as_dir/$ac_prog$ac_exec_ext" && $as_test_x "$as_dir/$ac_prog$ac_exec_ext"; } || continue
+ 	   case `"$as_dir/$ac_prog$ac_exec_ext" --version 2>&1` in #(
+@@ -2555,11 +2833,12 @@
+ 	   esac
+ 	 done
+        done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ 
++  test -d ./--version && rmdir ./--version
+   if test "${ac_cv_path_mkdir+set}" = set; then
+     MKDIR_P="$ac_cv_path_mkdir -p"
+   else
+@@ -2567,11 +2846,10 @@
+     # value for MKDIR_P within a source directory, because that will
+     # break other packages using the cache if that directory is
+     # removed, or if the value is a relative name.
+-    test -d ./--version && rmdir ./--version
+     MKDIR_P="$ac_install_sh -d"
+   fi
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $MKDIR_P" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $MKDIR_P" >&5
+ $as_echo "$MKDIR_P" >&6; }
+ 
+ mkdir_p="$MKDIR_P"
+@@ -2584,9 +2862,9 @@
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_AWK+set}" = set; then
++if test "${ac_cv_prog_AWK+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$AWK"; then
+@@ -2597,24 +2875,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_AWK="$ac_prog"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ AWK=$ac_cv_prog_AWK
+ if test -n "$AWK"; then
+-  { $as_echo "$as_me:$LINENO: result: $AWK" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AWK" >&5
+ $as_echo "$AWK" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -2622,11 +2900,11 @@
+   test -n "$AWK" && break
+ done
+ 
+-{ $as_echo "$as_me:$LINENO: checking whether ${MAKE-make} sets \$(MAKE)" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ${MAKE-make} sets \$(MAKE)" >&5
+ $as_echo_n "checking whether ${MAKE-make} sets \$(MAKE)... " >&6; }
+ set x ${MAKE-make}
+ ac_make=`$as_echo "$2" | sed 's/+/p/g; s/[^a-zA-Z0-9_]/_/g'`
+-if { as_var=ac_cv_prog_make_${ac_make}_set; eval "test \"\${$as_var+set}\" = set"; }; then
++if { as_var=ac_cv_prog_make_${ac_make}_set; eval "test \"\${$as_var+set}\" = set"; }; then :
+   $as_echo_n "(cached) " >&6
+ else
+   cat >conftest.make <<\_ACEOF
+@@ -2644,11 +2922,11 @@
+ rm -f conftest.make
+ fi
+ if eval test \$ac_cv_prog_make_${ac_make}_set = yes; then
+-  { $as_echo "$as_me:$LINENO: result: yes" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+   SET_MAKE=
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+   SET_MAKE="MAKE=${MAKE-make}"
+ fi
+@@ -2668,9 +2946,7 @@
+   am__isrc=' -I$(srcdir)'
+   # test to see if srcdir already configured
+   if test -f $srcdir/config.status; then
+-    { { $as_echo "$as_me:$LINENO: error: source directory already configured; run \"make distclean\" there first" >&5
+-$as_echo "$as_me: error: source directory already configured; run \"make distclean\" there first" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error "source directory already configured; run \"make distclean\" there first" "$LINENO" 5
+   fi
+ fi
+ 
+@@ -2721,7 +2997,7 @@
+ AMTAR=${AMTAR-"${am_missing_run}tar"}
+ 
+ 
+-{ $as_echo "$as_me:$LINENO: checking how to create a ustar tar archive" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to create a ustar tar archive" >&5
+ $as_echo_n "checking how to create a ustar tar archive... " >&6; }
+ # Loop over all known methods to create a tar archive until one works.
+ _am_tools='gnutar plaintar pax cpio none'
+@@ -2794,13 +3070,13 @@
+ done
+ rm -rf conftest.dir
+ 
+-if test "${am_cv_prog_tar_ustar+set}" = set; then
++if test "${am_cv_prog_tar_ustar+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   am_cv_prog_tar_ustar=$_am_tool
+ fi
+ 
+-{ $as_echo "$as_me:$LINENO: result: $am_cv_prog_tar_ustar" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_prog_tar_ustar" >&5
+ $as_echo "$am_cv_prog_tar_ustar" >&6; }
+ 
+ 
+@@ -2808,7 +3084,7 @@
+ 
+ 
+ # Check whether --enable-silent-rules was given.
+-if test "${enable_silent_rules+set}" = set; then
++if test "${enable_silent_rules+set}" = set; then :
+   enableval=$enable_silent_rules;
+ fi
+ 
+@@ -2820,16 +3096,16 @@
+ AM_BACKSLASH='\'
+ 
+ 
+-{ $as_echo "$as_me:$LINENO: checking whether to enable maintainer-specific portions of Makefiles" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to enable maintainer-specific portions of Makefiles" >&5
+ $as_echo_n "checking whether to enable maintainer-specific portions of Makefiles... " >&6; }
+     # Check whether --enable-maintainer-mode was given.
+-if test "${enable_maintainer_mode+set}" = set; then
++if test "${enable_maintainer_mode+set}" = set; then :
+   enableval=$enable_maintainer_mode; USE_MAINTAINER_MODE=$enableval
+ else
+   USE_MAINTAINER_MODE=no
+ fi
+ 
+-  { $as_echo "$as_me:$LINENO: result: $USE_MAINTAINER_MODE" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $USE_MAINTAINER_MODE" >&5
+ $as_echo "$USE_MAINTAINER_MODE" >&6; }
+    if test $USE_MAINTAINER_MODE = yes; then
+   MAINTAINER_MODE_TRUE=
+@@ -2872,7 +3148,7 @@
+ .PHONY: am__doit
+ END
+ # If we don't find an include directive, just comment out the code.
+-{ $as_echo "$as_me:$LINENO: checking for style of include used by $am_make" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for style of include used by $am_make" >&5
+ $as_echo_n "checking for style of include used by $am_make... " >&6; }
+ am__include="#"
+ am__quote=
+@@ -2900,12 +3176,12 @@
+ fi
+ 
+ 
+-{ $as_echo "$as_me:$LINENO: result: $_am_result" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $_am_result" >&5
+ $as_echo "$_am_result" >&6; }
+ rm -f confinc confmf
+ 
+ # Check whether --enable-dependency-tracking was given.
+-if test "${enable_dependency_tracking+set}" = set; then
++if test "${enable_dependency_tracking+set}" = set; then :
+   enableval=$enable_dependency_tracking;
+ fi
+ 
+@@ -2930,9 +3206,9 @@
+ if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}gcc; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_CC+set}" = set; then
++if test "${ac_cv_prog_CC+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$CC"; then
+@@ -2943,24 +3219,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_CC="${ac_tool_prefix}gcc"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ CC=$ac_cv_prog_CC
+ if test -n "$CC"; then
+-  { $as_echo "$as_me:$LINENO: result: $CC" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+ $as_echo "$CC" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -2970,9 +3246,9 @@
+   ac_ct_CC=$CC
+   # Extract the first word of "gcc", so it can be a program name with args.
+ set dummy gcc; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
++if test "${ac_cv_prog_ac_ct_CC+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_CC"; then
+@@ -2983,24 +3259,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_CC="gcc"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_CC=$ac_cv_prog_ac_ct_CC
+ if test -n "$ac_ct_CC"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+ $as_echo "$ac_ct_CC" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -3009,7 +3285,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -3023,9 +3299,9 @@
+           if test -n "$ac_tool_prefix"; then
+     # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}cc; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_CC+set}" = set; then
++if test "${ac_cv_prog_CC+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$CC"; then
+@@ -3036,24 +3312,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_CC="${ac_tool_prefix}cc"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ CC=$ac_cv_prog_CC
+ if test -n "$CC"; then
+-  { $as_echo "$as_me:$LINENO: result: $CC" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+ $as_echo "$CC" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -3063,9 +3339,9 @@
+ if test -z "$CC"; then
+   # Extract the first word of "cc", so it can be a program name with args.
+ set dummy cc; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_CC+set}" = set; then
++if test "${ac_cv_prog_CC+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$CC"; then
+@@ -3077,18 +3353,18 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
+        ac_prog_rejected=yes
+        continue
+      fi
+     ac_cv_prog_CC="cc"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ if test $ac_prog_rejected = yes; then
+@@ -3107,10 +3383,10 @@
+ fi
+ CC=$ac_cv_prog_CC
+ if test -n "$CC"; then
+-  { $as_echo "$as_me:$LINENO: result: $CC" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+ $as_echo "$CC" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -3122,9 +3398,9 @@
+   do
+     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+ set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_CC+set}" = set; then
++if test "${ac_cv_prog_CC+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$CC"; then
+@@ -3135,24 +3411,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ CC=$ac_cv_prog_CC
+ if test -n "$CC"; then
+-  { $as_echo "$as_me:$LINENO: result: $CC" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+ $as_echo "$CC" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -3166,9 +3442,9 @@
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
++if test "${ac_cv_prog_ac_ct_CC+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_CC"; then
+@@ -3179,24 +3455,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_CC="$ac_prog"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_CC=$ac_cv_prog_ac_ct_CC
+ if test -n "$ac_ct_CC"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+ $as_echo "$ac_ct_CC" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -3209,7 +3485,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -3220,57 +3496,37 @@
+ fi
+ 
+ 
+-test -z "$CC" && { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
++test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+ $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+-{ { $as_echo "$as_me:$LINENO: error: no acceptable C compiler found in \$PATH
+-See \`config.log' for more details." >&5
+-$as_echo "$as_me: error: no acceptable C compiler found in \$PATH
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }; }
++as_fn_error "no acceptable C compiler found in \$PATH
++See \`config.log' for more details." "$LINENO" 5; }
+ 
+ # Provide some information about the compiler.
+-$as_echo "$as_me:$LINENO: checking for C compiler version" >&5
++$as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
+ set X $ac_compile
+ ac_compiler=$2
+-{ (ac_try="$ac_compiler --version >&5"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compiler --version >&5") 2>&5
+-  ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
+-{ (ac_try="$ac_compiler -v >&5"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compiler -v >&5") 2>&5
+-  ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
+-{ (ac_try="$ac_compiler -V >&5"
++for ac_option in --version -v -V -qversion; do
++  { { ac_try="$ac_compiler $ac_option >&5"
+ case "(($ac_try" in
+   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+   *) ac_try_echo=$ac_try;;
+ esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compiler -V >&5") 2>&5
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++$as_echo "$ac_try_echo"; } >&5
++  (eval "$ac_compiler $ac_option >&5") 2>conftest.err
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
++  if test -s conftest.err; then
++    sed '10a\
++... rest of stderr output deleted ...
++         10q' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++  fi
++  rm -f conftest.er1 conftest.err
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }
++done
+ 
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -3286,8 +3542,8 @@
+ # Try to create an executable without -o first, disregard a.out.
+ # It will help us diagnose broken compilers, and finding out an intuition
+ # of exeext.
+-{ $as_echo "$as_me:$LINENO: checking for C compiler default output file name" >&5
+-$as_echo_n "checking for C compiler default output file name... " >&6; }
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler works" >&5
++$as_echo_n "checking whether the C compiler works... " >&6; }
+ ac_link_default=`$as_echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
+ 
+ # The possible output files:
+@@ -3303,17 +3559,17 @@
+ done
+ rm -f $ac_rmfiles
+ 
+-if { (ac_try="$ac_link_default"
++if { { ac_try="$ac_link_default"
+ case "(($ac_try" in
+   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+   *) ac_try_echo=$ac_try;;
+ esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++$as_echo "$ac_try_echo"; } >&5
+   (eval "$ac_link_default") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then :
+   # Autoconf-2.13 could set the ac_cv_exeext variable to `no'.
+ # So ignore a value of `no', otherwise this would lead to `EXEEXT = no'
+ # in a Makefile.  We should not override ac_cv_exeext if it was cached,
+@@ -3330,7 +3586,7 @@
+ 	# certainly right.
+ 	break;;
+     *.* )
+-        if test "${ac_cv_exeext+set}" = set && test "$ac_cv_exeext" != no;
++	if test "${ac_cv_exeext+set}" = set && test "$ac_cv_exeext" != no;
+ 	then :; else
+ 	   ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
+ 	fi
+@@ -3349,84 +3605,42 @@
+ else
+   ac_file=''
+ fi
+-
+-{ $as_echo "$as_me:$LINENO: result: $ac_file" >&5
+-$as_echo "$ac_file" >&6; }
+-if test -z "$ac_file"; then
+-  $as_echo "$as_me: failed program was:" >&5
++if test -z "$ac_file"; then :
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
++$as_echo "no" >&6; }
++$as_echo "$as_me: failed program was:" >&5
+ sed 's/^/| /' conftest.$ac_ext >&5
+ 
+-{ { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
++{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+ $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+-{ { $as_echo "$as_me:$LINENO: error: C compiler cannot create executables
+-See \`config.log' for more details." >&5
+-$as_echo "$as_me: error: C compiler cannot create executables
+-See \`config.log' for more details." >&2;}
+-   { (exit 77); exit 77; }; }; }
++{ as_fn_set_status 77
++as_fn_error "C compiler cannot create executables
++See \`config.log' for more details." "$LINENO" 5; }; }
++else
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
++$as_echo "yes" >&6; }
+ fi
+-
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
++$as_echo_n "checking for C compiler default output file name... " >&6; }
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
++$as_echo "$ac_file" >&6; }
+ ac_exeext=$ac_cv_exeext
+ 
+-# Check that the compiler produces executables we can run.  If not, either
+-# the compiler is broken, or we cross compile.
+-{ $as_echo "$as_me:$LINENO: checking whether the C compiler works" >&5
+-$as_echo_n "checking whether the C compiler works... " >&6; }
+-# FIXME: These cross compiler hacks should be removed for Autoconf 3.0
+-# If not cross compiling, check that we can run a simple program.
+-if test "$cross_compiling" != yes; then
+-  if { ac_try='./$ac_file'
+-  { (case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_try") 2>&5
+-  ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; }; then
+-    cross_compiling=no
+-  else
+-    if test "$cross_compiling" = maybe; then
+-	cross_compiling=yes
+-    else
+-	{ { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
+-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+-{ { $as_echo "$as_me:$LINENO: error: cannot run C compiled programs.
+-If you meant to cross compile, use \`--host'.
+-See \`config.log' for more details." >&5
+-$as_echo "$as_me: error: cannot run C compiled programs.
+-If you meant to cross compile, use \`--host'.
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }; }
+-    fi
+-  fi
+-fi
+-{ $as_echo "$as_me:$LINENO: result: yes" >&5
+-$as_echo "yes" >&6; }
+-
+ rm -f -r a.out a.out.dSYM a.exe conftest$ac_cv_exeext b.out
+ ac_clean_files=$ac_clean_files_save
+-# Check that the compiler produces executables we can run.  If not, either
+-# the compiler is broken, or we cross compile.
+-{ $as_echo "$as_me:$LINENO: checking whether we are cross compiling" >&5
+-$as_echo_n "checking whether we are cross compiling... " >&6; }
+-{ $as_echo "$as_me:$LINENO: result: $cross_compiling" >&5
+-$as_echo "$cross_compiling" >&6; }
+-
+-{ $as_echo "$as_me:$LINENO: checking for suffix of executables" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of executables" >&5
+ $as_echo_n "checking for suffix of executables... " >&6; }
+-if { (ac_try="$ac_link"
++if { { ac_try="$ac_link"
+ case "(($ac_try" in
+   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+   *) ac_try_echo=$ac_try;;
+ esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++$as_echo "$ac_try_echo"; } >&5
+   (eval "$ac_link") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then :
+   # If both `conftest.exe' and `conftest' are `present' (well, observable)
+ # catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
+ # work properly (i.e., refer to `conftest.exe'), while it won't with
+@@ -3441,32 +3655,83 @@
+   esac
+ done
+ else
+-  { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
++  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+ $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+-{ { $as_echo "$as_me:$LINENO: error: cannot compute suffix of executables: cannot compile and link
+-See \`config.log' for more details." >&5
+-$as_echo "$as_me: error: cannot compute suffix of executables: cannot compile and link
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }; }
++as_fn_error "cannot compute suffix of executables: cannot compile and link
++See \`config.log' for more details." "$LINENO" 5; }
+ fi
+-
+-rm -f conftest$ac_cv_exeext
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_exeext" >&5
++rm -f conftest conftest$ac_cv_exeext
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
+ $as_echo "$ac_cv_exeext" >&6; }
+ 
+ rm -f conftest.$ac_ext
+ EXEEXT=$ac_cv_exeext
+ ac_exeext=$EXEEXT
+-{ $as_echo "$as_me:$LINENO: checking for suffix of object files" >&5
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
++#include <stdio.h>
++int
++main ()
++{
++FILE *f = fopen ("conftest.out", "w");
++ return ferror (f) || fclose (f) != 0;
++
++  ;
++  return 0;
++}
++_ACEOF
++ac_clean_files="$ac_clean_files conftest.out"
++# Check that the compiler produces executables we can run.  If not, either
++# the compiler is broken, or we cross compile.
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
++$as_echo_n "checking whether we are cross compiling... " >&6; }
++if test "$cross_compiling" != yes; then
++  { { ac_try="$ac_link"
++case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++$as_echo "$ac_try_echo"; } >&5
++  (eval "$ac_link") 2>&5
++  ac_status=$?
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }
++  if { ac_try='./conftest$ac_cv_exeext'
++  { { case "(($ac_try" in
++  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
++  *) ac_try_echo=$ac_try;;
++esac
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++$as_echo "$ac_try_echo"; } >&5
++  (eval "$ac_try") 2>&5
++  ac_status=$?
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; }; then
++    cross_compiling=no
++  else
++    if test "$cross_compiling" = maybe; then
++	cross_compiling=yes
++    else
++	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
++$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
++as_fn_error "cannot run C compiled programs.
++If you meant to cross compile, use \`--host'.
++See \`config.log' for more details." "$LINENO" 5; }
++    fi
++  fi
++fi
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
++$as_echo "$cross_compiling" >&6; }
++
++rm -f conftest.$ac_ext conftest$ac_cv_exeext conftest.out
++ac_clean_files=$ac_clean_files_save
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
+ $as_echo_n "checking for suffix of object files... " >&6; }
+-if test "${ac_cv_objext+set}" = set; then
++if test "${ac_cv_objext+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -3478,17 +3743,17 @@
+ }
+ _ACEOF
+ rm -f conftest.o conftest.obj
+-if { (ac_try="$ac_compile"
++if { { ac_try="$ac_compile"
+ case "(($ac_try" in
+   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+   *) ac_try_echo=$ac_try;;
+ esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++$as_echo "$ac_try_echo"; } >&5
+   (eval "$ac_compile") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then :
+   for ac_file in conftest.o conftest.obj conftest.*; do
+   test -f "$ac_file" || continue;
+   case $ac_file in
+@@ -3501,31 +3766,23 @@
+   $as_echo "$as_me: failed program was:" >&5
+ sed 's/^/| /' conftest.$ac_ext >&5
+ 
+-{ { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
++{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+ $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+-{ { $as_echo "$as_me:$LINENO: error: cannot compute suffix of object files: cannot compile
+-See \`config.log' for more details." >&5
+-$as_echo "$as_me: error: cannot compute suffix of object files: cannot compile
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }; }
++as_fn_error "cannot compute suffix of object files: cannot compile
++See \`config.log' for more details." "$LINENO" 5; }
+ fi
+-
+ rm -f conftest.$ac_cv_objext conftest.$ac_ext
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_objext" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
+ $as_echo "$ac_cv_objext" >&6; }
+ OBJEXT=$ac_cv_objext
+ ac_objext=$OBJEXT
+-{ $as_echo "$as_me:$LINENO: checking whether we are using the GNU C compiler" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler" >&5
+ $as_echo_n "checking whether we are using the GNU C compiler... " >&6; }
+-if test "${ac_cv_c_compiler_gnu+set}" = set; then
++if test "${ac_cv_c_compiler_gnu+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -3539,37 +3796,16 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   ac_compiler_gnu=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_compiler_gnu=no
++  ac_compiler_gnu=no
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+ ac_cv_c_compiler_gnu=$ac_compiler_gnu
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_c_compiler_gnu" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu" >&5
+ $as_echo "$ac_cv_c_compiler_gnu" >&6; }
+ if test $ac_compiler_gnu = yes; then
+   GCC=yes
+@@ -3578,20 +3814,16 @@
+ fi
+ ac_test_CFLAGS=${CFLAGS+set}
+ ac_save_CFLAGS=$CFLAGS
+-{ $as_echo "$as_me:$LINENO: checking whether $CC accepts -g" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
+ $as_echo_n "checking whether $CC accepts -g... " >&6; }
+-if test "${ac_cv_prog_cc_g+set}" = set; then
++if test "${ac_cv_prog_cc_g+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_save_c_werror_flag=$ac_c_werror_flag
+    ac_c_werror_flag=yes
+    ac_cv_prog_cc_g=no
+    CFLAGS="-g"
+-   cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -3602,35 +3834,11 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   ac_cv_prog_cc_g=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	CFLAGS=""
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  CFLAGS=""
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -3641,36 +3849,12 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  :
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_c_try_compile "$LINENO"; then :
+ 
+-	ac_c_werror_flag=$ac_save_c_werror_flag
++else
++  ac_c_werror_flag=$ac_save_c_werror_flag
+ 	 CFLAGS="-g"
+-	 cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -3681,42 +3865,17 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   ac_cv_prog_cc_g=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+    ac_c_werror_flag=$ac_save_c_werror_flag
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_prog_cc_g" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g" >&5
+ $as_echo "$ac_cv_prog_cc_g" >&6; }
+ if test "$ac_test_CFLAGS" = set; then
+   CFLAGS=$ac_save_CFLAGS
+@@ -3733,18 +3892,14 @@
+     CFLAGS=
+   fi
+ fi
+-{ $as_echo "$as_me:$LINENO: checking for $CC option to accept ISO C89" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
+ $as_echo_n "checking for $CC option to accept ISO C89... " >&6; }
+-if test "${ac_cv_prog_cc_c89+set}" = set; then
++if test "${ac_cv_prog_cc_c89+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_cv_prog_cc_c89=no
+ ac_save_CC=$CC
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <stdarg.h>
+ #include <stdio.h>
+@@ -3801,32 +3956,9 @@
+ 	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+ do
+   CC="$ac_save_CC $ac_arg"
+-  rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++  if ac_fn_c_try_compile "$LINENO"; then :
+   ac_cv_prog_cc_c89=$ac_arg
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext
+   test "x$ac_cv_prog_cc_c89" != "xno" && break
+ done
+@@ -3837,17 +3969,19 @@
+ # AC_CACHE_VAL
+ case "x$ac_cv_prog_cc_c89" in
+   x)
+-    { $as_echo "$as_me:$LINENO: result: none needed" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+ $as_echo "none needed" >&6; } ;;
+   xno)
+-    { $as_echo "$as_me:$LINENO: result: unsupported" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+ $as_echo "unsupported" >&6; } ;;
+   *)
+     CC="$CC $ac_cv_prog_cc_c89"
+-    { $as_echo "$as_me:$LINENO: result: $ac_cv_prog_cc_c89" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
+ $as_echo "$ac_cv_prog_cc_c89" >&6; } ;;
+ esac
++if test "x$ac_cv_prog_cc_c89" != xno; then :
+ 
++fi
+ 
+ ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+@@ -3857,9 +3991,9 @@
+ 
+ depcc="$CC"   am_compiler_list=
+ 
+-{ $as_echo "$as_me:$LINENO: checking dependency style of $depcc" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking dependency style of $depcc" >&5
+ $as_echo_n "checking dependency style of $depcc... " >&6; }
+-if test "${am_cv_CC_dependencies_compiler_type+set}" = set; then
++if test "${am_cv_CC_dependencies_compiler_type+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
+@@ -3967,7 +4101,7 @@
+ fi
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $am_cv_CC_dependencies_compiler_type" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_CC_dependencies_compiler_type" >&5
+ $as_echo "$am_cv_CC_dependencies_compiler_type" >&6; }
+ CCDEPMODE=depmode=$am_cv_CC_dependencies_compiler_type
+ 
+@@ -3988,14 +4122,14 @@
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+-{ $as_echo "$as_me:$LINENO: checking how to run the C preprocessor" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor" >&5
+ $as_echo_n "checking how to run the C preprocessor... " >&6; }
+ # On Suns, sometimes $CPP names a directory.
+ if test -n "$CPP" && test -d "$CPP"; then
+   CPP=
+ fi
+ if test -z "$CPP"; then
+-  if test "${ac_cv_prog_CPP+set}" = set; then
++  if test "${ac_cv_prog_CPP+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+       # Double quotes because CPP needs to be expanded
+@@ -4010,11 +4144,7 @@
+   # <limits.h> exists even on freestanding compilers.
+   # On the NeXT, cc -E runs the code through the compiler's parser,
+   # not just through cpp. "Syntax error" is here to catch this case.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #ifdef __STDC__
+ # include <limits.h>
+@@ -4023,78 +4153,34 @@
+ #endif
+ 		     Syntax error
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  :
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_c_try_cpp "$LINENO"; then :
+ 
++else
+   # Broken: fails on valid input.
+ continue
+ fi
+-
+ rm -f conftest.err conftest.$ac_ext
+ 
+   # OK, works on sane cases.  Now check whether nonexistent headers
+   # can be detected and how.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <ac_nonexistent.h>
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
++if ac_fn_c_try_cpp "$LINENO"; then :
+   # Broken: success on invalid input.
+ continue
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+   # Passes both tests.
+ ac_preproc_ok=:
+ break
+ fi
+-
+ rm -f conftest.err conftest.$ac_ext
+ 
+ done
+ # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+ rm -f conftest.err conftest.$ac_ext
+-if $ac_preproc_ok; then
++if $ac_preproc_ok; then :
+   break
+ fi
+ 
+@@ -4106,7 +4192,7 @@
+ else
+   ac_cv_prog_CPP=$CPP
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $CPP" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $CPP" >&5
+ $as_echo "$CPP" >&6; }
+ ac_preproc_ok=false
+ for ac_c_preproc_warn_flag in '' yes
+@@ -4117,11 +4203,7 @@
+   # <limits.h> exists even on freestanding compilers.
+   # On the NeXT, cc -E runs the code through the compiler's parser,
+   # not just through cpp. "Syntax error" is here to catch this case.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #ifdef __STDC__
+ # include <limits.h>
+@@ -4130,87 +4212,40 @@
+ #endif
+ 		     Syntax error
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  :
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_c_try_cpp "$LINENO"; then :
+ 
++else
+   # Broken: fails on valid input.
+ continue
+ fi
+-
+ rm -f conftest.err conftest.$ac_ext
+ 
+   # OK, works on sane cases.  Now check whether nonexistent headers
+   # can be detected and how.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <ac_nonexistent.h>
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
++if ac_fn_c_try_cpp "$LINENO"; then :
+   # Broken: success on invalid input.
+ continue
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+   # Passes both tests.
+ ac_preproc_ok=:
+ break
+ fi
+-
+ rm -f conftest.err conftest.$ac_ext
+ 
+ done
+ # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+ rm -f conftest.err conftest.$ac_ext
+-if $ac_preproc_ok; then
+-  :
++if $ac_preproc_ok; then :
++
+ else
+-  { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
++  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+ $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+-{ { $as_echo "$as_me:$LINENO: error: C preprocessor \"$CPP\" fails sanity check
+-See \`config.log' for more details." >&5
+-$as_echo "$as_me: error: C preprocessor \"$CPP\" fails sanity check
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }; }
++as_fn_error "C preprocessor \"$CPP\" fails sanity check
++See \`config.log' for more details." "$LINENO" 5; }
+ fi
+ 
+ ac_ext=c
+@@ -4220,9 +4255,9 @@
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ 
+-{ $as_echo "$as_me:$LINENO: checking for grep that handles long lines and -e" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e" >&5
+ $as_echo_n "checking for grep that handles long lines and -e... " >&6; }
+-if test "${ac_cv_path_GREP+set}" = set; then
++if test "${ac_cv_path_GREP+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -z "$GREP"; then
+@@ -4233,7 +4268,7 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_prog in grep ggrep; do
++    for ac_prog in grep ggrep; do
+     for ac_exec_ext in '' $ac_executable_extensions; do
+       ac_path_GREP="$as_dir/$ac_prog$ac_exec_ext"
+       { test -f "$ac_path_GREP" && $as_test_x "$ac_path_GREP"; } || continue
+@@ -4253,7 +4288,7 @@
+     $as_echo 'GREP' >> "conftest.nl"
+     "$ac_path_GREP" -e 'GREP$' -e '-(cannot match)-' < "conftest.nl" >"conftest.out" 2>/dev/null || break
+     diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
+-    ac_count=`expr $ac_count + 1`
++    as_fn_arith $ac_count + 1 && ac_count=$as_val
+     if test $ac_count -gt ${ac_path_GREP_max-0}; then
+       # Best one so far, save it but keep looking for a better one
+       ac_cv_path_GREP="$ac_path_GREP"
+@@ -4268,26 +4303,24 @@
+       $ac_path_GREP_found && break 3
+     done
+   done
+-done
++  done
+ IFS=$as_save_IFS
+   if test -z "$ac_cv_path_GREP"; then
+-    { { $as_echo "$as_me:$LINENO: error: no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
+-$as_echo "$as_me: error: no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+   fi
+ else
+   ac_cv_path_GREP=$GREP
+ fi
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_path_GREP" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_GREP" >&5
+ $as_echo "$ac_cv_path_GREP" >&6; }
+  GREP="$ac_cv_path_GREP"
+ 
+ 
+-{ $as_echo "$as_me:$LINENO: checking for egrep" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
+ $as_echo_n "checking for egrep... " >&6; }
+-if test "${ac_cv_path_EGREP+set}" = set; then
++if test "${ac_cv_path_EGREP+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if echo a | $GREP -E '(a|b)' >/dev/null 2>&1
+@@ -4301,7 +4334,7 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_prog in egrep; do
++    for ac_prog in egrep; do
+     for ac_exec_ext in '' $ac_executable_extensions; do
+       ac_path_EGREP="$as_dir/$ac_prog$ac_exec_ext"
+       { test -f "$ac_path_EGREP" && $as_test_x "$ac_path_EGREP"; } || continue
+@@ -4321,7 +4354,7 @@
+     $as_echo 'EGREP' >> "conftest.nl"
+     "$ac_path_EGREP" 'EGREP$' < "conftest.nl" >"conftest.out" 2>/dev/null || break
+     diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
+-    ac_count=`expr $ac_count + 1`
++    as_fn_arith $ac_count + 1 && ac_count=$as_val
+     if test $ac_count -gt ${ac_path_EGREP_max-0}; then
+       # Best one so far, save it but keep looking for a better one
+       ac_cv_path_EGREP="$ac_path_EGREP"
+@@ -4336,12 +4369,10 @@
+       $ac_path_EGREP_found && break 3
+     done
+   done
+-done
++  done
+ IFS=$as_save_IFS
+   if test -z "$ac_cv_path_EGREP"; then
+-    { { $as_echo "$as_me:$LINENO: error: no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
+-$as_echo "$as_me: error: no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+   fi
+ else
+   ac_cv_path_EGREP=$EGREP
+@@ -4349,21 +4380,17 @@
+ 
+    fi
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_path_EGREP" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_EGREP" >&5
+ $as_echo "$ac_cv_path_EGREP" >&6; }
+  EGREP="$ac_cv_path_EGREP"
+ 
+ 
+-{ $as_echo "$as_me:$LINENO: checking for ANSI C header files" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
+ $as_echo_n "checking for ANSI C header files... " >&6; }
+-if test "${ac_cv_header_stdc+set}" = set; then
++if test "${ac_cv_header_stdc+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <stdlib.h>
+ #include <stdarg.h>
+@@ -4378,48 +4405,23 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   ac_cv_header_stdc=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_header_stdc=no
++  ac_cv_header_stdc=no
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+ 
+ if test $ac_cv_header_stdc = yes; then
+   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <string.h>
+ 
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "memchr" >/dev/null 2>&1; then
+-  :
++  $EGREP "memchr" >/dev/null 2>&1; then :
++
+ else
+   ac_cv_header_stdc=no
+ fi
+@@ -4429,18 +4431,14 @@
+ 
+ if test $ac_cv_header_stdc = yes; then
+   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <stdlib.h>
+ 
+ _ACEOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+-  $EGREP "free" >/dev/null 2>&1; then
+-  :
++  $EGREP "free" >/dev/null 2>&1; then :
++
+ else
+   ac_cv_header_stdc=no
+ fi
+@@ -4450,14 +4448,10 @@
+ 
+ if test $ac_cv_header_stdc = yes; then
+   # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
+-  if test "$cross_compiling" = yes; then
++  if test "$cross_compiling" = yes; then :
+   :
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <ctype.h>
+ #include <stdlib.h>
+@@ -4484,118 +4478,34 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>&5
+-  ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+-  { (case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_try") 2>&5
+-  ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; }; then
+-  :
+-else
+-  $as_echo "$as_me: program exited with status $ac_status" >&5
+-$as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_c_try_run "$LINENO"; then :
+ 
+-( exit $ac_status )
+-ac_cv_header_stdc=no
++else
++  ac_cv_header_stdc=no
+ fi
+-rm -rf conftest.dSYM
+-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
++rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
++  conftest.$ac_objext conftest.beam conftest.$ac_ext
+ fi
+ 
+-
+ fi
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc" >&5
+ $as_echo "$ac_cv_header_stdc" >&6; }
+ if test $ac_cv_header_stdc = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define STDC_HEADERS 1
+-_ACEOF
++$as_echo "#define STDC_HEADERS 1" >>confdefs.h
+ 
+ fi
+ 
+ # On IRIX 5.3, sys/types and inttypes.h are conflicting.
+-
+-
+-
+-
+-
+-
+-
+-
+-
+ for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
+ 		  inttypes.h stdint.h unistd.h
+-do
+-as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
+-{ $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
+-$as_echo_n "checking for $ac_header... " >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-
+-#include <$ac_header>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  eval "$as_ac_Header=yes"
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Header=no"
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-fi
+-ac_res=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
+-as_val=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-   if test "x$as_val" = x""yes; then
++do :
++  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
++ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
++"
++eval as_val=\$$as_ac_Header
++   if test "x$as_val" = x""yes; then :
+   cat >>confdefs.h <<_ACEOF
+ #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
+ _ACEOF
+@@ -4605,19 +4515,14 @@
+ done
+ 
+ 
+-
+- { $as_echo "$as_me:$LINENO: checking whether byte ordering is bigendian" >&5
++ { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether byte ordering is bigendian" >&5
+ $as_echo_n "checking whether byte ordering is bigendian... " >&6; }
+-if test "${ac_cv_c_bigendian+set}" = set; then
++if test "${ac_cv_c_bigendian+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_cv_c_bigendian=unknown
+     # See if we're dealing with a universal compiler.
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #ifndef __APPLE_CC__
+ 	       not a universal capable compiler
+@@ -4625,46 +4530,34 @@
+ 	     typedef int dummy;
+ 
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+ 
+ 	# Check for potential -arch flags.  It is not universal unless
+-	# there are some -arch flags.  Note that *ppc* also matches
+-	# ppc64.  This check is also rather less than ideal.
+-	case "${CC} ${CFLAGS} ${CPPFLAGS} ${LDFLAGS}" in  #(
+-	  *-arch*ppc*|*-arch*i386*|*-arch*x86_64*) ac_cv_c_bigendian=universal;;
+-	esac
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
++	# there are at least two -arch flags with different values.
++	ac_arch=
++	ac_prev=
++	for ac_word in $CC $CFLAGS $CPPFLAGS $LDFLAGS; do
++	 if test -n "$ac_prev"; then
++	   case $ac_word in
++	     i?86 | x86_64 | ppc | ppc64)
++	       if test -z "$ac_arch" || test "$ac_arch" = "$ac_word"; then
++		 ac_arch=$ac_word
++	       else
++		 ac_cv_c_bigendian=universal
++		 break
++	       fi
++	       ;;
++	   esac
++	   ac_prev=
++	 elif test "x$ac_word" = "x-arch"; then
++	   ac_prev=arch
++	 fi
++       done
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+     if test $ac_cv_c_bigendian = unknown; then
+       # See if sys/param.h defines the BYTE_ORDER macro.
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <sys/types.h>
+ 	     #include <sys/param.h>
+@@ -4682,30 +4575,9 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   # It does; now see whether it defined to BIG_ENDIAN or not.
+-	 cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <sys/types.h>
+ 		#include <sys/param.h>
+@@ -4721,49 +4593,18 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   ac_cv_c_bigendian=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_c_bigendian=no
++  ac_cv_c_bigendian=no
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+     fi
+     if test $ac_cv_c_bigendian = unknown; then
+       # See if <limits.h> defines _LITTLE_ENDIAN or _BIG_ENDIAN (e.g., Solaris).
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <limits.h>
+ 
+@@ -4778,30 +4619,9 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   # It does; now see whether it defined to _BIG_ENDIAN or not.
+-	 cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <limits.h>
+ 
+@@ -4816,51 +4636,20 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   ac_cv_c_bigendian=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_c_bigendian=no
++  ac_cv_c_bigendian=no
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+     fi
+     if test $ac_cv_c_bigendian = unknown; then
+       # Compile a test program.
+-      if test "$cross_compiling" = yes; then
++      if test "$cross_compiling" = yes; then :
+   # Try to guess by grepping values from an object file.
+-	 cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ short int ascii_mm[] =
+ 		  { 0x4249, 0x4765, 0x6E44, 0x6961, 0x6E53, 0x7953, 0 };
+@@ -4886,24 +4675,7 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   if grep BIGenDianSyS conftest.$ac_objext >/dev/null; then
+ 	      ac_cv_c_bigendian=yes
+ 	    fi
+@@ -4915,20 +4687,10 @@
+ 		ac_cv_c_bigendian=unknown
+ 	      fi
+ 	    fi
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ $ac_includes_default
+ int
+@@ -4948,79 +4710,41 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>&5
+-  ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+-  { (case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_try") 2>&5
+-  ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; }; then
++if ac_fn_c_try_run "$LINENO"; then :
+   ac_cv_c_bigendian=no
+ else
+-  $as_echo "$as_me: program exited with status $ac_status" >&5
+-$as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-( exit $ac_status )
+-ac_cv_c_bigendian=yes
++  ac_cv_c_bigendian=yes
+ fi
+-rm -rf conftest.dSYM
+-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
++rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
++  conftest.$ac_objext conftest.beam conftest.$ac_ext
+ fi
+ 
+-
+     fi
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_c_bigendian" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_bigendian" >&5
+ $as_echo "$ac_cv_c_bigendian" >&6; }
+  case $ac_cv_c_bigendian in #(
+    yes)
+-     cat >>confdefs.h <<\_ACEOF
+-#define WORDS_BIGENDIAN 1
+-_ACEOF
++     $as_echo "#define WORDS_BIGENDIAN 1" >>confdefs.h
+ ;; #(
+    no)
+       ;; #(
+    universal)
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define AC_APPLE_UNIVERSAL_BUILD 1
+-_ACEOF
++$as_echo "#define AC_APPLE_UNIVERSAL_BUILD 1" >>confdefs.h
+ 
+      ;; #(
+    *)
+-     { { $as_echo "$as_me:$LINENO: error: unknown endianness
+- presetting ac_cv_c_bigendian=no (or yes) will help" >&5
+-$as_echo "$as_me: error: unknown endianness
+- presetting ac_cv_c_bigendian=no (or yes) will help" >&2;}
+-   { (exit 1); exit 1; }; } ;;
++     as_fn_error "unknown endianness
++ presetting ac_cv_c_bigendian=no (or yes) will help" "$LINENO" 5 ;;
+  esac
+ 
+-{ $as_echo "$as_me:$LINENO: checking for an ANSI C-conforming const" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for an ANSI C-conforming const" >&5
+ $as_echo_n "checking for an ANSI C-conforming const... " >&6; }
+-if test "${ac_cv_c_const+set}" = set; then
++if test "${ac_cv_c_const+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -5080,41 +4804,18 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   ac_cv_c_const=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_c_const=no
++  ac_cv_c_const=no
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_c_const" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_const" >&5
+ $as_echo "$ac_cv_c_const" >&6; }
+ if test $ac_cv_c_const = no; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define const /**/
+-_ACEOF
++$as_echo "#define const /**/" >>confdefs.h
+ 
+ fi
+ 
+@@ -5126,9 +4827,9 @@
+ if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}gcc; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_CC+set}" = set; then
++if test "${ac_cv_prog_CC+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$CC"; then
+@@ -5139,24 +4840,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_CC="${ac_tool_prefix}gcc"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ CC=$ac_cv_prog_CC
+ if test -n "$CC"; then
+-  { $as_echo "$as_me:$LINENO: result: $CC" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+ $as_echo "$CC" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -5166,9 +4867,9 @@
+   ac_ct_CC=$CC
+   # Extract the first word of "gcc", so it can be a program name with args.
+ set dummy gcc; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
++if test "${ac_cv_prog_ac_ct_CC+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_CC"; then
+@@ -5179,24 +4880,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_CC="gcc"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_CC=$ac_cv_prog_ac_ct_CC
+ if test -n "$ac_ct_CC"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+ $as_echo "$ac_ct_CC" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -5205,7 +4906,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -5219,9 +4920,9 @@
+           if test -n "$ac_tool_prefix"; then
+     # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}cc; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_CC+set}" = set; then
++if test "${ac_cv_prog_CC+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$CC"; then
+@@ -5232,24 +4933,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_CC="${ac_tool_prefix}cc"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ CC=$ac_cv_prog_CC
+ if test -n "$CC"; then
+-  { $as_echo "$as_me:$LINENO: result: $CC" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+ $as_echo "$CC" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -5259,9 +4960,9 @@
+ if test -z "$CC"; then
+   # Extract the first word of "cc", so it can be a program name with args.
+ set dummy cc; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_CC+set}" = set; then
++if test "${ac_cv_prog_CC+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$CC"; then
+@@ -5273,18 +4974,18 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
+        ac_prog_rejected=yes
+        continue
+      fi
+     ac_cv_prog_CC="cc"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ if test $ac_prog_rejected = yes; then
+@@ -5303,10 +5004,10 @@
+ fi
+ CC=$ac_cv_prog_CC
+ if test -n "$CC"; then
+-  { $as_echo "$as_me:$LINENO: result: $CC" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+ $as_echo "$CC" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -5318,9 +5019,9 @@
+   do
+     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+ set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_CC+set}" = set; then
++if test "${ac_cv_prog_CC+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$CC"; then
+@@ -5331,24 +5032,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ CC=$ac_cv_prog_CC
+ if test -n "$CC"; then
+-  { $as_echo "$as_me:$LINENO: result: $CC" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+ $as_echo "$CC" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -5362,9 +5063,9 @@
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
++if test "${ac_cv_prog_ac_ct_CC+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_CC"; then
+@@ -5375,24 +5076,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_CC="$ac_prog"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_CC=$ac_cv_prog_ac_ct_CC
+ if test -n "$ac_ct_CC"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_CC" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+ $as_echo "$ac_ct_CC" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -5405,7 +5106,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -5416,62 +5117,42 @@
+ fi
+ 
+ 
+-test -z "$CC" && { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
++test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+ $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+-{ { $as_echo "$as_me:$LINENO: error: no acceptable C compiler found in \$PATH
+-See \`config.log' for more details." >&5
+-$as_echo "$as_me: error: no acceptable C compiler found in \$PATH
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }; }
++as_fn_error "no acceptable C compiler found in \$PATH
++See \`config.log' for more details." "$LINENO" 5; }
+ 
+ # Provide some information about the compiler.
+-$as_echo "$as_me:$LINENO: checking for C compiler version" >&5
++$as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
+ set X $ac_compile
+ ac_compiler=$2
+-{ (ac_try="$ac_compiler --version >&5"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compiler --version >&5") 2>&5
+-  ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
+-{ (ac_try="$ac_compiler -v >&5"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compiler -v >&5") 2>&5
+-  ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
+-{ (ac_try="$ac_compiler -V >&5"
++for ac_option in --version -v -V -qversion; do
++  { { ac_try="$ac_compiler $ac_option >&5"
+ case "(($ac_try" in
+   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+   *) ac_try_echo=$ac_try;;
+ esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compiler -V >&5") 2>&5
++eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
++$as_echo "$ac_try_echo"; } >&5
++  (eval "$ac_compiler $ac_option >&5") 2>conftest.err
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
++  if test -s conftest.err; then
++    sed '10a\
++... rest of stderr output deleted ...
++         10q' conftest.err >conftest.er1
++    cat conftest.er1 >&5
++  fi
++  rm -f conftest.er1 conftest.err
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }
++done
+ 
+-{ $as_echo "$as_me:$LINENO: checking whether we are using the GNU C compiler" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler" >&5
+ $as_echo_n "checking whether we are using the GNU C compiler... " >&6; }
+-if test "${ac_cv_c_compiler_gnu+set}" = set; then
++if test "${ac_cv_c_compiler_gnu+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -5485,37 +5166,16 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   ac_compiler_gnu=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_compiler_gnu=no
++  ac_compiler_gnu=no
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+ ac_cv_c_compiler_gnu=$ac_compiler_gnu
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_c_compiler_gnu" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu" >&5
+ $as_echo "$ac_cv_c_compiler_gnu" >&6; }
+ if test $ac_compiler_gnu = yes; then
+   GCC=yes
+@@ -5524,20 +5184,16 @@
+ fi
+ ac_test_CFLAGS=${CFLAGS+set}
+ ac_save_CFLAGS=$CFLAGS
+-{ $as_echo "$as_me:$LINENO: checking whether $CC accepts -g" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
+ $as_echo_n "checking whether $CC accepts -g... " >&6; }
+-if test "${ac_cv_prog_cc_g+set}" = set; then
++if test "${ac_cv_prog_cc_g+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_save_c_werror_flag=$ac_c_werror_flag
+    ac_c_werror_flag=yes
+    ac_cv_prog_cc_g=no
+    CFLAGS="-g"
+-   cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -5548,35 +5204,11 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   ac_cv_prog_cc_g=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	CFLAGS=""
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  CFLAGS=""
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -5587,36 +5219,12 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  :
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_c_try_compile "$LINENO"; then :
+ 
+-	ac_c_werror_flag=$ac_save_c_werror_flag
++else
++  ac_c_werror_flag=$ac_save_c_werror_flag
+ 	 CFLAGS="-g"
+-	 cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -5627,42 +5235,17 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   ac_cv_prog_cc_g=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+    ac_c_werror_flag=$ac_save_c_werror_flag
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_prog_cc_g" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g" >&5
+ $as_echo "$ac_cv_prog_cc_g" >&6; }
+ if test "$ac_test_CFLAGS" = set; then
+   CFLAGS=$ac_save_CFLAGS
+@@ -5679,18 +5262,14 @@
+     CFLAGS=
+   fi
+ fi
+-{ $as_echo "$as_me:$LINENO: checking for $CC option to accept ISO C89" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
+ $as_echo_n "checking for $CC option to accept ISO C89... " >&6; }
+-if test "${ac_cv_prog_cc_c89+set}" = set; then
++if test "${ac_cv_prog_cc_c89+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_cv_prog_cc_c89=no
+ ac_save_CC=$CC
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <stdarg.h>
+ #include <stdio.h>
+@@ -5747,32 +5326,9 @@
+ 	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+ do
+   CC="$ac_save_CC $ac_arg"
+-  rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++  if ac_fn_c_try_compile "$LINENO"; then :
+   ac_cv_prog_cc_c89=$ac_arg
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext
+   test "x$ac_cv_prog_cc_c89" != "xno" && break
+ done
+@@ -5783,17 +5339,19 @@
+ # AC_CACHE_VAL
+ case "x$ac_cv_prog_cc_c89" in
+   x)
+-    { $as_echo "$as_me:$LINENO: result: none needed" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+ $as_echo "none needed" >&6; } ;;
+   xno)
+-    { $as_echo "$as_me:$LINENO: result: unsupported" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+ $as_echo "unsupported" >&6; } ;;
+   *)
+     CC="$CC $ac_cv_prog_cc_c89"
+-    { $as_echo "$as_me:$LINENO: result: $ac_cv_prog_cc_c89" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
+ $as_echo "$ac_cv_prog_cc_c89" >&6; } ;;
+ esac
++if test "x$ac_cv_prog_cc_c89" != xno; then :
+ 
++fi
+ 
+ ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+@@ -5803,9 +5361,9 @@
+ 
+ depcc="$CC"   am_compiler_list=
+ 
+-{ $as_echo "$as_me:$LINENO: checking dependency style of $depcc" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking dependency style of $depcc" >&5
+ $as_echo_n "checking dependency style of $depcc... " >&6; }
+-if test "${am_cv_CC_dependencies_compiler_type+set}" = set; then
++if test "${am_cv_CC_dependencies_compiler_type+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -z "$AMDEP_TRUE" && test -f "$am_depcomp"; then
+@@ -5913,7 +5471,7 @@
+ fi
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $am_cv_CC_dependencies_compiler_type" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_CC_dependencies_compiler_type" >&5
+ $as_echo "$am_cv_CC_dependencies_compiler_type" >&6; }
+ CCDEPMODE=depmode=$am_cv_CC_dependencies_compiler_type
+ 
+@@ -5933,14 +5491,14 @@
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+-{ $as_echo "$as_me:$LINENO: checking how to run the C preprocessor" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor" >&5
+ $as_echo_n "checking how to run the C preprocessor... " >&6; }
+ # On Suns, sometimes $CPP names a directory.
+ if test -n "$CPP" && test -d "$CPP"; then
+   CPP=
+ fi
+ if test -z "$CPP"; then
+-  if test "${ac_cv_prog_CPP+set}" = set; then
++  if test "${ac_cv_prog_CPP+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+       # Double quotes because CPP needs to be expanded
+@@ -5955,11 +5513,7 @@
+   # <limits.h> exists even on freestanding compilers.
+   # On the NeXT, cc -E runs the code through the compiler's parser,
+   # not just through cpp. "Syntax error" is here to catch this case.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #ifdef __STDC__
+ # include <limits.h>
+@@ -5968,78 +5522,34 @@
+ #endif
+ 		     Syntax error
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  :
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_c_try_cpp "$LINENO"; then :
+ 
++else
+   # Broken: fails on valid input.
+ continue
+ fi
+-
+ rm -f conftest.err conftest.$ac_ext
+ 
+   # OK, works on sane cases.  Now check whether nonexistent headers
+   # can be detected and how.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <ac_nonexistent.h>
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
++if ac_fn_c_try_cpp "$LINENO"; then :
+   # Broken: success on invalid input.
+ continue
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+   # Passes both tests.
+ ac_preproc_ok=:
+ break
+ fi
+-
+ rm -f conftest.err conftest.$ac_ext
+ 
+ done
+ # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+ rm -f conftest.err conftest.$ac_ext
+-if $ac_preproc_ok; then
++if $ac_preproc_ok; then :
+   break
+ fi
+ 
+@@ -6051,7 +5561,7 @@
+ else
+   ac_cv_prog_CPP=$CPP
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $CPP" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $CPP" >&5
+ $as_echo "$CPP" >&6; }
+ ac_preproc_ok=false
+ for ac_c_preproc_warn_flag in '' yes
+@@ -6062,11 +5572,7 @@
+   # <limits.h> exists even on freestanding compilers.
+   # On the NeXT, cc -E runs the code through the compiler's parser,
+   # not just through cpp. "Syntax error" is here to catch this case.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #ifdef __STDC__
+ # include <limits.h>
+@@ -6075,87 +5581,40 @@
+ #endif
+ 		     Syntax error
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  :
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_c_try_cpp "$LINENO"; then :
+ 
++else
+   # Broken: fails on valid input.
+ continue
+ fi
+-
+ rm -f conftest.err conftest.$ac_ext
+ 
+   # OK, works on sane cases.  Now check whether nonexistent headers
+   # can be detected and how.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <ac_nonexistent.h>
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
++if ac_fn_c_try_cpp "$LINENO"; then :
+   # Broken: success on invalid input.
+ continue
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+   # Passes both tests.
+ ac_preproc_ok=:
+ break
+ fi
+-
+ rm -f conftest.err conftest.$ac_ext
+ 
+ done
+ # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+ rm -f conftest.err conftest.$ac_ext
+-if $ac_preproc_ok; then
+-  :
++if $ac_preproc_ok; then :
++
+ else
+-  { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
++  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+ $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+-{ { $as_echo "$as_me:$LINENO: error: C preprocessor \"$CPP\" fails sanity check
+-See \`config.log' for more details." >&5
+-$as_echo "$as_me: error: C preprocessor \"$CPP\" fails sanity check
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }; }
++as_fn_error "C preprocessor \"$CPP\" fails sanity check
++See \`config.log' for more details." "$LINENO" 5; }
+ fi
+ 
+ ac_ext=c
+@@ -6164,115 +5623,23 @@
+ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+-# Find a good install program.  We prefer a C program (faster),
+-# so one script is as good as another.  But avoid the broken or
+-# incompatible versions:
+-# SysV /etc/install, /usr/sbin/install
+-# SunOS /usr/etc/install
+-# IRIX /sbin/install
+-# AIX /bin/install
+-# AmigaOS /C/install, which installs bootblocks on floppy discs
+-# AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
+-# AFS /usr/afsws/bin/install, which mishandles nonexistent args
+-# SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
+-# OS/2's system install, which has a completely different semantic
+-# ./install, which can be erroneously created by make from ./install.sh.
+-# Reject install programs that cannot install multiple files.
+-{ $as_echo "$as_me:$LINENO: checking for a BSD-compatible install" >&5
+-$as_echo_n "checking for a BSD-compatible install... " >&6; }
+-if test -z "$INSTALL"; then
+-if test "${ac_cv_path_install+set}" = set; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+-for as_dir in $PATH
+-do
+-  IFS=$as_save_IFS
+-  test -z "$as_dir" && as_dir=.
+-  # Account for people who put trailing slashes in PATH elements.
+-case $as_dir/ in
+-  ./ | .// | /cC/* | \
+-  /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* | \
+-  ?:\\/os2\\/install\\/* | ?:\\/OS2\\/INSTALL\\/* | \
+-  /usr/ucb/* ) ;;
+-  *)
+-    # OSF1 and SCO ODT 3.0 have their own names for install.
+-    # Don't use installbsd from OSF since it installs stuff as root
+-    # by default.
+-    for ac_prog in ginstall scoinst install; do
+-      for ac_exec_ext in '' $ac_executable_extensions; do
+-	if { test -f "$as_dir/$ac_prog$ac_exec_ext" && $as_test_x "$as_dir/$ac_prog$ac_exec_ext"; }; then
+-	  if test $ac_prog = install &&
+-	    grep dspmsg "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+-	    # AIX install.  It has an incompatible calling convention.
+-	    :
+-	  elif test $ac_prog = install &&
+-	    grep pwplus "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+-	    # program-specific install script used by HP pwplus--don't use.
+-	    :
+-	  else
+-	    rm -rf conftest.one conftest.two conftest.dir
+-	    echo one > conftest.one
+-	    echo two > conftest.two
+-	    mkdir conftest.dir
+-	    if "$as_dir/$ac_prog$ac_exec_ext" -c conftest.one conftest.two "`pwd`/conftest.dir" &&
+-	      test -s conftest.one && test -s conftest.two &&
+-	      test -s conftest.dir/conftest.one &&
+-	      test -s conftest.dir/conftest.two
+-	    then
+-	      ac_cv_path_install="$as_dir/$ac_prog$ac_exec_ext -c"
+-	      break 3
+-	    fi
+-	  fi
+-	fi
+-      done
+-    done
+-    ;;
+-esac
+-
+-done
+-IFS=$as_save_IFS
+-
+-rm -rf conftest.one conftest.two conftest.dir
+-
+-fi
+-  if test "${ac_cv_path_install+set}" = set; then
+-    INSTALL=$ac_cv_path_install
+-  else
+-    # As a last resort, use the slow shell script.  Don't cache a
+-    # value for INSTALL within a source directory, because that will
+-    # break other packages using the cache if that directory is
+-    # removed, or if the value is a relative name.
+-    INSTALL=$ac_install_sh
+-  fi
+-fi
+-{ $as_echo "$as_me:$LINENO: result: $INSTALL" >&5
+-$as_echo "$INSTALL" >&6; }
+-
+-# Use test -z because SunOS4 sh mishandles braces in ${var-val}.
+-# It thinks the first close brace ends the variable substitution.
+-test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
+-
+-test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL}'
+-
+-test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
+ 
+-{ $as_echo "$as_me:$LINENO: checking whether ln -s works" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ln -s works" >&5
+ $as_echo_n "checking whether ln -s works... " >&6; }
+ LN_S=$as_ln_s
+ if test "$LN_S" = "ln -s"; then
+-  { $as_echo "$as_me:$LINENO: result: yes" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no, using $LN_S" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no, using $LN_S" >&5
+ $as_echo "no, using $LN_S" >&6; }
+ fi
+ 
+-{ $as_echo "$as_me:$LINENO: checking whether ${MAKE-make} sets \$(MAKE)" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ${MAKE-make} sets \$(MAKE)" >&5
+ $as_echo_n "checking whether ${MAKE-make} sets \$(MAKE)... " >&6; }
+ set x ${MAKE-make}
+ ac_make=`$as_echo "$2" | sed 's/+/p/g; s/[^a-zA-Z0-9_]/_/g'`
+-if { as_var=ac_cv_prog_make_${ac_make}_set; eval "test \"\${$as_var+set}\" = set"; }; then
++if { as_var=ac_cv_prog_make_${ac_make}_set; eval "test \"\${$as_var+set}\" = set"; }; then :
+   $as_echo_n "(cached) " >&6
+ else
+   cat >conftest.make <<\_ACEOF
+@@ -6290,17 +5657,17 @@
+ rm -f conftest.make
+ fi
+ if eval test \$ac_cv_prog_make_${ac_make}_set = yes; then
+-  { $as_echo "$as_me:$LINENO: result: yes" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+   SET_MAKE=
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+   SET_MAKE="MAKE=${MAKE-make}"
+ fi
+ 
+ # Check whether --enable-static was given.
+-if test "${enable_static+set}" = set; then
++if test "${enable_static+set}" = set; then :
+   enableval=$enable_static; p=${PACKAGE-default}
+     case $enableval in
+     yes) enable_static=yes ;;
+@@ -6332,35 +5699,27 @@
+ 
+ # Make sure we can run config.sub.
+ $SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
+-  { { $as_echo "$as_me:$LINENO: error: cannot run $SHELL $ac_aux_dir/config.sub" >&5
+-$as_echo "$as_me: error: cannot run $SHELL $ac_aux_dir/config.sub" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
+ 
+-{ $as_echo "$as_me:$LINENO: checking build system type" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
+ $as_echo_n "checking build system type... " >&6; }
+-if test "${ac_cv_build+set}" = set; then
++if test "${ac_cv_build+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_build_alias=$build_alias
+ test "x$ac_build_alias" = x &&
+   ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
+ test "x$ac_build_alias" = x &&
+-  { { $as_echo "$as_me:$LINENO: error: cannot guess build type; you must specify one" >&5
+-$as_echo "$as_me: error: cannot guess build type; you must specify one" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "cannot guess build type; you must specify one" "$LINENO" 5
+ ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
+-  { { $as_echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $ac_build_alias failed" >&5
+-$as_echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $ac_build_alias failed" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_build" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
+ $as_echo "$ac_cv_build" >&6; }
+ case $ac_cv_build in
+ *-*-*) ;;
+-*) { { $as_echo "$as_me:$LINENO: error: invalid value of canonical build" >&5
+-$as_echo "$as_me: error: invalid value of canonical build" >&2;}
+-   { (exit 1); exit 1; }; };;
++*) as_fn_error "invalid value of canonical build" "$LINENO" 5;;
+ esac
+ build=$ac_cv_build
+ ac_save_IFS=$IFS; IFS='-'
+@@ -6376,28 +5735,24 @@
+ case $build_os in *\ *) build_os=`echo "$build_os" | sed 's/ /-/g'`;; esac
+ 
+ 
+-{ $as_echo "$as_me:$LINENO: checking host system type" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking host system type" >&5
+ $as_echo_n "checking host system type... " >&6; }
+-if test "${ac_cv_host+set}" = set; then
++if test "${ac_cv_host+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test "x$host_alias" = x; then
+   ac_cv_host=$ac_cv_build
+ else
+   ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
+-    { { $as_echo "$as_me:$LINENO: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&5
+-$as_echo "$as_me: error: $SHELL $ac_aux_dir/config.sub $host_alias failed" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
+ fi
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_host" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_host" >&5
+ $as_echo "$ac_cv_host" >&6; }
+ case $ac_cv_host in
+ *-*-*) ;;
+-*) { { $as_echo "$as_me:$LINENO: error: invalid value of canonical host" >&5
+-$as_echo "$as_me: error: invalid value of canonical host" >&2;}
+-   { (exit 1); exit 1; }; };;
++*) as_fn_error "invalid value of canonical host" "$LINENO" 5;;
+ esac
+ host=$ac_cv_host
+ ac_save_IFS=$IFS; IFS='-'
+@@ -6420,9 +5775,9 @@
+   if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}as", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}as; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_AS+set}" = set; then
++if test "${ac_cv_prog_AS+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$AS"; then
+@@ -6433,24 +5788,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_AS="${ac_tool_prefix}as"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ AS=$ac_cv_prog_AS
+ if test -n "$AS"; then
+-  { $as_echo "$as_me:$LINENO: result: $AS" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AS" >&5
+ $as_echo "$AS" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -6460,9 +5815,9 @@
+   ac_ct_AS=$AS
+   # Extract the first word of "as", so it can be a program name with args.
+ set dummy as; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_AS+set}" = set; then
++if test "${ac_cv_prog_ac_ct_AS+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_AS"; then
+@@ -6473,24 +5828,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_AS="as"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_AS=$ac_cv_prog_ac_ct_AS
+ if test -n "$ac_ct_AS"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_AS" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_AS" >&5
+ $as_echo "$ac_ct_AS" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -6499,7 +5854,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -6512,9 +5867,9 @@
+   if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}dlltool", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}dlltool; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_DLLTOOL+set}" = set; then
++if test "${ac_cv_prog_DLLTOOL+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$DLLTOOL"; then
+@@ -6525,24 +5880,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_DLLTOOL="${ac_tool_prefix}dlltool"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ DLLTOOL=$ac_cv_prog_DLLTOOL
+ if test -n "$DLLTOOL"; then
+-  { $as_echo "$as_me:$LINENO: result: $DLLTOOL" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $DLLTOOL" >&5
+ $as_echo "$DLLTOOL" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -6552,9 +5907,9 @@
+   ac_ct_DLLTOOL=$DLLTOOL
+   # Extract the first word of "dlltool", so it can be a program name with args.
+ set dummy dlltool; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_DLLTOOL+set}" = set; then
++if test "${ac_cv_prog_ac_ct_DLLTOOL+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_DLLTOOL"; then
+@@ -6565,24 +5920,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_DLLTOOL="dlltool"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_DLLTOOL=$ac_cv_prog_ac_ct_DLLTOOL
+ if test -n "$ac_ct_DLLTOOL"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_DLLTOOL" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_DLLTOOL" >&5
+ $as_echo "$ac_ct_DLLTOOL" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -6591,7 +5946,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -6604,9 +5959,9 @@
+   if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}objdump", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}objdump; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_OBJDUMP+set}" = set; then
++if test "${ac_cv_prog_OBJDUMP+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$OBJDUMP"; then
+@@ -6617,24 +5972,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_OBJDUMP="${ac_tool_prefix}objdump"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ OBJDUMP=$ac_cv_prog_OBJDUMP
+ if test -n "$OBJDUMP"; then
+-  { $as_echo "$as_me:$LINENO: result: $OBJDUMP" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OBJDUMP" >&5
+ $as_echo "$OBJDUMP" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -6644,9 +5999,9 @@
+   ac_ct_OBJDUMP=$OBJDUMP
+   # Extract the first word of "objdump", so it can be a program name with args.
+ set dummy objdump; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_OBJDUMP+set}" = set; then
++if test "${ac_cv_prog_ac_ct_OBJDUMP+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_OBJDUMP"; then
+@@ -6657,24 +6012,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_OBJDUMP="objdump"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_OBJDUMP=$ac_cv_prog_ac_ct_OBJDUMP
+ if test -n "$ac_ct_OBJDUMP"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_OBJDUMP" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_OBJDUMP" >&5
+ $as_echo "$ac_ct_OBJDUMP" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -6683,7 +6038,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -6718,7 +6073,7 @@
+ 
+ case `pwd` in
+   *\ * | *\	*)
+-    { $as_echo "$as_me:$LINENO: WARNING: Libtool does not cope well with whitespace in \`pwd\`" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Libtool does not cope well with whitespace in \`pwd\`" >&5
+ $as_echo "$as_me: WARNING: Libtool does not cope well with whitespace in \`pwd\`" >&2;} ;;
+ esac
+ 
+@@ -6741,9 +6096,9 @@
+ 
+ ltmain="$ac_aux_dir/ltmain.sh"
+ 
+-{ $as_echo "$as_me:$LINENO: checking for a sed that does not truncate output" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for a sed that does not truncate output" >&5
+ $as_echo_n "checking for a sed that does not truncate output... " >&6; }
+-if test "${ac_cv_path_SED+set}" = set; then
++if test "${ac_cv_path_SED+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+             ac_script=s/aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb/
+@@ -6751,7 +6106,7 @@
+        ac_script="$ac_script$as_nl$ac_script"
+      done
+      echo "$ac_script" 2>/dev/null | sed 99q >conftest.sed
+-     $as_unset ac_script || ac_script=
++     { ac_script=; unset ac_script;}
+      if test -z "$SED"; then
+   ac_path_SED_found=false
+   # Loop through the user's path and test for each of PROGNAME-LIST
+@@ -6760,7 +6115,7 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_prog in sed gsed; do
++    for ac_prog in sed gsed; do
+     for ac_exec_ext in '' $ac_executable_extensions; do
+       ac_path_SED="$as_dir/$ac_prog$ac_exec_ext"
+       { test -f "$ac_path_SED" && $as_test_x "$ac_path_SED"; } || continue
+@@ -6780,7 +6135,7 @@
+     $as_echo '' >> "conftest.nl"
+     "$ac_path_SED" -f conftest.sed < "conftest.nl" >"conftest.out" 2>/dev/null || break
+     diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
+-    ac_count=`expr $ac_count + 1`
++    as_fn_arith $ac_count + 1 && ac_count=$as_val
+     if test $ac_count -gt ${ac_path_SED_max-0}; then
+       # Best one so far, save it but keep looking for a better one
+       ac_cv_path_SED="$ac_path_SED"
+@@ -6795,19 +6150,17 @@
+       $ac_path_SED_found && break 3
+     done
+   done
+-done
++  done
+ IFS=$as_save_IFS
+   if test -z "$ac_cv_path_SED"; then
+-    { { $as_echo "$as_me:$LINENO: error: no acceptable sed could be found in \$PATH" >&5
+-$as_echo "$as_me: error: no acceptable sed could be found in \$PATH" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error "no acceptable sed could be found in \$PATH" "$LINENO" 5
+   fi
+ else
+   ac_cv_path_SED=$SED
+ fi
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_path_SED" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_SED" >&5
+ $as_echo "$ac_cv_path_SED" >&6; }
+  SED="$ac_cv_path_SED"
+   rm -f conftest.sed
+@@ -6825,9 +6178,9 @@
+ 
+ 
+ 
+-{ $as_echo "$as_me:$LINENO: checking for fgrep" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for fgrep" >&5
+ $as_echo_n "checking for fgrep... " >&6; }
+-if test "${ac_cv_path_FGREP+set}" = set; then
++if test "${ac_cv_path_FGREP+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if echo 'ab*c' | $GREP -F 'ab*c' >/dev/null 2>&1
+@@ -6841,7 +6194,7 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_prog in fgrep; do
++    for ac_prog in fgrep; do
+     for ac_exec_ext in '' $ac_executable_extensions; do
+       ac_path_FGREP="$as_dir/$ac_prog$ac_exec_ext"
+       { test -f "$ac_path_FGREP" && $as_test_x "$ac_path_FGREP"; } || continue
+@@ -6861,7 +6214,7 @@
+     $as_echo 'FGREP' >> "conftest.nl"
+     "$ac_path_FGREP" FGREP < "conftest.nl" >"conftest.out" 2>/dev/null || break
+     diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
+-    ac_count=`expr $ac_count + 1`
++    as_fn_arith $ac_count + 1 && ac_count=$as_val
+     if test $ac_count -gt ${ac_path_FGREP_max-0}; then
+       # Best one so far, save it but keep looking for a better one
+       ac_cv_path_FGREP="$ac_path_FGREP"
+@@ -6876,12 +6229,10 @@
+       $ac_path_FGREP_found && break 3
+     done
+   done
+-done
++  done
+ IFS=$as_save_IFS
+   if test -z "$ac_cv_path_FGREP"; then
+-    { { $as_echo "$as_me:$LINENO: error: no acceptable fgrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&5
+-$as_echo "$as_me: error: no acceptable fgrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error "no acceptable fgrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+   fi
+ else
+   ac_cv_path_FGREP=$FGREP
+@@ -6889,7 +6240,7 @@
+ 
+    fi
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_path_FGREP" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_FGREP" >&5
+ $as_echo "$ac_cv_path_FGREP" >&6; }
+  FGREP="$ac_cv_path_FGREP"
+ 
+@@ -6915,7 +6266,7 @@
+ 
+ 
+ # Check whether --with-gnu-ld was given.
+-if test "${with_gnu_ld+set}" = set; then
++if test "${with_gnu_ld+set}" = set; then :
+   withval=$with_gnu_ld; test "$withval" = no || with_gnu_ld=yes
+ else
+   with_gnu_ld=no
+@@ -6924,7 +6275,7 @@
+ ac_prog=ld
+ if test "$GCC" = yes; then
+   # Check if gcc -print-prog-name=ld gives a path.
+-  { $as_echo "$as_me:$LINENO: checking for ld used by $CC" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ld used by $CC" >&5
+ $as_echo_n "checking for ld used by $CC... " >&6; }
+   case $host in
+   *-*-mingw*)
+@@ -6954,13 +6305,13 @@
+     ;;
+   esac
+ elif test "$with_gnu_ld" = yes; then
+-  { $as_echo "$as_me:$LINENO: checking for GNU ld" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU ld" >&5
+ $as_echo_n "checking for GNU ld... " >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: checking for non-GNU ld" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for non-GNU ld" >&5
+ $as_echo_n "checking for non-GNU ld... " >&6; }
+ fi
+-if test "${lt_cv_path_LD+set}" = set; then
++if test "${lt_cv_path_LD+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -z "$LD"; then
+@@ -6991,18 +6342,16 @@
+ 
+ LD="$lt_cv_path_LD"
+ if test -n "$LD"; then
+-  { $as_echo "$as_me:$LINENO: result: $LD" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LD" >&5
+ $as_echo "$LD" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+-test -z "$LD" && { { $as_echo "$as_me:$LINENO: error: no acceptable ld found in \$PATH" >&5
+-$as_echo "$as_me: error: no acceptable ld found in \$PATH" >&2;}
+-   { (exit 1); exit 1; }; }
+-{ $as_echo "$as_me:$LINENO: checking if the linker ($LD) is GNU ld" >&5
++test -z "$LD" && as_fn_error "no acceptable ld found in \$PATH" "$LINENO" 5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if the linker ($LD) is GNU ld" >&5
+ $as_echo_n "checking if the linker ($LD) is GNU ld... " >&6; }
+-if test "${lt_cv_prog_gnu_ld+set}" = set; then
++if test "${lt_cv_prog_gnu_ld+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   # I'd rather use --version here, but apparently some GNU lds only accept -v.
+@@ -7015,7 +6364,7 @@
+   ;;
+ esac
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_prog_gnu_ld" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_gnu_ld" >&5
+ $as_echo "$lt_cv_prog_gnu_ld" >&6; }
+ with_gnu_ld=$lt_cv_prog_gnu_ld
+ 
+@@ -7027,9 +6376,9 @@
+ 
+ 
+ 
+-{ $as_echo "$as_me:$LINENO: checking for BSD- or MS-compatible name lister (nm)" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for BSD- or MS-compatible name lister (nm)" >&5
+ $as_echo_n "checking for BSD- or MS-compatible name lister (nm)... " >&6; }
+-if test "${lt_cv_path_NM+set}" = set; then
++if test "${lt_cv_path_NM+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$NM"; then
+@@ -7076,7 +6425,7 @@
+   : ${lt_cv_path_NM=no}
+ fi
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_path_NM" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_path_NM" >&5
+ $as_echo "$lt_cv_path_NM" >&6; }
+ if test "$lt_cv_path_NM" != "no"; then
+   NM="$lt_cv_path_NM"
+@@ -7087,9 +6436,9 @@
+   do
+     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
+ set dummy $ac_tool_prefix$ac_prog; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_DUMPBIN+set}" = set; then
++if test "${ac_cv_prog_DUMPBIN+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$DUMPBIN"; then
+@@ -7100,24 +6449,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_DUMPBIN="$ac_tool_prefix$ac_prog"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ DUMPBIN=$ac_cv_prog_DUMPBIN
+ if test -n "$DUMPBIN"; then
+-  { $as_echo "$as_me:$LINENO: result: $DUMPBIN" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $DUMPBIN" >&5
+ $as_echo "$DUMPBIN" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -7131,9 +6480,9 @@
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_DUMPBIN+set}" = set; then
++if test "${ac_cv_prog_ac_ct_DUMPBIN+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_DUMPBIN"; then
+@@ -7144,24 +6493,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_DUMPBIN="$ac_prog"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_DUMPBIN=$ac_cv_prog_ac_ct_DUMPBIN
+ if test -n "$ac_ct_DUMPBIN"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_DUMPBIN" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_DUMPBIN" >&5
+ $as_echo "$ac_ct_DUMPBIN" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -7174,7 +6523,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -7194,33 +6543,33 @@
+ 
+ 
+ 
+-{ $as_echo "$as_me:$LINENO: checking the name lister ($NM) interface" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking the name lister ($NM) interface" >&5
+ $as_echo_n "checking the name lister ($NM) interface... " >&6; }
+-if test "${lt_cv_nm_interface+set}" = set; then
++if test "${lt_cv_nm_interface+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   lt_cv_nm_interface="BSD nm"
+   echo "int some_variable = 0;" > conftest.$ac_ext
+-  (eval echo "\"\$as_me:7204: $ac_compile\"" >&5)
++  (eval echo "\"\$as_me:6553: $ac_compile\"" >&5)
+   (eval "$ac_compile" 2>conftest.err)
+   cat conftest.err >&5
+-  (eval echo "\"\$as_me:7207: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
++  (eval echo "\"\$as_me:6556: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
+   (eval "$NM \"conftest.$ac_objext\"" 2>conftest.err > conftest.out)
+   cat conftest.err >&5
+-  (eval echo "\"\$as_me:7210: output\"" >&5)
++  (eval echo "\"\$as_me:6559: output\"" >&5)
+   cat conftest.out >&5
+   if $GREP 'External.*some_variable' conftest.out > /dev/null; then
+     lt_cv_nm_interface="MS dumpbin"
+   fi
+   rm -f conftest*
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_nm_interface" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_nm_interface" >&5
+ $as_echo "$lt_cv_nm_interface" >&6; }
+ 
+ # find the maximum length of command line arguments
+-{ $as_echo "$as_me:$LINENO: checking the maximum length of command line arguments" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking the maximum length of command line arguments" >&5
+ $as_echo_n "checking the maximum length of command line arguments... " >&6; }
+-if test "${lt_cv_sys_max_cmd_len+set}" = set; then
++if test "${lt_cv_sys_max_cmd_len+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+     i=0
+@@ -7338,10 +6687,10 @@
+ fi
+ 
+ if test -n $lt_cv_sys_max_cmd_len ; then
+-  { $as_echo "$as_me:$LINENO: result: $lt_cv_sys_max_cmd_len" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_sys_max_cmd_len" >&5
+ $as_echo "$lt_cv_sys_max_cmd_len" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: none" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: none" >&5
+ $as_echo "none" >&6; }
+ fi
+ max_cmd_len=$lt_cv_sys_max_cmd_len
+@@ -7355,7 +6704,7 @@
+ : ${MV="mv -f"}
+ : ${RM="rm -f"}
+ 
+-{ $as_echo "$as_me:$LINENO: checking whether the shell understands some XSI constructs" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the shell understands some XSI constructs" >&5
+ $as_echo_n "checking whether the shell understands some XSI constructs... " >&6; }
+ # Try some XSI features
+ xsi_shell=no
+@@ -7365,17 +6714,17 @@
+     && eval 'test $(( 1 + 1 )) -eq 2 \
+     && test "${#_lt_dummy}" -eq 5' ) >/dev/null 2>&1 \
+   && xsi_shell=yes
+-{ $as_echo "$as_me:$LINENO: result: $xsi_shell" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $xsi_shell" >&5
+ $as_echo "$xsi_shell" >&6; }
+ 
+ 
+-{ $as_echo "$as_me:$LINENO: checking whether the shell understands \"+=\"" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the shell understands \"+=\"" >&5
+ $as_echo_n "checking whether the shell understands \"+=\"... " >&6; }
+ lt_shell_append=no
+ ( foo=bar; set foo baz; eval "$1+=\$2" && test "$foo" = barbaz ) \
+     >/dev/null 2>&1 \
+   && lt_shell_append=yes
+-{ $as_echo "$as_me:$LINENO: result: $lt_shell_append" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_shell_append" >&5
+ $as_echo "$lt_shell_append" >&6; }
+ 
+ 
+@@ -7410,14 +6759,14 @@
+ 
+ 
+ 
+-{ $as_echo "$as_me:$LINENO: checking for $LD option to reload object files" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $LD option to reload object files" >&5
+ $as_echo_n "checking for $LD option to reload object files... " >&6; }
+-if test "${lt_cv_ld_reload_flag+set}" = set; then
++if test "${lt_cv_ld_reload_flag+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   lt_cv_ld_reload_flag='-r'
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_ld_reload_flag" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_ld_reload_flag" >&5
+ $as_echo "$lt_cv_ld_reload_flag" >&6; }
+ reload_flag=$lt_cv_ld_reload_flag
+ case $reload_flag in
+@@ -7446,9 +6795,9 @@
+ if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}objdump", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}objdump; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_OBJDUMP+set}" = set; then
++if test "${ac_cv_prog_OBJDUMP+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$OBJDUMP"; then
+@@ -7459,24 +6808,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_OBJDUMP="${ac_tool_prefix}objdump"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ OBJDUMP=$ac_cv_prog_OBJDUMP
+ if test -n "$OBJDUMP"; then
+-  { $as_echo "$as_me:$LINENO: result: $OBJDUMP" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OBJDUMP" >&5
+ $as_echo "$OBJDUMP" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -7486,9 +6835,9 @@
+   ac_ct_OBJDUMP=$OBJDUMP
+   # Extract the first word of "objdump", so it can be a program name with args.
+ set dummy objdump; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_OBJDUMP+set}" = set; then
++if test "${ac_cv_prog_ac_ct_OBJDUMP+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_OBJDUMP"; then
+@@ -7499,24 +6848,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_OBJDUMP="objdump"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_OBJDUMP=$ac_cv_prog_ac_ct_OBJDUMP
+ if test -n "$ac_ct_OBJDUMP"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_OBJDUMP" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_OBJDUMP" >&5
+ $as_echo "$ac_ct_OBJDUMP" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -7525,7 +6874,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -7542,9 +6891,9 @@
+ 
+ 
+ 
+-{ $as_echo "$as_me:$LINENO: checking how to recognize dependent libraries" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to recognize dependent libraries" >&5
+ $as_echo_n "checking how to recognize dependent libraries... " >&6; }
+-if test "${lt_cv_deplibs_check_method+set}" = set; then
++if test "${lt_cv_deplibs_check_method+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   lt_cv_file_magic_cmd='$MAGIC_CMD'
+@@ -7738,7 +7087,7 @@
+ esac
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_deplibs_check_method" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_deplibs_check_method" >&5
+ $as_echo "$lt_cv_deplibs_check_method" >&6; }
+ file_magic_cmd=$lt_cv_file_magic_cmd
+ deplibs_check_method=$lt_cv_deplibs_check_method
+@@ -7758,9 +7107,9 @@
+ if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}ar", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}ar; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_AR+set}" = set; then
++if test "${ac_cv_prog_AR+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$AR"; then
+@@ -7771,24 +7120,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_AR="${ac_tool_prefix}ar"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ AR=$ac_cv_prog_AR
+ if test -n "$AR"; then
+-  { $as_echo "$as_me:$LINENO: result: $AR" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $AR" >&5
+ $as_echo "$AR" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -7798,9 +7147,9 @@
+   ac_ct_AR=$AR
+   # Extract the first word of "ar", so it can be a program name with args.
+ set dummy ar; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_AR+set}" = set; then
++if test "${ac_cv_prog_ac_ct_AR+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_AR"; then
+@@ -7811,24 +7160,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_AR="ar"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_AR=$ac_cv_prog_ac_ct_AR
+ if test -n "$ac_ct_AR"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_AR" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_AR" >&5
+ $as_echo "$ac_ct_AR" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -7837,7 +7186,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -7863,9 +7212,9 @@
+ if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}strip; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_STRIP+set}" = set; then
++if test "${ac_cv_prog_STRIP+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$STRIP"; then
+@@ -7876,24 +7225,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_STRIP="${ac_tool_prefix}strip"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ STRIP=$ac_cv_prog_STRIP
+ if test -n "$STRIP"; then
+-  { $as_echo "$as_me:$LINENO: result: $STRIP" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $STRIP" >&5
+ $as_echo "$STRIP" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -7903,9 +7252,9 @@
+   ac_ct_STRIP=$STRIP
+   # Extract the first word of "strip", so it can be a program name with args.
+ set dummy strip; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then
++if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_STRIP"; then
+@@ -7916,24 +7265,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_STRIP="strip"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_STRIP=$ac_cv_prog_ac_ct_STRIP
+ if test -n "$ac_ct_STRIP"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_STRIP" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_STRIP" >&5
+ $as_echo "$ac_ct_STRIP" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -7942,7 +7291,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -7962,9 +7311,9 @@
+ if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}ranlib; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_RANLIB+set}" = set; then
++if test "${ac_cv_prog_RANLIB+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$RANLIB"; then
+@@ -7975,24 +7324,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ RANLIB=$ac_cv_prog_RANLIB
+ if test -n "$RANLIB"; then
+-  { $as_echo "$as_me:$LINENO: result: $RANLIB" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $RANLIB" >&5
+ $as_echo "$RANLIB" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -8002,9 +7351,9 @@
+   ac_ct_RANLIB=$RANLIB
+   # Extract the first word of "ranlib", so it can be a program name with args.
+ set dummy ranlib; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then
++if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_RANLIB"; then
+@@ -8015,24 +7364,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_RANLIB="ranlib"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
+ if test -n "$ac_ct_RANLIB"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_RANLIB" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_RANLIB" >&5
+ $as_echo "$ac_ct_RANLIB" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -8041,7 +7390,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -8119,9 +7468,9 @@
+ 
+ 
+ # Check for command to grab the raw symbol name followed by C symbol from nm.
+-{ $as_echo "$as_me:$LINENO: checking command to parse $NM output from $compiler object" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking command to parse $NM output from $compiler object" >&5
+ $as_echo_n "checking command to parse $NM output from $compiler object... " >&6; }
+-if test "${lt_cv_sys_global_symbol_pipe+set}" = set; then
++if test "${lt_cv_sys_global_symbol_pipe+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+ 
+@@ -8237,18 +7586,18 @@
+ int main(){nm_test_var='a';nm_test_func();return(0);}
+ _LT_EOF
+ 
+-  if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
++  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
+   (eval $ac_compile) 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+     # Now try to grab the symbols.
+     nlist=conftest.nm
+-    if { (eval echo "$as_me:$LINENO: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\"") >&5
++    if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\""; } >&5
+   (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && test -s "$nlist"; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } && test -s "$nlist"; then
+       # Try sorting and uniquifying the output.
+       if sort "$nlist" | uniq > "$nlist"T; then
+ 	mv -f "$nlist"T "$nlist"
+@@ -8301,11 +7650,11 @@
+ 	  lt_save_CFLAGS="$CFLAGS"
+ 	  LIBS="conftstm.$ac_objext"
+ 	  CFLAGS="$CFLAGS$lt_prog_compiler_no_builtin_flag"
+-	  if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
++	  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
+   (eval $ac_link) 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && test -s conftest${ac_exeext}; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } && test -s conftest${ac_exeext}; then
+ 	    pipe_works=yes
+ 	  fi
+ 	  LIBS="$lt_save_LIBS"
+@@ -8339,10 +7688,10 @@
+   lt_cv_sys_global_symbol_to_cdecl=
+ fi
+ if test -z "$lt_cv_sys_global_symbol_pipe$lt_cv_sys_global_symbol_to_cdecl"; then
+-  { $as_echo "$as_me:$LINENO: result: failed" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: failed" >&5
+ $as_echo "failed" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: ok" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: ok" >&5
+ $as_echo "ok" >&6; }
+ fi
+ 
+@@ -8368,7 +7717,7 @@
+ 
+ 
+ # Check whether --enable-libtool-lock was given.
+-if test "${enable_libtool_lock+set}" = set; then
++if test "${enable_libtool_lock+set}" = set; then :
+   enableval=$enable_libtool_lock;
+ fi
+ 
+@@ -8380,11 +7729,11 @@
+ ia64-*-hpux*)
+   # Find out which ABI we are using.
+   echo 'int i;' > conftest.$ac_ext
+-  if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
++  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
+   (eval $ac_compile) 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+     case `/usr/bin/file conftest.$ac_objext` in
+       *ELF-32*)
+ 	HPUX_IA64_MODE="32"
+@@ -8398,12 +7747,12 @@
+   ;;
+ *-*-irix6*)
+   # Find out which ABI we are using.
+-  echo '#line 8401 "configure"' > conftest.$ac_ext
+-  if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
++  echo '#line 7750 "configure"' > conftest.$ac_ext
++  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
+   (eval $ac_compile) 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+     if test "$lt_cv_prog_gnu_ld" = yes; then
+       case `/usr/bin/file conftest.$ac_objext` in
+ 	*32-bit*)
+@@ -8437,11 +7786,11 @@
+ s390*-*linux*|s390*-*tpf*|sparc*-*linux*)
+   # Find out which ABI we are using.
+   echo 'int i;' > conftest.$ac_ext
+-  if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
++  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
+   (eval $ac_compile) 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+     case `/usr/bin/file conftest.o` in
+       *32-bit*)
+ 	case $host in
+@@ -8490,9 +7839,9 @@
+   # On SCO OpenServer 5, we need -belf to get full-featured binaries.
+   SAVE_CFLAGS="$CFLAGS"
+   CFLAGS="$CFLAGS -belf"
+-  { $as_echo "$as_me:$LINENO: checking whether the C compiler needs -belf" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler needs -belf" >&5
+ $as_echo_n "checking whether the C compiler needs -belf... " >&6; }
+-if test "${lt_cv_cc_needs_belf+set}" = set; then
++if test "${lt_cv_cc_needs_belf+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_ext=c
+@@ -8501,11 +7850,7 @@
+ ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+-     cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -8516,38 +7861,13 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   lt_cv_cc_needs_belf=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	lt_cv_cc_needs_belf=no
++  lt_cv_cc_needs_belf=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+      ac_ext=c
+ ac_cpp='$CPP $CPPFLAGS'
+ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+@@ -8555,7 +7875,7 @@
+ ac_compiler_gnu=$ac_cv_c_compiler_gnu
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_cc_needs_belf" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_cc_needs_belf" >&5
+ $as_echo "$lt_cv_cc_needs_belf" >&6; }
+   if test x"$lt_cv_cc_needs_belf" != x"yes"; then
+     # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf
+@@ -8565,11 +7885,11 @@
+ sparc*-*solaris*)
+   # Find out which ABI we are using.
+   echo 'int i;' > conftest.$ac_ext
+-  if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
++  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
+   (eval $ac_compile) 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+     case `/usr/bin/file conftest.o` in
+     *64-bit*)
+       case $lt_cv_prog_gnu_ld in
+@@ -8595,9 +7915,9 @@
+     if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}dsymutil", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}dsymutil; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_DSYMUTIL+set}" = set; then
++if test "${ac_cv_prog_DSYMUTIL+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$DSYMUTIL"; then
+@@ -8608,24 +7928,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_DSYMUTIL="${ac_tool_prefix}dsymutil"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ DSYMUTIL=$ac_cv_prog_DSYMUTIL
+ if test -n "$DSYMUTIL"; then
+-  { $as_echo "$as_me:$LINENO: result: $DSYMUTIL" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $DSYMUTIL" >&5
+ $as_echo "$DSYMUTIL" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -8635,9 +7955,9 @@
+   ac_ct_DSYMUTIL=$DSYMUTIL
+   # Extract the first word of "dsymutil", so it can be a program name with args.
+ set dummy dsymutil; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_DSYMUTIL+set}" = set; then
++if test "${ac_cv_prog_ac_ct_DSYMUTIL+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_DSYMUTIL"; then
+@@ -8648,24 +7968,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_DSYMUTIL="dsymutil"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_DSYMUTIL=$ac_cv_prog_ac_ct_DSYMUTIL
+ if test -n "$ac_ct_DSYMUTIL"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_DSYMUTIL" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_DSYMUTIL" >&5
+ $as_echo "$ac_ct_DSYMUTIL" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -8674,7 +7994,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -8687,9 +8007,9 @@
+     if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}nmedit", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}nmedit; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_NMEDIT+set}" = set; then
++if test "${ac_cv_prog_NMEDIT+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$NMEDIT"; then
+@@ -8700,24 +8020,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_NMEDIT="${ac_tool_prefix}nmedit"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ NMEDIT=$ac_cv_prog_NMEDIT
+ if test -n "$NMEDIT"; then
+-  { $as_echo "$as_me:$LINENO: result: $NMEDIT" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $NMEDIT" >&5
+ $as_echo "$NMEDIT" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -8727,9 +8047,9 @@
+   ac_ct_NMEDIT=$NMEDIT
+   # Extract the first word of "nmedit", so it can be a program name with args.
+ set dummy nmedit; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_NMEDIT+set}" = set; then
++if test "${ac_cv_prog_ac_ct_NMEDIT+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_NMEDIT"; then
+@@ -8740,24 +8060,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_NMEDIT="nmedit"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_NMEDIT=$ac_cv_prog_ac_ct_NMEDIT
+ if test -n "$ac_ct_NMEDIT"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_NMEDIT" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_NMEDIT" >&5
+ $as_echo "$ac_ct_NMEDIT" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -8766,7 +8086,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -8779,9 +8099,9 @@
+     if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}lipo", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}lipo; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_LIPO+set}" = set; then
++if test "${ac_cv_prog_LIPO+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$LIPO"; then
+@@ -8792,24 +8112,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_LIPO="${ac_tool_prefix}lipo"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ LIPO=$ac_cv_prog_LIPO
+ if test -n "$LIPO"; then
+-  { $as_echo "$as_me:$LINENO: result: $LIPO" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LIPO" >&5
+ $as_echo "$LIPO" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -8819,9 +8139,9 @@
+   ac_ct_LIPO=$LIPO
+   # Extract the first word of "lipo", so it can be a program name with args.
+ set dummy lipo; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_LIPO+set}" = set; then
++if test "${ac_cv_prog_ac_ct_LIPO+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_LIPO"; then
+@@ -8832,24 +8152,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_LIPO="lipo"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_LIPO=$ac_cv_prog_ac_ct_LIPO
+ if test -n "$ac_ct_LIPO"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_LIPO" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_LIPO" >&5
+ $as_echo "$ac_ct_LIPO" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -8858,7 +8178,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -8871,9 +8191,9 @@
+     if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}otool", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}otool; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_OTOOL+set}" = set; then
++if test "${ac_cv_prog_OTOOL+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$OTOOL"; then
+@@ -8884,24 +8204,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_OTOOL="${ac_tool_prefix}otool"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ OTOOL=$ac_cv_prog_OTOOL
+ if test -n "$OTOOL"; then
+-  { $as_echo "$as_me:$LINENO: result: $OTOOL" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OTOOL" >&5
+ $as_echo "$OTOOL" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -8911,9 +8231,9 @@
+   ac_ct_OTOOL=$OTOOL
+   # Extract the first word of "otool", so it can be a program name with args.
+ set dummy otool; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_OTOOL+set}" = set; then
++if test "${ac_cv_prog_ac_ct_OTOOL+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_OTOOL"; then
+@@ -8924,24 +8244,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_OTOOL="otool"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_OTOOL=$ac_cv_prog_ac_ct_OTOOL
+ if test -n "$ac_ct_OTOOL"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_OTOOL" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_OTOOL" >&5
+ $as_echo "$ac_ct_OTOOL" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -8950,7 +8270,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -8963,9 +8283,9 @@
+     if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}otool64", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}otool64; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_OTOOL64+set}" = set; then
++if test "${ac_cv_prog_OTOOL64+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$OTOOL64"; then
+@@ -8976,24 +8296,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_OTOOL64="${ac_tool_prefix}otool64"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ OTOOL64=$ac_cv_prog_OTOOL64
+ if test -n "$OTOOL64"; then
+-  { $as_echo "$as_me:$LINENO: result: $OTOOL64" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $OTOOL64" >&5
+ $as_echo "$OTOOL64" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -9003,9 +8323,9 @@
+   ac_ct_OTOOL64=$OTOOL64
+   # Extract the first word of "otool64", so it can be a program name with args.
+ set dummy otool64; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_ac_ct_OTOOL64+set}" = set; then
++if test "${ac_cv_prog_ac_ct_OTOOL64+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$ac_ct_OTOOL64"; then
+@@ -9016,24 +8336,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_ac_ct_OTOOL64="otool64"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ ac_ct_OTOOL64=$ac_cv_prog_ac_ct_OTOOL64
+ if test -n "$ac_ct_OTOOL64"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_ct_OTOOL64" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_OTOOL64" >&5
+ $as_echo "$ac_ct_OTOOL64" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -9042,7 +8362,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -9078,9 +8398,9 @@
+ 
+ 
+ 
+-    { $as_echo "$as_me:$LINENO: checking for -single_module linker flag" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -single_module linker flag" >&5
+ $as_echo_n "checking for -single_module linker flag... " >&6; }
+-if test "${lt_cv_apple_cc_single_mod+set}" = set; then
++if test "${lt_cv_apple_cc_single_mod+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   lt_cv_apple_cc_single_mod=no
+@@ -9105,22 +8425,18 @@
+ 	rm -f conftest.*
+       fi
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_apple_cc_single_mod" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_apple_cc_single_mod" >&5
+ $as_echo "$lt_cv_apple_cc_single_mod" >&6; }
+-    { $as_echo "$as_me:$LINENO: checking for -exported_symbols_list linker flag" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -exported_symbols_list linker flag" >&5
+ $as_echo_n "checking for -exported_symbols_list linker flag... " >&6; }
+-if test "${lt_cv_ld_exported_symbols_list+set}" = set; then
++if test "${lt_cv_ld_exported_symbols_list+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   lt_cv_ld_exported_symbols_list=no
+       save_LDFLAGS=$LDFLAGS
+       echo "_main" > conftest.sym
+       LDFLAGS="$LDFLAGS -Wl,-exported_symbols_list,conftest.sym"
+-      cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++      cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -9131,42 +8447,17 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   lt_cv_ld_exported_symbols_list=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	lt_cv_ld_exported_symbols_list=no
++  lt_cv_ld_exported_symbols_list=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ 	LDFLAGS="$save_LDFLAGS"
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_ld_exported_symbols_list" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_ld_exported_symbols_list" >&5
+ $as_echo "$lt_cv_ld_exported_symbols_list" >&6; }
+     case $host_os in
+     rhapsody* | darwin1.[012])
+@@ -9203,62 +8494,13 @@
+     ;;
+   esac
+ 
+-
+ for ac_header in dlfcn.h
+-do
+-as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
+-{ $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
+-$as_echo_n "checking for $ac_header... " >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-
+-#include <$ac_header>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  eval "$as_ac_Header=yes"
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_Header=no"
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-fi
+-ac_res=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
+-as_val=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-   if test "x$as_val" = x""yes; then
++do :
++  ac_fn_c_check_header_compile "$LINENO" "dlfcn.h" "ac_cv_header_dlfcn_h" "$ac_includes_default
++"
++if test "x$ac_cv_header_dlfcn_h" = x""yes; then :
+   cat >>confdefs.h <<_ACEOF
+-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
++#define HAVE_DLFCN_H 1
+ _ACEOF
+ 
+ fi
+@@ -9276,7 +8518,7 @@
+ 
+ 
+             # Check whether --enable-shared was given.
+-if test "${enable_shared+set}" = set; then
++if test "${enable_shared+set}" = set; then :
+   enableval=$enable_shared; p=${PACKAGE-default}
+     case $enableval in
+     yes) enable_shared=yes ;;
+@@ -9309,7 +8551,7 @@
+ 
+ 
+ # Check whether --with-pic was given.
+-if test "${with_pic+set}" = set; then
++if test "${with_pic+set}" = set; then :
+   withval=$with_pic; pic_mode="$withval"
+ else
+   pic_mode=default
+@@ -9325,7 +8567,7 @@
+ 
+ 
+   # Check whether --enable-fast-install was given.
+-if test "${enable_fast_install+set}" = set; then
++if test "${enable_fast_install+set}" = set; then :
+   enableval=$enable_fast_install; p=${PACKAGE-default}
+     case $enableval in
+     yes) enable_fast_install=yes ;;
+@@ -9406,9 +8648,9 @@
+    setopt NO_GLOB_SUBST
+ fi
+ 
+-{ $as_echo "$as_me:$LINENO: checking for objdir" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for objdir" >&5
+ $as_echo_n "checking for objdir... " >&6; }
+-if test "${lt_cv_objdir+set}" = set; then
++if test "${lt_cv_objdir+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   rm -f .libs 2>/dev/null
+@@ -9421,7 +8663,7 @@
+ fi
+ rmdir .libs 2>/dev/null
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_objdir" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_objdir" >&5
+ $as_echo "$lt_cv_objdir" >&6; }
+ objdir=$lt_cv_objdir
+ 
+@@ -9514,9 +8756,9 @@
+ case $deplibs_check_method in
+ file_magic*)
+   if test "$file_magic_cmd" = '$MAGIC_CMD'; then
+-    { $as_echo "$as_me:$LINENO: checking for ${ac_tool_prefix}file" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ${ac_tool_prefix}file" >&5
+ $as_echo_n "checking for ${ac_tool_prefix}file... " >&6; }
+-if test "${lt_cv_path_MAGIC_CMD+set}" = set; then
++if test "${lt_cv_path_MAGIC_CMD+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $MAGIC_CMD in
+@@ -9567,10 +8809,10 @@
+ 
+ MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
+ if test -n "$MAGIC_CMD"; then
+-  { $as_echo "$as_me:$LINENO: result: $MAGIC_CMD" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MAGIC_CMD" >&5
+ $as_echo "$MAGIC_CMD" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -9580,9 +8822,9 @@
+ 
+ if test -z "$lt_cv_path_MAGIC_CMD"; then
+   if test -n "$ac_tool_prefix"; then
+-    { $as_echo "$as_me:$LINENO: checking for file" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for file" >&5
+ $as_echo_n "checking for file... " >&6; }
+-if test "${lt_cv_path_MAGIC_CMD+set}" = set; then
++if test "${lt_cv_path_MAGIC_CMD+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $MAGIC_CMD in
+@@ -9633,10 +8875,10 @@
+ 
+ MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
+ if test -n "$MAGIC_CMD"; then
+-  { $as_echo "$as_me:$LINENO: result: $MAGIC_CMD" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MAGIC_CMD" >&5
+ $as_echo "$MAGIC_CMD" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -9717,9 +8959,9 @@
+ if test "$GCC" = yes; then
+   lt_prog_compiler_no_builtin_flag=' -fno-builtin'
+ 
+-  { $as_echo "$as_me:$LINENO: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
+ $as_echo_n "checking if $compiler supports -fno-rtti -fno-exceptions... " >&6; }
+-if test "${lt_cv_prog_compiler_rtti_exceptions+set}" = set; then
++if test "${lt_cv_prog_compiler_rtti_exceptions+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   lt_cv_prog_compiler_rtti_exceptions=no
+@@ -9735,11 +8977,11 @@
+    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
+    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
+    -e 's:$: $lt_compiler_flag:'`
+-   (eval echo "\"\$as_me:9738: $lt_compile\"" >&5)
++   (eval echo "\"\$as_me:8980: $lt_compile\"" >&5)
+    (eval "$lt_compile" 2>conftest.err)
+    ac_status=$?
+    cat conftest.err >&5
+-   echo "$as_me:9742: \$? = $ac_status" >&5
++   echo "$as_me:8984: \$? = $ac_status" >&5
+    if (exit $ac_status) && test -s "$ac_outfile"; then
+      # The compiler can only warn and ignore the option if not recognized
+      # So say no if there are warnings other than the usual output.
+@@ -9752,7 +8994,7 @@
+    $RM conftest*
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_rtti_exceptions" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_rtti_exceptions" >&5
+ $as_echo "$lt_cv_prog_compiler_rtti_exceptions" >&6; }
+ 
+ if test x"$lt_cv_prog_compiler_rtti_exceptions" = xyes; then
+@@ -9772,7 +9014,7 @@
+ lt_prog_compiler_pic=
+ lt_prog_compiler_static=
+ 
+-{ $as_echo "$as_me:$LINENO: checking for $compiler option to produce PIC" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $compiler option to produce PIC" >&5
+ $as_echo_n "checking for $compiler option to produce PIC... " >&6; }
+ 
+   if test "$GCC" = yes; then
+@@ -10044,7 +9286,7 @@
+     lt_prog_compiler_pic="$lt_prog_compiler_pic -DPIC"
+     ;;
+ esac
+-{ $as_echo "$as_me:$LINENO: result: $lt_prog_compiler_pic" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_prog_compiler_pic" >&5
+ $as_echo "$lt_prog_compiler_pic" >&6; }
+ 
+ 
+@@ -10056,9 +9298,9 @@
+ # Check to make sure the PIC flag actually works.
+ #
+ if test -n "$lt_prog_compiler_pic"; then
+-  { $as_echo "$as_me:$LINENO: checking if $compiler PIC flag $lt_prog_compiler_pic works" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler PIC flag $lt_prog_compiler_pic works" >&5
+ $as_echo_n "checking if $compiler PIC flag $lt_prog_compiler_pic works... " >&6; }
+-if test "${lt_cv_prog_compiler_pic_works+set}" = set; then
++if test "${lt_cv_prog_compiler_pic_works+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   lt_cv_prog_compiler_pic_works=no
+@@ -10074,11 +9316,11 @@
+    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
+    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
+    -e 's:$: $lt_compiler_flag:'`
+-   (eval echo "\"\$as_me:10077: $lt_compile\"" >&5)
++   (eval echo "\"\$as_me:9319: $lt_compile\"" >&5)
+    (eval "$lt_compile" 2>conftest.err)
+    ac_status=$?
+    cat conftest.err >&5
+-   echo "$as_me:10081: \$? = $ac_status" >&5
++   echo "$as_me:9323: \$? = $ac_status" >&5
+    if (exit $ac_status) && test -s "$ac_outfile"; then
+      # The compiler can only warn and ignore the option if not recognized
+      # So say no if there are warnings other than the usual output.
+@@ -10091,7 +9333,7 @@
+    $RM conftest*
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_pic_works" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_pic_works" >&5
+ $as_echo "$lt_cv_prog_compiler_pic_works" >&6; }
+ 
+ if test x"$lt_cv_prog_compiler_pic_works" = xyes; then
+@@ -10115,9 +9357,9 @@
+ # Check to make sure the static flag actually works.
+ #
+ wl=$lt_prog_compiler_wl eval lt_tmp_static_flag=\"$lt_prog_compiler_static\"
+-{ $as_echo "$as_me:$LINENO: checking if $compiler static flag $lt_tmp_static_flag works" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler static flag $lt_tmp_static_flag works" >&5
+ $as_echo_n "checking if $compiler static flag $lt_tmp_static_flag works... " >&6; }
+-if test "${lt_cv_prog_compiler_static_works+set}" = set; then
++if test "${lt_cv_prog_compiler_static_works+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   lt_cv_prog_compiler_static_works=no
+@@ -10143,7 +9385,7 @@
+    LDFLAGS="$save_LDFLAGS"
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_static_works" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_static_works" >&5
+ $as_echo "$lt_cv_prog_compiler_static_works" >&6; }
+ 
+ if test x"$lt_cv_prog_compiler_static_works" = xyes; then
+@@ -10158,9 +9400,9 @@
+ 
+ 
+ 
+-  { $as_echo "$as_me:$LINENO: checking if $compiler supports -c -o file.$ac_objext" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -c -o file.$ac_objext" >&5
+ $as_echo_n "checking if $compiler supports -c -o file.$ac_objext... " >&6; }
+-if test "${lt_cv_prog_compiler_c_o+set}" = set; then
++if test "${lt_cv_prog_compiler_c_o+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   lt_cv_prog_compiler_c_o=no
+@@ -10179,11 +9421,11 @@
+    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
+    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
+    -e 's:$: $lt_compiler_flag:'`
+-   (eval echo "\"\$as_me:10182: $lt_compile\"" >&5)
++   (eval echo "\"\$as_me:9424: $lt_compile\"" >&5)
+    (eval "$lt_compile" 2>out/conftest.err)
+    ac_status=$?
+    cat out/conftest.err >&5
+-   echo "$as_me:10186: \$? = $ac_status" >&5
++   echo "$as_me:9428: \$? = $ac_status" >&5
+    if (exit $ac_status) && test -s out/conftest2.$ac_objext
+    then
+      # The compiler can only warn and ignore the option if not recognized
+@@ -10205,7 +9447,7 @@
+    $RM conftest*
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_c_o" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_c_o" >&5
+ $as_echo "$lt_cv_prog_compiler_c_o" >&6; }
+ 
+ 
+@@ -10213,9 +9455,9 @@
+ 
+ 
+ 
+-  { $as_echo "$as_me:$LINENO: checking if $compiler supports -c -o file.$ac_objext" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if $compiler supports -c -o file.$ac_objext" >&5
+ $as_echo_n "checking if $compiler supports -c -o file.$ac_objext... " >&6; }
+-if test "${lt_cv_prog_compiler_c_o+set}" = set; then
++if test "${lt_cv_prog_compiler_c_o+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   lt_cv_prog_compiler_c_o=no
+@@ -10234,11 +9476,11 @@
+    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
+    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
+    -e 's:$: $lt_compiler_flag:'`
+-   (eval echo "\"\$as_me:10237: $lt_compile\"" >&5)
++   (eval echo "\"\$as_me:9479: $lt_compile\"" >&5)
+    (eval "$lt_compile" 2>out/conftest.err)
+    ac_status=$?
+    cat out/conftest.err >&5
+-   echo "$as_me:10241: \$? = $ac_status" >&5
++   echo "$as_me:9483: \$? = $ac_status" >&5
+    if (exit $ac_status) && test -s out/conftest2.$ac_objext
+    then
+      # The compiler can only warn and ignore the option if not recognized
+@@ -10260,7 +9502,7 @@
+    $RM conftest*
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_prog_compiler_c_o" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_prog_compiler_c_o" >&5
+ $as_echo "$lt_cv_prog_compiler_c_o" >&6; }
+ 
+ 
+@@ -10269,7 +9511,7 @@
+ hard_links="nottested"
+ if test "$lt_cv_prog_compiler_c_o" = no && test "$need_locks" != no; then
+   # do not overwrite the value of need_locks provided by the user
+-  { $as_echo "$as_me:$LINENO: checking if we can lock with hard links" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if we can lock with hard links" >&5
+ $as_echo_n "checking if we can lock with hard links... " >&6; }
+   hard_links=yes
+   $RM conftest*
+@@ -10277,10 +9519,10 @@
+   touch conftest.a
+   ln conftest.a conftest.b 2>&5 || hard_links=no
+   ln conftest.a conftest.b 2>/dev/null && hard_links=no
+-  { $as_echo "$as_me:$LINENO: result: $hard_links" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $hard_links" >&5
+ $as_echo "$hard_links" >&6; }
+   if test "$hard_links" = no; then
+-    { $as_echo "$as_me:$LINENO: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
+ $as_echo "$as_me: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&2;}
+     need_locks=warn
+   fi
+@@ -10293,7 +9535,7 @@
+ 
+ 
+ 
+-  { $as_echo "$as_me:$LINENO: checking whether the $compiler linker ($LD) supports shared libraries" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the $compiler linker ($LD) supports shared libraries" >&5
+ $as_echo_n "checking whether the $compiler linker ($LD) supports shared libraries... " >&6; }
+ 
+   runpath_var=
+@@ -10735,11 +9977,7 @@
+ 	allow_undefined_flag='-berok'
+         # Determine the default libpath from the value encoded in an
+         # empty executable.
+-        cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -10750,27 +9988,7 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+ 
+ lt_aix_libpath_sed='
+     /Import File Strings/,/^$/ {
+@@ -10784,16 +10002,9 @@
+ if test -z "$aix_libpath"; then
+   aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
+ fi
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
+ 
+         hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:'"$aix_libpath"
+@@ -10806,11 +10017,7 @@
+ 	else
+ 	 # Determine the default libpath from the value encoded in an
+ 	 # empty executable.
+-	 cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -10821,27 +10028,7 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+ 
+ lt_aix_libpath_sed='
+     /Import File Strings/,/^$/ {
+@@ -10855,16 +10042,9 @@
+ if test -z "$aix_libpath"; then
+   aix_libpath=`dump -HX64 conftest$ac_exeext 2>/dev/null | $SED -n -e "$lt_aix_libpath_sed"`
+ fi
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ if test -z "$aix_libpath"; then aix_libpath="/usr/lib:/lib"; fi
+ 
+ 	 hardcode_libdir_flag_spec='${wl}-blibpath:$libdir:'"$aix_libpath"
+@@ -11076,42 +10256,16 @@
+ 	# implicitly export all symbols.
+         save_LDFLAGS="$LDFLAGS"
+         LDFLAGS="$LDFLAGS -shared ${wl}-exported_symbol ${wl}foo ${wl}-update_registry ${wl}/dev/null"
+-        cat >conftest.$ac_ext <<_ACEOF
++        cat confdefs.h - <<_ACEOF >conftest.$ac_ext
++/* end confdefs.h.  */
+ int foo(void) {}
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   archive_expsym_cmds='$CC -shared $libobjs $deplibs $compiler_flags ${wl}-soname ${wl}$soname `test -n "$verstring" && $ECHO "X${wl}-set_version ${wl}$verstring" | $Xsed` ${wl}-update_registry ${wl}${output_objdir}/so_locations ${wl}-exports_file ${wl}$export_symbols -o $lib'
+ 
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+         LDFLAGS="$save_LDFLAGS"
+       else
+ 	archive_cmds='$CC -shared $libobjs $deplibs $compiler_flags -soname $soname `test -n "$verstring" && $ECHO "X-set_version $verstring" | $Xsed` -update_registry ${output_objdir}/so_locations -o $lib'
+@@ -11367,7 +10521,7 @@
+     fi
+   fi
+ 
+-{ $as_echo "$as_me:$LINENO: result: $ld_shlibs" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ld_shlibs" >&5
+ $as_echo "$ld_shlibs" >&6; }
+ test "$ld_shlibs" = no && can_build_shared=no
+ 
+@@ -11404,16 +10558,16 @@
+       # Test whether the compiler implicitly links with -lc since on some
+       # systems, -lgcc has to come before -lc. If gcc already passes -lc
+       # to ld, don't add -lc before -lgcc.
+-      { $as_echo "$as_me:$LINENO: checking whether -lc should be explicitly linked in" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether -lc should be explicitly linked in" >&5
+ $as_echo_n "checking whether -lc should be explicitly linked in... " >&6; }
+       $RM conftest*
+       echo "$lt_simple_compile_test_code" > conftest.$ac_ext
+ 
+-      if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
++      if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
+   (eval $ac_compile) 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } 2>conftest.err; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } 2>conftest.err; then
+         soname=conftest
+         lib=conftest
+         libobjs=conftest.$ac_objext
+@@ -11427,11 +10581,11 @@
+         libname=conftest
+         lt_save_allow_undefined_flag=$allow_undefined_flag
+         allow_undefined_flag=
+-        if { (eval echo "$as_me:$LINENO: \"$archive_cmds 2\>\&1 \| $GREP \" -lc \" \>/dev/null 2\>\&1\"") >&5
++        if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$archive_cmds 2\>\&1 \| $GREP \" -lc \" \>/dev/null 2\>\&1\""; } >&5
+   (eval $archive_cmds 2\>\&1 \| $GREP \" -lc \" \>/dev/null 2\>\&1) 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }
+         then
+ 	  archive_cmds_need_lc=no
+         else
+@@ -11442,7 +10596,7 @@
+         cat conftest.err 1>&5
+       fi
+       $RM conftest*
+-      { $as_echo "$as_me:$LINENO: result: $archive_cmds_need_lc" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: result: $archive_cmds_need_lc" >&5
+ $as_echo "$archive_cmds_need_lc" >&6; }
+       ;;
+     esac
+@@ -11606,7 +10760,7 @@
+ 
+ 
+ 
+-  { $as_echo "$as_me:$LINENO: checking dynamic linker characteristics" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking dynamic linker characteristics" >&5
+ $as_echo_n "checking dynamic linker characteristics... " >&6; }
+ 
+ if test "$GCC" = yes; then
+@@ -12028,11 +11182,7 @@
+   save_libdir=$libdir
+   eval "libdir=/foo; wl=\"$lt_prog_compiler_wl\"; \
+        LDFLAGS=\"\$LDFLAGS $hardcode_libdir_flag_spec\""
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -12043,41 +11193,13 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  if  ($OBJDUMP -p conftest$ac_exeext) 2>/dev/null | grep "RUNPATH.*$libdir" >/dev/null; then
++if ac_fn_c_try_link "$LINENO"; then :
++  if  ($OBJDUMP -p conftest$ac_exeext) 2>/dev/null | grep "RUNPATH.*$libdir" >/dev/null; then :
+   shlibpath_overrides_runpath=yes
+ fi
+-
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+   LDFLAGS=$save_LDFLAGS
+   libdir=$save_libdir
+ 
+@@ -12292,7 +11414,7 @@
+   dynamic_linker=no
+   ;;
+ esac
+-{ $as_echo "$as_me:$LINENO: result: $dynamic_linker" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $dynamic_linker" >&5
+ $as_echo "$dynamic_linker" >&6; }
+ test "$dynamic_linker" = no && can_build_shared=no
+ 
+@@ -12394,7 +11516,7 @@
+ 
+ 
+ 
+-  { $as_echo "$as_me:$LINENO: checking how to hardcode library paths into programs" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking how to hardcode library paths into programs" >&5
+ $as_echo_n "checking how to hardcode library paths into programs... " >&6; }
+ hardcode_action=
+ if test -n "$hardcode_libdir_flag_spec" ||
+@@ -12419,7 +11541,7 @@
+   # directories.
+   hardcode_action=unsupported
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $hardcode_action" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $hardcode_action" >&5
+ $as_echo "$hardcode_action" >&6; }
+ 
+ if test "$hardcode_action" = relink ||
+@@ -12464,18 +11586,14 @@
+ 
+   darwin*)
+   # if libdl is installed we need to link against it
+-    { $as_echo "$as_me:$LINENO: checking for dlopen in -ldl" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -ldl" >&5
+ $as_echo_n "checking for dlopen in -ldl... " >&6; }
+-if test "${ac_cv_lib_dl_dlopen+set}" = set; then
++if test "${ac_cv_lib_dl_dlopen+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-ldl  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -12493,43 +11611,18 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_dl_dlopen=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_dl_dlopen=no
++  ac_cv_lib_dl_dlopen=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_dl_dlopen" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dl_dlopen" >&5
+ $as_echo "$ac_cv_lib_dl_dlopen" >&6; }
+-if test "x$ac_cv_lib_dl_dlopen" = x""yes; then
++if test "x$ac_cv_lib_dl_dlopen" = x""yes; then :
+   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
+ else
+ 
+@@ -12542,33 +11635,19 @@
+     ;;
+ 
+   *)
+-    { $as_echo "$as_me:$LINENO: checking for shl_load" >&5
+-$as_echo_n "checking for shl_load... " >&6; }
+-if test "${ac_cv_func_shl_load+set}" = set; then
++    ac_fn_c_check_func "$LINENO" "shl_load" "ac_cv_func_shl_load"
++if test "x$ac_cv_func_shl_load" = x""yes; then :
++  lt_cv_dlopen="shl_load"
++else
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for shl_load in -ldld" >&5
++$as_echo_n "checking for shl_load in -ldld... " >&6; }
++if test "${ac_cv_lib_dld_shl_load+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  ac_check_lib_save_LIBS=$LIBS
++LIBS="-ldld  $LIBS"
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+-/* Define shl_load to an innocuous variant, in case <limits.h> declares shl_load.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define shl_load innocuous_shl_load
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char shl_load (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef shl_load
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+@@ -12577,13 +11656,6 @@
+ extern "C"
+ #endif
+ char shl_load ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_shl_load || defined __stub___shl_load
+-choke me
+-#endif
+-
+ int
+ main ()
+ {
+@@ -12592,56 +11664,32 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  ac_cv_func_shl_load=yes
++if ac_fn_c_try_link "$LINENO"; then :
++  ac_cv_lib_dld_shl_load=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_func_shl_load=no
++  ac_cv_lib_dld_shl_load=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
++LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_func_shl_load" >&5
+-$as_echo "$ac_cv_func_shl_load" >&6; }
+-if test "x$ac_cv_func_shl_load" = x""yes; then
+-  lt_cv_dlopen="shl_load"
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dld_shl_load" >&5
++$as_echo "$ac_cv_lib_dld_shl_load" >&6; }
++if test "x$ac_cv_lib_dld_shl_load" = x""yes; then :
++  lt_cv_dlopen="shl_load" lt_cv_dlopen_libs="-ldld"
+ else
+-  { $as_echo "$as_me:$LINENO: checking for shl_load in -ldld" >&5
+-$as_echo_n "checking for shl_load in -ldld... " >&6; }
+-if test "${ac_cv_lib_dld_shl_load+set}" = set; then
++  ac_fn_c_check_func "$LINENO" "dlopen" "ac_cv_func_dlopen"
++if test "x$ac_cv_func_dlopen" = x""yes; then :
++  lt_cv_dlopen="dlopen"
++else
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -ldl" >&5
++$as_echo_n "checking for dlopen in -ldl... " >&6; }
++if test "${ac_cv_lib_dl_dlopen+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+-LIBS="-ldld  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++LIBS="-ldl  $LIBS"
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -12650,81 +11698,38 @@
+ #ifdef __cplusplus
+ extern "C"
+ #endif
+-char shl_load ();
++char dlopen ();
+ int
+ main ()
+ {
+-return shl_load ();
++return dlopen ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  ac_cv_lib_dld_shl_load=yes
++if ac_fn_c_try_link "$LINENO"; then :
++  ac_cv_lib_dl_dlopen=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_dld_shl_load=no
++  ac_cv_lib_dl_dlopen=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_dld_shl_load" >&5
+-$as_echo "$ac_cv_lib_dld_shl_load" >&6; }
+-if test "x$ac_cv_lib_dld_shl_load" = x""yes; then
+-  lt_cv_dlopen="shl_load" lt_cv_dlopen_libs="-ldld"
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dl_dlopen" >&5
++$as_echo "$ac_cv_lib_dl_dlopen" >&6; }
++if test "x$ac_cv_lib_dl_dlopen" = x""yes; then :
++  lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
+ else
+-  { $as_echo "$as_me:$LINENO: checking for dlopen" >&5
+-$as_echo_n "checking for dlopen... " >&6; }
+-if test "${ac_cv_func_dlopen+set}" = set; then
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dlopen in -lsvld" >&5
++$as_echo_n "checking for dlopen in -lsvld... " >&6; }
++if test "${ac_cv_lib_svld_dlopen+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  ac_check_lib_save_LIBS=$LIBS
++LIBS="-lsvld  $LIBS"
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+-/* Define dlopen to an innocuous variant, in case <limits.h> declares dlopen.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define dlopen innocuous_dlopen
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char dlopen (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef dlopen
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+@@ -12733,13 +11738,6 @@
+ extern "C"
+ #endif
+ char dlopen ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_dlopen || defined __stub___dlopen
+-choke me
+-#endif
+-
+ int
+ main ()
+ {
+@@ -12748,192 +11746,28 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  ac_cv_func_dlopen=yes
++if ac_fn_c_try_link "$LINENO"; then :
++  ac_cv_lib_svld_dlopen=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_func_dlopen=no
++  ac_cv_lib_svld_dlopen=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_func_dlopen" >&5
+-$as_echo "$ac_cv_func_dlopen" >&6; }
+-if test "x$ac_cv_func_dlopen" = x""yes; then
+-  lt_cv_dlopen="dlopen"
+-else
+-  { $as_echo "$as_me:$LINENO: checking for dlopen in -ldl" >&5
+-$as_echo_n "checking for dlopen in -ldl... " >&6; }
+-if test "${ac_cv_lib_dl_dlopen+set}" = set; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  ac_check_lib_save_LIBS=$LIBS
+-LIBS="-ldl  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char dlopen ();
+-int
+-main ()
+-{
+-return dlopen ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  ac_cv_lib_dl_dlopen=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_dl_dlopen=no
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-LIBS=$ac_check_lib_save_LIBS
+-fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_dl_dlopen" >&5
+-$as_echo "$ac_cv_lib_dl_dlopen" >&6; }
+-if test "x$ac_cv_lib_dl_dlopen" = x""yes; then
+-  lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
+-else
+-  { $as_echo "$as_me:$LINENO: checking for dlopen in -lsvld" >&5
+-$as_echo_n "checking for dlopen in -lsvld... " >&6; }
+-if test "${ac_cv_lib_svld_dlopen+set}" = set; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  ac_check_lib_save_LIBS=$LIBS
+-LIBS="-lsvld  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char dlopen ();
+-int
+-main ()
+-{
+-return dlopen ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  ac_cv_lib_svld_dlopen=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_svld_dlopen=no
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_svld_dlopen" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_svld_dlopen" >&5
+ $as_echo "$ac_cv_lib_svld_dlopen" >&6; }
+-if test "x$ac_cv_lib_svld_dlopen" = x""yes; then
++if test "x$ac_cv_lib_svld_dlopen" = x""yes; then :
+   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-lsvld"
+ else
+-  { $as_echo "$as_me:$LINENO: checking for dld_link in -ldld" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dld_link in -ldld" >&5
+ $as_echo_n "checking for dld_link in -ldld... " >&6; }
+-if test "${ac_cv_lib_dld_dld_link+set}" = set; then
++if test "${ac_cv_lib_dld_dld_link+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-ldld  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -12951,43 +11785,18 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_dld_dld_link=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_dld_dld_link=no
++  ac_cv_lib_dld_dld_link=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_dld_dld_link" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dld_dld_link" >&5
+ $as_echo "$ac_cv_lib_dld_dld_link" >&6; }
+-if test "x$ac_cv_lib_dld_dld_link" = x""yes; then
++if test "x$ac_cv_lib_dld_dld_link" = x""yes; then :
+   lt_cv_dlopen="dld_link" lt_cv_dlopen_libs="-ldld"
+ fi
+ 
+@@ -13026,9 +11835,9 @@
+     save_LIBS="$LIBS"
+     LIBS="$lt_cv_dlopen_libs $LIBS"
+ 
+-    { $as_echo "$as_me:$LINENO: checking whether a program can dlopen itself" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether a program can dlopen itself" >&5
+ $as_echo_n "checking whether a program can dlopen itself... " >&6; }
+-if test "${lt_cv_dlopen_self+set}" = set; then
++if test "${lt_cv_dlopen_self+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   	  if test "$cross_compiling" = yes; then :
+@@ -13037,7 +11846,7 @@
+   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
+   lt_status=$lt_dlunknown
+   cat > conftest.$ac_ext <<_LT_EOF
+-#line 13040 "configure"
++#line 11849 "configure"
+ #include "confdefs.h"
+ 
+ #if HAVE_DLFCN_H
+@@ -13096,11 +11905,11 @@
+   return status;
+ }
+ _LT_EOF
+-  if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
++  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
+   (eval $ac_link) 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && test -s conftest${ac_exeext} 2>/dev/null; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } && test -s conftest${ac_exeext} 2>/dev/null; then
+     (./conftest; exit; ) >&5 2>/dev/null
+     lt_status=$?
+     case x$lt_status in
+@@ -13117,14 +11926,14 @@
+ 
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_dlopen_self" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_dlopen_self" >&5
+ $as_echo "$lt_cv_dlopen_self" >&6; }
+ 
+     if test "x$lt_cv_dlopen_self" = xyes; then
+       wl=$lt_prog_compiler_wl eval LDFLAGS=\"\$LDFLAGS $lt_prog_compiler_static\"
+-      { $as_echo "$as_me:$LINENO: checking whether a statically linked program can dlopen itself" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether a statically linked program can dlopen itself" >&5
+ $as_echo_n "checking whether a statically linked program can dlopen itself... " >&6; }
+-if test "${lt_cv_dlopen_self_static+set}" = set; then
++if test "${lt_cv_dlopen_self_static+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   	  if test "$cross_compiling" = yes; then :
+@@ -13133,7 +11942,7 @@
+   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
+   lt_status=$lt_dlunknown
+   cat > conftest.$ac_ext <<_LT_EOF
+-#line 13136 "configure"
++#line 11945 "configure"
+ #include "confdefs.h"
+ 
+ #if HAVE_DLFCN_H
+@@ -13192,11 +12001,11 @@
+   return status;
+ }
+ _LT_EOF
+-  if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
++  if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_link\""; } >&5
+   (eval $ac_link) 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && test -s conftest${ac_exeext} 2>/dev/null; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; } && test -s conftest${ac_exeext} 2>/dev/null; then
+     (./conftest; exit; ) >&5 2>/dev/null
+     lt_status=$?
+     case x$lt_status in
+@@ -13213,7 +12022,7 @@
+ 
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $lt_cv_dlopen_self_static" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_dlopen_self_static" >&5
+ $as_echo "$lt_cv_dlopen_self_static" >&6; }
+     fi
+ 
+@@ -13252,12 +12061,12 @@
+ 
+ striplib=
+ old_striplib=
+-{ $as_echo "$as_me:$LINENO: checking whether stripping libraries is possible" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether stripping libraries is possible" >&5
+ $as_echo_n "checking whether stripping libraries is possible... " >&6; }
+ if test -n "$STRIP" && $STRIP -V 2>&1 | $GREP "GNU strip" >/dev/null; then
+   test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
+   test -z "$striplib" && striplib="$STRIP --strip-unneeded"
+-  { $as_echo "$as_me:$LINENO: result: yes" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+ else
+ # FIXME - insert some real tests, host_os isn't really good enough
+@@ -13266,15 +12075,15 @@
+     if test -n "$STRIP" ; then
+       striplib="$STRIP -x"
+       old_striplib="$STRIP -S"
+-      { $as_echo "$as_me:$LINENO: result: yes" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+     else
+-      { $as_echo "$as_me:$LINENO: result: no" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+     fi
+     ;;
+   *)
+-    { $as_echo "$as_me:$LINENO: result: no" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+     ;;
+   esac
+@@ -13292,12 +12101,12 @@
+ 
+ 
+   # Report which library types will actually be built
+-  { $as_echo "$as_me:$LINENO: checking if libtool supports shared libraries" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if libtool supports shared libraries" >&5
+ $as_echo_n "checking if libtool supports shared libraries... " >&6; }
+-  { $as_echo "$as_me:$LINENO: result: $can_build_shared" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $can_build_shared" >&5
+ $as_echo "$can_build_shared" >&6; }
+ 
+-  { $as_echo "$as_me:$LINENO: checking whether to build shared libraries" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to build shared libraries" >&5
+ $as_echo_n "checking whether to build shared libraries... " >&6; }
+   test "$can_build_shared" = "no" && enable_shared=no
+ 
+@@ -13318,14 +12127,14 @@
+     fi
+     ;;
+   esac
+-  { $as_echo "$as_me:$LINENO: result: $enable_shared" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_shared" >&5
+ $as_echo "$enable_shared" >&6; }
+ 
+-  { $as_echo "$as_me:$LINENO: checking whether to build static libraries" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to build static libraries" >&5
+ $as_echo_n "checking whether to build static libraries... " >&6; }
+   # Make sure either enable_shared or enable_static is yes.
+   test "$enable_shared" = yes || enable_static=yes
+-  { $as_echo "$as_me:$LINENO: result: $enable_static" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_static" >&5
+ $as_echo "$enable_static" >&6; }
+ 
+ 
+@@ -13362,9 +12171,9 @@
+ 
+ # Extract the first word of "pkg-config", so it can be a program name with args.
+ set dummy pkg-config; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_PKG_CONFIG+set}" = set; then
++if test "${ac_cv_path_PKG_CONFIG+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $PKG_CONFIG in
+@@ -13377,14 +12186,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   test -z "$ac_cv_path_PKG_CONFIG" && ac_cv_path_PKG_CONFIG="no"
+@@ -13393,28 +12202,23 @@
+ fi
+ PKG_CONFIG=$ac_cv_path_PKG_CONFIG
+ if test -n "$PKG_CONFIG"; then
+-  { $as_echo "$as_me:$LINENO: result: $PKG_CONFIG" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PKG_CONFIG" >&5
+ $as_echo "$PKG_CONFIG" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ 
+-
+-{ $as_echo "$as_me:$LINENO: checking for floor in -lm" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for floor in -lm" >&5
+ $as_echo_n "checking for floor in -lm... " >&6; }
+-if test "${ac_cv_lib_m_floor+set}" = set; then
++if test "${ac_cv_lib_m_floor+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lm  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -13432,43 +12236,18 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_m_floor=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_m_floor=no
++  ac_cv_lib_m_floor=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_m_floor" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_m_floor" >&5
+ $as_echo "$ac_cv_lib_m_floor" >&6; }
+-if test "x$ac_cv_lib_m_floor" = x""yes; then
++if test "x$ac_cv_lib_m_floor" = x""yes; then :
+   cat >>confdefs.h <<_ACEOF
+ #define HAVE_LIBM 1
+ _ACEOF
+@@ -13484,9 +12263,9 @@
+ 	if test -n "$ac_tool_prefix"; then
+   # Extract the first word of "${ac_tool_prefix}pkg-config", so it can be a program name with args.
+ set dummy ${ac_tool_prefix}pkg-config; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_PKG_CONFIG+set}" = set; then
++if test "${ac_cv_path_PKG_CONFIG+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $PKG_CONFIG in
+@@ -13499,14 +12278,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -13514,10 +12293,10 @@
+ fi
+ PKG_CONFIG=$ac_cv_path_PKG_CONFIG
+ if test -n "$PKG_CONFIG"; then
+-  { $as_echo "$as_me:$LINENO: result: $PKG_CONFIG" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PKG_CONFIG" >&5
+ $as_echo "$PKG_CONFIG" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -13527,9 +12306,9 @@
+   ac_pt_PKG_CONFIG=$PKG_CONFIG
+   # Extract the first word of "pkg-config", so it can be a program name with args.
+ set dummy pkg-config; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_ac_pt_PKG_CONFIG+set}" = set; then
++if test "${ac_cv_path_ac_pt_PKG_CONFIG+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $ac_pt_PKG_CONFIG in
+@@ -13542,14 +12321,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_ac_pt_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -13557,10 +12336,10 @@
+ fi
+ ac_pt_PKG_CONFIG=$ac_cv_path_ac_pt_PKG_CONFIG
+ if test -n "$ac_pt_PKG_CONFIG"; then
+-  { $as_echo "$as_me:$LINENO: result: $ac_pt_PKG_CONFIG" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_pt_PKG_CONFIG" >&5
+ $as_echo "$ac_pt_PKG_CONFIG" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -13569,7 +12348,7 @@
+   else
+     case $cross_compiling:$ac_tool_warned in
+ yes:)
+-{ $as_echo "$as_me:$LINENO: WARNING: using cross tools not prefixed with host triplet" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+ $as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ ac_tool_warned=yes ;;
+ esac
+@@ -13582,13 +12361,13 @@
+ fi
+ if test -n "$PKG_CONFIG"; then
+ 	_pkg_min_version=0.9.0
+-	{ $as_echo "$as_me:$LINENO: checking pkg-config is at least version $_pkg_min_version" >&5
++	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking pkg-config is at least version $_pkg_min_version" >&5
+ $as_echo_n "checking pkg-config is at least version $_pkg_min_version... " >&6; }
+ 	if $PKG_CONFIG --atleast-pkgconfig-version $_pkg_min_version; then
+-		{ $as_echo "$as_me:$LINENO: result: yes" >&5
++		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+ 	else
+-		{ $as_echo "$as_me:$LINENO: result: no" >&5
++		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ 		PKG_CONFIG=""
+ 	fi
+@@ -13596,14 +12375,15 @@
+ fi
+ 
+ pkg_failed=no
+-{ $as_echo "$as_me:$LINENO: checking for ALL" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ALL" >&5
+ $as_echo_n "checking for ALL... " >&6; }
+ 
+-if test -n "$ALL_CFLAGS"; then
+-    pkg_cv_ALL_CFLAGS="$ALL_CFLAGS"
+- elif test -n "$PKG_CONFIG"; then
+-    if test -n "$PKG_CONFIG" && \
+-    { ($as_echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"
++if test -n "$PKG_CONFIG"; then
++    if test -n "$ALL_CFLAGS"; then
++        pkg_cv_ALL_CFLAGS="$ALL_CFLAGS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"
+ 	glib-2.0		>= 2.24.0
+ 	gnome-desktop-2.0	>= 2.29.91
+ 	gthread-2.0
+@@ -13615,7 +12395,7 @@
+ 	gail			>= 0.16
+ 	unique-1.0
+ 	dbus-glib-1
+-\"") >&5
++\""; } >&5
+   ($PKG_CONFIG --exists --print-errors "
+ 	glib-2.0		>= 2.24.0
+ 	gnome-desktop-2.0	>= 2.29.91
+@@ -13630,8 +12410,8 @@
+ 	dbus-glib-1
+ ") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+   pkg_cv_ALL_CFLAGS=`$PKG_CONFIG --cflags "
+ 	glib-2.0		>= 2.24.0
+ 	gnome-desktop-2.0	>= 2.29.91
+@@ -13648,14 +12428,16 @@
+ else
+   pkg_failed=yes
+ fi
+- else
+-    pkg_failed=untried
++    fi
++else
++	pkg_failed=untried
+ fi
+-if test -n "$ALL_LIBS"; then
+-    pkg_cv_ALL_LIBS="$ALL_LIBS"
+- elif test -n "$PKG_CONFIG"; then
+-    if test -n "$PKG_CONFIG" && \
+-    { ($as_echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"
++if test -n "$PKG_CONFIG"; then
++    if test -n "$ALL_LIBS"; then
++        pkg_cv_ALL_LIBS="$ALL_LIBS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"
+ 	glib-2.0		>= 2.24.0
+ 	gnome-desktop-2.0	>= 2.29.91
+ 	gthread-2.0
+@@ -13667,7 +12449,7 @@
+ 	gail			>= 0.16
+ 	unique-1.0
+ 	dbus-glib-1
+-\"") >&5
++\""; } >&5
+   ($PKG_CONFIG --exists --print-errors "
+ 	glib-2.0		>= 2.24.0
+ 	gnome-desktop-2.0	>= 2.29.91
+@@ -13682,8 +12464,8 @@
+ 	dbus-glib-1
+ ") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+   pkg_cv_ALL_LIBS=`$PKG_CONFIG --libs "
+ 	glib-2.0		>= 2.24.0
+ 	gnome-desktop-2.0	>= 2.29.91
+@@ -13700,8 +12482,9 @@
+ else
+   pkg_failed=yes
+ fi
+- else
+-    pkg_failed=untried
++    fi
++else
++	pkg_failed=untried
+ fi
+ 
+ 
+@@ -13714,7 +12497,7 @@
+         _pkg_short_errors_supported=no
+ fi
+         if test $_pkg_short_errors_supported = yes; then
+-	        ALL_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "
++	        ALL_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "
+ 	glib-2.0		>= 2.24.0
+ 	gnome-desktop-2.0	>= 2.29.91
+ 	gthread-2.0
+@@ -13726,9 +12509,9 @@
+ 	gail			>= 0.16
+ 	unique-1.0
+ 	dbus-glib-1
+-" 2>&1`
++"`
+         else
+-	        ALL_PKG_ERRORS=`$PKG_CONFIG --print-errors "
++	        ALL_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "
+ 	glib-2.0		>= 2.24.0
+ 	gnome-desktop-2.0	>= 2.29.91
+ 	gthread-2.0
+@@ -13740,35 +12523,12 @@
+ 	gail			>= 0.16
+ 	unique-1.0
+ 	dbus-glib-1
+-" 2>&1`
++"`
+         fi
+ 	# Put the nasty error message in config.log where it belongs
+ 	echo "$ALL_PKG_ERRORS" >&5
+ 
+-	{ { $as_echo "$as_me:$LINENO: error: Package requirements (
+-	glib-2.0		>= 2.24.0
+-	gnome-desktop-2.0	>= 2.29.91
+-	gthread-2.0
+-	gio-unix-2.0
+-	gio-2.0
+-	pango			>= 1.1.2
+-	gtk+-2.0		>= 2.20.0
+-	libxml-2.0		>= 2.4.7
+-	gail			>= 0.16
+-	unique-1.0
+-	dbus-glib-1
+-) were not met:
+-
+-$ALL_PKG_ERRORS
+-
+-Consider adjusting the PKG_CONFIG_PATH environment variable if you
+-installed software in a non-standard prefix.
+-
+-Alternatively, you may set the environment variables ALL_CFLAGS
+-and ALL_LIBS to avoid the need to call pkg-config.
+-See the pkg-config man page for more details.
+-" >&5
+-$as_echo "$as_me: error: Package requirements (
++	as_fn_error "Package requirements (
+ 	glib-2.0		>= 2.24.0
+ 	gnome-desktop-2.0	>= 2.29.91
+ 	gthread-2.0
+@@ -13790,22 +12550,11 @@
+ Alternatively, you may set the environment variables ALL_CFLAGS
+ and ALL_LIBS to avoid the need to call pkg-config.
+ See the pkg-config man page for more details.
+-" >&2;}
+-   { (exit 1); exit 1; }; }
++" "$LINENO" 5
+ elif test $pkg_failed = untried; then
+-	{ { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
++	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+ $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+-{ { $as_echo "$as_me:$LINENO: error: The pkg-config script could not be found or is too old.  Make sure it
+-is in your PATH or set the PKG_CONFIG environment variable to the full
+-path to pkg-config.
+-
+-Alternatively, you may set the environment variables ALL_CFLAGS
+-and ALL_LIBS to avoid the need to call pkg-config.
+-See the pkg-config man page for more details.
+-
+-To get pkg-config, see <http://pkg-config.freedesktop.org/>.
+-See \`config.log' for more details." >&5
+-$as_echo "$as_me: error: The pkg-config script could not be found or is too old.  Make sure it
++as_fn_error "The pkg-config script could not be found or is too old.  Make sure it
+ is in your PATH or set the PKG_CONFIG environment variable to the full
+ path to pkg-config.
+ 
+@@ -13814,12 +12563,11 @@
+ See the pkg-config man page for more details.
+ 
+ To get pkg-config, see <http://pkg-config.freedesktop.org/>.
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }; }
++See \`config.log' for more details." "$LINENO" 5; }
+ else
+ 	ALL_CFLAGS=$pkg_cv_ALL_CFLAGS
+ 	ALL_LIBS=$pkg_cv_ALL_LIBS
+-        { $as_echo "$as_me:$LINENO: result: yes" >&5
++        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+ 	:
+ fi
+@@ -13833,151 +12581,12 @@
+ 
+ 
+ 
+-
+-for ac_header in locale.h
+-do
+-as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  { $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
+-$as_echo_n "checking for $ac_header... " >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
+-fi
+-ac_res=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
+-else
+-  # Is the header compilable?
+-{ $as_echo "$as_me:$LINENO: checking $ac_header usability" >&5
+-$as_echo_n "checking $ac_header usability... " >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <$ac_header>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ $as_echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-$as_echo "$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ $as_echo "$as_me:$LINENO: checking $ac_header presence" >&5
+-$as_echo_n "checking $ac_header presence... " >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <$ac_header>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
+-fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ $as_echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-$as_echo "$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+-  yes:no: )
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+-$as_echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+-$as_echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+-$as_echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+-$as_echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+-$as_echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+-$as_echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+-$as_echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+-$as_echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+-    ( cat <<\_ASBOX
+-## ----------------------------------------------------------------------- ##
+-## Report this to http://bugzilla.gnome.org/enter_bug.cgi?product=nautilus ##
+-## ----------------------------------------------------------------------- ##
+-_ASBOX
+-     ) | sed "s/^/$as_me: WARNING:     /" >&2
+-    ;;
+-esac
+-{ $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
+-$as_echo_n "checking for $ac_header... " >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  eval "$as_ac_Header=\$ac_header_preproc"
+-fi
+-ac_res=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
+-
+-fi
+-as_val=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-   if test "x$as_val" = x""yes; then
++   for ac_header in locale.h
++do :
++  ac_fn_c_check_header_mongrel "$LINENO" "locale.h" "ac_cv_header_locale_h" "$ac_includes_default"
++if test "x$ac_cv_header_locale_h" = x""yes; then :
+   cat >>confdefs.h <<_ACEOF
+-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
++#define HAVE_LOCALE_H 1
+ _ACEOF
+ 
+ fi
+@@ -13985,16 +12594,12 @@
+ done
+ 
+     if test $ac_cv_header_locale_h = yes; then
+-    { $as_echo "$as_me:$LINENO: checking for LC_MESSAGES" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for LC_MESSAGES" >&5
+ $as_echo_n "checking for LC_MESSAGES... " >&6; }
+-if test "${am_cv_val_LC_MESSAGES+set}" = set; then
++if test "${am_cv_val_LC_MESSAGES+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <locale.h>
+ int
+@@ -14005,46 +12610,19 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   am_cv_val_LC_MESSAGES=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	am_cv_val_LC_MESSAGES=no
++  am_cv_val_LC_MESSAGES=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $am_cv_val_LC_MESSAGES" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_val_LC_MESSAGES" >&5
+ $as_echo "$am_cv_val_LC_MESSAGES" >&6; }
+     if test $am_cv_val_LC_MESSAGES = yes; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_LC_MESSAGES 1
+-_ACEOF
++$as_echo "#define HAVE_LC_MESSAGES 1" >>confdefs.h
+ 
+     fi
+   fi
+@@ -14057,155 +12635,20 @@
+     XGETTEXT=:
+     INTLLIBS=
+ 
+-    if test "${ac_cv_header_libintl_h+set}" = set; then
+-  { $as_echo "$as_me:$LINENO: checking for libintl.h" >&5
+-$as_echo_n "checking for libintl.h... " >&6; }
+-if test "${ac_cv_header_libintl_h+set}" = set; then
+-  $as_echo_n "(cached) " >&6
+-fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_header_libintl_h" >&5
+-$as_echo "$ac_cv_header_libintl_h" >&6; }
+-else
+-  # Is the header compilable?
+-{ $as_echo "$as_me:$LINENO: checking libintl.h usability" >&5
+-$as_echo_n "checking libintl.h usability... " >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <libintl.h>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ $as_echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-$as_echo "$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ $as_echo "$as_me:$LINENO: checking libintl.h presence" >&5
+-$as_echo_n "checking libintl.h presence... " >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <libintl.h>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
+-fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ $as_echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-$as_echo "$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+-  yes:no: )
+-    { $as_echo "$as_me:$LINENO: WARNING: libintl.h: accepted by the compiler, rejected by the preprocessor!" >&5
+-$as_echo "$as_me: WARNING: libintl.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: libintl.h: proceeding with the compiler's result" >&5
+-$as_echo "$as_me: WARNING: libintl.h: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { $as_echo "$as_me:$LINENO: WARNING: libintl.h: present but cannot be compiled" >&5
+-$as_echo "$as_me: WARNING: libintl.h: present but cannot be compiled" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: libintl.h:     check for missing prerequisite headers?" >&5
+-$as_echo "$as_me: WARNING: libintl.h:     check for missing prerequisite headers?" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: libintl.h: see the Autoconf documentation" >&5
+-$as_echo "$as_me: WARNING: libintl.h: see the Autoconf documentation" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: libintl.h:     section \"Present But Cannot Be Compiled\"" >&5
+-$as_echo "$as_me: WARNING: libintl.h:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: libintl.h: proceeding with the preprocessor's result" >&5
+-$as_echo "$as_me: WARNING: libintl.h: proceeding with the preprocessor's result" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: libintl.h: in the future, the compiler will take precedence" >&5
+-$as_echo "$as_me: WARNING: libintl.h: in the future, the compiler will take precedence" >&2;}
+-    ( cat <<\_ASBOX
+-## ----------------------------------------------------------------------- ##
+-## Report this to http://bugzilla.gnome.org/enter_bug.cgi?product=nautilus ##
+-## ----------------------------------------------------------------------- ##
+-_ASBOX
+-     ) | sed "s/^/$as_me: WARNING:     /" >&2
+-    ;;
+-esac
+-{ $as_echo "$as_me:$LINENO: checking for libintl.h" >&5
+-$as_echo_n "checking for libintl.h... " >&6; }
+-if test "${ac_cv_header_libintl_h+set}" = set; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  ac_cv_header_libintl_h=$ac_header_preproc
+-fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_header_libintl_h" >&5
+-$as_echo "$ac_cv_header_libintl_h" >&6; }
+-
+-fi
+-if test "x$ac_cv_header_libintl_h" = x""yes; then
++    ac_fn_c_check_header_mongrel "$LINENO" "libintl.h" "ac_cv_header_libintl_h" "$ac_includes_default"
++if test "x$ac_cv_header_libintl_h" = x""yes; then :
+   gt_cv_func_dgettext_libintl="no"
+       libintl_extra_libs=""
+ 
+       #
+       # First check in libc
+       #
+-      { $as_echo "$as_me:$LINENO: checking for ngettext in libc" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ngettext in libc" >&5
+ $as_echo_n "checking for ngettext in libc... " >&6; }
+-if test "${gt_cv_func_ngettext_libc+set}" = set; then
++if test "${gt_cv_func_ngettext_libc+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #include <libintl.h>
+@@ -14218,54 +12661,25 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   gt_cv_func_ngettext_libc=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	gt_cv_func_ngettext_libc=no
++  gt_cv_func_ngettext_libc=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $gt_cv_func_ngettext_libc" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_ngettext_libc" >&5
+ $as_echo "$gt_cv_func_ngettext_libc" >&6; }
+ 
+       if test "$gt_cv_func_ngettext_libc" = "yes" ; then
+-	      { $as_echo "$as_me:$LINENO: checking for dgettext in libc" >&5
++	      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dgettext in libc" >&5
+ $as_echo_n "checking for dgettext in libc... " >&6; }
+-if test "${gt_cv_func_dgettext_libc+set}" = set; then
++if test "${gt_cv_func_dgettext_libc+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ #include <libintl.h>
+@@ -14278,141 +12692,26 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   gt_cv_func_dgettext_libc=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	gt_cv_func_dgettext_libc=no
++  gt_cv_func_dgettext_libc=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ 
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $gt_cv_func_dgettext_libc" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $gt_cv_func_dgettext_libc" >&5
+ $as_echo "$gt_cv_func_dgettext_libc" >&6; }
+       fi
+ 
+       if test "$gt_cv_func_ngettext_libc" = "yes" ; then
+-
+-for ac_func in bind_textdomain_codeset
+-do
+-as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
+-{ $as_echo "$as_me:$LINENO: checking for $ac_func" >&5
+-$as_echo_n "checking for $ac_func... " >&6; }
+-if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define $ac_func innocuous_$ac_func
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char $ac_func (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef $ac_func
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char $ac_func ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_$ac_func || defined __stub___$ac_func
+-choke me
+-#endif
+-
+-int
+-main ()
+-{
+-return $ac_func ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  eval "$as_ac_var=yes"
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_var=no"
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-fi
+-ac_res=`eval 'as_val=${'$as_ac_var'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
+-as_val=`eval 'as_val=${'$as_ac_var'}
+-		 $as_echo "$as_val"'`
+-   if test "x$as_val" = x""yes; then
++        for ac_func in bind_textdomain_codeset
++do :
++  ac_fn_c_check_func "$LINENO" "bind_textdomain_codeset" "ac_cv_func_bind_textdomain_codeset"
++if test "x$ac_cv_func_bind_textdomain_codeset" = x""yes; then :
+   cat >>confdefs.h <<_ACEOF
+-#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
++#define HAVE_BIND_TEXTDOMAIN_CODESET 1
+ _ACEOF
+ 
+ fi
+@@ -14427,18 +12726,14 @@
+ 	 || test "$gt_cv_func_ngettext_libc" != "yes" \
+          || test "$ac_cv_func_bind_textdomain_codeset" != "yes" ; then
+ 
+-        { $as_echo "$as_me:$LINENO: checking for bindtextdomain in -lintl" >&5
++        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for bindtextdomain in -lintl" >&5
+ $as_echo_n "checking for bindtextdomain in -lintl... " >&6; }
+-if test "${ac_cv_lib_intl_bindtextdomain+set}" = set; then
++if test "${ac_cv_lib_intl_bindtextdomain+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lintl  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -14456,55 +12751,26 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_intl_bindtextdomain=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_intl_bindtextdomain=no
++  ac_cv_lib_intl_bindtextdomain=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_intl_bindtextdomain" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_intl_bindtextdomain" >&5
+ $as_echo "$ac_cv_lib_intl_bindtextdomain" >&6; }
+-if test "x$ac_cv_lib_intl_bindtextdomain" = x""yes; then
+-  { $as_echo "$as_me:$LINENO: checking for ngettext in -lintl" >&5
++if test "x$ac_cv_lib_intl_bindtextdomain" = x""yes; then :
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ngettext in -lintl" >&5
+ $as_echo_n "checking for ngettext in -lintl... " >&6; }
+-if test "${ac_cv_lib_intl_ngettext+set}" = set; then
++if test "${ac_cv_lib_intl_ngettext+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lintl  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -14522,55 +12788,26 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_intl_ngettext=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_intl_ngettext=no
++  ac_cv_lib_intl_ngettext=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_intl_ngettext" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_intl_ngettext" >&5
+ $as_echo "$ac_cv_lib_intl_ngettext" >&6; }
+-if test "x$ac_cv_lib_intl_ngettext" = x""yes; then
+-  { $as_echo "$as_me:$LINENO: checking for dgettext in -lintl" >&5
++if test "x$ac_cv_lib_intl_ngettext" = x""yes; then :
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dgettext in -lintl" >&5
+ $as_echo_n "checking for dgettext in -lintl... " >&6; }
+-if test "${ac_cv_lib_intl_dgettext+set}" = set; then
++if test "${ac_cv_lib_intl_dgettext+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lintl  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -14588,43 +12825,18 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_intl_dgettext=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_intl_dgettext=no
++  ac_cv_lib_intl_dgettext=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_intl_dgettext" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_intl_dgettext" >&5
+ $as_echo "$ac_cv_lib_intl_dgettext" >&6; }
+-if test "x$ac_cv_lib_intl_dgettext" = x""yes; then
++if test "x$ac_cv_lib_intl_dgettext" = x""yes; then :
+   gt_cv_func_dgettext_libintl=yes
+ fi
+ 
+@@ -14634,22 +12846,18 @@
+ 
+ 
+ 	if test "$gt_cv_func_dgettext_libintl" != "yes" ; then
+-	  { $as_echo "$as_me:$LINENO: checking if -liconv is needed to use gettext" >&5
++	  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if -liconv is needed to use gettext" >&5
+ $as_echo_n "checking if -liconv is needed to use gettext... " >&6; }
+-	  { $as_echo "$as_me:$LINENO: result: " >&5
++	  { $as_echo "$as_me:${as_lineno-$LINENO}: result: " >&5
+ $as_echo "" >&6; }
+-  	  { $as_echo "$as_me:$LINENO: checking for ngettext in -lintl" >&5
++  	  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ngettext in -lintl" >&5
+ $as_echo_n "checking for ngettext in -lintl... " >&6; }
+-if test "${ac_cv_lib_intl_ngettext+set}" = set; then
++if test "${ac_cv_lib_intl_ngettext+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lintl -liconv $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -14667,55 +12875,26 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_intl_ngettext=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_intl_ngettext=no
++  ac_cv_lib_intl_ngettext=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_intl_ngettext" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_intl_ngettext" >&5
+ $as_echo "$ac_cv_lib_intl_ngettext" >&6; }
+-if test "x$ac_cv_lib_intl_ngettext" = x""yes; then
+-  { $as_echo "$as_me:$LINENO: checking for dcgettext in -lintl" >&5
++if test "x$ac_cv_lib_intl_ngettext" = x""yes; then :
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dcgettext in -lintl" >&5
+ $as_echo_n "checking for dcgettext in -lintl... " >&6; }
+-if test "${ac_cv_lib_intl_dcgettext+set}" = set; then
++if test "${ac_cv_lib_intl_dcgettext+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lintl -liconv $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -14733,43 +12912,18 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_intl_dcgettext=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_intl_dcgettext=no
++  ac_cv_lib_intl_dcgettext=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_intl_dcgettext" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_intl_dcgettext" >&5
+ $as_echo "$ac_cv_lib_intl_dcgettext" >&6; }
+-if test "x$ac_cv_lib_intl_dcgettext" = x""yes; then
++if test "x$ac_cv_lib_intl_dcgettext" = x""yes; then :
+   gt_cv_func_dgettext_libintl=yes
+ 			libintl_extra_libs=-liconv
+ else
+@@ -14791,108 +12945,18 @@
+           glib_save_LIBS="$LIBS"
+           LIBS="$LIBS -lintl $libintl_extra_libs"
+           unset ac_cv_func_bind_textdomain_codeset
+-
+-for ac_func in bind_textdomain_codeset
+-do
+-as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
+-{ $as_echo "$as_me:$LINENO: checking for $ac_func" >&5
+-$as_echo_n "checking for $ac_func... " >&6; }
+-if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
++          for ac_func in bind_textdomain_codeset
++do :
++  ac_fn_c_check_func "$LINENO" "bind_textdomain_codeset" "ac_cv_func_bind_textdomain_codeset"
++if test "x$ac_cv_func_bind_textdomain_codeset" = x""yes; then :
++  cat >>confdefs.h <<_ACEOF
++#define HAVE_BIND_TEXTDOMAIN_CODESET 1
+ _ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define $ac_func innocuous_$ac_func
+ 
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char $ac_func (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
++fi
++done
+ 
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef $ac_func
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char $ac_func ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_$ac_func || defined __stub___$ac_func
+-choke me
+-#endif
+-
+-int
+-main ()
+-{
+-return $ac_func ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  eval "$as_ac_var=yes"
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_var=no"
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-fi
+-ac_res=`eval 'as_val=${'$as_ac_var'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
+-as_val=`eval 'as_val=${'$as_ac_var'}
+-		 $as_echo "$as_val"'`
+-   if test "x$as_val" = x""yes; then
+-  cat >>confdefs.h <<_ACEOF
+-#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
+-_ACEOF
+-
+-fi
+-done
+-
+-          LIBS="$glib_save_LIBS"
++          LIBS="$glib_save_LIBS"
+ 
+           if test "$ac_cv_func_bind_textdomain_codeset" = "yes" ; then
+             gt_cv_func_dgettext_libc=no
+@@ -14916,15 +12980,13 @@
+ 
+       if test "$gt_cv_have_gettext" = "yes"; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_GETTEXT 1
+-_ACEOF
++$as_echo "#define HAVE_GETTEXT 1" >>confdefs.h
+ 
+ 	# Extract the first word of "msgfmt", so it can be a program name with args.
+ set dummy msgfmt; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_MSGFMT+set}" = set; then
++if test "${ac_cv_path_MSGFMT+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case "$MSGFMT" in
+@@ -14949,118 +13011,28 @@
+ fi
+ MSGFMT="$ac_cv_path_MSGFMT"
+ if test "$MSGFMT" != "no"; then
+-  { $as_echo "$as_me:$LINENO: result: $MSGFMT" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MSGFMT" >&5
+ $as_echo "$MSGFMT" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 	if test "$MSGFMT" != "no"; then
+           glib_save_LIBS="$LIBS"
+           LIBS="$LIBS $INTLLIBS"
+-
+-for ac_func in dcgettext
+-do
+-as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
+-{ $as_echo "$as_me:$LINENO: checking for $ac_func" >&5
+-$as_echo_n "checking for $ac_func... " >&6; }
+-if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define $ac_func innocuous_$ac_func
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char $ac_func (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef $ac_func
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char $ac_func ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_$ac_func || defined __stub___$ac_func
+-choke me
+-#endif
+-
+-int
+-main ()
+-{
+-return $ac_func ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  eval "$as_ac_var=yes"
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_var=no"
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-fi
+-ac_res=`eval 'as_val=${'$as_ac_var'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
+-as_val=`eval 'as_val=${'$as_ac_var'}
+-		 $as_echo "$as_val"'`
+-   if test "x$as_val" = x""yes; then
++	  for ac_func in dcgettext
++do :
++  ac_fn_c_check_func "$LINENO" "dcgettext" "ac_cv_func_dcgettext"
++if test "x$ac_cv_func_dcgettext" = x""yes; then :
+   cat >>confdefs.h <<_ACEOF
+-#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
++#define HAVE_DCGETTEXT 1
+ _ACEOF
+ 
+ fi
+ done
+ 
+ 	  MSGFMT_OPTS=
+-	  { $as_echo "$as_me:$LINENO: checking if msgfmt accepts -c" >&5
++	  { $as_echo "$as_me:${as_lineno-$LINENO}: checking if msgfmt accepts -c" >&5
+ $as_echo_n "checking if msgfmt accepts -c... " >&6; }
+ 	  cat >conftest.foo <<_ACEOF
+ 
+@@ -15075,14 +13047,14 @@
+ "Content-Transfer-Encoding: 8bit\n"
+ 
+ _ACEOF
+-if { ($as_echo "$as_me:$LINENO: \$MSGFMT -c -o /dev/null conftest.foo") >&5
++if { { $as_echo "$as_me:${as_lineno-$LINENO}: \$MSGFMT -c -o /dev/null conftest.foo"; } >&5
+   ($MSGFMT -c -o /dev/null conftest.foo) 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
+-  MSGFMT_OPTS=-c; { $as_echo "$as_me:$LINENO: result: yes" >&5
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
++  MSGFMT_OPTS=-c; { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+-else { $as_echo "$as_me:$LINENO: result: no" >&5
++else { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ echo "$as_me: failed input was:" >&5
+ sed 's/^/| /' conftest.foo >&5
+@@ -15090,9 +13062,9 @@
+ 
+ 	  # Extract the first word of "gmsgfmt", so it can be a program name with args.
+ set dummy gmsgfmt; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_GMSGFMT+set}" = set; then
++if test "${ac_cv_path_GMSGFMT+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $GMSGFMT in
+@@ -15105,14 +13077,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_GMSGFMT="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   test -z "$ac_cv_path_GMSGFMT" && ac_cv_path_GMSGFMT="$MSGFMT"
+@@ -15121,19 +13093,19 @@
+ fi
+ GMSGFMT=$ac_cv_path_GMSGFMT
+ if test -n "$GMSGFMT"; then
+-  { $as_echo "$as_me:$LINENO: result: $GMSGFMT" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $GMSGFMT" >&5
+ $as_echo "$GMSGFMT" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ 	  # Extract the first word of "xgettext", so it can be a program name with args.
+ set dummy xgettext; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_XGETTEXT+set}" = set; then
++if test "${ac_cv_path_XGETTEXT+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case "$XGETTEXT" in
+@@ -15158,18 +13130,14 @@
+ fi
+ XGETTEXT="$ac_cv_path_XGETTEXT"
+ if test "$XGETTEXT" != ":"; then
+-  { $as_echo "$as_me:$LINENO: result: $XGETTEXT" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $XGETTEXT" >&5
+ $as_echo "$XGETTEXT" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+-	  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++	  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -15181,121 +13149,14 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   CATOBJEXT=.gmo
+              DATADIRNAME=share
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	case $host in
++  case $host in
+ 	    *-*-solaris*)
+-	    	                	    	                { $as_echo "$as_me:$LINENO: checking for bind_textdomain_codeset" >&5
+-$as_echo_n "checking for bind_textdomain_codeset... " >&6; }
+-if test "${ac_cv_func_bind_textdomain_codeset+set}" = set; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-/* Define bind_textdomain_codeset to an innocuous variant, in case <limits.h> declares bind_textdomain_codeset.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define bind_textdomain_codeset innocuous_bind_textdomain_codeset
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char bind_textdomain_codeset (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef bind_textdomain_codeset
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char bind_textdomain_codeset ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_bind_textdomain_codeset || defined __stub___bind_textdomain_codeset
+-choke me
+-#endif
+-
+-int
+-main ()
+-{
+-return bind_textdomain_codeset ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  ac_cv_func_bind_textdomain_codeset=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_func_bind_textdomain_codeset=no
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_func_bind_textdomain_codeset" >&5
+-$as_echo "$ac_cv_func_bind_textdomain_codeset" >&6; }
+-if test "x$ac_cv_func_bind_textdomain_codeset" = x""yes; then
++	    	                	    	                ac_fn_c_check_func "$LINENO" "bind_textdomain_codeset" "ac_cv_func_bind_textdomain_codeset"
++if test "x$ac_cv_func_bind_textdomain_codeset" = x""yes; then :
+   CATOBJEXT=.gmo
+                DATADIRNAME=share
+ else
+@@ -15310,10 +13171,8 @@
+ 	    ;;
+ 	    esac
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+           LIBS="$glib_save_LIBS"
+ 	  INSTOBJEXT=.mo
+ 	else
+@@ -15327,9 +13186,7 @@
+ 
+     if test "$gt_cv_have_gettext" = "yes" ; then
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define ENABLE_NLS 1
+-_ACEOF
++$as_echo "#define ENABLE_NLS 1" >>confdefs.h
+ 
+     fi
+ 
+@@ -15337,7 +13194,7 @@
+                   if $XGETTEXT --omit-header /dev/null 2> /dev/null; then
+         : ;
+       else
+-        { $as_echo "$as_me:$LINENO: result: found xgettext program is not GNU xgettext; ignore it" >&5
++        { $as_echo "$as_me:${as_lineno-$LINENO}: result: found xgettext program is not GNU xgettext; ignore it" >&5
+ $as_echo "found xgettext program is not GNU xgettext; ignore it" >&6; }
+         XGETTEXT=":"
+       fi
+@@ -15370,7 +13227,7 @@
+      if test "x$ALL_LINGUAS" = "x"; then
+        LINGUAS=
+      else
+-       { $as_echo "$as_me:$LINENO: checking for catalogs to be installed" >&5
++       { $as_echo "$as_me:${as_lineno-$LINENO}: checking for catalogs to be installed" >&5
+ $as_echo_n "checking for catalogs to be installed... " >&6; }
+        NEW_LINGUAS=
+        for presentlang in $ALL_LINGUAS; do
+@@ -15395,7 +13252,7 @@
+          fi
+        done
+        LINGUAS=$NEW_LINGUAS
+-       { $as_echo "$as_me:$LINENO: result: $LINGUAS" >&5
++       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LINGUAS" >&5
+ $as_echo "$LINGUAS" >&6; }
+      fi
+ 
+@@ -15449,16 +13306,16 @@
+ 
+ 
+ 
+-  { $as_echo "$as_me:$LINENO: checking whether NLS is requested" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether NLS is requested" >&5
+ $as_echo_n "checking whether NLS is requested... " >&6; }
+     # Check whether --enable-nls was given.
+-if test "${enable_nls+set}" = set; then
++if test "${enable_nls+set}" = set; then :
+   enableval=$enable_nls; USE_NLS=$enableval
+ else
+   USE_NLS=yes
+ fi
+ 
+-  { $as_echo "$as_me:$LINENO: result: $USE_NLS" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $USE_NLS" >&5
+ $as_echo "$USE_NLS" >&6; }
+ 
+ 
+@@ -15466,35 +13323,31 @@
+ 
+ case "$am__api_version" in
+     1.01234)
+-	{ { $as_echo "$as_me:$LINENO: error: Automake 1.5 or newer is required to use intltool" >&5
+-$as_echo "$as_me: error: Automake 1.5 or newer is required to use intltool" >&2;}
+-   { (exit 1); exit 1; }; }
++	as_fn_error "Automake 1.5 or newer is required to use intltool" "$LINENO" 5
+     ;;
+     *)
+     ;;
+ esac
+ 
+ if test -n "0.40.1"; then
+-    { $as_echo "$as_me:$LINENO: checking for intltool >= 0.40.1" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for intltool >= 0.40.1" >&5
+ $as_echo_n "checking for intltool >= 0.40.1... " >&6; }
+ 
+     INTLTOOL_REQUIRED_VERSION_AS_INT=`echo 0.40.1 | awk -F. '{ print $ 1 * 1000 + $ 2 * 100 + $ 3; }'`
+     INTLTOOL_APPLIED_VERSION=`intltool-update --version | head -1 | cut -d" " -f3`
+     INTLTOOL_APPLIED_VERSION_AS_INT=`echo $INTLTOOL_APPLIED_VERSION | awk -F. '{ print $ 1 * 1000 + $ 2 * 100 + $ 3; }'`
+ 
+-    { $as_echo "$as_me:$LINENO: result: $INTLTOOL_APPLIED_VERSION found" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $INTLTOOL_APPLIED_VERSION found" >&5
+ $as_echo "$INTLTOOL_APPLIED_VERSION found" >&6; }
+     test "$INTLTOOL_APPLIED_VERSION_AS_INT" -ge "$INTLTOOL_REQUIRED_VERSION_AS_INT" ||
+-	{ { $as_echo "$as_me:$LINENO: error: Your intltool is too old.  You need intltool 0.40.1 or later." >&5
+-$as_echo "$as_me: error: Your intltool is too old.  You need intltool 0.40.1 or later." >&2;}
+-   { (exit 1); exit 1; }; }
++	as_fn_error "Your intltool is too old.  You need intltool 0.40.1 or later." "$LINENO" 5
+ fi
+ 
+ # Extract the first word of "intltool-update", so it can be a program name with args.
+ set dummy intltool-update; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_INTLTOOL_UPDATE+set}" = set; then
++if test "${ac_cv_path_INTLTOOL_UPDATE+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $INTLTOOL_UPDATE in
+@@ -15507,14 +13360,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_INTLTOOL_UPDATE="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -15522,19 +13375,19 @@
+ fi
+ INTLTOOL_UPDATE=$ac_cv_path_INTLTOOL_UPDATE
+ if test -n "$INTLTOOL_UPDATE"; then
+-  { $as_echo "$as_me:$LINENO: result: $INTLTOOL_UPDATE" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $INTLTOOL_UPDATE" >&5
+ $as_echo "$INTLTOOL_UPDATE" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ # Extract the first word of "intltool-merge", so it can be a program name with args.
+ set dummy intltool-merge; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_INTLTOOL_MERGE+set}" = set; then
++if test "${ac_cv_path_INTLTOOL_MERGE+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $INTLTOOL_MERGE in
+@@ -15547,14 +13400,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_INTLTOOL_MERGE="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -15562,19 +13415,19 @@
+ fi
+ INTLTOOL_MERGE=$ac_cv_path_INTLTOOL_MERGE
+ if test -n "$INTLTOOL_MERGE"; then
+-  { $as_echo "$as_me:$LINENO: result: $INTLTOOL_MERGE" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $INTLTOOL_MERGE" >&5
+ $as_echo "$INTLTOOL_MERGE" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ # Extract the first word of "intltool-extract", so it can be a program name with args.
+ set dummy intltool-extract; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_INTLTOOL_EXTRACT+set}" = set; then
++if test "${ac_cv_path_INTLTOOL_EXTRACT+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $INTLTOOL_EXTRACT in
+@@ -15587,14 +13440,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_INTLTOOL_EXTRACT="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -15602,18 +13455,16 @@
+ fi
+ INTLTOOL_EXTRACT=$ac_cv_path_INTLTOOL_EXTRACT
+ if test -n "$INTLTOOL_EXTRACT"; then
+-  { $as_echo "$as_me:$LINENO: result: $INTLTOOL_EXTRACT" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $INTLTOOL_EXTRACT" >&5
+ $as_echo "$INTLTOOL_EXTRACT" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ if test -z "$INTLTOOL_UPDATE" -o -z "$INTLTOOL_MERGE" -o -z "$INTLTOOL_EXTRACT"; then
+-    { { $as_echo "$as_me:$LINENO: error: The intltool scripts were not found. Please install intltool." >&5
+-$as_echo "$as_me: error: The intltool scripts were not found. Please install intltool." >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error "The intltool scripts were not found. Please install intltool." "$LINENO" 5
+ fi
+ 
+   INTLTOOL_DESKTOP_RULE='%.desktop:   %.desktop.in   $(INTLTOOL_MERGE) $(wildcard $(top_srcdir)/po/*.po) ; LC_ALL=C $(INTLTOOL_MERGE) -d -u -c $(top_builddir)/po/.intltool-merge-cache $(top_srcdir)/po $< $@'
+@@ -15735,9 +13586,9 @@
+ # Check the gettext tools to make sure they are GNU
+ # Extract the first word of "xgettext", so it can be a program name with args.
+ set dummy xgettext; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_XGETTEXT+set}" = set; then
++if test "${ac_cv_path_XGETTEXT+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $XGETTEXT in
+@@ -15750,14 +13601,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_XGETTEXT="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -15765,19 +13616,19 @@
+ fi
+ XGETTEXT=$ac_cv_path_XGETTEXT
+ if test -n "$XGETTEXT"; then
+-  { $as_echo "$as_me:$LINENO: result: $XGETTEXT" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $XGETTEXT" >&5
+ $as_echo "$XGETTEXT" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ # Extract the first word of "msgmerge", so it can be a program name with args.
+ set dummy msgmerge; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_MSGMERGE+set}" = set; then
++if test "${ac_cv_path_MSGMERGE+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $MSGMERGE in
+@@ -15790,14 +13641,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_MSGMERGE="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -15805,19 +13656,19 @@
+ fi
+ MSGMERGE=$ac_cv_path_MSGMERGE
+ if test -n "$MSGMERGE"; then
+-  { $as_echo "$as_me:$LINENO: result: $MSGMERGE" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MSGMERGE" >&5
+ $as_echo "$MSGMERGE" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ # Extract the first word of "msgfmt", so it can be a program name with args.
+ set dummy msgfmt; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_MSGFMT+set}" = set; then
++if test "${ac_cv_path_MSGFMT+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $MSGFMT in
+@@ -15830,14 +13681,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_MSGFMT="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -15845,19 +13696,19 @@
+ fi
+ MSGFMT=$ac_cv_path_MSGFMT
+ if test -n "$MSGFMT"; then
+-  { $as_echo "$as_me:$LINENO: result: $MSGFMT" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MSGFMT" >&5
+ $as_echo "$MSGFMT" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ # Extract the first word of "gmsgfmt", so it can be a program name with args.
+ set dummy gmsgfmt; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_GMSGFMT+set}" = set; then
++if test "${ac_cv_path_GMSGFMT+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $GMSGFMT in
+@@ -15870,14 +13721,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_GMSGFMT="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   test -z "$ac_cv_path_GMSGFMT" && ac_cv_path_GMSGFMT="$MSGFMT"
+@@ -15886,33 +13737,29 @@
+ fi
+ GMSGFMT=$ac_cv_path_GMSGFMT
+ if test -n "$GMSGFMT"; then
+-  { $as_echo "$as_me:$LINENO: result: $GMSGFMT" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $GMSGFMT" >&5
+ $as_echo "$GMSGFMT" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ if test -z "$XGETTEXT" -o -z "$MSGMERGE" -o -z "$MSGFMT"; then
+-    { { $as_echo "$as_me:$LINENO: error: GNU gettext tools not found; required for intltool" >&5
+-$as_echo "$as_me: error: GNU gettext tools not found; required for intltool" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error "GNU gettext tools not found; required for intltool" "$LINENO" 5
+ fi
+ xgversion="`$XGETTEXT --version|grep '(GNU ' 2> /dev/null`"
+ mmversion="`$MSGMERGE --version|grep '(GNU ' 2> /dev/null`"
+ mfversion="`$MSGFMT --version|grep '(GNU ' 2> /dev/null`"
+ if test -z "$xgversion" -o -z "$mmversion" -o -z "$mfversion"; then
+-    { { $as_echo "$as_me:$LINENO: error: GNU gettext tools not found; required for intltool" >&5
+-$as_echo "$as_me: error: GNU gettext tools not found; required for intltool" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error "GNU gettext tools not found; required for intltool" "$LINENO" 5
+ fi
+ 
+ # Extract the first word of "perl", so it can be a program name with args.
+ set dummy perl; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_INTLTOOL_PERL+set}" = set; then
++if test "${ac_cv_path_INTLTOOL_PERL+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $INTLTOOL_PERL in
+@@ -15925,14 +13772,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_INTLTOOL_PERL="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -15940,41 +13787,35 @@
+ fi
+ INTLTOOL_PERL=$ac_cv_path_INTLTOOL_PERL
+ if test -n "$INTLTOOL_PERL"; then
+-  { $as_echo "$as_me:$LINENO: result: $INTLTOOL_PERL" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $INTLTOOL_PERL" >&5
+ $as_echo "$INTLTOOL_PERL" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ if test -z "$INTLTOOL_PERL"; then
+-   { { $as_echo "$as_me:$LINENO: error: perl not found" >&5
+-$as_echo "$as_me: error: perl not found" >&2;}
+-   { (exit 1); exit 1; }; }
++   as_fn_error "perl not found" "$LINENO" 5
+ fi
+-{ $as_echo "$as_me:$LINENO: checking for perl >= 5.8.1" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for perl >= 5.8.1" >&5
+ $as_echo_n "checking for perl >= 5.8.1... " >&6; }
+ $INTLTOOL_PERL -e "use 5.8.1;" > /dev/null 2>&1
+ if test $? -ne 0; then
+-   { { $as_echo "$as_me:$LINENO: error: perl 5.8.1 is required for intltool" >&5
+-$as_echo "$as_me: error: perl 5.8.1 is required for intltool" >&2;}
+-   { (exit 1); exit 1; }; }
++   as_fn_error "perl 5.8.1 is required for intltool" "$LINENO" 5
+ else
+    IT_PERL_VERSION="`$INTLTOOL_PERL -e \"printf '%vd', $^V\"`"
+-   { $as_echo "$as_me:$LINENO: result: $IT_PERL_VERSION" >&5
++   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $IT_PERL_VERSION" >&5
+ $as_echo "$IT_PERL_VERSION" >&6; }
+ fi
+ if test "x" != "xno-xml"; then
+-   { $as_echo "$as_me:$LINENO: checking for XML::Parser" >&5
++   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for XML::Parser" >&5
+ $as_echo_n "checking for XML::Parser... " >&6; }
+    if `$INTLTOOL_PERL -e "require XML::Parser" 2>/dev/null`; then
+-       { $as_echo "$as_me:$LINENO: result: ok" >&5
++       { $as_echo "$as_me:${as_lineno-$LINENO}: result: ok" >&5
+ $as_echo "ok" >&6; }
+    else
+-       { { $as_echo "$as_me:$LINENO: error: XML::Parser perl module is required for intltool" >&5
+-$as_echo "$as_me: error: XML::Parser perl module is required for intltool" >&2;}
+-   { (exit 1); exit 1; }; }
++       as_fn_error "XML::Parser perl module is required for intltool" "$LINENO" 5
+    fi
+ fi
+ 
+@@ -15984,11 +13825,7 @@
+ # Set DATADIRNAME correctly if it is not set yet
+ # (copied from glib-gettext.m4)
+ if test -z "$DATADIRNAME"; then
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -16000,136 +13837,27 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   DATADIRNAME=share
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	case $host in
++  case $host in
+     *-*-solaris*)
+-                        { $as_echo "$as_me:$LINENO: checking for bind_textdomain_codeset" >&5
+-$as_echo_n "checking for bind_textdomain_codeset... " >&6; }
+-if test "${ac_cv_func_bind_textdomain_codeset+set}" = set; then
+-  $as_echo_n "(cached) " >&6
++                        ac_fn_c_check_func "$LINENO" "bind_textdomain_codeset" "ac_cv_func_bind_textdomain_codeset"
++if test "x$ac_cv_func_bind_textdomain_codeset" = x""yes; then :
++  DATADIRNAME=share
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-/* Define bind_textdomain_codeset to an innocuous variant, in case <limits.h> declares bind_textdomain_codeset.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define bind_textdomain_codeset innocuous_bind_textdomain_codeset
++  DATADIRNAME=lib
++fi
+ 
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char bind_textdomain_codeset (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef bind_textdomain_codeset
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char bind_textdomain_codeset ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_bind_textdomain_codeset || defined __stub___bind_textdomain_codeset
+-choke me
+-#endif
+-
+-int
+-main ()
+-{
+-return bind_textdomain_codeset ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  ac_cv_func_bind_textdomain_codeset=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_func_bind_textdomain_codeset=no
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_func_bind_textdomain_codeset" >&5
+-$as_echo "$ac_cv_func_bind_textdomain_codeset" >&6; }
+-if test "x$ac_cv_func_bind_textdomain_codeset" = x""yes; then
+-  DATADIRNAME=share
+-else
+-  DATADIRNAME=lib
+-fi
+-
+-    ;;
+-    *)
+-    DATADIRNAME=lib
+-    ;;
+-    esac
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-fi
++    ;;
++    *)
++    DATADIRNAME=lib
++    ;;
++    esac
++fi
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
++fi
+ 
+ 
+ 
+@@ -16141,9 +13869,9 @@
+ 
+     # Extract the first word of "gtkdoc-check", so it can be a program name with args.
+ set dummy gtkdoc-check; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_GTKDOC_CHECK+set}" = set; then
++if test "${ac_cv_path_GTKDOC_CHECK+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $GTKDOC_CHECK in
+@@ -16156,14 +13884,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_GTKDOC_CHECK="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -16171,10 +13899,10 @@
+ fi
+ GTKDOC_CHECK=$ac_cv_path_GTKDOC_CHECK
+ if test -n "$GTKDOC_CHECK"; then
+-  { $as_echo "$as_me:$LINENO: result: $GTKDOC_CHECK" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $GTKDOC_CHECK" >&5
+ $as_echo "$GTKDOC_CHECK" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -16183,9 +13911,9 @@
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_GTKDOC_REBASE+set}" = set; then
++if test "${ac_cv_path_GTKDOC_REBASE+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $GTKDOC_REBASE in
+@@ -16198,14 +13926,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_GTKDOC_REBASE="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -16213,10 +13941,10 @@
+ fi
+ GTKDOC_REBASE=$ac_cv_path_GTKDOC_REBASE
+ if test -n "$GTKDOC_REBASE"; then
+-  { $as_echo "$as_me:$LINENO: result: $GTKDOC_REBASE" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $GTKDOC_REBASE" >&5
+ $as_echo "$GTKDOC_REBASE" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -16227,9 +13955,9 @@
+ 
+   # Extract the first word of "gtkdoc-mkpdf", so it can be a program name with args.
+ set dummy gtkdoc-mkpdf; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_GTKDOC_MKPDF+set}" = set; then
++if test "${ac_cv_path_GTKDOC_MKPDF+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $GTKDOC_MKPDF in
+@@ -16242,14 +13970,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_GTKDOC_MKPDF="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -16257,10 +13985,10 @@
+ fi
+ GTKDOC_MKPDF=$ac_cv_path_GTKDOC_MKPDF
+ if test -n "$GTKDOC_MKPDF"; then
+-  { $as_echo "$as_me:$LINENO: result: $GTKDOC_MKPDF" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $GTKDOC_MKPDF" >&5
+ $as_echo "$GTKDOC_MKPDF" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -16268,7 +13996,7 @@
+ 
+ 
+ # Check whether --with-html-dir was given.
+-if test "${with_html_dir+set}" = set; then
++if test "${with_html_dir+set}" = set; then :
+   withval=$with_html_dir;
+ else
+   with_html_dir='${datadir}/gtk-doc/html'
+@@ -16278,7 +14006,7 @@
+ 
+ 
+     # Check whether --enable-gtk-doc was given.
+-if test "${enable_gtk_doc+set}" = set; then
++if test "${enable_gtk_doc+set}" = set; then :
+   enableval=$enable_gtk_doc;
+ else
+   enable_gtk_doc=no
+@@ -16287,33 +14015,31 @@
+ 
+   if test x$enable_gtk_doc = xyes; then
+     if test -n "$PKG_CONFIG" && \
+-    { ($as_echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"gtk-doc >= 1.4\"") >&5
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"gtk-doc >= 1.4\""; } >&5
+   ($PKG_CONFIG --exists --print-errors "gtk-doc >= 1.4") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+   :
+ else
+-  { { $as_echo "$as_me:$LINENO: error: You need to have gtk-doc >= 1.4 installed to build $PACKAGE_NAME" >&5
+-$as_echo "$as_me: error: You need to have gtk-doc >= 1.4 installed to build $PACKAGE_NAME" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "You need to have gtk-doc >= 1.4 installed to build $PACKAGE_NAME" "$LINENO" 5
+ fi
+   fi
+ 
+-  { $as_echo "$as_me:$LINENO: checking whether to build gtk-doc documentation" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to build gtk-doc documentation" >&5
+ $as_echo_n "checking whether to build gtk-doc documentation... " >&6; }
+-  { $as_echo "$as_me:$LINENO: result: $enable_gtk_doc" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_gtk_doc" >&5
+ $as_echo "$enable_gtk_doc" >&6; }
+ 
+     # Check whether --enable-gtk-doc-html was given.
+-if test "${enable_gtk_doc_html+set}" = set; then
++if test "${enable_gtk_doc_html+set}" = set; then :
+   enableval=$enable_gtk_doc_html;
+ else
+   enable_gtk_doc_html=yes
+ fi
+ 
+     # Check whether --enable-gtk-doc-pdf was given.
+-if test "${enable_gtk_doc_pdf+set}" = set; then
++if test "${enable_gtk_doc_pdf+set}" = set; then :
+   enableval=$enable_gtk_doc_pdf;
+ else
+   enable_gtk_doc_pdf=no
+@@ -16370,12 +14096,10 @@
+ 
+ ENABLE_PROFILER=
+ # Check whether --enable-profiler was given.
+-if test "${enable_profiler+set}" = set; then
++if test "${enable_profiler+set}" = set; then :
+   enableval=$enable_profiler; ENABLE_PROFILER=1
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define ENABLE_PROFILER 1
+-_ACEOF
++$as_echo "#define ENABLE_PROFILER 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -16403,9 +14127,9 @@
+ do
+   # Extract the first word of "$ac_prog", so it can be a program name with args.
+ set dummy $ac_prog; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_prog_PERL+set}" = set; then
++if test "${ac_cv_prog_PERL+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   if test -n "$PERL"; then
+@@ -16416,24 +14140,24 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_prog_PERL="$ac_prog"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+ fi
+ fi
+ PERL=$ac_cv_prog_PERL
+ if test -n "$PERL"; then
+-  { $as_echo "$as_me:$LINENO: result: $PERL" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $PERL" >&5
+ $as_echo "$PERL" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+@@ -16443,9 +14167,9 @@
+ 
+ # Extract the first word of "glib-genmarshal", so it can be a program name with args.
+ set dummy glib-genmarshal; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_GLIB_GENMARSHAL+set}" = set; then
++if test "${ac_cv_path_GLIB_GENMARSHAL+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $GLIB_GENMARSHAL in
+@@ -16458,14 +14182,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_GLIB_GENMARSHAL="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   ;;
+@@ -16473,162 +14197,22 @@
+ fi
+ GLIB_GENMARSHAL=$ac_cv_path_GLIB_GENMARSHAL
+ if test -n "$GLIB_GENMARSHAL"; then
+-  { $as_echo "$as_me:$LINENO: result: $GLIB_GENMARSHAL" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $GLIB_GENMARSHAL" >&5
+ $as_echo "$GLIB_GENMARSHAL" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ 
+ 
+-
+-
+-
+-
+ for ac_header in sys/mount.h sys/vfs.h sys/param.h malloc.h
+-do
+-as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  { $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
+-$as_echo_n "checking for $ac_header... " >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
+-fi
+-ac_res=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
+-else
+-  # Is the header compilable?
+-{ $as_echo "$as_me:$LINENO: checking $ac_header usability" >&5
+-$as_echo_n "checking $ac_header usability... " >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <$ac_header>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ $as_echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-$as_echo "$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ $as_echo "$as_me:$LINENO: checking $ac_header presence" >&5
+-$as_echo_n "checking $ac_header presence... " >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <$ac_header>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
+-fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ $as_echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-$as_echo "$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+-  yes:no: )
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+-$as_echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+-$as_echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+-$as_echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+-$as_echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+-$as_echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+-$as_echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+-$as_echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+-$as_echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+-    ( cat <<\_ASBOX
+-## ----------------------------------------------------------------------- ##
+-## Report this to http://bugzilla.gnome.org/enter_bug.cgi?product=nautilus ##
+-## ----------------------------------------------------------------------- ##
+-_ASBOX
+-     ) | sed "s/^/$as_me: WARNING:     /" >&2
+-    ;;
+-esac
+-{ $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
+-$as_echo_n "checking for $ac_header... " >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  eval "$as_ac_Header=\$ac_header_preproc"
+-fi
+-ac_res=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
+-
+-fi
+-as_val=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-   if test "x$as_val" = x""yes; then
++do :
++  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
++ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
++eval as_val=\$$as_ac_Header
++   if test "x$as_val" = x""yes; then :
+   cat >>confdefs.h <<_ACEOF
+ #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
+ _ACEOF
+@@ -16637,102 +14221,12 @@
+ 
+ done
+ 
+-
+ for ac_func in mallopt
+-do
+-as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
+-{ $as_echo "$as_me:$LINENO: checking for $ac_func" >&5
+-$as_echo_n "checking for $ac_func... " >&6; }
+-if { as_var=$as_ac_var; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define $ac_func innocuous_$ac_func
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char $ac_func (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef $ac_func
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char $ac_func ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_$ac_func || defined __stub___$ac_func
+-choke me
+-#endif
+-
+-int
+-main ()
+-{
+-return $ac_func ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  eval "$as_ac_var=yes"
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	eval "$as_ac_var=no"
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-fi
+-ac_res=`eval 'as_val=${'$as_ac_var'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
+-as_val=`eval 'as_val=${'$as_ac_var'}
+-		 $as_echo "$as_val"'`
+-   if test "x$as_val" = x""yes; then
++do :
++  ac_fn_c_check_func "$LINENO" "mallopt" "ac_cv_func_mallopt"
++if test "x$ac_cv_func_mallopt" = x""yes; then :
+   cat >>confdefs.h <<_ACEOF
+-#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
++#define HAVE_MALLOPT 1
+ _ACEOF
+ 
+ fi
+@@ -16750,12 +14244,12 @@
+ x_extra_libs=
+ 
+ if test $pango_omitted_x_deps = yes ; then
+-  { $as_echo "$as_me:$LINENO: checking for X" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for X" >&5
+ $as_echo_n "checking for X... " >&6; }
+ 
+ 
+ # Check whether --with-x was given.
+-if test "${with_x+set}" = set; then
++if test "${with_x+set}" = set; then :
+   withval=$with_x;
+ fi
+ 
+@@ -16765,10 +14259,8 @@
+   have_x=disabled
+ else
+   case $x_includes,$x_libraries in #(
+-    *\'*) { { $as_echo "$as_me:$LINENO: error: cannot use X directory names containing '" >&5
+-$as_echo "$as_me: error: cannot use X directory names containing '" >&2;}
+-   { (exit 1); exit 1; }; };; #(
+-    *,NONE | NONE,*) if test "${ac_cv_have_x+set}" = set; then
++    *\'*) as_fn_error "cannot use X directory names containing '" "$LINENO" 5;; #(
++    *,NONE | NONE,*) if test "${ac_cv_have_x+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   # One or both of the vars are not set, and there is no cached value.
+@@ -16816,21 +14308,25 @@
+ # Check X11 before X11Rn because it is often a symlink to the current release.
+ ac_x_header_dirs='
+ /usr/X11/include
++/usr/X11R7/include
+ /usr/X11R6/include
+ /usr/X11R5/include
+ /usr/X11R4/include
+ 
+ /usr/include/X11
++/usr/include/X11R7
+ /usr/include/X11R6
+ /usr/include/X11R5
+ /usr/include/X11R4
+ 
+ /usr/local/X11/include
++/usr/local/X11R7/include
+ /usr/local/X11R6/include
+ /usr/local/X11R5/include
+ /usr/local/X11R4/include
+ 
+ /usr/local/include/X11
++/usr/local/include/X11R7
+ /usr/local/include/X11R6
+ /usr/local/include/X11R5
+ /usr/local/include/X11R4
+@@ -16852,37 +14348,14 @@
+ if test "$ac_x_includes" = no; then
+   # Guess where to find include files, by looking for Xlib.h.
+   # First, try using that file with no special directory specified.
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <X11/Xlib.h>
+ _ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
++if ac_fn_c_try_cpp "$LINENO"; then :
+   # We can compile using X headers with no special include directory.
+ ac_x_includes=
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+   for ac_dir in $ac_x_header_dirs; do
+   if test -r "$ac_dir/X11/Xlib.h"; then
+     ac_x_includes=$ac_dir
+@@ -16890,7 +14363,6 @@
+   fi
+ done
+ fi
+-
+ rm -f conftest.err conftest.$ac_ext
+ fi # $ac_x_includes = no
+ 
+@@ -16900,11 +14372,7 @@
+   # Don't add to $LIBS permanently.
+   ac_save_LIBS=$LIBS
+   LIBS="-lX11 $LIBS"
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <X11/Xlib.h>
+ int
+@@ -16915,35 +14383,12 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   LIBS=$ac_save_LIBS
+ # We can link X programs with no special library path.
+ ac_x_libraries=
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	LIBS=$ac_save_LIBS
++  LIBS=$ac_save_LIBS
+ for ac_dir in `$as_echo "$ac_x_includes $ac_x_header_dirs" | sed s/include/lib/g`
+ do
+   # Don't even attempt the hair of trying to link an X program!
+@@ -16955,10 +14400,8 @@
+   done
+ done
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ fi # $ac_x_libraries = no
+ 
+ case $ac_x_includes,$ac_x_libraries in #(
+@@ -16979,7 +14422,7 @@
+ fi # $with_x != no
+ 
+ if test "$have_x" != yes; then
+-  { $as_echo "$as_me:$LINENO: result: $have_x" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $have_x" >&5
+ $as_echo "$have_x" >&6; }
+   no_x=yes
+ else
+@@ -16990,16 +14433,14 @@
+   ac_cv_have_x="have_x=yes\
+ 	ac_x_includes='$x_includes'\
+ 	ac_x_libraries='$x_libraries'"
+-  { $as_echo "$as_me:$LINENO: result: libraries $x_libraries, headers $x_includes" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: libraries $x_libraries, headers $x_includes" >&5
+ $as_echo "libraries $x_libraries, headers $x_includes" >&6; }
+ fi
+ 
+ if test "$no_x" = yes; then
+   # Not all programs may use this symbol, but it does not hurt to define it.
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define X_DISPLAY_MISSING 1
+-_ACEOF
++$as_echo "#define X_DISPLAY_MISSING 1" >>confdefs.h
+ 
+   X_CFLAGS= X_PRE_LIBS= X_LIBS= X_EXTRA_LIBS=
+ else
+@@ -17012,16 +14453,12 @@
+     X_LIBS="$X_LIBS -L$x_libraries"
+     # For Solaris; some versions of Sun CC require a space after -R and
+     # others require no space.  Words are not sufficient . . . .
+-    { $as_echo "$as_me:$LINENO: checking whether -R must be followed by a space" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether -R must be followed by a space" >&5
+ $as_echo_n "checking whether -R must be followed by a space... " >&6; }
+     ac_xsave_LIBS=$LIBS; LIBS="$LIBS -R$x_libraries"
+     ac_xsave_c_werror_flag=$ac_c_werror_flag
+     ac_c_werror_flag=yes
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -17032,40 +14469,13 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++if ac_fn_c_try_link "$LINENO"; then :
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+        X_LIBS="$X_LIBS -R$x_libraries"
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	LIBS="$ac_xsave_LIBS -R $x_libraries"
+-       cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  LIBS="$ac_xsave_LIBS -R $x_libraries"
++       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -17076,46 +14486,19 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  { $as_echo "$as_me:$LINENO: result: yes" >&5
++if ac_fn_c_try_link "$LINENO"; then :
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+ 	  X_LIBS="$X_LIBS -R $x_libraries"
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	{ $as_echo "$as_me:$LINENO: result: neither works" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: neither works" >&5
+ $as_echo "neither works" >&6; }
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+     ac_c_werror_flag=$ac_xsave_c_werror_flag
+     LIBS=$ac_xsave_LIBS
+   fi
+@@ -17131,11 +14514,7 @@
+     # libraries were built with DECnet support.  And Karl Berry says
+     # the Alpha needs dnet_stub (dnet does not exist).
+     ac_xsave_LIBS="$LIBS"; LIBS="$LIBS $X_LIBS -lX11"
+-    cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -17153,44 +14532,17 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  :
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
++if ac_fn_c_try_link "$LINENO"; then :
+ 
+-	{ $as_echo "$as_me:$LINENO: checking for dnet_ntoa in -ldnet" >&5
++else
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dnet_ntoa in -ldnet" >&5
+ $as_echo_n "checking for dnet_ntoa in -ldnet... " >&6; }
+-if test "${ac_cv_lib_dnet_dnet_ntoa+set}" = set; then
++if test "${ac_cv_lib_dnet_dnet_ntoa+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-ldnet  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -17208,59 +14560,30 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_dnet_dnet_ntoa=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_dnet_dnet_ntoa=no
++  ac_cv_lib_dnet_dnet_ntoa=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_dnet_dnet_ntoa" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dnet_dnet_ntoa" >&5
+ $as_echo "$ac_cv_lib_dnet_dnet_ntoa" >&6; }
+-if test "x$ac_cv_lib_dnet_dnet_ntoa" = x""yes; then
++if test "x$ac_cv_lib_dnet_dnet_ntoa" = x""yes; then :
+   X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet"
+ fi
+ 
+     if test $ac_cv_lib_dnet_dnet_ntoa = no; then
+-      { $as_echo "$as_me:$LINENO: checking for dnet_ntoa in -ldnet_stub" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for dnet_ntoa in -ldnet_stub" >&5
+ $as_echo_n "checking for dnet_ntoa in -ldnet_stub... " >&6; }
+-if test "${ac_cv_lib_dnet_stub_dnet_ntoa+set}" = set; then
++if test "${ac_cv_lib_dnet_stub_dnet_ntoa+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-ldnet_stub  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -17278,52 +14601,25 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_dnet_stub_dnet_ntoa=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_dnet_stub_dnet_ntoa=no
++  ac_cv_lib_dnet_stub_dnet_ntoa=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_dnet_stub_dnet_ntoa" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_dnet_stub_dnet_ntoa" >&5
+ $as_echo "$ac_cv_lib_dnet_stub_dnet_ntoa" >&6; }
+-if test "x$ac_cv_lib_dnet_stub_dnet_ntoa" = x""yes; then
++if test "x$ac_cv_lib_dnet_stub_dnet_ntoa" = x""yes; then :
+   X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet_stub"
+ fi
+ 
+     fi
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+     LIBS="$ac_xsave_LIBS"
+ 
+     # msh@cis.ufl.edu says -lnsl (and -lsocket) are needed for his 386/AT,
+@@ -17334,105 +14630,20 @@
+     # on Irix 5.2, according to T.E. Dickey.
+     # The functions gethostbyname, getservbyname, and inet_addr are
+     # in -lbsd on LynxOS 3.0.1/i386, according to Lars Hecking.
+-    { $as_echo "$as_me:$LINENO: checking for gethostbyname" >&5
+-$as_echo_n "checking for gethostbyname... " >&6; }
+-if test "${ac_cv_func_gethostbyname+set}" = set; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-/* Define gethostbyname to an innocuous variant, in case <limits.h> declares gethostbyname.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define gethostbyname innocuous_gethostbyname
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char gethostbyname (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
++    ac_fn_c_check_func "$LINENO" "gethostbyname" "ac_cv_func_gethostbyname"
++if test "x$ac_cv_func_gethostbyname" = x""yes; then :
+ 
+-#undef gethostbyname
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char gethostbyname ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_gethostbyname || defined __stub___gethostbyname
+-choke me
+-#endif
+-
+-int
+-main ()
+-{
+-return gethostbyname ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  ac_cv_func_gethostbyname=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_func_gethostbyname=no
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_func_gethostbyname" >&5
+-$as_echo "$ac_cv_func_gethostbyname" >&6; }
+ 
+     if test $ac_cv_func_gethostbyname = no; then
+-      { $as_echo "$as_me:$LINENO: checking for gethostbyname in -lnsl" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lnsl" >&5
+ $as_echo_n "checking for gethostbyname in -lnsl... " >&6; }
+-if test "${ac_cv_lib_nsl_gethostbyname+set}" = set; then
++if test "${ac_cv_lib_nsl_gethostbyname+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lnsl  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -17450,59 +14661,30 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_nsl_gethostbyname=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_nsl_gethostbyname=no
++  ac_cv_lib_nsl_gethostbyname=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_nsl_gethostbyname" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_nsl_gethostbyname" >&5
+ $as_echo "$ac_cv_lib_nsl_gethostbyname" >&6; }
+-if test "x$ac_cv_lib_nsl_gethostbyname" = x""yes; then
++if test "x$ac_cv_lib_nsl_gethostbyname" = x""yes; then :
+   X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl"
+ fi
+ 
+       if test $ac_cv_lib_nsl_gethostbyname = no; then
+-	{ $as_echo "$as_me:$LINENO: checking for gethostbyname in -lbsd" >&5
++	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for gethostbyname in -lbsd" >&5
+ $as_echo_n "checking for gethostbyname in -lbsd... " >&6; }
+-if test "${ac_cv_lib_bsd_gethostbyname+set}" = set; then
++if test "${ac_cv_lib_bsd_gethostbyname+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lbsd  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -17520,43 +14702,18 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_bsd_gethostbyname=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_bsd_gethostbyname=no
++  ac_cv_lib_bsd_gethostbyname=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_bsd_gethostbyname" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_bsd_gethostbyname" >&5
+ $as_echo "$ac_cv_lib_bsd_gethostbyname" >&6; }
+-if test "x$ac_cv_lib_bsd_gethostbyname" = x""yes; then
++if test "x$ac_cv_lib_bsd_gethostbyname" = x""yes; then :
+   X_EXTRA_LIBS="$X_EXTRA_LIBS -lbsd"
+ fi
+ 
+@@ -17570,105 +14727,20 @@
+     # variants that don't use the name server (or something).  -lsocket
+     # must be given before -lnsl if both are needed.  We assume that
+     # if connect needs -lnsl, so does gethostbyname.
+-    { $as_echo "$as_me:$LINENO: checking for connect" >&5
+-$as_echo_n "checking for connect... " >&6; }
+-if test "${ac_cv_func_connect+set}" = set; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-/* Define connect to an innocuous variant, in case <limits.h> declares connect.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define connect innocuous_connect
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char connect (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef connect
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char connect ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_connect || defined __stub___connect
+-choke me
+-#endif
++    ac_fn_c_check_func "$LINENO" "connect" "ac_cv_func_connect"
++if test "x$ac_cv_func_connect" = x""yes; then :
+ 
+-int
+-main ()
+-{
+-return connect ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  ac_cv_func_connect=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_func_connect=no
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_func_connect" >&5
+-$as_echo "$ac_cv_func_connect" >&6; }
+ 
+     if test $ac_cv_func_connect = no; then
+-      { $as_echo "$as_me:$LINENO: checking for connect in -lsocket" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for connect in -lsocket" >&5
+ $as_echo_n "checking for connect in -lsocket... " >&6; }
+-if test "${ac_cv_lib_socket_connect+set}" = set; then
++if test "${ac_cv_lib_socket_connect+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lsocket $X_EXTRA_LIBS $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -17686,235 +14758,39 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_socket_connect=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_socket_connect=no
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-LIBS=$ac_check_lib_save_LIBS
+-fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_socket_connect" >&5
+-$as_echo "$ac_cv_lib_socket_connect" >&6; }
+-if test "x$ac_cv_lib_socket_connect" = x""yes; then
+-  X_EXTRA_LIBS="-lsocket $X_EXTRA_LIBS"
+-fi
+-
+-    fi
+-
+-    # Guillermo Gomez says -lposix is necessary on A/UX.
+-    { $as_echo "$as_me:$LINENO: checking for remove" >&5
+-$as_echo_n "checking for remove... " >&6; }
+-if test "${ac_cv_func_remove+set}" = set; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-/* Define remove to an innocuous variant, in case <limits.h> declares remove.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define remove innocuous_remove
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char remove (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef remove
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char remove ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_remove || defined __stub___remove
+-choke me
+-#endif
+-
+-int
+-main ()
+-{
+-return remove ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  ac_cv_func_remove=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_func_remove=no
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_func_remove" >&5
+-$as_echo "$ac_cv_func_remove" >&6; }
+-
+-    if test $ac_cv_func_remove = no; then
+-      { $as_echo "$as_me:$LINENO: checking for remove in -lposix" >&5
+-$as_echo_n "checking for remove in -lposix... " >&6; }
+-if test "${ac_cv_lib_posix_remove+set}" = set; then
+-  $as_echo_n "(cached) " >&6
+-else
+-  ac_check_lib_save_LIBS=$LIBS
+-LIBS="-lposix  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-
+-/* Override any GCC internal prototype to avoid an error.
+-   Use char because int might match the return type of a GCC
+-   builtin and then its argument prototype would still apply.  */
+-#ifdef __cplusplus
+-extern "C"
+-#endif
+-char remove ();
+-int
+-main ()
+-{
+-return remove ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  ac_cv_lib_posix_remove=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_posix_remove=no
++  ac_cv_lib_socket_connect=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_posix_remove" >&5
+-$as_echo "$ac_cv_lib_posix_remove" >&6; }
+-if test "x$ac_cv_lib_posix_remove" = x""yes; then
+-  X_EXTRA_LIBS="$X_EXTRA_LIBS -lposix"
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_connect" >&5
++$as_echo "$ac_cv_lib_socket_connect" >&6; }
++if test "x$ac_cv_lib_socket_connect" = x""yes; then :
++  X_EXTRA_LIBS="-lsocket $X_EXTRA_LIBS"
+ fi
+ 
+     fi
+ 
+-    # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
+-    { $as_echo "$as_me:$LINENO: checking for shmat" >&5
+-$as_echo_n "checking for shmat... " >&6; }
+-if test "${ac_cv_func_shmat+set}" = set; then
++    # Guillermo Gomez says -lposix is necessary on A/UX.
++    ac_fn_c_check_func "$LINENO" "remove" "ac_cv_func_remove"
++if test "x$ac_cv_func_remove" = x""yes; then :
++
++fi
++
++    if test $ac_cv_func_remove = no; then
++      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for remove in -lposix" >&5
++$as_echo_n "checking for remove in -lposix... " >&6; }
++if test "${ac_cv_lib_posix_remove+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  ac_check_lib_save_LIBS=$LIBS
++LIBS="-lposix  $LIBS"
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+-/* Define shmat to an innocuous variant, in case <limits.h> declares shmat.
+-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+-#define shmat innocuous_shmat
+-
+-/* System header to define __stub macros and hopefully few prototypes,
+-    which can conflict with char shmat (); below.
+-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+-    <limits.h> exists even on freestanding compilers.  */
+-
+-#ifdef __STDC__
+-# include <limits.h>
+-#else
+-# include <assert.h>
+-#endif
+-
+-#undef shmat
+ 
+ /* Override any GCC internal prototype to avoid an error.
+    Use char because int might match the return type of a GCC
+@@ -17922,71 +14798,47 @@
+ #ifdef __cplusplus
+ extern "C"
+ #endif
+-char shmat ();
+-/* The GNU C library defines this for functions which it implements
+-    to always fail with ENOSYS.  Some functions are actually named
+-    something starting with __ and the normal name is an alias.  */
+-#if defined __stub_shmat || defined __stub___shmat
+-choke me
+-#endif
+-
++char remove ();
+ int
+ main ()
+ {
+-return shmat ();
++return remove ();
+   ;
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  ac_cv_func_shmat=yes
++if ac_fn_c_try_link "$LINENO"; then :
++  ac_cv_lib_posix_remove=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_func_shmat=no
++  ac_cv_lib_posix_remove=no
++fi
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
++LIBS=$ac_check_lib_save_LIBS
++fi
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_posix_remove" >&5
++$as_echo "$ac_cv_lib_posix_remove" >&6; }
++if test "x$ac_cv_lib_posix_remove" = x""yes; then :
++  X_EXTRA_LIBS="$X_EXTRA_LIBS -lposix"
+ fi
+ 
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++    fi
++
++    # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
++    ac_fn_c_check_func "$LINENO" "shmat" "ac_cv_func_shmat"
++if test "x$ac_cv_func_shmat" = x""yes; then :
++
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_func_shmat" >&5
+-$as_echo "$ac_cv_func_shmat" >&6; }
+ 
+     if test $ac_cv_func_shmat = no; then
+-      { $as_echo "$as_me:$LINENO: checking for shmat in -lipc" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for shmat in -lipc" >&5
+ $as_echo_n "checking for shmat in -lipc... " >&6; }
+-if test "${ac_cv_lib_ipc_shmat+set}" = set; then
++if test "${ac_cv_lib_ipc_shmat+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lipc  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -18004,43 +14856,18 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_ipc_shmat=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_ipc_shmat=no
++  ac_cv_lib_ipc_shmat=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_ipc_shmat" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ipc_shmat" >&5
+ $as_echo "$ac_cv_lib_ipc_shmat" >&6; }
+-if test "x$ac_cv_lib_ipc_shmat" = x""yes; then
++if test "x$ac_cv_lib_ipc_shmat" = x""yes; then :
+   X_EXTRA_LIBS="$X_EXTRA_LIBS -lipc"
+ fi
+ 
+@@ -18056,18 +14883,14 @@
+   # These have to be linked with before -lX11, unlike the other
+   # libraries we check for below, so use a different variable.
+   # John Interrante, Karl Berry
+-  { $as_echo "$as_me:$LINENO: checking for IceConnectionNumber in -lICE" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for IceConnectionNumber in -lICE" >&5
+ $as_echo_n "checking for IceConnectionNumber in -lICE... " >&6; }
+-if test "${ac_cv_lib_ICE_IceConnectionNumber+set}" = set; then
++if test "${ac_cv_lib_ICE_IceConnectionNumber+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lICE $X_EXTRA_LIBS $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -18085,43 +14908,18 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_ICE_IceConnectionNumber=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_ICE_IceConnectionNumber=no
++  ac_cv_lib_ICE_IceConnectionNumber=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_ICE_IceConnectionNumber" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_ICE_IceConnectionNumber" >&5
+ $as_echo "$ac_cv_lib_ICE_IceConnectionNumber" >&6; }
+-if test "x$ac_cv_lib_ICE_IceConnectionNumber" = x""yes; then
++if test "x$ac_cv_lib_ICE_IceConnectionNumber" = x""yes; then :
+   X_PRE_LIBS="$X_PRE_LIBS -lSM -lICE"
+ fi
+ 
+@@ -18131,9 +14929,7 @@
+ 
+ 
+   if test x$no_x = xyes ; then
+-    { { $as_echo "$as_me:$LINENO: error: X development libraries not found" >&5
+-$as_echo "$as_me: error: X development libraries not found" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error "X development libraries not found" "$LINENO" 5
+   fi
+ 
+   x_libs="$X_LIBS -lX11 $X_EXTRA_LIBS"
+@@ -18149,18 +14945,14 @@
+ #  esac
+ #done
+ 
+-{ $as_echo "$as_me:$LINENO: checking for XOpenDisplay in -lX11" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for XOpenDisplay in -lX11" >&5
+ $as_echo_n "checking for XOpenDisplay in -lX11... " >&6; }
+-if test "${ac_cv_lib_X11_XOpenDisplay+set}" = set; then
++if test "${ac_cv_lib_X11_XOpenDisplay+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lX11 $x_libs_for_checks $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -18178,48 +14970,21 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_X11_XOpenDisplay=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_X11_XOpenDisplay=no
++  ac_cv_lib_X11_XOpenDisplay=no
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_X11_XOpenDisplay" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_X11_XOpenDisplay" >&5
+ $as_echo "$ac_cv_lib_X11_XOpenDisplay" >&6; }
+-if test "x$ac_cv_lib_X11_XOpenDisplay" = x""yes; then
++if test "x$ac_cv_lib_X11_XOpenDisplay" = x""yes; then :
+   :
+ else
+-  { { $as_echo "$as_me:$LINENO: error: *** libX11 not found.  Check 'config.log' for more details." >&5
+-$as_echo "$as_me: error: *** libX11 not found.  Check 'config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "*** libX11 not found.  Check 'config.log' for more details." "$LINENO" 5
+ fi
+ 
+ 
+@@ -18236,40 +15001,44 @@
+ 
+ 
+ pkg_failed=no
+-{ $as_echo "$as_me:$LINENO: checking for EXIF" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for EXIF" >&5
+ $as_echo_n "checking for EXIF... " >&6; }
+ 
+-if test -n "$EXIF_CFLAGS"; then
+-    pkg_cv_EXIF_CFLAGS="$EXIF_CFLAGS"
+- elif test -n "$PKG_CONFIG"; then
+-    if test -n "$PKG_CONFIG" && \
+-    { ($as_echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libexif > 0.5.12\"") >&5
++if test -n "$PKG_CONFIG"; then
++    if test -n "$EXIF_CFLAGS"; then
++        pkg_cv_EXIF_CFLAGS="$EXIF_CFLAGS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libexif > 0.5.12\""; } >&5
+   ($PKG_CONFIG --exists --print-errors "libexif > 0.5.12") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+   pkg_cv_EXIF_CFLAGS=`$PKG_CONFIG --cflags "libexif > 0.5.12" 2>/dev/null`
+ else
+   pkg_failed=yes
+ fi
+- else
+-    pkg_failed=untried
++    fi
++else
++	pkg_failed=untried
+ fi
+-if test -n "$EXIF_LIBS"; then
+-    pkg_cv_EXIF_LIBS="$EXIF_LIBS"
+- elif test -n "$PKG_CONFIG"; then
+-    if test -n "$PKG_CONFIG" && \
+-    { ($as_echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libexif > 0.5.12\"") >&5
++if test -n "$PKG_CONFIG"; then
++    if test -n "$EXIF_LIBS"; then
++        pkg_cv_EXIF_LIBS="$EXIF_LIBS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libexif > 0.5.12\""; } >&5
+   ($PKG_CONFIG --exists --print-errors "libexif > 0.5.12") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+   pkg_cv_EXIF_LIBS=`$PKG_CONFIG --libs "libexif > 0.5.12" 2>/dev/null`
+ else
+   pkg_failed=yes
+ fi
+- else
+-    pkg_failed=untried
++    fi
++else
++	pkg_failed=untried
+ fi
+ 
+ 
+@@ -18282,52 +15051,56 @@
+         _pkg_short_errors_supported=no
+ fi
+         if test $_pkg_short_errors_supported = yes; then
+-	        EXIF_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "libexif > 0.5.12" 2>&1`
++	        EXIF_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "libexif > 0.5.12"`
+         else
+-	        EXIF_PKG_ERRORS=`$PKG_CONFIG --print-errors "libexif > 0.5.12" 2>&1`
++	        EXIF_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libexif > 0.5.12"`
+         fi
+ 	# Put the nasty error message in config.log where it belongs
+ 	echo "$EXIF_PKG_ERRORS" >&5
+ 
+-	{ $as_echo "$as_me:$LINENO: result: no" >&5
++	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ 
+ 
+ pkg_failed=no
+-{ $as_echo "$as_me:$LINENO: checking for EXIF" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for EXIF" >&5
+ $as_echo_n "checking for EXIF... " >&6; }
+ 
+-if test -n "$EXIF_CFLAGS"; then
+-    pkg_cv_EXIF_CFLAGS="$EXIF_CFLAGS"
+- elif test -n "$PKG_CONFIG"; then
+-    if test -n "$PKG_CONFIG" && \
+-    { ($as_echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libexif = 0.5.12\"") >&5
++if test -n "$PKG_CONFIG"; then
++    if test -n "$EXIF_CFLAGS"; then
++        pkg_cv_EXIF_CFLAGS="$EXIF_CFLAGS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libexif = 0.5.12\""; } >&5
+   ($PKG_CONFIG --exists --print-errors "libexif = 0.5.12") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+   pkg_cv_EXIF_CFLAGS=`$PKG_CONFIG --cflags "libexif = 0.5.12" 2>/dev/null`
+ else
+   pkg_failed=yes
+ fi
+- else
+-    pkg_failed=untried
++    fi
++else
++	pkg_failed=untried
+ fi
+-if test -n "$EXIF_LIBS"; then
+-    pkg_cv_EXIF_LIBS="$EXIF_LIBS"
+- elif test -n "$PKG_CONFIG"; then
+-    if test -n "$PKG_CONFIG" && \
+-    { ($as_echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libexif = 0.5.12\"") >&5
++if test -n "$PKG_CONFIG"; then
++    if test -n "$EXIF_LIBS"; then
++        pkg_cv_EXIF_LIBS="$EXIF_LIBS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libexif = 0.5.12\""; } >&5
+   ($PKG_CONFIG --exists --print-errors "libexif = 0.5.12") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+   pkg_cv_EXIF_LIBS=`$PKG_CONFIG --libs "libexif = 0.5.12" 2>/dev/null`
+ else
+   pkg_failed=yes
+ fi
+- else
+-    pkg_failed=untried
++    fi
++else
++	pkg_failed=untried
+ fi
+ 
+ 
+@@ -18340,14 +15113,14 @@
+         _pkg_short_errors_supported=no
+ fi
+         if test $_pkg_short_errors_supported = yes; then
+-	        EXIF_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "libexif = 0.5.12" 2>&1`
++	        EXIF_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "libexif = 0.5.12"`
+         else
+-	        EXIF_PKG_ERRORS=`$PKG_CONFIG --print-errors "libexif = 0.5.12" 2>&1`
++	        EXIF_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libexif = 0.5.12"`
+         fi
+ 	# Put the nasty error message in config.log where it belongs
+ 	echo "$EXIF_PKG_ERRORS" >&5
+ 
+-	{ $as_echo "$as_me:$LINENO: result: no" >&5
++	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+                  if false; then
+   HAVE_EXIF_TRUE=
+@@ -18369,7 +15142,7 @@
+ else
+ 	EXIF_CFLAGS=$pkg_cv_EXIF_CFLAGS
+ 	EXIF_LIBS=$pkg_cv_EXIF_LIBS
+-        { $as_echo "$as_me:$LINENO: result: yes" >&5
++        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+ 
+ 				     if true; then
+@@ -18381,9 +15154,7 @@
+ fi
+ 
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_OLD_EXIF 1
+-_ACEOF
++$as_echo "#define HAVE_OLD_EXIF 1" >>confdefs.h
+ 
+ 
+ fi
+@@ -18392,40 +15163,44 @@
+ 
+ 
+ pkg_failed=no
+-{ $as_echo "$as_me:$LINENO: checking for EXIF" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for EXIF" >&5
+ $as_echo_n "checking for EXIF... " >&6; }
+ 
+-if test -n "$EXIF_CFLAGS"; then
+-    pkg_cv_EXIF_CFLAGS="$EXIF_CFLAGS"
+- elif test -n "$PKG_CONFIG"; then
+-    if test -n "$PKG_CONFIG" && \
+-    { ($as_echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libexif = 0.5.12\"") >&5
++if test -n "$PKG_CONFIG"; then
++    if test -n "$EXIF_CFLAGS"; then
++        pkg_cv_EXIF_CFLAGS="$EXIF_CFLAGS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libexif = 0.5.12\""; } >&5
+   ($PKG_CONFIG --exists --print-errors "libexif = 0.5.12") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+   pkg_cv_EXIF_CFLAGS=`$PKG_CONFIG --cflags "libexif = 0.5.12" 2>/dev/null`
+ else
+   pkg_failed=yes
+ fi
+- else
+-    pkg_failed=untried
++    fi
++else
++	pkg_failed=untried
+ fi
+-if test -n "$EXIF_LIBS"; then
+-    pkg_cv_EXIF_LIBS="$EXIF_LIBS"
+- elif test -n "$PKG_CONFIG"; then
+-    if test -n "$PKG_CONFIG" && \
+-    { ($as_echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libexif = 0.5.12\"") >&5
++if test -n "$PKG_CONFIG"; then
++    if test -n "$EXIF_LIBS"; then
++        pkg_cv_EXIF_LIBS="$EXIF_LIBS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libexif = 0.5.12\""; } >&5
+   ($PKG_CONFIG --exists --print-errors "libexif = 0.5.12") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+   pkg_cv_EXIF_LIBS=`$PKG_CONFIG --libs "libexif = 0.5.12" 2>/dev/null`
+ else
+   pkg_failed=yes
+ fi
+- else
+-    pkg_failed=untried
++    fi
++else
++	pkg_failed=untried
+ fi
+ 
+ 
+@@ -18438,14 +15213,14 @@
+         _pkg_short_errors_supported=no
+ fi
+         if test $_pkg_short_errors_supported = yes; then
+-	        EXIF_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "libexif = 0.5.12" 2>&1`
++	        EXIF_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "libexif = 0.5.12"`
+         else
+-	        EXIF_PKG_ERRORS=`$PKG_CONFIG --print-errors "libexif = 0.5.12" 2>&1`
++	        EXIF_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libexif = 0.5.12"`
+         fi
+ 	# Put the nasty error message in config.log where it belongs
+ 	echo "$EXIF_PKG_ERRORS" >&5
+ 
+-	{ $as_echo "$as_me:$LINENO: result: no" >&5
++	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+                  if false; then
+   HAVE_EXIF_TRUE=
+@@ -18467,7 +15242,7 @@
+ else
+ 	EXIF_CFLAGS=$pkg_cv_EXIF_CFLAGS
+ 	EXIF_LIBS=$pkg_cv_EXIF_LIBS
+-        { $as_echo "$as_me:$LINENO: result: yes" >&5
++        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+ 
+ 				     if true; then
+@@ -18479,9 +15254,7 @@
+ fi
+ 
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_OLD_EXIF 1
+-_ACEOF
++$as_echo "#define HAVE_OLD_EXIF 1" >>confdefs.h
+ 
+ 
+ fi
+@@ -18489,7 +15262,7 @@
+ else
+ 	EXIF_CFLAGS=$pkg_cv_EXIF_CFLAGS
+ 	EXIF_LIBS=$pkg_cv_EXIF_LIBS
+-        { $as_echo "$as_me:$LINENO: result: yes" >&5
++        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+ 
+ 		   if true; then
+@@ -18501,9 +15274,7 @@
+ fi
+ 
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_EXIF 1
+-_ACEOF
++$as_echo "#define HAVE_EXIF 1" >>confdefs.h
+ 
+ 
+ fi
+@@ -18523,7 +15294,7 @@
+ 
+ 
+ # Check whether --enable-xmp was given.
+-if test "${enable_xmp+set}" = set; then
++if test "${enable_xmp+set}" = set; then :
+   enableval=$enable_xmp;
+ fi
+ 
+@@ -18531,40 +15302,44 @@
+ if test "x$enable_xmp" != "xno"; then
+ 
+ pkg_failed=no
+-{ $as_echo "$as_me:$LINENO: checking for EXEMPI" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for EXEMPI" >&5
+ $as_echo_n "checking for EXEMPI... " >&6; }
+ 
+-if test -n "$EXEMPI_CFLAGS"; then
+-    pkg_cv_EXEMPI_CFLAGS="$EXEMPI_CFLAGS"
+- elif test -n "$PKG_CONFIG"; then
+-    if test -n "$PKG_CONFIG" && \
+-    { ($as_echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"exempi-2.0 >= 1.99.2\"") >&5
++if test -n "$PKG_CONFIG"; then
++    if test -n "$EXEMPI_CFLAGS"; then
++        pkg_cv_EXEMPI_CFLAGS="$EXEMPI_CFLAGS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"exempi-2.0 >= 1.99.2\""; } >&5
+   ($PKG_CONFIG --exists --print-errors "exempi-2.0 >= 1.99.2") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+   pkg_cv_EXEMPI_CFLAGS=`$PKG_CONFIG --cflags "exempi-2.0 >= 1.99.2" 2>/dev/null`
+ else
+   pkg_failed=yes
+ fi
+- else
+-    pkg_failed=untried
++    fi
++else
++	pkg_failed=untried
+ fi
+-if test -n "$EXEMPI_LIBS"; then
+-    pkg_cv_EXEMPI_LIBS="$EXEMPI_LIBS"
+- elif test -n "$PKG_CONFIG"; then
+-    if test -n "$PKG_CONFIG" && \
+-    { ($as_echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"exempi-2.0 >= 1.99.2\"") >&5
++if test -n "$PKG_CONFIG"; then
++    if test -n "$EXEMPI_LIBS"; then
++        pkg_cv_EXEMPI_LIBS="$EXEMPI_LIBS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"exempi-2.0 >= 1.99.2\""; } >&5
+   ($PKG_CONFIG --exists --print-errors "exempi-2.0 >= 1.99.2") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+   pkg_cv_EXEMPI_LIBS=`$PKG_CONFIG --libs "exempi-2.0 >= 1.99.2" 2>/dev/null`
+ else
+   pkg_failed=yes
+ fi
+- else
+-    pkg_failed=untried
++    fi
++else
++	pkg_failed=untried
+ fi
+ 
+ 
+@@ -18577,14 +15352,14 @@
+         _pkg_short_errors_supported=no
+ fi
+         if test $_pkg_short_errors_supported = yes; then
+-	        EXEMPI_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "exempi-2.0 >= 1.99.2" 2>&1`
++	        EXEMPI_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "exempi-2.0 >= 1.99.2"`
+         else
+-	        EXEMPI_PKG_ERRORS=`$PKG_CONFIG --print-errors "exempi-2.0 >= 1.99.2" 2>&1`
++	        EXEMPI_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "exempi-2.0 >= 1.99.2"`
+         fi
+ 	# Put the nasty error message in config.log where it belongs
+ 	echo "$EXEMPI_PKG_ERRORS" >&5
+ 
+-	{ $as_echo "$as_me:$LINENO: result: no" >&5
++	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+                  if false; then
+   HAVE_EXEMPI_TRUE=
+@@ -18606,7 +15381,7 @@
+ else
+ 	EXEMPI_CFLAGS=$pkg_cv_EXEMPI_CFLAGS
+ 	EXEMPI_LIBS=$pkg_cv_EXEMPI_LIBS
+-        { $as_echo "$as_me:$LINENO: result: yes" >&5
++        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+ 
+ 		  	   if true; then
+@@ -18618,9 +15393,7 @@
+ fi
+ 
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_EXEMPI 1
+-_ACEOF
++$as_echo "#define HAVE_EXEMPI 1" >>confdefs.h
+ 
+ 
+                           msg_xmp=yes
+@@ -18628,40 +15401,44 @@
+ 
+ 
+ pkg_failed=no
+-{ $as_echo "$as_me:$LINENO: checking for EXEMPI_NEW_API" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for EXEMPI_NEW_API" >&5
+ $as_echo_n "checking for EXEMPI_NEW_API... " >&6; }
+ 
+-if test -n "$EXEMPI_NEW_API_CFLAGS"; then
+-    pkg_cv_EXEMPI_NEW_API_CFLAGS="$EXEMPI_NEW_API_CFLAGS"
+- elif test -n "$PKG_CONFIG"; then
+-    if test -n "$PKG_CONFIG" && \
+-    { ($as_echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"exempi-2.0 >= 1.99.5\"") >&5
++if test -n "$PKG_CONFIG"; then
++    if test -n "$EXEMPI_NEW_API_CFLAGS"; then
++        pkg_cv_EXEMPI_NEW_API_CFLAGS="$EXEMPI_NEW_API_CFLAGS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"exempi-2.0 >= 1.99.5\""; } >&5
+   ($PKG_CONFIG --exists --print-errors "exempi-2.0 >= 1.99.5") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+   pkg_cv_EXEMPI_NEW_API_CFLAGS=`$PKG_CONFIG --cflags "exempi-2.0 >= 1.99.5" 2>/dev/null`
+ else
+   pkg_failed=yes
+ fi
+- else
+-    pkg_failed=untried
++    fi
++else
++	pkg_failed=untried
+ fi
+-if test -n "$EXEMPI_NEW_API_LIBS"; then
+-    pkg_cv_EXEMPI_NEW_API_LIBS="$EXEMPI_NEW_API_LIBS"
+- elif test -n "$PKG_CONFIG"; then
+-    if test -n "$PKG_CONFIG" && \
+-    { ($as_echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"exempi-2.0 >= 1.99.5\"") >&5
++if test -n "$PKG_CONFIG"; then
++    if test -n "$EXEMPI_NEW_API_LIBS"; then
++        pkg_cv_EXEMPI_NEW_API_LIBS="$EXEMPI_NEW_API_LIBS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"exempi-2.0 >= 1.99.5\""; } >&5
+   ($PKG_CONFIG --exists --print-errors "exempi-2.0 >= 1.99.5") 2>&5
+   ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; then
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
+   pkg_cv_EXEMPI_NEW_API_LIBS=`$PKG_CONFIG --libs "exempi-2.0 >= 1.99.5" 2>/dev/null`
+ else
+   pkg_failed=yes
+ fi
+- else
+-    pkg_failed=untried
++    fi
++else
++	pkg_failed=untried
+ fi
+ 
+ 
+@@ -18674,14 +15451,14 @@
+         _pkg_short_errors_supported=no
+ fi
+         if test $_pkg_short_errors_supported = yes; then
+-	        EXEMPI_NEW_API_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "exempi-2.0 >= 1.99.5" 2>&1`
++	        EXEMPI_NEW_API_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "exempi-2.0 >= 1.99.5"`
+         else
+-	        EXEMPI_NEW_API_PKG_ERRORS=`$PKG_CONFIG --print-errors "exempi-2.0 >= 1.99.5" 2>&1`
++	        EXEMPI_NEW_API_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "exempi-2.0 >= 1.99.5"`
+         fi
+ 	# Put the nasty error message in config.log where it belongs
+ 	echo "$EXEMPI_NEW_API_PKG_ERRORS" >&5
+ 
+-	{ $as_echo "$as_me:$LINENO: result: no" >&5
++	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+                 true
+ elif test $pkg_failed = untried; then
+@@ -18689,12 +15466,10 @@
+ else
+ 	EXEMPI_NEW_API_CFLAGS=$pkg_cv_EXEMPI_NEW_API_CFLAGS
+ 	EXEMPI_NEW_API_LIBS=$pkg_cv_EXEMPI_NEW_API_LIBS
+-        { $as_echo "$as_me:$LINENO: result: yes" >&5
++        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_EXEMPI_NEW_API 1
+-_ACEOF
++$as_echo "#define HAVE_EXEMPI_NEW_API 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -18706,18 +15481,14 @@
+ 
+ SELINUX_LIBS=
+ msg_selinux=no
+-{ $as_echo "$as_me:$LINENO: checking for is_selinux_enabled in -lselinux" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for is_selinux_enabled in -lselinux" >&5
+ $as_echo_n "checking for is_selinux_enabled in -lselinux... " >&6; }
+-if test "${ac_cv_lib_selinux_is_selinux_enabled+set}" = set; then
++if test "${ac_cv_lib_selinux_is_selinux_enabled+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lselinux  $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -18729,206 +15500,38 @@
+ char is_selinux_enabled ();
+ int
+ main ()
+-{
+-return is_selinux_enabled ();
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
+-  ac_cv_lib_selinux_is_selinux_enabled=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_selinux_is_selinux_enabled=no
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-LIBS=$ac_check_lib_save_LIBS
+-fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_selinux_is_selinux_enabled" >&5
+-$as_echo "$ac_cv_lib_selinux_is_selinux_enabled" >&6; }
+-if test "x$ac_cv_lib_selinux_is_selinux_enabled" = x""yes; then
+-
+-for ac_header in selinux/selinux.h
+-do
+-as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  { $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
+-$as_echo_n "checking for $ac_header... " >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
+-fi
+-ac_res=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
+-else
+-  # Is the header compilable?
+-{ $as_echo "$as_me:$LINENO: checking $ac_header usability" >&5
+-$as_echo_n "checking $ac_header usability... " >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <$ac_header>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ $as_echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-$as_echo "$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ $as_echo "$as_me:$LINENO: checking $ac_header presence" >&5
+-$as_echo_n "checking $ac_header presence... " >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <$ac_header>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
+-fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ $as_echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-$as_echo "$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+-  yes:no: )
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+-$as_echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+-$as_echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+-$as_echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+-$as_echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+-$as_echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+-$as_echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+-$as_echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+-$as_echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+-    ( cat <<\_ASBOX
+-## ----------------------------------------------------------------------- ##
+-## Report this to http://bugzilla.gnome.org/enter_bug.cgi?product=nautilus ##
+-## ----------------------------------------------------------------------- ##
+-_ASBOX
+-     ) | sed "s/^/$as_me: WARNING:     /" >&2
+-    ;;
+-esac
+-{ $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
+-$as_echo_n "checking for $ac_header... " >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
++{
++return is_selinux_enabled ();
++  ;
++  return 0;
++}
++_ACEOF
++if ac_fn_c_try_link "$LINENO"; then :
++  ac_cv_lib_selinux_is_selinux_enabled=yes
+ else
+-  eval "$as_ac_Header=\$ac_header_preproc"
++  ac_cv_lib_selinux_is_selinux_enabled=no
+ fi
+-ac_res=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
+-
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
++LIBS=$ac_check_lib_save_LIBS
+ fi
+-as_val=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-   if test "x$as_val" = x""yes; then
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_selinux_is_selinux_enabled" >&5
++$as_echo "$ac_cv_lib_selinux_is_selinux_enabled" >&6; }
++if test "x$ac_cv_lib_selinux_is_selinux_enabled" = x""yes; then :
++  for ac_header in selinux/selinux.h
++do :
++  ac_fn_c_check_header_mongrel "$LINENO" "selinux/selinux.h" "ac_cv_header_selinux_selinux_h" "$ac_includes_default"
++if test "x$ac_cv_header_selinux_selinux_h" = x""yes; then :
+   cat >>confdefs.h <<_ACEOF
+-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
++#define HAVE_SELINUX_SELINUX_H 1
+ _ACEOF
+- { $as_echo "$as_me:$LINENO: checking for library containing selinux_raw_to_trans_context" >&5
++ { $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing selinux_raw_to_trans_context" >&5
+ $as_echo_n "checking for library containing selinux_raw_to_trans_context... " >&6; }
+-if test "${ac_cv_search_selinux_raw_to_trans_context+set}" = set; then
++if test "${ac_cv_search_selinux_raw_to_trans_context+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_func_search_save_LIBS=$LIBS
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -18953,59 +15556,30 @@
+     ac_res=-l$ac_lib
+     LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
+   fi
+-  rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++  if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_search_selinux_raw_to_trans_context=$ac_res
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-
+ fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext
+-  if test "${ac_cv_search_selinux_raw_to_trans_context+set}" = set; then
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext
++  if test "${ac_cv_search_selinux_raw_to_trans_context+set}" = set; then :
+   break
+ fi
+ done
+-if test "${ac_cv_search_selinux_raw_to_trans_context+set}" = set; then
+-  :
++if test "${ac_cv_search_selinux_raw_to_trans_context+set}" = set; then :
++
+ else
+   ac_cv_search_selinux_raw_to_trans_context=no
+ fi
+ rm conftest.$ac_ext
+ LIBS=$ac_func_search_save_LIBS
+ fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_search_selinux_raw_to_trans_context" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_selinux_raw_to_trans_context" >&5
+ $as_echo "$ac_cv_search_selinux_raw_to_trans_context" >&6; }
+ ac_res=$ac_cv_search_selinux_raw_to_trans_context
+-if test "$ac_res" != no; then
++if test "$ac_res" != no; then :
+   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_SELINUX 1
+-_ACEOF
++$as_echo "#define HAVE_SELINUX 1" >>confdefs.h
+ 
+         SELINUX_LIBS="-lselinux"
+         msg_selinux=yes
+@@ -19023,12 +15597,10 @@
+ 
+ 
+ # Check whether --enable-empty_view was given.
+-if test "${enable_empty_view+set}" = set; then
++if test "${enable_empty_view+set}" = set; then :
+   enableval=$enable_empty_view; ENABLE_EMPTY_VIEW=1
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define ENABLE_EMPTY_VIEW 1
+-_ACEOF
++$as_echo "#define ENABLE_EMPTY_VIEW 1" >>confdefs.h
+ 
+ fi
+ 
+@@ -19045,7 +15617,7 @@
+ 
+ 
+ # Check whether --enable-packagekit was given.
+-if test "${enable_packagekit+set}" = set; then
++if test "${enable_packagekit+set}" = set; then :
+   enableval=$enable_packagekit;
+ fi
+ 
+@@ -19053,16 +15625,136 @@
+ if test "x$enable_packagekit" != "xno"; then
+ 	msg_packagekit=yes
+ 
+-cat >>confdefs.h <<\_ACEOF
+-#define ENABLE_PACKAGEKIT 1
+-_ACEOF
++$as_echo "#define ENABLE_PACKAGEKIT 1" >>confdefs.h
++
++fi
++
++
++ if false; then
++  HAVE_APP_INDICATOR_TRUE=
++  HAVE_APP_INDICATOR_FALSE='#'
++else
++  HAVE_APP_INDICATOR_TRUE='#'
++  HAVE_APP_INDICATOR_FALSE=
++fi
++
++
++# Check whether --enable-appindicator was given.
++if test "${enable_appindicator+set}" = set; then :
++  enableval=$enable_appindicator;
++fi
++
++
++msg_appindicator=no
++if test "x$enable_appindicator" != "xno"; then
++
++pkg_failed=no
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for APP_INDICATOR" >&5
++$as_echo_n "checking for APP_INDICATOR... " >&6; }
++
++if test -n "$PKG_CONFIG"; then
++    if test -n "$APP_INDICATOR_CFLAGS"; then
++        pkg_cv_APP_INDICATOR_CFLAGS="$APP_INDICATOR_CFLAGS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"appindicator-0.1 >= 0.0.2\""; } >&5
++  ($PKG_CONFIG --exists --print-errors "appindicator-0.1 >= 0.0.2") 2>&5
++  ac_status=$?
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
++  pkg_cv_APP_INDICATOR_CFLAGS=`$PKG_CONFIG --cflags "appindicator-0.1 >= 0.0.2" 2>/dev/null`
++else
++  pkg_failed=yes
++fi
++    fi
++else
++	pkg_failed=untried
++fi
++if test -n "$PKG_CONFIG"; then
++    if test -n "$APP_INDICATOR_LIBS"; then
++        pkg_cv_APP_INDICATOR_LIBS="$APP_INDICATOR_LIBS"
++    else
++        if test -n "$PKG_CONFIG" && \
++    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"appindicator-0.1 >= 0.0.2\""; } >&5
++  ($PKG_CONFIG --exists --print-errors "appindicator-0.1 >= 0.0.2") 2>&5
++  ac_status=$?
++  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
++  test $ac_status = 0; }; then
++  pkg_cv_APP_INDICATOR_LIBS=`$PKG_CONFIG --libs "appindicator-0.1 >= 0.0.2" 2>/dev/null`
++else
++  pkg_failed=yes
++fi
++    fi
++else
++	pkg_failed=untried
++fi
++
++
++
++if test $pkg_failed = yes; then
++
++if $PKG_CONFIG --atleast-pkgconfig-version 0.20; then
++        _pkg_short_errors_supported=yes
++else
++        _pkg_short_errors_supported=no
++fi
++        if test $_pkg_short_errors_supported = yes; then
++	        APP_INDICATOR_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "appindicator-0.1 >= 0.0.2"`
++        else
++	        APP_INDICATOR_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "appindicator-0.1 >= 0.0.2"`
++        fi
++	# Put the nasty error message in config.log where it belongs
++	echo "$APP_INDICATOR_PKG_ERRORS" >&5
++
++	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
++$as_echo "no" >&6; }
++                 if 0; then
++  HAVE_APP_INDICATOR_TRUE=
++  HAVE_APP_INDICATOR_FALSE='#'
++else
++  HAVE_APP_INDICATOR_TRUE='#'
++  HAVE_APP_INDICATOR_FALSE=
++fi
++
++
++elif test $pkg_failed = untried; then
++	 if 0; then
++  HAVE_APP_INDICATOR_TRUE=
++  HAVE_APP_INDICATOR_FALSE='#'
++else
++  HAVE_APP_INDICATOR_TRUE='#'
++  HAVE_APP_INDICATOR_FALSE=
++fi
++
++
++else
++	APP_INDICATOR_CFLAGS=$pkg_cv_APP_INDICATOR_CFLAGS
++	APP_INDICATOR_LIBS=$pkg_cv_APP_INDICATOR_LIBS
++        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
++$as_echo "yes" >&6; }
++
++                      if 1; then
++  HAVE_APP_INDICATOR_TRUE=
++  HAVE_APP_INDICATOR_FALSE='#'
++else
++  HAVE_APP_INDICATOR_TRUE='#'
++  HAVE_APP_INDICATOR_FALSE=
++fi
++
++
++$as_echo "#define HAVE_APP_INDICATOR 1" >>confdefs.h
++
++
++                     msg_appindicator=yes
++fi
++
+ 
+ fi
+ 
+ 
+ 
+ # Check whether --enable-more-warnings was given.
+-if test "${enable_more_warnings+set}" = set; then
++if test "${enable_more_warnings+set}" = set; then :
+   enableval=$enable_more_warnings; set_more_warnings="$enableval"
+ else
+ 
+@@ -19075,10 +15767,10 @@
+ 
+ fi
+ 
+-{ $as_echo "$as_me:$LINENO: checking for more warnings" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for more warnings" >&5
+ $as_echo_n "checking for more warnings... " >&6; }
+ if test "$GCC" = "yes" -a "$set_more_warnings" != "no"; then
+-	{ $as_echo "$as_me:$LINENO: result: yes" >&5
++	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+ $as_echo "yes" >&6; }
+ 	WARNING_CFLAGS="\
+ 	-Wall \
+@@ -19090,13 +15782,9 @@
+ 	for option in -Wstrict-aliasing=0 -Wno-pointer-sign; do
+ 		SAVE_CFLAGS="$CFLAGS"
+ 		CFLAGS="$CFLAGS $option"
+-		{ $as_echo "$as_me:$LINENO: checking whether gcc understands $option" >&5
++		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether gcc understands $option" >&5
+ $as_echo_n "checking whether gcc understands $option... " >&6; }
+-		cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++		cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ int
+@@ -19107,37 +15795,16 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
++if ac_fn_c_try_compile "$LINENO"; then :
+   has_option=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	has_option=no
++  has_option=no
+ fi
+-
+ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+ 		if test $has_option = yes; then
+ 		   	WARNING_CFLAGS="$WARNING_CFLAGS $option"
+ 		fi
+-		{ $as_echo "$as_me:$LINENO: result: $has_option" >&5
++		{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $has_option" >&5
+ $as_echo "$has_option" >&6; }
+ 		CFLAGS="$SAVE_CFLAGS"
+ 		unset has_option
+@@ -19145,26 +15812,19 @@
+ 	done
+ 	unset option
+ else
+-	{ $as_echo "$as_me:$LINENO: result: no" >&5
++	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ 
+-if test "$cross_compiling" = yes; then
+-  { { $as_echo "$as_me:$LINENO: error: in \`$ac_pwd':" >&5
++if test "$cross_compiling" = yes; then :
++  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+ $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+-{ { $as_echo "$as_me:$LINENO: error: cannot run test program while cross compiling
+-See \`config.log' for more details." >&5
+-$as_echo "$as_me: error: cannot run test program while cross compiling
+-See \`config.log' for more details." >&2;}
+-   { (exit 1); exit 1; }; }; }
++as_fn_error "cannot run test program while cross compiling
++See \`config.log' for more details." "$LINENO" 5; }
+ else
+-  cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ #include <time.h>
+                 int main ()
+@@ -19179,65 +15839,32 @@
+                 }
+ 
+ _ACEOF
+-rm -f conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>&5
+-  ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+-  { (case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_try") 2>&5
+-  ac_status=$?
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); }; }; then
+-
+-cat >>confdefs.h <<\_ACEOF
+-#define HAVE_STRFTIME_EXTENSION 1
+-_ACEOF
++if ac_fn_c_try_run "$LINENO"; then :
+ 
++$as_echo "#define HAVE_STRFTIME_EXTENSION 1" >>confdefs.h
+ 
+-else
+-  $as_echo "$as_me: program exited with status $ac_status" >&5
+-$as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+ 
+ fi
+-rm -rf conftest.dSYM
+-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
++rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
++  conftest.$ac_objext conftest.beam conftest.$ac_ext
+ fi
+ 
+ 
+ 
+-
+ #
+ # Checks for Xft/XRender
+ #
+ have_render=false
+ RENDER_LIBS=""
+ 
+-{ $as_echo "$as_me:$LINENO: checking for XRenderFindFormat in -lXrender" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for XRenderFindFormat in -lXrender" >&5
+ $as_echo_n "checking for XRenderFindFormat in -lXrender... " >&6; }
+-if test "${ac_cv_lib_Xrender_XRenderFindFormat+set}" = set; then
++if test "${ac_cv_lib_Xrender_XRenderFindFormat+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+ LIBS="-lXrender -lXext $LIBS"
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
++cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+ /* end confdefs.h.  */
+ 
+ /* Override any GCC internal prototype to avoid an error.
+@@ -19255,228 +15882,62 @@
+   return 0;
+ }
+ _ACEOF
+-rm -f conftest.$ac_objext conftest$ac_exeext
+-if { (ac_try="$ac_link"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_link") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest$ac_exeext && {
+-	 test "$cross_compiling" = yes ||
+-	 $as_test_x conftest$ac_exeext
+-       }; then
++if ac_fn_c_try_link "$LINENO"; then :
+   ac_cv_lib_Xrender_XRenderFindFormat=yes
+ else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_cv_lib_Xrender_XRenderFindFormat=no
+-fi
+-
+-rm -rf conftest.dSYM
+-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+-      conftest$ac_exeext conftest.$ac_ext
+-LIBS=$ac_check_lib_save_LIBS
+-fi
+-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_Xrender_XRenderFindFormat" >&5
+-$as_echo "$ac_cv_lib_Xrender_XRenderFindFormat" >&6; }
+-if test "x$ac_cv_lib_Xrender_XRenderFindFormat" = x""yes; then
+-  have_render=true
+-else
+-  :
+-fi
+-
+-
+-if $have_render ; then
+-   RENDER_LIBS="-lXrender -lXext"
+-   cat >>confdefs.h <<\_ACEOF
+-#define HAVE_RENDER 1
+-_ACEOF
+-
+-fi
+-
+-
+-
+-
+-
+-
+-LIBEGG_MODULES="gtk+-2.0"
+-LIBEGG_CFLAGS="`$PKG_CONFIG --cflags $LIBEGG_MODULES`"
+-
+-LIBEGG_LIBS="`$PKG_CONFIG --libs $LIBEGG_MODULES`"
+-
+-
+-LIBNAUTILUS_EXTENSION_MODULES="glib-2.0 gtk+-2.0"
+-LIBNAUTILUS_EXTENSION_CFLAGS="`$PKG_CONFIG --cflags $LIBNAUTILUS_EXTENSION_MODULES` $WARNING_CFLAGS"
+-
+-LIBNAUTILUS_EXTENSION_LIBS="`$PKG_CONFIG --libs $LIBNAUTILUS_EXTENSION_MODULES`"
+-
+-
+-CORE_MODULES="glib-2.0 gnome-desktop-2.0 gthread-2.0 gio-2.0 gio-unix-2.0 unique-1.0 dbus-glib-1 gail gconf-2.0 libxml-2.0 $EXTRA_CORE_MODULES"
+-CORE_CFLAGS="`$PKG_CONFIG --cflags $CORE_MODULES` $x_cflags $WARNING_CFLAGS"
+-
+-CORE_LIBS="`$PKG_CONFIG --libs $CORE_MODULES` $x_libs"
+-
+-
+-DISABLE_DEPRECATED_CFLAGS="-DG_DISABLE_DEPRECATED -DGTK_DISABLE_DEPRECATED -DGDK_DISABLE_DEPRECATED -DGDK_PIXBUF_DISABLE_DEPRECATED"
+-
+-
+-
+-for ac_header in X11/XF86keysym.h
+-do
+-as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  { $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
+-$as_echo_n "checking for $ac_header... " >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
+-fi
+-ac_res=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
+-else
+-  # Is the header compilable?
+-{ $as_echo "$as_me:$LINENO: checking $ac_header usability" >&5
+-$as_echo_n "checking $ac_header usability... " >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-#include <$ac_header>
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (ac_try="$ac_compile"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_compile") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } && {
+-	 test -z "$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       } && test -s conftest.$ac_objext; then
+-  ac_header_compiler=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-	ac_header_compiler=no
+-fi
+-
+-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+-{ $as_echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+-$as_echo "$ac_header_compiler" >&6; }
+-
+-# Is the header present?
+-{ $as_echo "$as_me:$LINENO: checking $ac_header presence" >&5
+-$as_echo_n "checking $ac_header presence... " >&6; }
+-cat >conftest.$ac_ext <<_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h >>conftest.$ac_ext
+-cat >>conftest.$ac_ext <<_ACEOF
+-/* end confdefs.h.  */
+-#include <$ac_header>
+-_ACEOF
+-if { (ac_try="$ac_cpp conftest.$ac_ext"
+-case "(($ac_try" in
+-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+-  *) ac_try_echo=$ac_try;;
+-esac
+-eval ac_try_echo="\"\$as_me:$LINENO: $ac_try_echo\""
+-$as_echo "$ac_try_echo") >&5
+-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 >conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err >&5
+-  $as_echo "$as_me:$LINENO: \$? = $ac_status" >&5
+-  (exit $ac_status); } >/dev/null && {
+-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+-	 test ! -s conftest.err
+-       }; then
+-  ac_header_preproc=yes
+-else
+-  $as_echo "$as_me: failed program was:" >&5
+-sed 's/^/| /' conftest.$ac_ext >&5
+-
+-  ac_header_preproc=no
++  ac_cv_lib_Xrender_XRenderFindFormat=no
+ fi
+-
+-rm -f conftest.err conftest.$ac_ext
+-{ $as_echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+-$as_echo "$ac_header_preproc" >&6; }
+-
+-# So?  What about this header?
+-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+-  yes:no: )
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+-$as_echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+-$as_echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+-    ac_header_preproc=yes
+-    ;;
+-  no:yes:* )
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+-$as_echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+-$as_echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+-$as_echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+-$as_echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+-$as_echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+-    { $as_echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+-$as_echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+-    ( cat <<\_ASBOX
+-## ----------------------------------------------------------------------- ##
+-## Report this to http://bugzilla.gnome.org/enter_bug.cgi?product=nautilus ##
+-## ----------------------------------------------------------------------- ##
+-_ASBOX
+-     ) | sed "s/^/$as_me: WARNING:     /" >&2
+-    ;;
+-esac
+-{ $as_echo "$as_me:$LINENO: checking for $ac_header" >&5
+-$as_echo_n "checking for $ac_header... " >&6; }
+-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+-  $as_echo_n "(cached) " >&6
++rm -f core conftest.err conftest.$ac_objext \
++    conftest$ac_exeext conftest.$ac_ext
++LIBS=$ac_check_lib_save_LIBS
++fi
++{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_Xrender_XRenderFindFormat" >&5
++$as_echo "$ac_cv_lib_Xrender_XRenderFindFormat" >&6; }
++if test "x$ac_cv_lib_Xrender_XRenderFindFormat" = x""yes; then :
++  have_render=true
+ else
+-  eval "$as_ac_Header=\$ac_header_preproc"
++  :
+ fi
+-ac_res=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-	       { $as_echo "$as_me:$LINENO: result: $ac_res" >&5
+-$as_echo "$ac_res" >&6; }
++
++
++if $have_render ; then
++   RENDER_LIBS="-lXrender -lXext"
++   $as_echo "#define HAVE_RENDER 1" >>confdefs.h
+ 
+ fi
+-as_val=`eval 'as_val=${'$as_ac_Header'}
+-		 $as_echo "$as_val"'`
+-   if test "x$as_val" = x""yes; then
++
++
++
++
++
++
++LIBEGG_MODULES="gtk+-2.0"
++LIBEGG_CFLAGS="`$PKG_CONFIG --cflags $LIBEGG_MODULES`"
++
++LIBEGG_LIBS="`$PKG_CONFIG --libs $LIBEGG_MODULES`"
++
++
++LIBNAUTILUS_EXTENSION_MODULES="glib-2.0 gtk+-2.0"
++LIBNAUTILUS_EXTENSION_CFLAGS="`$PKG_CONFIG --cflags $LIBNAUTILUS_EXTENSION_MODULES` $WARNING_CFLAGS"
++
++LIBNAUTILUS_EXTENSION_LIBS="`$PKG_CONFIG --libs $LIBNAUTILUS_EXTENSION_MODULES`"
++
++
++CORE_MODULES="glib-2.0 gnome-desktop-2.0 launchpad-integration gthread-2.0 gio-2.0 gio-unix-2.0 unique-1.0 dbus-glib-1 gail gconf-2.0 libxml-2.0 $EXTRA_CORE_MODULES"
++CORE_CFLAGS="`$PKG_CONFIG --cflags $CORE_MODULES` $x_cflags $WARNING_CFLAGS"
++
++CORE_LIBS="`$PKG_CONFIG --libs $CORE_MODULES` $x_libs"
++
++
++DISABLE_DEPRECATED_CFLAGS="-DG_DISABLE_DEPRECATED -DGTK_DISABLE_DEPRECATED -DGDK_DISABLE_DEPRECATED -DGDK_PIXBUF_DISABLE_DEPRECATED"
++
++
++for ac_header in X11/XF86keysym.h
++do :
++  ac_fn_c_check_header_mongrel "$LINENO" "X11/XF86keysym.h" "ac_cv_header_X11_XF86keysym_h" "$ac_includes_default"
++if test "x$ac_cv_header_X11_XF86keysym_h" = x""yes; then :
+   cat >>confdefs.h <<_ACEOF
+-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
++#define HAVE_X11_XF86KEYSYM_H 1
+ _ACEOF
+ 
+ fi
+@@ -19487,9 +15948,9 @@
+ 
+ # Extract the first word of "gconftool-2", so it can be a program name with args.
+ set dummy gconftool-2; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_GCONFTOOL+set}" = set; then
++if test "${ac_cv_path_GCONFTOOL+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $GCONFTOOL in
+@@ -19502,14 +15963,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_GCONFTOOL="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   test -z "$ac_cv_path_GCONFTOOL" && ac_cv_path_GCONFTOOL="no"
+@@ -19518,19 +15979,17 @@
+ fi
+ GCONFTOOL=$ac_cv_path_GCONFTOOL
+ if test -n "$GCONFTOOL"; then
+-  { $as_echo "$as_me:$LINENO: result: $GCONFTOOL" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $GCONFTOOL" >&5
+ $as_echo "$GCONFTOOL" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ 
+ if test x"$GCONFTOOL" = xno; then
+-  { { $as_echo "$as_me:$LINENO: error: gconftool-2 executable not found in your path - should be installed with GConf" >&5
+-$as_echo "$as_me: error: gconftool-2 executable not found in your path - should be installed with GConf" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "gconftool-2 executable not found in your path - should be installed with GConf" "$LINENO" 5
+ fi
+ 
+ 
+@@ -19542,13 +16001,13 @@
+ 
+ 
+ # Check whether --with-gconf-source was given.
+-if test "${with_gconf_source+set}" = set; then
++if test "${with_gconf_source+set}" = set; then :
+   withval=$with_gconf_source; GCONF_SCHEMA_CONFIG_SOURCE="$withval"
+ fi
+ 
+ 
+ 
+-  { $as_echo "$as_me:$LINENO: result: Using config source $GCONF_SCHEMA_CONFIG_SOURCE for schema installation" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: Using config source $GCONF_SCHEMA_CONFIG_SOURCE for schema installation" >&5
+ $as_echo "Using config source $GCONF_SCHEMA_CONFIG_SOURCE for schema installation" >&6; }
+ 
+   if test "x$GCONF_SCHEMA_FILE_DIR" = "x"; then
+@@ -19557,22 +16016,20 @@
+ 
+ 
+ # Check whether --with-gconf-schema-file-dir was given.
+-if test "${with_gconf_schema_file_dir+set}" = set; then
++if test "${with_gconf_schema_file_dir+set}" = set; then :
+   withval=$with_gconf_schema_file_dir; GCONF_SCHEMA_FILE_DIR="$withval"
+ fi
+ 
+ 
+ 
+-  { $as_echo "$as_me:$LINENO: result: Using $GCONF_SCHEMA_FILE_DIR as install directory for schema files" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: Using $GCONF_SCHEMA_FILE_DIR as install directory for schema files" >&5
+ $as_echo "Using $GCONF_SCHEMA_FILE_DIR as install directory for schema files" >&6; }
+ 
+   # Check whether --enable-schemas-install was given.
+-if test "${enable_schemas_install+set}" = set; then
++if test "${enable_schemas_install+set}" = set; then :
+   enableval=$enable_schemas_install; case ${enableval} in
+        yes|no) ;;
+-       *) { { $as_echo "$as_me:$LINENO: error: bad value ${enableval} for --enable-schemas-install" >&5
+-$as_echo "$as_me: error: bad value ${enableval} for --enable-schemas-install" >&2;}
+-   { (exit 1); exit 1; }; } ;;
++       *) as_fn_error "bad value ${enableval} for --enable-schemas-install" "$LINENO" 5 ;;
+       esac
+ fi
+ 
+@@ -19589,9 +16046,9 @@
+ 
+ # Extract the first word of "update-mime-database", so it can be a program name with args.
+ set dummy update-mime-database; ac_word=$2
+-{ $as_echo "$as_me:$LINENO: checking for $ac_word" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+ $as_echo_n "checking for $ac_word... " >&6; }
+-if test "${ac_cv_path_UPDATE_MIME_DATABASE+set}" = set; then
++if test "${ac_cv_path_UPDATE_MIME_DATABASE+set}" = set; then :
+   $as_echo_n "(cached) " >&6
+ else
+   case $UPDATE_MIME_DATABASE in
+@@ -19604,14 +16061,14 @@
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  for ac_exec_ext in '' $ac_executable_extensions; do
++    for ac_exec_ext in '' $ac_executable_extensions; do
+   if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
+     ac_cv_path_UPDATE_MIME_DATABASE="$as_dir/$ac_word$ac_exec_ext"
+-    $as_echo "$as_me:$LINENO: found $as_dir/$ac_word$ac_exec_ext" >&5
++    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+     break 2
+   fi
+ done
+-done
++  done
+ IFS=$as_save_IFS
+ 
+   test -z "$ac_cv_path_UPDATE_MIME_DATABASE" && ac_cv_path_UPDATE_MIME_DATABASE="no"
+@@ -19620,17 +16077,17 @@
+ fi
+ UPDATE_MIME_DATABASE=$ac_cv_path_UPDATE_MIME_DATABASE
+ if test -n "$UPDATE_MIME_DATABASE"; then
+-  { $as_echo "$as_me:$LINENO: result: $UPDATE_MIME_DATABASE" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $UPDATE_MIME_DATABASE" >&5
+ $as_echo "$UPDATE_MIME_DATABASE" >&6; }
+ else
+-  { $as_echo "$as_me:$LINENO: result: no" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+ $as_echo "no" >&6; }
+ fi
+ 
+ 
+ 
+ # Check whether --enable-update-mimedb was given.
+-if test "${enable_update_mimedb+set}" = set; then
++if test "${enable_update_mimedb+set}" = set; then :
+   enableval=$enable_update_mimedb;
+ else
+   enable_update_mimedb=yes
+@@ -19675,13 +16132,13 @@
+     case $ac_val in #(
+     *${as_nl}*)
+       case $ac_var in #(
+-      *_cv_*) { $as_echo "$as_me:$LINENO: WARNING: cache variable $ac_var contains a newline" >&5
++      *_cv_*) { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
+ $as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
+       esac
+       case $ac_var in #(
+       _ | IFS | as_nl) ;; #(
+       BASH_ARGV | BASH_SOURCE) eval $ac_var= ;; #(
+-      *) $as_unset $ac_var ;;
++      *) { eval $ac_var=; unset $ac_var;} ;;
+       esac ;;
+     esac
+   done
+@@ -19689,8 +16146,8 @@
+   (set) 2>&1 |
+     case $as_nl`(ac_space=' '; set) 2>&1` in #(
+     *${as_nl}ac_space=\ *)
+-      # `set' does not quote correctly, so add quotes (double-quote
+-      # substitution turns \\\\ into \\, and sed turns \\ into \).
++      # `set' does not quote correctly, so add quotes: double-quote
++      # substitution turns \\\\ into \\, and sed turns \\ into \.
+       sed -n \
+ 	"s/'/'\\\\''/g;
+ 	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
+@@ -19713,11 +16170,11 @@
+ if diff "$cache_file" confcache >/dev/null 2>&1; then :; else
+   if test -w "$cache_file"; then
+     test "x$cache_file" != "x/dev/null" &&
+-      { $as_echo "$as_me:$LINENO: updating cache $cache_file" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: updating cache $cache_file" >&5
+ $as_echo "$as_me: updating cache $cache_file" >&6;}
+     cat confcache >$cache_file
+   else
+-    { $as_echo "$as_me:$LINENO: not updating unwritable cache $cache_file" >&5
++    { $as_echo "$as_me:${as_lineno-$LINENO}: not updating unwritable cache $cache_file" >&5
+ $as_echo "$as_me: not updating unwritable cache $cache_file" >&6;}
+   fi
+ fi
+@@ -19737,8 +16194,8 @@
+   ac_i=`$as_echo "$ac_i" | sed "$ac_script"`
+   # 2. Prepend LIBOBJDIR.  When used with automake>=1.10 LIBOBJDIR
+   #    will be set to the directory where LIBOBJS objects are built.
+-  ac_libobjs="$ac_libobjs \${LIBOBJDIR}$ac_i\$U.$ac_objext"
+-  ac_ltlibobjs="$ac_ltlibobjs \${LIBOBJDIR}$ac_i"'$U.lo'
++  as_fn_append ac_libobjs " \${LIBOBJDIR}$ac_i\$U.$ac_objext"
++  as_fn_append ac_ltlibobjs " \${LIBOBJDIR}$ac_i"'$U.lo'
+ done
+ LIBOBJS=$ac_libobjs
+ 
+@@ -19754,193 +16211,135 @@
+ fi
+ 
+ if test -z "${MAINTAINER_MODE_TRUE}" && test -z "${MAINTAINER_MODE_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"MAINTAINER_MODE\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"MAINTAINER_MODE\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"MAINTAINER_MODE\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${AMDEP_TRUE}" && test -z "${AMDEP_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"AMDEP\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"AMDEP\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"AMDEP\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${am__fastdepCC_TRUE}" && test -z "${am__fastdepCC_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"am__fastdepCC\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"am__fastdepCC\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"am__fastdepCC\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ 
+ if test -z "${am__fastdepCC_TRUE}" && test -z "${am__fastdepCC_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"am__fastdepCC\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"am__fastdepCC\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"am__fastdepCC\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ 
+   ac_config_commands="$ac_config_commands po/stamp-it"
+ 
+ 
+ if test -z "${ENABLE_GTK_DOC_TRUE}" && test -z "${ENABLE_GTK_DOC_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"ENABLE_GTK_DOC\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"ENABLE_GTK_DOC\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"ENABLE_GTK_DOC\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${GTK_DOC_BUILD_HTML_TRUE}" && test -z "${GTK_DOC_BUILD_HTML_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"GTK_DOC_BUILD_HTML\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"GTK_DOC_BUILD_HTML\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"GTK_DOC_BUILD_HTML\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${GTK_DOC_BUILD_PDF_TRUE}" && test -z "${GTK_DOC_BUILD_PDF_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"GTK_DOC_BUILD_PDF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"GTK_DOC_BUILD_PDF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"GTK_DOC_BUILD_PDF\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${GTK_DOC_USE_LIBTOOL_TRUE}" && test -z "${GTK_DOC_USE_LIBTOOL_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"GTK_DOC_USE_LIBTOOL\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"GTK_DOC_USE_LIBTOOL\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"GTK_DOC_USE_LIBTOOL\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${GTK_DOC_USE_REBASE_TRUE}" && test -z "${GTK_DOC_USE_REBASE_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"GTK_DOC_USE_REBASE\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"GTK_DOC_USE_REBASE\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"GTK_DOC_USE_REBASE\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${ENABLE_PROFILER_TRUE}" && test -z "${ENABLE_PROFILER_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"ENABLE_PROFILER\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"ENABLE_PROFILER\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"ENABLE_PROFILER\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${HAVE_EXIF_TRUE}" && test -z "${HAVE_EXIF_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"HAVE_EXIF\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${HAVE_EXIF_TRUE}" && test -z "${HAVE_EXIF_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"HAVE_EXIF\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${HAVE_EXIF_TRUE}" && test -z "${HAVE_EXIF_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"HAVE_EXIF\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${HAVE_EXIF_TRUE}" && test -z "${HAVE_EXIF_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"HAVE_EXIF\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${HAVE_EXIF_TRUE}" && test -z "${HAVE_EXIF_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"HAVE_EXIF\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${HAVE_EXIF_TRUE}" && test -z "${HAVE_EXIF_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"HAVE_EXIF\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${HAVE_EXIF_TRUE}" && test -z "${HAVE_EXIF_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"HAVE_EXIF\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${HAVE_EXIF_TRUE}" && test -z "${HAVE_EXIF_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"HAVE_EXIF\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"HAVE_EXIF\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${HAVE_EXEMPI_TRUE}" && test -z "${HAVE_EXEMPI_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_EXEMPI\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"HAVE_EXEMPI\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"HAVE_EXEMPI\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${HAVE_EXEMPI_TRUE}" && test -z "${HAVE_EXEMPI_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_EXEMPI\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"HAVE_EXEMPI\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"HAVE_EXEMPI\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${HAVE_EXEMPI_TRUE}" && test -z "${HAVE_EXEMPI_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_EXEMPI\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"HAVE_EXEMPI\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"HAVE_EXEMPI\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${HAVE_EXEMPI_TRUE}" && test -z "${HAVE_EXEMPI_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_EXEMPI\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"HAVE_EXEMPI\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"HAVE_EXEMPI\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${ENABLE_EMPTY_VIEW_TRUE}" && test -z "${ENABLE_EMPTY_VIEW_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"ENABLE_EMPTY_VIEW\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"ENABLE_EMPTY_VIEW\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"ENABLE_EMPTY_VIEW\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
++fi
++if test -z "${HAVE_APP_INDICATOR_TRUE}" && test -z "${HAVE_APP_INDICATOR_FALSE}"; then
++  as_fn_error "conditional \"HAVE_APP_INDICATOR\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
++fi
++if test -z "${HAVE_APP_INDICATOR_TRUE}" && test -z "${HAVE_APP_INDICATOR_FALSE}"; then
++  as_fn_error "conditional \"HAVE_APP_INDICATOR\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
++fi
++if test -z "${HAVE_APP_INDICATOR_TRUE}" && test -z "${HAVE_APP_INDICATOR_FALSE}"; then
++  as_fn_error "conditional \"HAVE_APP_INDICATOR\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
++fi
++if test -z "${HAVE_APP_INDICATOR_TRUE}" && test -z "${HAVE_APP_INDICATOR_FALSE}"; then
++  as_fn_error "conditional \"HAVE_APP_INDICATOR\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${GCONF_SCHEMAS_INSTALL_TRUE}" && test -z "${GCONF_SCHEMAS_INSTALL_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"GCONF_SCHEMAS_INSTALL\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"GCONF_SCHEMAS_INSTALL\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"GCONF_SCHEMAS_INSTALL\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ if test -z "${ENABLE_UPDATE_MIMEDB_TRUE}" && test -z "${ENABLE_UPDATE_MIMEDB_FALSE}"; then
+-  { { $as_echo "$as_me:$LINENO: error: conditional \"ENABLE_UPDATE_MIMEDB\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&5
+-$as_echo "$as_me: error: conditional \"ENABLE_UPDATE_MIMEDB\" was never defined.
+-Usually this means the macro was only invoked conditionally." >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "conditional \"ENABLE_UPDATE_MIMEDB\" was never defined.
++Usually this means the macro was only invoked conditionally." "$LINENO" 5
+ fi
+ 
+ : ${CONFIG_STATUS=./config.status}
+ ac_write_fail=0
+ ac_clean_files_save=$ac_clean_files
+ ac_clean_files="$ac_clean_files $CONFIG_STATUS"
+-{ $as_echo "$as_me:$LINENO: creating $CONFIG_STATUS" >&5
++{ $as_echo "$as_me:${as_lineno-$LINENO}: creating $CONFIG_STATUS" >&5
+ $as_echo "$as_me: creating $CONFIG_STATUS" >&6;}
+-cat >$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
++as_write_fail=0
++cat >$CONFIG_STATUS <<_ASEOF || as_write_fail=1
+ #! $SHELL
+ # Generated by $as_me.
+ # Run this file to recreate the current configuration.
+@@ -19950,17 +16349,18 @@
+ debug=false
+ ac_cs_recheck=false
+ ac_cs_silent=false
+-SHELL=\${CONFIG_SHELL-$SHELL}
+-_ACEOF
+ 
+-cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
+-## --------------------- ##
+-## M4sh Initialization.  ##
+-## --------------------- ##
++SHELL=\${CONFIG_SHELL-$SHELL}
++export SHELL
++_ASEOF
++cat >>$CONFIG_STATUS <<\_ASEOF || as_write_fail=1
++## -------------------- ##
++## M4sh Initialization. ##
++## -------------------- ##
+ 
+ # Be more Bourne compatible
+ DUALCASE=1; export DUALCASE # for MKS sh
+-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
++if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
+   emulate sh
+   NULLCMD=:
+   # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
+@@ -19968,23 +16368,15 @@
+   alias -g '${1+"$@"}'='"$@"'
+   setopt NO_GLOB_SUBST
+ else
+-  case `(set -o) 2>/dev/null` in
+-  *posix*) set -o posix ;;
++  case `(set -o) 2>/dev/null` in #(
++  *posix*) :
++    set -o posix ;; #(
++  *) :
++     ;;
+ esac
+-
+ fi
+ 
+ 
+-
+-
+-# PATH needs CR
+-# Avoid depending upon Character Ranges.
+-as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+-as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+-as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+-as_cr_digits='0123456789'
+-as_cr_alnum=$as_cr_Letters$as_cr_digits
+-
+ as_nl='
+ '
+ export as_nl
+@@ -19992,7 +16384,13 @@
+ as_echo='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
+ as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo
+ as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo$as_echo
+-if (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
++# Prefer a ksh shell builtin over an external printf program on Solaris,
++# but without wasting forks for bash or zsh.
++if test -z "$BASH_VERSION$ZSH_VERSION" \
++    && (test "X`print -r -- $as_echo`" = "X$as_echo") 2>/dev/null; then
++  as_echo='print -r --'
++  as_echo_n='print -rn --'
++elif (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
+   as_echo='printf %s\n'
+   as_echo_n='printf %s'
+ else
+@@ -20003,7 +16401,7 @@
+     as_echo_body='eval expr "X$1" : "X\\(.*\\)"'
+     as_echo_n_body='eval
+       arg=$1;
+-      case $arg in
++      case $arg in #(
+       *"$as_nl"*)
+ 	expr "X$arg" : "X\\(.*\\)$as_nl";
+ 	arg=`expr "X$arg" : ".*$as_nl\\(.*\\)"`;;
+@@ -20026,13 +16424,6 @@
+   }
+ fi
+ 
+-# Support unset when possible.
+-if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
+-  as_unset=unset
+-else
+-  as_unset=false
+-fi
+-
+ 
+ # IFS
+ # We need space, tab and new line, in precisely that order.  Quoting is
+@@ -20042,15 +16433,15 @@
+ IFS=" ""	$as_nl"
+ 
+ # Find who we are.  Look in the path if we contain no directory separator.
+-case $0 in
++case $0 in #((
+   *[\\/]* ) as_myself=$0 ;;
+   *) as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+ for as_dir in $PATH
+ do
+   IFS=$as_save_IFS
+   test -z "$as_dir" && as_dir=.
+-  test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+-done
++    test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
++  done
+ IFS=$as_save_IFS
+ 
+      ;;
+@@ -20062,12 +16453,16 @@
+ fi
+ if test ! -f "$as_myself"; then
+   $as_echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
+-  { (exit 1); exit 1; }
++  exit 1
+ fi
+ 
+-# Work around bugs in pre-3.0 UWIN ksh.
+-for as_var in ENV MAIL MAILPATH
+-do ($as_unset $as_var) >/dev/null 2>&1 && $as_unset $as_var
++# Unset variables that we do not need and which cause bugs (e.g. in
++# pre-3.0 UWIN ksh).  But do not cause bugs in bash 2.01; the "|| exit 1"
++# suppresses any "Segmentation fault" message there.  '((' could
++# trigger a bug in pdksh 5.2.14.
++for as_var in BASH_ENV ENV MAIL MAILPATH
++do eval test x\${$as_var+set} = xset \
++  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
+ done
+ PS1='$ '
+ PS2='> '
+@@ -20079,7 +16474,89 @@
+ LANGUAGE=C
+ export LANGUAGE
+ 
+-# Required to use basename.
++# CDPATH.
++(unset CDPATH) >/dev/null 2>&1 && unset CDPATH
++
++
++# as_fn_error ERROR [LINENO LOG_FD]
++# ---------------------------------
++# Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
++# provided, also output the error to LOG_FD, referencing LINENO. Then exit the
++# script with status $?, using 1 if that was 0.
++as_fn_error ()
++{
++  as_status=$?; test $as_status -eq 0 && as_status=1
++  if test "$3"; then
++    as_lineno=${as_lineno-"$2"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
++    $as_echo "$as_me:${as_lineno-$LINENO}: error: $1" >&$3
++  fi
++  $as_echo "$as_me: error: $1" >&2
++  as_fn_exit $as_status
++} # as_fn_error
++
++
++# as_fn_set_status STATUS
++# -----------------------
++# Set $? to STATUS, without forking.
++as_fn_set_status ()
++{
++  return $1
++} # as_fn_set_status
++
++# as_fn_exit STATUS
++# -----------------
++# Exit the shell with STATUS, even in a "trap 0" or "set -e" context.
++as_fn_exit ()
++{
++  set +e
++  as_fn_set_status $1
++  exit $1
++} # as_fn_exit
++
++# as_fn_unset VAR
++# ---------------
++# Portably unset VAR.
++as_fn_unset ()
++{
++  { eval $1=; unset $1;}
++}
++as_unset=as_fn_unset
++# as_fn_append VAR VALUE
++# ----------------------
++# Append the text in VALUE to the end of the definition contained in VAR. Take
++# advantage of any shell optimizations that allow amortized linear growth over
++# repeated appends, instead of the typical quadratic growth present in naive
++# implementations.
++if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null; then :
++  eval 'as_fn_append ()
++  {
++    eval $1+=\$2
++  }'
++else
++  as_fn_append ()
++  {
++    eval $1=\$$1\$2
++  }
++fi # as_fn_append
++
++# as_fn_arith ARG...
++# ------------------
++# Perform arithmetic evaluation on the ARGs, and store the result in the
++# global $as_val. Take advantage of shells that can avoid forks. The arguments
++# must be portable across $(()) and expr.
++if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null; then :
++  eval 'as_fn_arith ()
++  {
++    as_val=$(( $* ))
++  }'
++else
++  as_fn_arith ()
++  {
++    as_val=`expr "$@" || test $? -eq 1`
++  }
++fi # as_fn_arith
++
++
+ if expr a : '\(a\)' >/dev/null 2>&1 &&
+    test "X`expr 00001 : '.*\(...\)'`" = X001; then
+   as_expr=expr
+@@ -20093,8 +16570,12 @@
+   as_basename=false
+ fi
+ 
++if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
++  as_dirname=dirname
++else
++  as_dirname=false
++fi
+ 
+-# Name of the executable.
+ as_me=`$as_basename -- "$0" ||
+ $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
+ 	 X"$0" : 'X\(//\)$' \| \
+@@ -20114,76 +16595,25 @@
+ 	  }
+ 	  s/.*/./; q'`
+ 
+-# CDPATH.
+-$as_unset CDPATH
+-
+-
+-
+-  as_lineno_1=$LINENO
+-  as_lineno_2=$LINENO
+-  test "x$as_lineno_1" != "x$as_lineno_2" &&
+-  test "x`expr $as_lineno_1 + 1`" = "x$as_lineno_2" || {
+-
+-  # Create $as_me.lineno as a copy of $as_myself, but with $LINENO
+-  # uniformly replaced by the line number.  The first 'sed' inserts a
+-  # line-number line after each line using $LINENO; the second 'sed'
+-  # does the real work.  The second script uses 'N' to pair each
+-  # line-number line with the line containing $LINENO, and appends
+-  # trailing '-' during substitution so that $LINENO is not a special
+-  # case at line end.
+-  # (Raja R Harinath suggested sed '=', and Paul Eggert wrote the
+-  # scripts with optimization help from Paolo Bonzini.  Blame Lee
+-  # E. McMahon (1931-1989) for sed's syntax.  :-)
+-  sed -n '
+-    p
+-    /[$]LINENO/=
+-  ' <$as_myself |
+-    sed '
+-      s/[$]LINENO.*/&-/
+-      t lineno
+-      b
+-      :lineno
+-      N
+-      :loop
+-      s/[$]LINENO\([^'$as_cr_alnum'_].*\n\)\(.*\)/\2\1\2/
+-      t loop
+-      s/-\n.*//
+-    ' >$as_me.lineno &&
+-  chmod +x "$as_me.lineno" ||
+-    { $as_echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2
+-   { (exit 1); exit 1; }; }
+-
+-  # Don't try to exec as it changes $[0], causing all sort of problems
+-  # (the dirname of $[0] is not the place where we might find the
+-  # original and so on.  Autoconf is especially sensitive to this).
+-  . "./$as_me.lineno"
+-  # Exit status is that of the last command.
+-  exit
+-}
+-
+-
+-if (as_dir=`dirname -- /` && test "X$as_dir" = X/) >/dev/null 2>&1; then
+-  as_dirname=dirname
+-else
+-  as_dirname=false
+-fi
++# Avoid depending upon Character Ranges.
++as_cr_letters='abcdefghijklmnopqrstuvwxyz'
++as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
++as_cr_Letters=$as_cr_letters$as_cr_LETTERS
++as_cr_digits='0123456789'
++as_cr_alnum=$as_cr_Letters$as_cr_digits
+ 
+ ECHO_C= ECHO_N= ECHO_T=
+-case `echo -n x` in
++case `echo -n x` in #(((((
+ -n*)
+-  case `echo 'x\c'` in
++  case `echo 'xy\c'` in
+   *c*) ECHO_T='	';;	# ECHO_T is single tab character.
+-  *)   ECHO_C='\c';;
++  xy)  ECHO_C='\c';;
++  *)   echo `echo ksh88 bug on AIX 6.1` > /dev/null
++       ECHO_T='	';;
+   esac;;
+ *)
+   ECHO_N='-n';;
+ esac
+-if expr a : '\(a\)' >/dev/null 2>&1 &&
+-   test "X`expr 00001 : '.*\(...\)'`" = X001; then
+-  as_expr=expr
+-else
+-  as_expr=false
+-fi
+ 
+ rm -f conf$$ conf$$.exe conf$$.file
+ if test -d conf$$.dir; then
+@@ -20212,8 +16642,56 @@
+ rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
+ rmdir conf$$.dir 2>/dev/null
+ 
++
++# as_fn_mkdir_p
++# -------------
++# Create "$as_dir" as a directory, including parents if necessary.
++as_fn_mkdir_p ()
++{
++
++  case $as_dir in #(
++  -*) as_dir=./$as_dir;;
++  esac
++  test -d "$as_dir" || eval $as_mkdir_p || {
++    as_dirs=
++    while :; do
++      case $as_dir in #(
++      *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
++      *) as_qdir=$as_dir;;
++      esac
++      as_dirs="'$as_qdir' $as_dirs"
++      as_dir=`$as_dirname -- "$as_dir" ||
++$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
++	 X"$as_dir" : 'X\(//\)[^/]' \| \
++	 X"$as_dir" : 'X\(//\)$' \| \
++	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
++$as_echo X"$as_dir" |
++    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
++	    s//\1/
++	    q
++	  }
++	  /^X\(\/\/\)[^/].*/{
++	    s//\1/
++	    q
++	  }
++	  /^X\(\/\/\)$/{
++	    s//\1/
++	    q
++	  }
++	  /^X\(\/\).*/{
++	    s//\1/
++	    q
++	  }
++	  s/.*/./; q'`
++      test -d "$as_dir" && break
++    done
++    test -z "$as_dirs" || eval "mkdir $as_dirs"
++  } || test -d "$as_dir" || as_fn_error "cannot create directory $as_dir"
++
++
++} # as_fn_mkdir_p
+ if mkdir -p . 2>/dev/null; then
+-  as_mkdir_p=:
++  as_mkdir_p='mkdir -p "$as_dir"'
+ else
+   test -d ./-p && rmdir ./-p
+   as_mkdir_p=false
+@@ -20232,10 +16710,10 @@
+       if test -d "$1"; then
+ 	test -d "$1/.";
+       else
+-	case $1 in
++	case $1 in #(
+ 	-*)set "./$1";;
+ 	esac;
+-	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in
++	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in #((
+ 	???[sx]*):;;*)false;;esac;fi
+     '\'' sh
+   '
+@@ -20250,13 +16728,19 @@
+ 
+ 
+ exec 6>&1
++## ----------------------------------- ##
++## Main body of $CONFIG_STATUS script. ##
++## ----------------------------------- ##
++_ASEOF
++test $as_write_fail = 0 && chmod +x $CONFIG_STATUS || ac_write_fail=1
+ 
+-# Save the log message, to keep $[0] and so on meaningful, and to
++cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
++# Save the log message, to keep $0 and so on meaningful, and to
+ # report actual input values of CONFIG_FILES etc. instead of their
+ # values after options handling.
+ ac_log="
+ This file was extended by nautilus $as_me 2.30.0, which was
+-generated by GNU Autoconf 2.63.  Invocation command line was
++generated by GNU Autoconf 2.65.  Invocation command line was
+ 
+   CONFIG_FILES    = $CONFIG_FILES
+   CONFIG_HEADERS  = $CONFIG_HEADERS
+@@ -20288,13 +16772,15 @@
+ 
+ cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
+ ac_cs_usage="\
+-\`$as_me' instantiates files from templates according to the
+-current configuration.
++\`$as_me' instantiates files and other configuration actions
++from templates according to the current configuration.  Unless the files
++and actions are specified as TAGs, all are instantiated by default.
+ 
+-Usage: $0 [OPTION]... [FILE]...
++Usage: $0 [OPTION]... [TAG]...
+ 
+   -h, --help       print this help, then exit
+   -V, --version    print version number and configuration settings, then exit
++      --config     print configuration, then exit
+   -q, --quiet, --silent
+                    do not print progress messages
+   -d, --debug      don't remove temporary files
+@@ -20313,16 +16799,17 @@
+ Configuration commands:
+ $config_commands
+ 
+-Report bugs to <bug-autoconf@gnu.org>."
++Report bugs to <http://bugzilla.gnome.org/enter_bug.cgi?product=nautilus>."
+ 
+ _ACEOF
+ cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
++ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
+ ac_cs_version="\\
+ nautilus config.status 2.30.0
+-configured by $0, generated by GNU Autoconf 2.63,
+-  with options \\"`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
++configured by $0, generated by GNU Autoconf 2.65,
++  with options \\"\$ac_cs_config\\"
+ 
+-Copyright (C) 2008 Free Software Foundation, Inc.
++Copyright (C) 2009 Free Software Foundation, Inc.
+ This config.status script is free software; the Free Software Foundation
+ gives unlimited permission to copy, distribute and modify it."
+ 
+@@ -20358,6 +16845,8 @@
+     ac_cs_recheck=: ;;
+   --version | --versio | --versi | --vers | --ver | --ve | --v | -V )
+     $as_echo "$ac_cs_version"; exit ;;
++  --config | --confi | --conf | --con | --co | --c )
++    $as_echo "$ac_cs_config"; exit ;;
+   --debug | --debu | --deb | --de | --d | -d )
+     debug=: ;;
+   --file | --fil | --fi | --f )
+@@ -20365,20 +16854,19 @@
+     case $ac_optarg in
+     *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
+     esac
+-    CONFIG_FILES="$CONFIG_FILES '$ac_optarg'"
++    as_fn_append CONFIG_FILES " '$ac_optarg'"
+     ac_need_defaults=false;;
+   --header | --heade | --head | --hea )
+     $ac_shift
+     case $ac_optarg in
+     *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
+     esac
+-    CONFIG_HEADERS="$CONFIG_HEADERS '$ac_optarg'"
++    as_fn_append CONFIG_HEADERS " '$ac_optarg'"
+     ac_need_defaults=false;;
+   --he | --h)
+     # Conflict between --help and --header
+-    { $as_echo "$as_me: error: ambiguous option: $1
+-Try \`$0 --help' for more information." >&2
+-   { (exit 1); exit 1; }; };;
++    as_fn_error "ambiguous option: \`$1'
++Try \`$0 --help' for more information.";;
+   --help | --hel | -h )
+     $as_echo "$ac_cs_usage"; exit ;;
+   -q | -quiet | --quiet | --quie | --qui | --qu | --q \
+@@ -20386,11 +16874,10 @@
+     ac_cs_silent=: ;;
+ 
+   # This is an error.
+-  -*) { $as_echo "$as_me: error: unrecognized option: $1
+-Try \`$0 --help' for more information." >&2
+-   { (exit 1); exit 1; }; } ;;
++  -*) as_fn_error "unrecognized option: \`$1'
++Try \`$0 --help' for more information." ;;
+ 
+-  *) ac_config_targets="$ac_config_targets $1"
++  *) as_fn_append ac_config_targets " $1"
+      ac_need_defaults=false ;;
+ 
+   esac
+@@ -20731,9 +17218,7 @@
+     "test/Makefile") CONFIG_FILES="$CONFIG_FILES test/Makefile" ;;
+     "po/stamp-it") CONFIG_COMMANDS="$CONFIG_COMMANDS po/stamp-it" ;;
+ 
+-  *) { { $as_echo "$as_me:$LINENO: error: invalid argument: $ac_config_target" >&5
+-$as_echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
+-   { (exit 1); exit 1; }; };;
++  *) as_fn_error "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
+   esac
+ done
+ 
+@@ -20760,7 +17245,7 @@
+   trap 'exit_status=$?
+   { test -z "$tmp" || test ! -d "$tmp" || rm -fr "$tmp"; } && exit $exit_status
+ ' 0
+-  trap '{ (exit 1); exit 1; }' 1 2 13 15
++  trap 'as_fn_exit 1' 1 2 13 15
+ }
+ # Create a (secure) tmp directory for tmp files.
+ 
+@@ -20771,11 +17256,7 @@
+ {
+   tmp=./conf$$-$RANDOM
+   (umask 077 && mkdir "$tmp")
+-} ||
+-{
+-   $as_echo "$as_me: cannot create a temporary directory in ." >&2
+-   { (exit 1); exit 1; }
+-}
++} || as_fn_error "cannot create a temporary directory in ." "$LINENO" 5
+ 
+ # Set up the scripts for CONFIG_FILES section.
+ # No need to generate them if there are no CONFIG_FILES.
+@@ -20783,10 +17264,16 @@
+ if test -n "$CONFIG_FILES"; then
+ 
+ 
+-ac_cr='
'
++ac_cr=`echo X | tr X '\015'`
++# On cygwin, bash can eat \r inside `` if the user requested igncr.
++# But we know of no other shell where ac_cr would be empty at this
++# point, so we can use a bashism as a fallback.
++if test "x$ac_cr" = x; then
++  eval ac_cr=\$\'\\r\'
++fi
+ ac_cs_awk_cr=`$AWK 'BEGIN { print "a\rb" }' </dev/null 2>/dev/null`
+ if test "$ac_cs_awk_cr" = "a${ac_cr}b"; then
+-  ac_cs_awk_cr='\\r'
++  ac_cs_awk_cr='\r'
+ else
+   ac_cs_awk_cr=$ac_cr
+ fi
+@@ -20800,24 +17287,18 @@
+   echo "$ac_subst_vars" | sed 's/.*/&!$&$ac_delim/' &&
+   echo "_ACEOF"
+ } >conf$$subs.sh ||
+-  { { $as_echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
+-$as_echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
+ ac_delim_num=`echo "$ac_subst_vars" | grep -c '$'`
+ ac_delim='%!_!# '
+ for ac_last_try in false false false false false :; do
+   . ./conf$$subs.sh ||
+-    { { $as_echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
+-$as_echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
+ 
+   ac_delim_n=`sed -n "s/.*$ac_delim\$/X/p" conf$$subs.awk | grep -c X`
+   if test $ac_delim_n = $ac_delim_num; then
+     break
+   elif $ac_last_try; then
+-    { { $as_echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
+-$as_echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
+   else
+     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
+   fi
+@@ -20839,7 +17320,7 @@
+ t delim
+ :nl
+ h
+-s/\(.\{148\}\).*/\1/
++s/\(.\{148\}\)..*/\1/
+ t more1
+ s/["\\]/\\&/g; s/^/"/; s/$/\\n"\\/
+ p
+@@ -20853,7 +17334,7 @@
+ t nl
+ :delim
+ h
+-s/\(.\{148\}\).*/\1/
++s/\(.\{148\}\)..*/\1/
+ t more2
+ s/["\\]/\\&/g; s/^/"/; s/$/"/
+ p
+@@ -20906,9 +17387,7 @@
+ else
+   cat
+ fi < "$tmp/subs1.awk" > "$tmp/subs.awk" \
+-  || { { $as_echo "$as_me:$LINENO: error: could not setup config files machinery" >&5
+-$as_echo "$as_me: error: could not setup config files machinery" >&2;}
+-   { (exit 1); exit 1; }; }
++  || as_fn_error "could not setup config files machinery" "$LINENO" 5
+ _ACEOF
+ 
+ # VPATH may cause trouble with some makes, so we remove $(srcdir),
+@@ -20949,9 +17428,7 @@
+   if test -z "$ac_t"; then
+     break
+   elif $ac_last_try; then
+-    { { $as_echo "$as_me:$LINENO: error: could not make $CONFIG_HEADERS" >&5
+-$as_echo "$as_me: error: could not make $CONFIG_HEADERS" >&2;}
+-   { (exit 1); exit 1; }; }
++    as_fn_error "could not make $CONFIG_HEADERS" "$LINENO" 5
+   else
+     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
+   fi
+@@ -21036,9 +17513,7 @@
+ _ACAWK
+ _ACEOF
+ cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
+-  { { $as_echo "$as_me:$LINENO: error: could not setup config headers machinery" >&5
+-$as_echo "$as_me: error: could not setup config headers machinery" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "could not setup config headers machinery" "$LINENO" 5
+ fi # test -n "$CONFIG_HEADERS"
+ 
+ 
+@@ -21051,9 +17526,7 @@
+   esac
+   case $ac_mode$ac_tag in
+   :[FHL]*:*);;
+-  :L* | :C*:*) { { $as_echo "$as_me:$LINENO: error: invalid tag $ac_tag" >&5
+-$as_echo "$as_me: error: invalid tag $ac_tag" >&2;}
+-   { (exit 1); exit 1; }; };;
++  :L* | :C*:*) as_fn_error "invalid tag \`$ac_tag'" "$LINENO" 5;;
+   :[FH]-) ac_tag=-:-;;
+   :[FH]*) ac_tag=$ac_tag:$ac_tag.in;;
+   esac
+@@ -21081,12 +17554,10 @@
+ 	   [\\/$]*) false;;
+ 	   *) test -f "$srcdir/$ac_f" && ac_f="$srcdir/$ac_f";;
+ 	   esac ||
+-	   { { $as_echo "$as_me:$LINENO: error: cannot find input file: $ac_f" >&5
+-$as_echo "$as_me: error: cannot find input file: $ac_f" >&2;}
+-   { (exit 1); exit 1; }; };;
++	   as_fn_error "cannot find input file: \`$ac_f'" "$LINENO" 5;;
+       esac
+       case $ac_f in *\'*) ac_f=`$as_echo "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
+-      ac_file_inputs="$ac_file_inputs '$ac_f'"
++      as_fn_append ac_file_inputs " '$ac_f'"
+     done
+ 
+     # Let's still pretend it is `configure' which instantiates (i.e., don't
+@@ -21097,7 +17568,7 @@
+ 	`' by configure.'
+     if test x"$ac_file" != x-; then
+       configure_input="$ac_file.  $configure_input"
+-      { $as_echo "$as_me:$LINENO: creating $ac_file" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: creating $ac_file" >&5
+ $as_echo "$as_me: creating $ac_file" >&6;}
+     fi
+     # Neutralize special characters interpreted by sed in replacement strings.
+@@ -21110,9 +17581,7 @@
+ 
+     case $ac_tag in
+     *:-:* | *:-) cat >"$tmp/stdin" \
+-      || { { $as_echo "$as_me:$LINENO: error: could not create $ac_file" >&5
+-$as_echo "$as_me: error: could not create $ac_file" >&2;}
+-   { (exit 1); exit 1; }; } ;;
++      || as_fn_error "could not create $ac_file" "$LINENO" 5 ;;
+     esac
+     ;;
+   esac
+@@ -21140,47 +17609,7 @@
+ 	    q
+ 	  }
+ 	  s/.*/./; q'`
+-  { as_dir="$ac_dir"
+-  case $as_dir in #(
+-  -*) as_dir=./$as_dir;;
+-  esac
+-  test -d "$as_dir" || { $as_mkdir_p && mkdir -p "$as_dir"; } || {
+-    as_dirs=
+-    while :; do
+-      case $as_dir in #(
+-      *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
+-      *) as_qdir=$as_dir;;
+-      esac
+-      as_dirs="'$as_qdir' $as_dirs"
+-      as_dir=`$as_dirname -- "$as_dir" ||
+-$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+-	 X"$as_dir" : 'X\(//\)[^/]' \| \
+-	 X"$as_dir" : 'X\(//\)$' \| \
+-	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
+-$as_echo X"$as_dir" |
+-    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
+-	    s//\1/
+-	    q
+-	  }
+-	  /^X\(\/\/\)[^/].*/{
+-	    s//\1/
+-	    q
+-	  }
+-	  /^X\(\/\/\)$/{
+-	    s//\1/
+-	    q
+-	  }
+-	  /^X\(\/\).*/{
+-	    s//\1/
+-	    q
+-	  }
+-	  s/.*/./; q'`
+-      test -d "$as_dir" && break
+-    done
+-    test -z "$as_dirs" || eval "mkdir $as_dirs"
+-  } || test -d "$as_dir" || { { $as_echo "$as_me:$LINENO: error: cannot create directory $as_dir" >&5
+-$as_echo "$as_me: error: cannot create directory $as_dir" >&2;}
+-   { (exit 1); exit 1; }; }; }
++  as_dir="$ac_dir"; as_fn_mkdir_p
+   ac_builddir=.
+ 
+ case "$ac_dir" in
+@@ -21237,7 +17666,6 @@
+ # If the template does not know about datarootdir, expand it.
+ # FIXME: This hack should be removed a few years after 2.60.
+ ac_datarootdir_hack=; ac_datarootdir_seen=
+-
+ ac_sed_dataroot='
+ /datarootdir/ {
+   p
+@@ -21247,12 +17675,11 @@
+ /@docdir@/p
+ /@infodir@/p
+ /@localedir@/p
+-/@mandir@/p
+-'
++/@mandir@/p'
+ case `eval "sed -n \"\$ac_sed_dataroot\" $ac_file_inputs"` in
+ *datarootdir*) ac_datarootdir_seen=yes;;
+ *@datadir@*|*@docdir@*|*@infodir@*|*@localedir@*|*@mandir@*)
+-  { $as_echo "$as_me:$LINENO: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
+ $as_echo "$as_me: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&2;}
+ _ACEOF
+ cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
+@@ -21262,7 +17689,7 @@
+   s&@infodir@&$infodir&g
+   s&@localedir@&$localedir&g
+   s&@mandir@&$mandir&g
+-    s&\\\${datarootdir}&$datarootdir&g' ;;
++  s&\\\${datarootdir}&$datarootdir&g' ;;
+ esac
+ _ACEOF
+ 
+@@ -21291,14 +17718,12 @@
+ $ac_datarootdir_hack
+ "
+ eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$tmp/subs.awk" >$tmp/out \
+-  || { { $as_echo "$as_me:$LINENO: error: could not create $ac_file" >&5
+-$as_echo "$as_me: error: could not create $ac_file" >&2;}
+-   { (exit 1); exit 1; }; }
++  || as_fn_error "could not create $ac_file" "$LINENO" 5
+ 
+ test -z "$ac_datarootdir_hack$ac_datarootdir_seen" &&
+   { ac_out=`sed -n '/\${datarootdir}/p' "$tmp/out"`; test -n "$ac_out"; } &&
+   { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' "$tmp/out"`; test -z "$ac_out"; } &&
+-  { $as_echo "$as_me:$LINENO: WARNING: $ac_file contains a reference to the variable \`datarootdir'
++  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
+ which seems to be undefined.  Please make sure it is defined." >&5
+ $as_echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
+ which seems to be undefined.  Please make sure it is defined." >&2;}
+@@ -21308,9 +17733,7 @@
+   -) cat "$tmp/out" && rm -f "$tmp/out";;
+   *) rm -f "$ac_file" && mv "$tmp/out" "$ac_file";;
+   esac \
+-  || { { $as_echo "$as_me:$LINENO: error: could not create $ac_file" >&5
+-$as_echo "$as_me: error: could not create $ac_file" >&2;}
+-   { (exit 1); exit 1; }; }
++  || as_fn_error "could not create $ac_file" "$LINENO" 5
+  ;;
+   :H)
+   #
+@@ -21321,25 +17744,19 @@
+       $as_echo "/* $configure_input  */" \
+       && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs"
+     } >"$tmp/config.h" \
+-      || { { $as_echo "$as_me:$LINENO: error: could not create $ac_file" >&5
+-$as_echo "$as_me: error: could not create $ac_file" >&2;}
+-   { (exit 1); exit 1; }; }
++      || as_fn_error "could not create $ac_file" "$LINENO" 5
+     if diff "$ac_file" "$tmp/config.h" >/dev/null 2>&1; then
+-      { $as_echo "$as_me:$LINENO: $ac_file is unchanged" >&5
++      { $as_echo "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
+ $as_echo "$as_me: $ac_file is unchanged" >&6;}
+     else
+       rm -f "$ac_file"
+       mv "$tmp/config.h" "$ac_file" \
+-	|| { { $as_echo "$as_me:$LINENO: error: could not create $ac_file" >&5
+-$as_echo "$as_me: error: could not create $ac_file" >&2;}
+-   { (exit 1); exit 1; }; }
++	|| as_fn_error "could not create $ac_file" "$LINENO" 5
+     fi
+   else
+     $as_echo "/* $configure_input  */" \
+       && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs" \
+-      || { { $as_echo "$as_me:$LINENO: error: could not create -" >&5
+-$as_echo "$as_me: error: could not create -" >&2;}
+-   { (exit 1); exit 1; }; }
++      || as_fn_error "could not create -" "$LINENO" 5
+   fi
+ # Compute "$ac_file"'s index in $config_headers.
+ _am_arg="$ac_file"
+@@ -21377,7 +17794,7 @@
+ 	  s/.*/./; q'`/stamp-h$_am_stamp_count
+  ;;
+ 
+-  :C)  { $as_echo "$as_me:$LINENO: executing $ac_file commands" >&5
++  :C)  { $as_echo "$as_me:${as_lineno-$LINENO}: executing $ac_file commands" >&5
+ $as_echo "$as_me: executing $ac_file commands" >&6;}
+  ;;
+   esac
+@@ -21472,47 +17889,7 @@
+ 	    q
+ 	  }
+ 	  s/.*/./; q'`
+-      { as_dir=$dirpart/$fdir
+-  case $as_dir in #(
+-  -*) as_dir=./$as_dir;;
+-  esac
+-  test -d "$as_dir" || { $as_mkdir_p && mkdir -p "$as_dir"; } || {
+-    as_dirs=
+-    while :; do
+-      case $as_dir in #(
+-      *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
+-      *) as_qdir=$as_dir;;
+-      esac
+-      as_dirs="'$as_qdir' $as_dirs"
+-      as_dir=`$as_dirname -- "$as_dir" ||
+-$as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+-	 X"$as_dir" : 'X\(//\)[^/]' \| \
+-	 X"$as_dir" : 'X\(//\)$' \| \
+-	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
+-$as_echo X"$as_dir" |
+-    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
+-	    s//\1/
+-	    q
+-	  }
+-	  /^X\(\/\/\)[^/].*/{
+-	    s//\1/
+-	    q
+-	  }
+-	  /^X\(\/\/\)$/{
+-	    s//\1/
+-	    q
+-	  }
+-	  /^X\(\/\).*/{
+-	    s//\1/
+-	    q
+-	  }
+-	  s/.*/./; q'`
+-      test -d "$as_dir" && break
+-    done
+-    test -z "$as_dirs" || eval "mkdir $as_dirs"
+-  } || test -d "$as_dir" || { { $as_echo "$as_me:$LINENO: error: cannot create directory $as_dir" >&5
+-$as_echo "$as_me: error: cannot create directory $as_dir" >&2;}
+-   { (exit 1); exit 1; }; }; }
++      as_dir=$dirpart/$fdir; as_fn_mkdir_p
+       # echo "creating $dirpart/$file"
+       echo '# dummy' > "$dirpart/$file"
+     done
+@@ -22165,9 +18542,7 @@
+       esac ;;
+     "po/stamp-it":C)
+     if  ! grep "^# INTLTOOL_MAKEFILE$" "po/Makefile.in" > /dev/null ; then
+-       { { $as_echo "$as_me:$LINENO: error: po/Makefile.in.in was not created by intltoolize." >&5
+-$as_echo "$as_me: error: po/Makefile.in.in was not created by intltoolize." >&2;}
+-   { (exit 1); exit 1; }; }
++       as_fn_error "po/Makefile.in.in was not created by intltoolize." "$LINENO" 5
+     fi
+     rm -f "po/stamp-it" "po/stamp-it.tmp" "po/POTFILES" "po/Makefile.tmp"
+     >"po/stamp-it.tmp"
+@@ -22190,15 +18565,12 @@
+ done # for ac_tag
+ 
+ 
+-{ (exit 0); exit 0; }
++as_fn_exit 0
+ _ACEOF
+-chmod +x $CONFIG_STATUS
+ ac_clean_files=$ac_clean_files_save
+ 
+ test $ac_write_fail = 0 ||
+-  { { $as_echo "$as_me:$LINENO: error: write failure creating $CONFIG_STATUS" >&5
+-$as_echo "$as_me: error: write failure creating $CONFIG_STATUS" >&2;}
+-   { (exit 1); exit 1; }; }
++  as_fn_error "write failure creating $CONFIG_STATUS" "$LINENO" 5
+ 
+ 
+ # configure is writing to config.log, and then calls config.status.
+@@ -22219,10 +18591,10 @@
+   exec 5>>config.log
+   # Use ||, not &&, to avoid exiting from the if with $? = 1, which
+   # would make configure fail if this is the last instruction.
+-  $ac_cs_success || { (exit 1); exit 1; }
++  $ac_cs_success || as_fn_exit $?
+ fi
+ if test -n "$ac_unrecognized_opts" && test "$enable_option_checking" != no; then
+-  { $as_echo "$as_me:$LINENO: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
++  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
+ $as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2;}
+ fi
+ 
+@@ -22235,6 +18607,7 @@
+ 	compiler:		${CC}
+ 	xmp support:		$msg_xmp
+ 	PackageKit support:     $msg_packagekit
++	AppIndicator support:	$msg_appindicator
+ 
+ 	profiling support:      ${profiling_support}
+ 	nautilus-extension documentation: ${enable_gtk_doc}
+diff -Nur nautilus-2.30.0/cut-n-paste-code/libegg/Makefile.in nautilus-2.30.0.ubuntu/cut-n-paste-code/libegg/Makefile.in
+--- nautilus-2.30.0/cut-n-paste-code/libegg/Makefile.in	2010-03-29 11:10:14.000000000 +0200
++++ nautilus-2.30.0.ubuntu/cut-n-paste-code/libegg/Makefile.in	2010-03-29 11:49:38.000000000 +0200
+@@ -102,6 +102,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -197,6 +199,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/cut-n-paste-code/Makefile.in nautilus-2.30.0.ubuntu/cut-n-paste-code/Makefile.in
+--- nautilus-2.30.0/cut-n-paste-code/Makefile.in	2010-03-29 11:10:14.000000000 +0200
++++ nautilus-2.30.0.ubuntu/cut-n-paste-code/Makefile.in	2010-03-29 11:49:38.000000000 +0200
+@@ -103,6 +103,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -198,6 +200,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/data/icons/Makefile.in nautilus-2.30.0.ubuntu/data/icons/Makefile.in
+--- nautilus-2.30.0/data/icons/Makefile.in	2010-03-29 11:10:14.000000000 +0200
++++ nautilus-2.30.0.ubuntu/data/icons/Makefile.in	2010-03-29 11:49:38.000000000 +0200
+@@ -65,6 +65,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -160,6 +162,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/data/Makefile.in nautilus-2.30.0.ubuntu/data/Makefile.in
+--- nautilus-2.30.0/data/Makefile.in	2010-03-29 11:10:14.000000000 +0200
++++ nautilus-2.30.0.ubuntu/data/Makefile.in	2010-03-29 11:49:38.000000000 +0200
+@@ -139,6 +139,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -234,6 +236,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/data/patterns/Makefile.in nautilus-2.30.0.ubuntu/data/patterns/Makefile.in
+--- nautilus-2.30.0/data/patterns/Makefile.in	2010-03-29 11:10:14.000000000 +0200
++++ nautilus-2.30.0.ubuntu/data/patterns/Makefile.in	2010-03-29 11:49:38.000000000 +0200
+@@ -87,6 +87,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -182,6 +184,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/docs/Makefile.in nautilus-2.30.0.ubuntu/docs/Makefile.in
+--- nautilus-2.30.0/docs/Makefile.in	2010-03-29 11:10:14.000000000 +0200
++++ nautilus-2.30.0.ubuntu/docs/Makefile.in	2010-03-29 11:49:39.000000000 +0200
+@@ -128,6 +128,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -223,6 +225,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/docs/reference/libnautilus-extension/Makefile.in nautilus-2.30.0.ubuntu/docs/reference/libnautilus-extension/Makefile.in
+--- nautilus-2.30.0/docs/reference/libnautilus-extension/Makefile.in	2010-03-29 11:10:14.000000000 +0200
++++ nautilus-2.30.0.ubuntu/docs/reference/libnautilus-extension/Makefile.in	2010-03-29 11:49:39.000000000 +0200
+@@ -70,6 +70,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -165,6 +167,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/docs/reference/Makefile.in nautilus-2.30.0.ubuntu/docs/reference/Makefile.in
+--- nautilus-2.30.0/docs/reference/Makefile.in	2010-03-29 11:10:14.000000000 +0200
++++ nautilus-2.30.0.ubuntu/docs/reference/Makefile.in	2010-03-29 11:49:39.000000000 +0200
+@@ -103,6 +103,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -198,6 +200,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/eel/Makefile.in nautilus-2.30.0.ubuntu/eel/Makefile.in
+--- nautilus-2.30.0/eel/Makefile.in	2010-03-29 11:10:15.000000000 +0200
++++ nautilus-2.30.0.ubuntu/eel/Makefile.in	2010-03-29 11:49:39.000000000 +0200
+@@ -52,7 +52,9 @@
+ CONFIG_CLEAN_FILES =
+ CONFIG_CLEAN_VPATH_FILES =
+ LTLIBRARIES = $(noinst_LTLIBRARIES)
+-libeel_2_la_LIBADD =
++am__DEPENDENCIES_1 =
++libeel_2_la_DEPENDENCIES = $(am__DEPENDENCIES_1) $(am__DEPENDENCIES_1) \
++	$(am__DEPENDENCIES_1) $(am__DEPENDENCIES_1)
+ am__objects_1 =
+ am_libeel_2_la_OBJECTS = eel-accessibility.lo eel-alert-dialog.lo \
+ 	eel-art-extensions.lo eel-art-gtk-extensions.lo \
+@@ -122,6 +124,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -217,6 +221,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+@@ -312,6 +317,9 @@
+ 
+ libeel_2_la_LDFLAGS = \
+ 	-no-undefined				\
++	$(NULL)
++
++libeel_2_la_LIBADD = \
+ 	$(CORE_LIBS)				\
+ 	$(RENDER_LIBS)				\
+ 	$(X_LIBS)				\
+diff -Nur nautilus-2.30.0/icons/Makefile.in nautilus-2.30.0.ubuntu/icons/Makefile.in
+--- nautilus-2.30.0/icons/Makefile.in	2010-03-29 11:10:15.000000000 +0200
++++ nautilus-2.30.0.ubuntu/icons/Makefile.in	2010-03-29 11:49:39.000000000 +0200
+@@ -87,6 +87,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -182,6 +184,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/libnautilus-extension/Makefile.in nautilus-2.30.0.ubuntu/libnautilus-extension/Makefile.in
+--- nautilus-2.30.0/libnautilus-extension/Makefile.in	2010-03-29 11:10:15.000000000 +0200
++++ nautilus-2.30.0.ubuntu/libnautilus-extension/Makefile.in	2010-03-29 11:49:39.000000000 +0200
+@@ -137,6 +137,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -232,6 +234,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/libnautilus-private/Makefile.in nautilus-2.30.0.ubuntu/libnautilus-private/Makefile.in
+--- nautilus-2.30.0/libnautilus-private/Makefile.in	2010-03-29 11:49:07.000000000 +0200
++++ nautilus-2.30.0.ubuntu/libnautilus-private/Makefile.in	2010-03-29 11:49:39.000000000 +0200
+@@ -58,7 +58,8 @@
+ libnautilus_private_la_DEPENDENCIES = $(am__DEPENDENCIES_2) \
+ 	$(am__DEPENDENCIES_1) $(top_builddir)/eel/libeel-2.la \
+ 	$(top_builddir)/libnautilus-extension/libnautilus-extension.la \
+-	$(am__DEPENDENCIES_1) $(am__DEPENDENCIES_1)
++	$(am__DEPENDENCIES_1) $(am__DEPENDENCIES_1) \
++	$(am__DEPENDENCIES_1)
+ am__objects_1 =
+ am_libnautilus_private_la_OBJECTS = nautilus-autorun.lo \
+ 	nautilus-bookmark.lo nautilus-cell-renderer-pixbuf-emblem.lo \
+@@ -266,6 +267,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/Makefile.in nautilus-2.30.0.ubuntu/Makefile.in
+--- nautilus-2.30.0/Makefile.in	2010-03-29 11:10:15.000000000 +0200
++++ nautilus-2.30.0.ubuntu/Makefile.in	2010-03-29 11:49:39.000000000 +0200
+@@ -120,6 +120,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -215,6 +217,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/src/file-manager/Makefile.in nautilus-2.30.0.ubuntu/src/file-manager/Makefile.in
+--- nautilus-2.30.0/src/file-manager/Makefile.in	2010-03-29 11:10:15.000000000 +0200
++++ nautilus-2.30.0.ubuntu/src/file-manager/Makefile.in	2010-03-29 11:49:39.000000000 +0200
+@@ -137,6 +137,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -232,6 +234,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/src/Makefile.in nautilus-2.30.0.ubuntu/src/Makefile.in
+--- nautilus-2.30.0/src/Makefile.in	2010-03-29 11:10:15.000000000 +0200
++++ nautilus-2.30.0.ubuntu/src/Makefile.in	2010-03-29 11:49:39.000000000 +0200
+@@ -258,6 +258,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -353,6 +355,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
+diff -Nur nautilus-2.30.0/test/Makefile.in nautilus-2.30.0.ubuntu/test/Makefile.in
+--- nautilus-2.30.0/test/Makefile.in	2010-03-29 11:10:15.000000000 +0200
++++ nautilus-2.30.0.ubuntu/test/Makefile.in	2010-03-29 11:49:39.000000000 +0200
+@@ -185,6 +185,8 @@
+ ALL_LINGUAS = @ALL_LINGUAS@
+ AMTAR = @AMTAR@
+ AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
++APP_INDICATOR_CFLAGS = @APP_INDICATOR_CFLAGS@
++APP_INDICATOR_LIBS = @APP_INDICATOR_LIBS@
+ AR = @AR@
+ AS = @AS@
+ AUTOCONF = @AUTOCONF@
+@@ -280,6 +282,7 @@
+ PACKAGE_NAME = @PACKAGE_NAME@
+ PACKAGE_STRING = @PACKAGE_STRING@
+ PACKAGE_TARNAME = @PACKAGE_TARNAME@
++PACKAGE_URL = @PACKAGE_URL@
+ PACKAGE_VERSION = @PACKAGE_VERSION@
+ PANGO_REQUIRED = @PANGO_REQUIRED@
+ PATH_SEPARATOR = @PATH_SEPARATOR@
--- nautilus-2.30.0.orig/debian/patches/02_eel_libadd.patch
+++ nautilus-2.30.0/debian/patches/02_eel_libadd.patch
@@ -0,0 +1,14 @@
+Index: nautilus-2.29.92.1/eel/Makefile.am
+===================================================================
+--- nautilus-2.29.92.1.orig/eel/Makefile.am	2010-03-10 14:59:13.000000000 +0100
++++ nautilus-2.29.92.1/eel/Makefile.am	2010-03-10 21:54:59.000000000 +0100
+@@ -17,6 +17,9 @@
+ 
+ libeel_2_la_LDFLAGS =				\
+ 	-no-undefined				\
++	$(NULL)
++
++libeel_2_la_LIBADD =				\
+ 	$(CORE_LIBS)				\
+ 	$(RENDER_LIBS)				\
+ 	$(X_LIBS)				\
